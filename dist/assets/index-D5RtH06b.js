const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-ponyfill-7iz7g-As.js","assets/vendor-Wz9i0U4k.js","assets/database-Kl6iTK8n.js"])))=>i.map(i=>d[i]);
import{u as e,j as t,B as n,a as i,b as a,L as o,M as s,c as l,d as c,C as u,e as d,F as h,S as p,T as f,I as m,f as g,g as v,A as b,h as _,i as j,k as w,D as S,l as A,m as C,n as O,o as E,H as k,p as P,P as T,q as $,r as I,s as M,t as R,G as D,v as N,w as z,x as B,y as F,z as Z,E as U,J as K,K as W,N as H,O as G,Q as Y,R as q,U as V,V as X,W as J,Z as Q,X as ee,Y as te,_ as re,$ as ne,a0 as ie,a1 as ae,a2 as oe,a3 as se,a4 as le,a5 as ce,a6 as ue,a7 as de,a8 as he,a9 as pe,aa as fe,ab as me,ac as ge,ad as ye,ae as xe,af as ve,ag as be,ah as _e,ai as je,aj as we,ak as Se,al as Ae,am as Ce,an as Oe,ao as Ee,ap as ke,aq as Pe,ar as Te,as as Le,at as $e,au as Ie,av as Me,aw as Re,ax as De,ay as Ne,az as ze,aA as Be,aB as Fe,aC as Ze,aD as Ue,aE as Ke,aF as We,aG as He,aH as Ge,aI as Ye,aJ as qe,aK as Ve,aL as Xe,aM as Je,aN as Qe,aO as et,aP as tt,aQ as rt,aR as nt,aS as it,aT as at,aU as ot,aV as st,aW as lt,aX as ct,aY as ut,aZ as dt,a_ as ht,a$ as pt,b0 as ft,b1 as mt,b2 as gt,b3 as yt,b4 as xt,b5 as vt,b6 as bt,b7 as _t,b8 as jt,b9 as wt,ba as St,bb as At,bc as Ct,bd as Ot,be as Et,bf as kt,bg as Pt,bh as Tt,bi as Lt,bj as $t,bk as It,bl as Mt,bm as Rt,bn as Dt,bo as Nt,bp as zt,bq as Bt}from"./ui-CVJ58nUq.js";import{d as Ft,g as Zt,r as Ut,a as Kt,u as Wt,L as Ht,c as Gt,f as Yt,h as qt,H as Vt,i as Xt,j as Jt}from"./vendor-Wz9i0U4k.js";import{L as Qt}from"./map-CpsfMNOh.js";import{d as er}from"./database-Kl6iTK8n.js";var tr;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&processPreload(e)})).observe(document,{childList:!0,subtree:!0})}function processPreload(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var rr=Ft;tr=rr.createRoot,rr.hydrateRoot;var nr="undefined"!=typeof Element,ir="function"==typeof Map,ar="function"==typeof Set,or="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function equal(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var n,i,a,o;if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(i=n;0!=i--;)if(!equal(e[i],t[i]))return!1;return!0}if(ir&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o=e.entries();!(i=o.next()).done;)if(!t.has(i.value[0]))return!1;for(o=e.entries();!(i=o.next()).done;)if(!equal(i.value[1],t.get(i.value[0])))return!1;return!0}if(ar&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o=e.entries();!(i=o.next()).done;)if(!t.has(i.value[0]))return!1;return!0}if(or&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((n=e.length)!=t.length)return!1;for(i=n;0!=i--;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((n=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;if(nr&&e instanceof Element)return!1;for(i=n;0!=i--;)if(("_owner"!==a[i]&&"__v"!==a[i]&&"__o"!==a[i]||!e.$$typeof)&&!equal(e[a[i]],t[a[i]]))return!1;return!0}return e!=e&&t!=t}var reactFastCompare=function(e,t){try{return equal(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const sr=Zt(reactFastCompare);var browser=function(e,t,n,i,a,o,s,l){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,a,o,s,l],d=0;(c=new Error(t.replace(/%s/g,(function(){return u[d++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}};const lr=Zt(browser);const cr=Zt((function(e,t,n,i){var a=n?n.call(i,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!l(u))return!1;var d=e[u],h=t[u];if(!1===(a=n?n.call(i,d,h,u):void 0)||void 0===a&&d!==h)return!1}return!0}));var ur=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(ur||{}),dr={rel:["amphtml","canonical","alternate"]},hr={type:["application/ld+json"]},pr={charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},fr=Object.values(ur),mr={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},gr=Object.entries(mr).reduce(((e,[t,n])=>(e[n]=t,e)),{}),yr="data-rh",xr="defaultTitle",vr="defer",br="encodeSpecialCharacters",_r="onChangeClientState",jr="titleTemplate",wr="prioritizeSeoTags",getInnermostProperty=(e,t)=>{for(let n=e.length-1;n>=0;n-=1){const i=e[n];if(Object.prototype.hasOwnProperty.call(i,t))return i[t]}return null},getTitleFromPropsList=e=>{let t=getInnermostProperty(e,"title");const n=getInnermostProperty(e,jr);if(Array.isArray(t)&&(t=t.join("")),n&&t)return n.replace(/%s/g,(()=>t));const i=getInnermostProperty(e,xr);return t||i||void 0},getOnChangeClientState=e=>getInnermostProperty(e,_r)||(()=>{}),getAttributesFromPropsList=(e,t)=>t.filter((t=>void 0!==t[e])).map((t=>t[e])).reduce(((e,t)=>({...e,...t})),{}),getBaseTagFromPropsList=(e,t)=>t.filter((e=>void 0!==e.base)).map((e=>e.base)).reverse().reduce(((t,n)=>{if(!t.length){const i=Object.keys(n);for(let a=0;a<i.length;a+=1){const o=i[a].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}}return t}),[]),getTagsFromPropsList=(e,t,n)=>{const i={};return n.filter((t=>{return!!Array.isArray(t[e])||(void 0!==t[e]&&(n=`Helmet: ${e} should be of type "Array". Instead found type "${typeof t[e]}"`,console&&"function"==typeof console.warn&&console.warn(n)),!1);var n})).map((t=>t[e])).reverse().reduce(((e,n)=>{const a={};n.filter((e=>{let n;const o=Object.keys(e);for(let i=0;i<o.length;i+=1){const a=o[i],s=a.toLowerCase();-1===t.indexOf(s)||"rel"===n&&"canonical"===e[n].toLowerCase()||"rel"===s&&"stylesheet"===e[s].toLowerCase()||(n=s),-1===t.indexOf(a)||"innerHTML"!==a&&"cssText"!==a&&"itemprop"!==a||(n=a)}if(!n||!e[n])return!1;const s=e[n].toLowerCase();return i[n]||(i[n]={}),a[n]||(a[n]={}),!i[n][s]&&(a[n][s]=!0,!0)})).reverse().forEach((t=>e.push(t)));const o=Object.keys(a);for(let t=0;t<o.length;t+=1){const e=o[t],n={...i[e],...a[e]};i[e]=n}return e}),[]).reverse()},getAnyTrueFromPropsList=(e,t)=>{if(Array.isArray(e)&&e.length)for(let n=0;n<e.length;n+=1){if(e[n][t])return!0}return!1},flattenArray=e=>Array.isArray(e)?e.join(""):e,prioritizer=(e,t)=>Array.isArray(e)?e.reduce(((e,n)=>(((e,t)=>{const n=Object.keys(e);for(let i=0;i<n.length;i+=1)if(t[n[i]]&&t[n[i]].includes(e[n[i]]))return!0;return!1})(n,t)?e.priority.push(n):e.default.push(n),e)),{priority:[],default:[]}):{default:e,priority:[]},without=(e,t)=>({...e,[t]:void 0}),Sr=["noscript","script","style"],encodeSpecialCharacters=(e,t=!0)=>!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),generateElementAttributesAsString=e=>Object.keys(e).reduce(((t,n)=>{const i=void 0!==e[n]?`${n}="${e[n]}"`:`${n}`;return t?`${t} ${i}`:i}),""),convertElementAttributesToReactProps=(e,t={})=>Object.keys(e).reduce(((t,n)=>(t[mr[n]||n]=e[n],t)),t),generateTagsAsReactComponent=(e,t)=>t.map(((t,n)=>{const i={key:n,[yr]:!0};return Object.keys(t).forEach((e=>{const n=mr[e]||e;if("innerHTML"===n||"cssText"===n){const e=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:e}}else i[n]=t[e]})),Kt.createElement(e,i)})),getMethodsForTag=(e,t,n=!0)=>{switch(e){case"title":return{toComponent:()=>((e,t,n)=>{const i=convertElementAttributesToReactProps(n,{key:t,[yr]:!0});return[Kt.createElement("title",i,t)]})(0,t.title,t.titleAttributes),toString:()=>((e,t,n,i)=>{const a=generateElementAttributesAsString(n),o=flattenArray(t);return a?`<${e} ${yr}="true" ${a}>${encodeSpecialCharacters(o,i)}</${e}>`:`<${e} ${yr}="true">${encodeSpecialCharacters(o,i)}</${e}>`})(e,t.title,t.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>convertElementAttributesToReactProps(t),toString:()=>generateElementAttributesAsString(t)};default:return{toComponent:()=>generateTagsAsReactComponent(e,t),toString:()=>((e,t,n=!0)=>t.reduce(((t,i)=>{const a=i,o=Object.keys(a).filter((e=>!("innerHTML"===e||"cssText"===e))).reduce(((e,t)=>{const i=void 0===a[t]?t:`${t}="${encodeSpecialCharacters(a[t],n)}"`;return e?`${e} ${i}`:i}),""),s=a.innerHTML||a.cssText||"",l=-1===Sr.indexOf(e);return`${t}<${e} ${yr}="true" ${o}${l?"/>":`>${s}</${e}>`}`}),""))(e,t,n)}}},server_default=e=>{const{baseTag:t,bodyAttributes:n,encode:i=!0,htmlAttributes:a,noscriptTags:o,styleTags:s,title:l="",titleAttributes:c,prioritizeSeoTags:u}=e;let{linkTags:d,metaTags:h,scriptTags:p}=e,f={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:f,linkTags:d,metaTags:h,scriptTags:p}=(({metaTags:e,linkTags:t,scriptTags:n,encode:i})=>{const a=prioritizer(e,pr),o=prioritizer(t,dr),s=prioritizer(n,hr);return{priorityMethods:{toComponent:()=>[...generateTagsAsReactComponent("meta",a.priority),...generateTagsAsReactComponent("link",o.priority),...generateTagsAsReactComponent("script",s.priority)],toString:()=>`${getMethodsForTag("meta",a.priority,i)} ${getMethodsForTag("link",o.priority,i)} ${getMethodsForTag("script",s.priority,i)}`},metaTags:a.default,linkTags:o.default,scriptTags:s.default}})(e)),{priority:f,base:getMethodsForTag("base",t,i),bodyAttributes:getMethodsForTag("bodyAttributes",n,i),htmlAttributes:getMethodsForTag("htmlAttributes",a,i),link:getMethodsForTag("link",d,i),meta:getMethodsForTag("meta",h,i),noscript:getMethodsForTag("noscript",o,i),script:getMethodsForTag("script",p,i),style:getMethodsForTag("style",s,i),title:getMethodsForTag("title",{title:l,titleAttributes:c},i)}},Ar=[],Cr=!("undefined"==typeof window||!window.document||!window.document.createElement),Or=class{instances=[];canUseDOM=Cr;context;value={setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?Ar:this.instances,add:e=>{(this.canUseDOM?Ar:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?Ar:this.instances).indexOf(e);(this.canUseDOM?Ar:this.instances).splice(t,1)}}};constructor(e,t){this.context=e,this.canUseDOM=t||!1,t||(e.helmet=server_default({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Er=Kt.createContext({}),kr=class _HelmetProvider extends Ut.Component{static canUseDOM=Cr;helmetData;constructor(e){super(e),this.helmetData=new Or(this.props.context||{},_HelmetProvider.canUseDOM)}render(){return Kt.createElement(Er.Provider,{value:this.helmetData.value},this.props.children)}},updateTags=(e,t)=>{const n=document.head||document.querySelector("head"),i=n.querySelectorAll(`${e}[${yr}]`),a=[].slice.call(i),o=[];let s;return t&&t.length&&t.forEach((t=>{const n=document.createElement(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))if("innerHTML"===e)n.innerHTML=t.innerHTML;else if("cssText"===e)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{const i=e,a=void 0===t[i]?"":t[i];n.setAttribute(e,a)}n.setAttribute(yr,"true"),a.some(((e,t)=>(s=t,n.isEqualNode(e))))?a.splice(s,1):o.push(n)})),a.forEach((e=>e.parentNode?.removeChild(e))),o.forEach((e=>n.appendChild(e))),{oldTags:a,newTags:o}},updateAttributes=(e,t)=>{const n=document.getElementsByTagName(e)[0];if(!n)return;const i=n.getAttribute(yr),a=i?i.split(","):[],o=[...a],s=Object.keys(t);for(const l of s){const e=t[l]||"";n.getAttribute(l)!==e&&n.setAttribute(l,e),-1===a.indexOf(l)&&a.push(l);const i=o.indexOf(l);-1!==i&&o.splice(i,1)}for(let l=o.length-1;l>=0;l-=1)n.removeAttribute(o[l]);a.length===o.length?n.removeAttribute(yr):n.getAttribute(yr)!==s.join(",")&&n.setAttribute(yr,s.join(","))},commitTagChanges=(e,t)=>{const{baseTag:n,bodyAttributes:i,htmlAttributes:a,linkTags:o,metaTags:s,noscriptTags:l,onChangeClientState:c,scriptTags:u,styleTags:d,title:h,titleAttributes:p}=e;updateAttributes("body",i),updateAttributes("html",a),((e,t)=>{void 0!==e&&document.title!==e&&(document.title=flattenArray(e)),updateAttributes("title",t)})(h,p);const f={baseTag:updateTags("base",n),linkTags:updateTags("link",o),metaTags:updateTags("meta",s),noscriptTags:updateTags("noscript",l),scriptTags:updateTags("script",u),styleTags:updateTags("style",d)},m={},g={};Object.keys(f).forEach((e=>{const{newTags:t,oldTags:n}=f[e];t.length&&(m[e]=t),n.length&&(g[e]=f[e].oldTags)})),t&&t(),c(e,m,g)},Pr=null,client_default=e=>{Pr&&cancelAnimationFrame(Pr),e.defer?Pr=requestAnimationFrame((()=>{commitTagChanges(e,(()=>{Pr=null}))})):(commitTagChanges(e),Pr=null)},Tr=class extends Ut.Component{rendered=!1;shouldComponentUpdate(e){return!cr(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let n=null;const i=(a=e.get().map((e=>{const t={...e.props};return delete t.context,t})),{baseTag:getBaseTagFromPropsList(["href"],a),bodyAttributes:getAttributesFromPropsList("bodyAttributes",a),defer:getInnermostProperty(a,vr),encode:getInnermostProperty(a,br),htmlAttributes:getAttributesFromPropsList("htmlAttributes",a),linkTags:getTagsFromPropsList("link",["rel","href"],a),metaTags:getTagsFromPropsList("meta",["name","charset","http-equiv","property","itemprop"],a),noscriptTags:getTagsFromPropsList("noscript",["innerHTML"],a),onChangeClientState:getOnChangeClientState(a),scriptTags:getTagsFromPropsList("script",["src","innerHTML"],a),styleTags:getTagsFromPropsList("style",["cssText"],a),title:getTitleFromPropsList(a),titleAttributes:getAttributesFromPropsList("titleAttributes",a),prioritizeSeoTags:getAnyTrueFromPropsList(a,wr)});var a;kr.canUseDOM?client_default(i):server_default&&(n=server_default(i)),t(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Lr=class extends Ut.Component{static defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1};shouldComponentUpdate(e){return!sr(without(this.props,"helmetData"),without(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,n,i){return{...t,[e.type]:[...t[e.type]||[],{...n,...this.mapNestedChildrenToProps(e,i)}]}}mapObjectTypeChildren(e,t,n,i){switch(e.type){case"title":return{...t,[e.type]:i,titleAttributes:{...n}};case"body":return{...t,bodyAttributes:{...n}};case"html":return{...t,htmlAttributes:{...n}};default:return{...t,[e.type]:{...n}}}}mapArrayTypeChildrenToProps(e,t){let n={...t};return Object.keys(e).forEach((t=>{n={...n,[t]:e[t]}})),n}warnOnInvalidChildren(e,t){return lr(fr.some((t=>e.type===t)),"function"==typeof e.type?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${fr.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),lr(!t||"string"==typeof t||Array.isArray(t)&&!t.some((e=>"string"!=typeof e)),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let n={};return Kt.Children.forEach(e,(e=>{if(!e||!e.props)return;const{children:i,...a}=e.props,o=Object.keys(a).reduce(((e,t)=>(e[gr[t]||t]=a[t],e)),{});let{type:s}=e;switch("symbol"==typeof s?s=s.toString():this.warnOnInvalidChildren(e,i),s){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(e,n,o,i);break;default:t=this.mapObjectTypeChildren(e,t,o,i)}})),this.mapArrayTypeChildrenToProps(n,t)}render(){const{children:e,...t}=this.props;let n={...t},{helmetData:i}=t;if(e&&(n=this.mapChildrenToProps(e,n)),i&&!(i instanceof Or)){i=new Or(i.context,!0),delete n.helmetData}return i?Kt.createElement(Tr,{...n,context:i.value}):Kt.createElement(Er.Consumer,null,(e=>Kt.createElement(Tr,{...n,context:e})))}};const isString$1=e=>"string"==typeof e,defer=()=>{let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return n.resolve=e,n.reject=t,n},makeString=e=>null==e?"":""+e,$r=/###/g,cleanKey=e=>e&&e.indexOf("###")>-1?e.replace($r,"."):e,canNotTraverseDeeper=e=>!e||isString$1(e),getLastOfPath=(e,t,n)=>{const i=isString$1(t)?t.split("."):t;let a=0;for(;a<i.length-1;){if(canNotTraverseDeeper(e))return{};const t=cleanKey(i[a]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++a}return canNotTraverseDeeper(e)?{}:{obj:e,k:cleanKey(i[a])}},setPath=(e,t,n)=>{const{obj:i,k:a}=getLastOfPath(e,t,Object);if(void 0!==i||1===t.length)return void(i[a]=n);let o=t[t.length-1],s=t.slice(0,t.length-1),l=getLastOfPath(e,s,Object);for(;void 0===l.obj&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),l=getLastOfPath(e,s,Object),l?.obj&&void 0!==l.obj[`${l.k}.${o}`]&&(l.obj=void 0);l.obj[`${l.k}.${o}`]=n},getPath$2=(e,t)=>{const{obj:n,k:i}=getLastOfPath(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,i))return n[i]},deepExtend=(e,t,n)=>{for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?isString$1(e[i])||e[i]instanceof String||isString$1(t[i])||t[i]instanceof String?n&&(e[i]=t[i]):deepExtend(e[i],t[i],n):e[i]=t[i]);return e},regexEscape=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ir={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=e=>isString$1(e)?e.replace(/[&<>"'\/]/g,(e=>Ir[e])):e;const Mr=[" ",",","?","!",";"],Rr=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),deepFind=(e,t,n=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const i=t.split(n);let a=e;for(let o=0;o<i.length;){if(!a||"object"!=typeof a)return;let e,t="";for(let s=o;s<i.length;++s)if(s!==o&&(t+=n),t+=i[s],e=a[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&s<i.length-1)continue;o+=s-o+1;break}a=e}return a},getCleanedCode=e=>e?.replace("_","-"),Dr={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Logger{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Dr,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(isString$1(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Logger(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Logger(this.logger,e)}}var Nr=new Logger;let zr=class{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((([e,n])=>{for(let i=0;i<n;i++)e(...t)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((([n,i])=>{for(let a=0;a<i;a++)n.apply(n,[e,...t])}))}}};class ResourceStore extends zr{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,i={}){const a=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,o=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,t],n&&(Array.isArray(n)?s.push(...n):isString$1(n)&&a?s.push(...n.split(a)):s.push(n)));const l=getPath$2(this.data,s);return!l&&!t&&!n&&e.indexOf(".")>-1&&(e=s[0],t=s[1],n=s.slice(2).join(".")),!l&&o&&isString$1(n)?deepFind(this.data?.[e]?.[t],n,a):l}addResource(e,t,n,i,a={silent:!1}){const o=void 0!==a.keySeparator?a.keySeparator:this.options.keySeparator;let s=[e,t];n&&(s=s.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(s=e.split("."),i=t,t=s[1]),this.addNamespaces(t),setPath(this.data,s,i),a.silent||this.emit("added",e,t,n,i)}addResources(e,t,n,i={silent:!1}){for(const a in n)(isString$1(n[a])||Array.isArray(n[a]))&&this.addResource(e,t,a,n[a],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,i,a,o={silent:!1,skipCopy:!1}){let s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),i=n,n=t,t=s[1]),this.addNamespaces(t);let l=getPath$2(this.data,s)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?deepExtend(l,n,a):l={...l,...n},setPath(this.data,s,l),o.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var Br={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,i,a){return e.forEach((e=>{t=this.processors[e]?.process(t,n,i,a)??t})),t}};const Fr={},shouldHandleAsObject=e=>!isString$1(e)&&"boolean"!=typeof e&&"number"!=typeof e;class Translator extends zr{constructor(e,t={}){super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Nr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(null==e)return!1;const i=this.resolve(e,n);return void 0!==i?.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const o=n&&e.indexOf(n)>-1,s=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const i=Mr.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===i.length)return!0;const a=Rr.getRegExp(`(${i.map((e=>"?"===e?"\\?":e)).join("|")})`);let o=!a.test(e);if(!o){const t=e.indexOf(n);t>0&&!a.test(e.substring(0,t))&&(o=!0)}return o})(e,n,i));if(o&&!s){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:isString$1(a)?[a]:a};const o=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(o[0])>-1)&&(a=o.shift()),e=o.join(i)}return{key:e,namespaces:isString$1(a)?[a]:a}}translate(e,t,n){let i="object"==typeof t?{...t}:t;if("object"!=typeof i&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof options&&(i={...i}),i||(i={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const a=void 0!==i.returnDetails?i.returnDetails:this.options.returnDetails,o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,{key:s,namespaces:l}=this.extractFromKey(e[e.length-1],i),c=l[l.length-1];let u=void 0!==i.nsSeparator?i.nsSeparator:this.options.nsSeparator;void 0===u&&(u=":");const d=i.lng||this.language,h=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===d?.toLowerCase())return h?a?{res:`${c}${u}${s}`,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:`${c}${u}${s}`:a?{res:s,usedKey:s,exactUsedKey:s,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:s;const p=this.resolve(e,i);let f=p?.res;const m=p?.usedKey||s,g=p?.exactUsedKey||s,v=void 0!==i.joinArrays?i.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,_=void 0!==i.count&&!isString$1(i.count),j=Translator.hasDefaultValue(i),w=_?this.pluralResolver.getSuffix(d,i.count,i):"",S=i.ordinal&&_?this.pluralResolver.getSuffix(d,i.count,{ordinal:!1}):"",A=_&&!i.ordinal&&0===i.count,C=A&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${w}`]||i[`defaultValue${S}`]||i.defaultValue;let O=f;b&&!f&&j&&(O=C);const E=shouldHandleAsObject(O),k=Object.prototype.toString.apply(O);if(!(b&&O&&E&&["[object Number]","[object Function]","[object RegExp]"].indexOf(k)<0)||isString$1(v)&&Array.isArray(O))if(b&&isString$1(v)&&Array.isArray(f))f=f.join(v),f&&(f=this.extendTranslation(f,e,i,n));else{let t=!1,a=!1;!this.isValidLookup(f)&&j&&(t=!0,f=C),this.isValidLookup(f)||(a=!0,f=s);const l=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:f,h=j&&C!==f&&this.options.updateMissing;if(a||t||h){if(this.logger.log(h?"updateKey":"missingKey",d,c,s,h?C:f),o){const e=this.resolve(s,{...i,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let n=0;n<t.length;n++)e.push(t[n]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(i.lng||this.language):e.push(i.lng||this.language);const send=(e,t,n)=>{const a=j&&n!==f?n:l;this.options.missingKeyHandler?this.options.missingKeyHandler(e,c,t,a,h,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,c,t,a,h,i),this.emit("missingKey",e,c,t,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,i);A&&i[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach((t=>{send([e],s+t,i[`defaultValue${t}`]||C)}))})):send(e,s,C))}f=this.extendTranslation(f,e,i,p,n),a&&f===s&&this.options.appendNamespaceToMissingKey&&(f=`${c}${u}${s}`),(a||t)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${u}${s}`:s,t?f:void 0,i))}else{if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,O,{...i,ns:l}):`key '${s} (${this.language})' returned an object instead of string.`;return a?(p.res=e,p.usedParams=this.getUsedParamsDetails(i),p):e}if(o){const e=Array.isArray(O),t=e?[]:{},n=e?g:m;for(const a in O)if(Object.prototype.hasOwnProperty.call(O,a)){const e=`${n}${o}${a}`;t[a]=j&&!f?this.translate(e,{...i,defaultValue:shouldHandleAsObject(C)?C[a]:void 0,joinArrays:!1,ns:l}):this.translate(e,{...i,joinArrays:!1,ns:l}),t[a]===e&&(t[a]=O[a])}f=t}}return a?(p.res=f,p.usedParams=this.getUsedParamsDetails(i),p):f}extendTranslation(e,t,n,i,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const o=isString$1(e)&&(void 0!==n?.interpolation?.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let s;if(o){const t=e.match(this.interpolator.nestingRegexp);s=t&&t.length}let l=n.replace&&!isString$1(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||i.usedLng,n),o){const t=e.match(this.interpolator.nestingRegexp);s<(t&&t.length)&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,((...e)=>a?.[0]!==e[0]||n.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null)),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,s=isString$1(o)?[o]:o;return null!=e&&s?.length&&!1!==n.applyPostProcessor&&(e=Br.handle(s,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,i,a,o,s;return isString$1(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(n))return;const l=this.extractFromKey(e,t),c=l.key;i=c;let u=l.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const d=void 0!==t.count&&!isString$1(t.count),h=d&&!t.ordinal&&0===t.count,p=void 0!==t.context&&(isString$1(t.context)||"number"==typeof t.context)&&""!==t.context,f=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);u.forEach((e=>{this.isValidLookup(n)||(s=e,Fr[`${f[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(s)||(Fr[`${f[0]}-${e}`]=!0,this.logger.warn(`key "${i}" for languages "${f.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach((i=>{if(this.isValidLookup(n))return;o=i;const s=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(s,c,i,e,t);else{let e;d&&(e=this.pluralResolver.getSuffix(i,t.count,t));const n=`${this.options.pluralSeparator}zero`,a=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(s.push(c+e),t.ordinal&&0===e.indexOf(a)&&s.push(c+e.replace(a,this.options.pluralSeparator)),h&&s.push(c+n)),p){const i=`${c}${this.options.contextSeparator}${t.context}`;s.push(i),d&&(s.push(i+e),t.ordinal&&0===e.indexOf(a)&&s.push(i+e.replace(a,this.options.pluralSeparator)),h&&s.push(i+n))}}let l;for(;l=s.pop();)this.isValidLookup(n)||(a=l,n=this.getResource(i,e,l,t))})))}))})),{res:n,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:s}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!isString$1(e.replace);let i=n?e.replace:e;if(n&&void 0!==e.count&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const e of t)delete i[e]}return i}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}class LanguageUtil{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Nr.create("languageUtils")}getScriptPartFromCode(e){if(!(e=getCleanedCode(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=getCleanedCode(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(isString$1(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(Hp){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getScriptPartFromCode(e);if(this.isSupportedCode(n))return t=n;const i=this.getLanguagePartFromCode(e);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find((e=>e===i?e:e.indexOf("-")<0&&i.indexOf("-")<0?void 0:e.indexOf("-")>0&&i.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===i||0===e.indexOf(i)&&i.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),isString$1(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),i=[],addCode=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return isString$1(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&addCode(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&addCode(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&addCode(this.getLanguagePartFromCode(e))):isString$1(e)&&addCode(this.formatLanguageCode(e)),n.forEach((e=>{i.indexOf(e)<0&&addCode(this.formatLanguageCode(e))})),i}}const Zr={zero:0,one:1,two:2,few:3,many:4,other:5},Ur={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Nr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=getCleanedCode("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(n,{type:i})}catch(s){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Ur;if(!e.match(/-|_/))return Ur;const n=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(n,t)}return this.pluralRulesCache[a]=o,o}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort(((e,t)=>Zr[e]-Zr[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):[]}getSuffix(e,t,n={}){const i=this.getRule(e,n);return i?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const deepFindWithDefaults=(e,t,n,i=".",a=!0)=>{let o=((e,t,n)=>{const i=getPath$2(e,n);return void 0!==i?i:getPath$2(t,n)})(e,t,n);return!o&&a&&isString$1(n)&&(o=deepFind(e,n,i),void 0===o&&(o=deepFind(t,n,i))),o},regexSafe=e=>e.replace(/\$/g,"$$$$");class Interpolator{constructor(e={}){this.logger=Nr.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:s,suffixEscaped:l,formatSeparator:c,unescapeSuffix:u,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:p,nestingSuffix:f,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:v,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:escape,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==i&&i,this.prefix=a?regexEscape(a):o||"{{",this.suffix=s?regexEscape(s):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=h?regexEscape(h):p||regexEscape("$t("),this.nestingSuffix=f?regexEscape(f):m||regexEscape(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=v||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const getOrResetRegExp=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=getOrResetRegExp(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=getOrResetRegExp(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=getOrResetRegExp(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,i){let a,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},handleFormat=e=>{if(e.indexOf(this.formatSeparator)<0){const a=deepFindWithDefaults(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(a,void 0,n,{...i,...t,interpolationkey:e}):a}const a=e.split(this.formatSeparator),o=a.shift().trim(),s=a.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(t,l,o,this.options.keySeparator,this.options.ignoreJSONStructure),s,n,{...i,...t,interpolationkey:o})};this.resetRegExp();const c=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,u=void 0!==i?.interpolation?.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>regexSafe(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?regexSafe(this.escape(e)):regexSafe(e)}].forEach((t=>{for(s=0;a=t.regex.exec(e);){const n=a[1].trim();if(o=handleFormat(n),void 0===o)if("function"==typeof c){const t=c(e,a,i);o=isString$1(t)?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))o="";else{if(u){o=a[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),o=""}else isString$1(o)||this.useRawValueToEscape||(o=makeString(o));const l=t.safeValue(o);if(e=e.replace(a[0],l),u?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=a[0].length):t.regex.lastIndex=0,s++,s>=this.maxReplaces)break}})),e}nest(e,t,n={}){let i,a,o;const handleHasOptions=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const i=e.split(new RegExp(`${n}[ ]*{`));let a=`{${i[1]}`;e=i[0],a=this.interpolate(a,o);const s=a.match(/'/g),l=a.match(/"/g);((s?.length??0)%2==0&&!l||l.length%2!=0)&&(a=a.replace(/'/g,'"'));try{o=JSON.parse(a),t&&(o={...t,...o})}catch(Hp){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,Hp),`${e}${n}${a}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,e};for(;i=this.nestingRegexp.exec(e);){let s=[];o={...n},o=o.replace&&!isString$1(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const l=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(-1!==l&&(s=i[1].slice(l).split(this.formatSeparator).map((e=>e.trim())).filter(Boolean),i[1]=i[1].slice(0,l)),a=t(handleHasOptions.call(this,i[1].trim(),o),o),a&&i[0]===e&&!isString$1(a))return a;isString$1(a)||(a=makeString(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),s.length&&(a=s.reduce(((e,t)=>this.format(e,t,n.lng,{...n,interpolationkey:i[1].trim()})),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const createCachedFormatter=e=>{const t={};return(n,i,a)=>{let o=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(o={...o,[a.interpolationkey]:void 0});const s=i+JSON.stringify(o);let l=t[s];return l||(l=e(getCleanedCode(i),a),t[s]=l),l(n)}},createNonCachedFormatter=e=>(t,n,i)=>e(getCleanedCode(n),i)(t);class Formatter{constructor(e={}){this.logger=Nr.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?createCachedFormatter:createNonCachedFormatter;this.formats={number:n(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:n(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:n(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:n(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:n(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=createCachedFormatter(t)}format(e,t,n,i={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find((e=>e.indexOf(")")>-1))){const e=a.findIndex((e=>e.indexOf(")")>-1));a[0]=[a[0],...a.splice(1,e)].join(this.formatSeparator)}return a.reduce(((e,t)=>{const{formatName:a,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const a=i[1].substring(0,i[1].length-1);"currency"===t&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):"relativetime"===t&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach((e=>{if(e){const[t,...i]=e.split(":"),a=i.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();n[o]||(n[o]=a),"false"===a&&(n[o]=!1),"true"===a&&(n[o]=!0),isNaN(a)||(n[o]=parseInt(a,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[a]){let t=e;try{const s=i?.formatParams?.[i.interpolationkey]||{},l=s.locale||s.lng||i.locale||i.lng||n;t=this.formats[a](e,l,{...o,...i,...s})}catch(s){this.logger.warn(s)}return t}return this.logger.warn(`there was no format function for ${a}`),e}),e)}}class Connector extends zr{constructor(e,t,n,i={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=Nr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,i.backend,i)}queueLoad(e,t,n,i){const a={},o={},s={},l={};return e.forEach((e=>{let i=!0;t.forEach((t=>{const s=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[s]=2:this.state[s]<0||(1===this.state[s]?void 0===o[s]&&(o[s]=!0):(this.state[s]=1,i=!1,void 0===o[s]&&(o[s]=!0),void 0===a[s]&&(a[s]=!0),void 0===l[t]&&(l[t]=!0)))})),i||(s[e]=!0)})),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,t,n){const i=e.split("|"),a=i[0],o=i[1];t&&this.emit("failedLoading",a,o,t),!t&&n&&this.store.addResourceBundle(a,o,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const s={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:i,k:a}=getLastOfPath(e,t,Object);i[a]=i[a]||[],i[a].push(n)})(n.loaded,[a],o),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{s[e]||(s[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===s[e][t]&&(s[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",s),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n,i=0,a=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:a,callback:o});this.readingCalls++;const resolver=(s,l)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}s&&l&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,i+1,2*a,o)}),a):o(s,l)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,resolver);try{const n=s(e,t);n&&"function"==typeof n.then?n.then((e=>resolver(null,e))).catch(resolver):resolver(null,n)}catch(l){resolver(l)}}prepareLoading(e,t,n={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();isString$1(e)&&(e=this.languageUtils.toResolveHierarchy(e)),isString$1(t)&&(t=[t]);const a=this.queueLoad(e,t,n,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),i=n[0],a=n[1];this.read(i,a,"read",void 0,void 0,((n,o)=>{n&&this.logger.warn(`${t}loading namespace ${a} for language ${i} failed`,n),!n&&o&&this.logger.log(`${t}loaded namespace ${a} for language ${i}`,o),this.loaded(e,n,o)}))}saveMissing(e,t,n,i,a,o={},s=()=>{}){if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(null!=n&&""!==n){if(this.backend?.create){const c={...o,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let a;a=5===u.length?u(e,t,n,i,c):u(e,t,n,i),a&&"function"==typeof a.then?a.then((e=>s(null,e))).catch(s):s(null,a)}catch(l){s(l)}else u(e,t,n,i,s,c)}e&&e[0]&&this.store.addResource(e[0],t,n,i)}}else this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const get$3=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),isString$1(e[1])&&(t.defaultValue=e[1]),isString$1(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),transformOptions=e=>(isString$1(e.ns)&&(e.ns=[e.ns]),isString$1(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),isString$1(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),noop$7=()=>{};class I18n extends zr{constructor(e={},t){var n;if(super(),this.options=transformOptions(e),this.services={},this.logger=Nr,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(isString$1(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=get$3();this.options={...n,...this.options,...transformOptions(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const createClassOnDemand=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?Nr.init(createClassOnDemand(this.modules.logger),this.options):Nr.init(null,this.options),e=this.modules.formatter?this.modules.formatter:Formatter;const t=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const i=this.services;i.logger=Nr,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new PluralResolver(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(i.formatter=createClassOnDemand(e),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new Interpolator(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new Connector(createClassOnDemand(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",((e,...t)=>{this.emit(e,...t)})),this.modules.languageDetector&&(i.languageDetector=createClassOnDemand(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=createClassOnDemand(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",((e,...t)=>{this.emit(e,...t)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,t||(t=noop$7),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((e=>{this[e]=(...t)=>this.store[e](...t)}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((e=>{this[e]=(...t)=>(this.store[e](...t),this)}));const i=defer(),load=()=>{const finish=(e,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(n),t(e,n)};if(this.languages&&!this.isInitialized)return finish(null,this.t.bind(this));this.changeLanguage(this.options.lng,finish)};return this.options.resources||!this.options.initAsync?load():setTimeout(load,0),i}loadResources(e,t=noop$7){let n=t;const i=isString$1(e)?e:this.language;if("function"==typeof e&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===i?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return n();const e=[],append=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(i)append(i);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>append(e)))}this.options.preload?.forEach?.((e=>append(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),n(e)}))}else n(null)}reloadResources(e,t,n){const i=defer();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=noop$7),this.services.backendConnector.reload(e,t,(e=>{i.resolve(),n(e)})),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Br.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=defer();this.emit("languageChanging",e);const setLngProps=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},done=(i,a)=>{a?this.isLanguageChangingTo===e&&(setLngProps(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit("languageChanged",a),this.logger.log("languageChanged",a)):this.isLanguageChangingTo=void 0,n.resolve(((...e)=>this.t(...e))),t&&t(i,((...e)=>this.t(...e)))},setLng=t=>{e||t||!this.services.languageDetector||(t=[]);const n=isString$1(t)?t:t&&t[0],i=this.store.hasLanguageSomeTranslations(n)?n:this.services.languageUtils.getBestMatchFromCodes(isString$1(t)?[t]:t);i&&(this.language||setLngProps(i),this.translator.language||this.translator.changeLanguage(i),this.services.languageDetector?.cacheUserLanguage?.(i)),this.loadResources(i,(e=>{done(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(setLng):this.services.languageDetector.detect(setLng):setLng(e):setLng(this.services.languageDetector.detect()),n}getFixedT(e,t,n){const fixedT=(e,t,...i)=>{let a;a="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(i)):{...t},a.lng=a.lng||fixedT.lng,a.lngs=a.lngs||fixedT.lngs,a.ns=a.ns||fixedT.ns,""!==a.keyPrefix&&(a.keyPrefix=a.keyPrefix||n||fixedT.keyPrefix);const o=this.options.keySeparator||".";let s;return s=a.keyPrefix&&Array.isArray(e)?e.map((e=>`${a.keyPrefix}${o}${e}`)):a.keyPrefix?`${a.keyPrefix}${o}${e}`:e,this.t(s,a)};return isString$1(e)?fixedT.lng=e:fixedT.lngs=e,fixedT.ns=t,fixedT.keyPrefix=n,fixedT}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,a=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const loadNotPending=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,loadNotPending);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!loadNotPending(n,e)||i&&!loadNotPending(a,e)))}loadNamespaces(e,t){const n=defer();return this.options.ns?(isString$1(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=defer();isString$1(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter((e=>i.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return a.length?(this.options.preload=i.concat(a),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(Hp){}const t=this.services?.languageUtils||new LanguageUtil(get$3());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new I18n(e,t)}cloneInstance(e={},t=noop$7){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new I18n(i);void 0===e.debug&&void 0===e.prefix||(a.logger=a.logger.clone(e));if(["store","services","language"].forEach((e=>{a[e]=this[e]})),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n){const e=Object.keys(this.store.data).reduce(((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce(((n,i)=>(n[i]={...e[t][i]},n)),e[t]),e)),{});a.store=new ResourceStore(e,i),a.services.resourceStore=a.store}return a.translator=new Translator(a.services,i),a.translator.on("*",((e,...t)=>{a.emit(e,...t)})),a.init(i,t),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Kr=I18n.createInstance();Kr.createInstance=I18n.createInstance,Kr.createInstance,Kr.dir,Kr.init,Kr.loadResources,Kr.reloadResources,Kr.use,Kr.changeLanguage,Kr.getFixedT,Kr.t,Kr.exists,Kr.setDefaultNamespace,Kr.hasLoadedNamespace,Kr.loadNamespaces,Kr.loadLanguages;const Wr={},warnOnce=(e,t,n,i)=>{isString(n)&&Wr[n]||(isString(n)&&(Wr[n]=new Date),((e,t,n,i)=>{const a=[n,{code:t,...i||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);isString(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...a):console?.warn&&console.warn(...a)})(e,t,n,i))},loadedClb=(e,t)=>()=>{if(e.isInitialized)t();else{const initialized=()=>{setTimeout((()=>{e.off("initialized",initialized)}),0),t()};e.on("initialized",initialized)}},loadNamespaces=(e,t,n)=>{e.loadNamespaces(t,loadedClb(e,n))},loadLanguages=(e,t,n,i)=>{if(isString(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return loadNamespaces(e,n,i);n.forEach((t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)})),e.loadLanguages(t,loadedClb(e,i))},isString=e=>"string"==typeof e,Hr=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Gr={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=e=>Gr[e];let Yr={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(Hr,unescapeHtmlEntity)};let qr;const Vr={type:"3rdParty",init(e){((e={})=>{Yr={...Yr,...e}})(e.options.react),(e=>{qr=e})(e)}},Xr=Ut.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach((e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)}))}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const alwaysNewT=(e,t,n,i)=>e.getFixedT(t,n,i),useTranslation=(e,t={})=>{const{i18n:n}=t,{i18n:i,defaultNS:a}=Ut.useContext(Xr)||{},o=n||i||qr;if(o&&!o.reportNamespaces&&(o.reportNamespaces=new ReportNamespaces),!o){warnOnce(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const notReadyT=(e,t)=>{return isString(t)?t:"object"==typeof(n=t)&&null!==n&&isString(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var n},e=[notReadyT,{},!1];return e.t=notReadyT,e.i18n={},e.ready=!1,e}o.options.react?.wait&&warnOnce(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...Yr,...o.options.react,...t},{useSuspense:l,keyPrefix:c}=s;let u=e;u=isString(u)?[u]:u||["translation"],o.reportNamespaces.addUsedNamespaces?.(u);const d=(o.isInitialized||o.initializedStoreOnce)&&u.every((e=>((e,t,n={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,i)=>{if(n.bindI18n?.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e))return!1}}):(warnOnce(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,o,s))),h=((e,t,n,i)=>Ut.useCallback(alwaysNewT(e,t,n,i),[e,t,n,i]))(o,t.lng||null,"fallback"===s.nsMode?u:u[0],c),getT=()=>h,getNewT=()=>alwaysNewT(o,t.lng||null,"fallback"===s.nsMode?u:u[0],c),[p,f]=Ut.useState(getT);let m=u.join();t.lng&&(m=`${t.lng}${m}`);const g=((e,t)=>{const n=Ut.useRef();return Ut.useEffect((()=>{n.current=e}),[e,t]),n.current})(m),v=Ut.useRef(!0);Ut.useEffect((()=>{const{bindI18n:e,bindI18nStore:n}=s;v.current=!0,d||l||(t.lng?loadLanguages(o,t.lng,u,(()=>{v.current&&f(getNewT)})):loadNamespaces(o,u,(()=>{v.current&&f(getNewT)}))),d&&g&&g!==m&&v.current&&f(getNewT);const boundReset=()=>{v.current&&f(getNewT)};return e&&o?.on(e,boundReset),n&&o?.store.on(n,boundReset),()=>{v.current=!1,o&&e?.split(" ").forEach((e=>o.off(e,boundReset))),n&&o&&n.split(" ").forEach((e=>o.store.off(e,boundReset)))}}),[o,m]),Ut.useEffect((()=>{v.current&&d&&f(getT)}),[o,c,d]);const b=[p,o,d];if(b.t=p,b.i18n=o,b.ready=d,d)return b;if(!d&&!l)return b;throw new Promise((e=>{t.lng?loadLanguages(o,t.lng,u,(()=>e())):loadNamespaces(o,u,(()=>e()))}))},{slice:Jr,forEach:Qr}=[];const en=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,tn={create(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};n&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+60*n*1e3)),i&&(a.domain=i),document.cookie=function(e,t){const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let i=`${e}=${encodeURIComponent(t)}`;if(n.maxAge>0){const e=n.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(e)}`}if(n.domain){if(!en.test(n.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${n.domain}`}if(n.path){if(!en.test(n.path))throw new TypeError("option path is invalid");i+=`; Path=${n.path}`}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");i+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(i+="; Partitioned"),i}(e,t,a)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let i=0;i<n.length;i++){let e=n[i];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var rn={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!=typeof document)return tn.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:i,cookieDomain:a,cookieOptions:o}=t;n&&"undefined"!=typeof document&&tn.create(n,e,i,a,o)}},nn={name:"querystring",lookup(e){let t,{lookupQuerystring:n}=e;if("undefined"!=typeof window){let{search:e}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const i=e.substring(1).split("&");for(let a=0;a<i.length;a++){const e=i[a].indexOf("=");if(e>0){i[a].substring(0,e)===n&&(t=i[a].substring(e+1))}}}return t}},an={name:"hash",lookup(e){let t,{lookupHash:n,lookupFromHashIndex:i}=e;if("undefined"!=typeof window){const{hash:e}=window.location;if(e&&e.length>2){const a=e.substring(1);if(n){const e=a.split("&");for(let i=0;i<e.length;i++){const a=e[i].indexOf("=");if(a>0){e[i].substring(0,a)===n&&(t=e[i].substring(a+1))}}}if(t)return t;if(!t&&i>-1){const t=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(t))return;const n="number"==typeof i?i:0;return t[n]?.replace("/","")}}}return t}};let on=null;const localStorageAvailable=()=>{if(null!==on)return on;try{if(on="undefined"!=typeof window&&null!==window.localStorage,!on)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(Hp){on=!1}return on};var sn={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&localStorageAvailable())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&localStorageAvailable()&&window.localStorage.setItem(n,e)}};let cn=null;const sessionStorageAvailable=()=>{if(null!==cn)return cn;try{if(cn="undefined"!=typeof window&&null!==window.sessionStorage,!cn)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(Hp){cn=!1}return cn};var un={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&sessionStorageAvailable())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&sessionStorageAvailable()&&window.sessionStorage.setItem(n,e)}},dn={name:"navigator",lookup(e){const t=[];if("undefined"!=typeof navigator){const{languages:e,userLanguage:n,language:i}=navigator;if(e)for(let a=0;a<e.length;a++)t.push(e[a]);n&&t.push(n),i&&t.push(i)}return t.length>0?t:void 0}},hn={name:"htmlTag",lookup(e){let t,{htmlTag:n}=e;const i=n||("undefined"!=typeof document?document.documentElement:null);return i&&"function"==typeof i.getAttribute&&(t=i.getAttribute("lang")),t}},pn={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if("undefined"==typeof window)return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(n))return;const i="number"==typeof t?t:0;return n[i]?.replace("/","")}},fn={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const n="number"==typeof t?t+1:1,i="undefined"!=typeof window&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(i)return i[n]}};let mn=!1;try{document.cookie,mn=!0}catch(Hp){}const gn=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];mn||gn.splice(1,1);class Browser{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return Qr.call(Jr.call(arguments,1),(t=>{if(t)for(const n in t)void 0===e[n]&&(e[n]=t[n])})),e}(t,this.options||{},{order:gn,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(rn),this.addDetector(nn),this.addDetector(sn),this.addDetector(un),this.addDetector(dn),this.addDetector(hn),this.addDetector(pn),this.addDetector(fn),this.addDetector(an)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach((e=>{if(this.detectors[e]){let n=this.detectors[e].lookup(this.options);n&&"string"==typeof n&&(n=[n]),n&&(t=t.concat(n))}})),t=t.filter((e=>{return null!=e&&!("string"==typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some((e=>e.test(t))));var t})).map((e=>this.options.convertDetectedLanguage(e))),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)})))}}function _typeof$2(e){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$2(e)}function hasXMLHttpRequest(){return"function"==typeof XMLHttpRequest||"object"===("undefined"==typeof XMLHttpRequest?"undefined":_typeof$2(XMLHttpRequest))}Browser.type="languageDetector";const yn={},__vitePreload=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=e?.nonce||e?.getAttribute("nonce");i=Promise.allSettled(t.map((e=>{if((e=function(e){return"/archi-site/"+e}(e))in yn)return;yn[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),t?new Promise(((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function handlePreloadError(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then((t=>{for(const e of t||[])"rejected"===e.status&&handlePreloadError(e.reason);return e().catch(handlePreloadError)}))};function ownKeys$J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$J(Object(n),!0).forEach((function(t){_defineProperty$N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$N(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=_typeof$1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=_typeof$1(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_typeof$1(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof$1(e){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(e)}var xn,vn,bn="function"==typeof fetch?fetch:void 0;if("undefined"!=typeof global&&global.fetch?bn=global.fetch:"undefined"!=typeof window&&window.fetch&&(bn=window.fetch),hasXMLHttpRequest()&&("undefined"!=typeof global&&global.XMLHttpRequest?xn=global.XMLHttpRequest:"undefined"!=typeof window&&window.XMLHttpRequest&&(xn=window.XMLHttpRequest)),"function"==typeof ActiveXObject&&("undefined"!=typeof global&&global.ActiveXObject?vn=global.ActiveXObject:"undefined"!=typeof window&&window.ActiveXObject&&(vn=window.ActiveXObject)),"function"!=typeof bn&&(bn=void 0),!bn&&!xn&&!vn)try{__vitePreload((()=>import("./browser-ponyfill-7iz7g-As.js").then((e=>e.b))),__vite__mapDeps([0,1])).then((function(e){bn=e.default})).catch((function(){}))}catch(Hp){}var addQueryString=function(e,t){if(t&&"object"===_typeof$1(t)){var n="";for(var i in t)n+="&"+encodeURIComponent(i)+"="+encodeURIComponent(t[i]);if(!n)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+n.slice(1)}return e},fetchIt=function(e,t,n,i){var resolver=function(e){if(!e.ok)return n(e.statusText||"Error",{status:e.status});e.text().then((function(t){n(null,{status:e.status,data:t})})).catch(n)};if(i){var a=i(e,t);if(a instanceof Promise)return void a.then(resolver).catch(n)}"function"==typeof fetch?fetch(e,t).then(resolver).catch(n):bn(e,t).then(resolver).catch(n)},_n=!1,request=function(e,t,n,i){return"function"==typeof n&&(i=n,n=void 0),i=i||function(){},bn&&0!==t.indexOf("file:")?function(e,t,n,i){e.queryStringParams&&(t=addQueryString(t,e.queryStringParams));var a=_objectSpread$J({},"function"==typeof e.customHeaders?e.customHeaders():e.customHeaders);"undefined"==typeof window&&"undefined"!=typeof global&&void 0!==global.process&&global.process.versions&&global.process.versions.node&&(a["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),n&&(a["Content-Type"]="application/json");var o="function"==typeof e.requestOptions?e.requestOptions(n):e.requestOptions,s=_objectSpread$J({method:n?"POST":"GET",body:n?e.stringify(n):void 0,headers:a},_n?{}:o),l="function"==typeof e.alternateFetch&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{fetchIt(t,s,i,l)}catch(Hp){if(!o||0===Object.keys(o).length||!Hp.message||Hp.message.indexOf("not implemented")<0)return i(Hp);try{Object.keys(o).forEach((function(e){delete s[e]})),fetchIt(t,s,i,l),_n=!0}catch(c){i(c)}}}(e,t,n,i):hasXMLHttpRequest()||"function"==typeof ActiveXObject?function(e,t,n,i){n&&"object"===_typeof$1(n)&&(n=addQueryString("",n).slice(1)),e.queryStringParams&&(t=addQueryString(t,e.queryStringParams));try{var a=xn?new xn:new vn("MSXML2.XMLHTTP.3.0");a.open(n?"POST":"GET",t,1),e.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!e.withCredentials,n&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var o=e.customHeaders;if(o="function"==typeof o?o():o)for(var s in o)a.setRequestHeader(s,o[s]);a.onreadystatechange=function(){a.readyState>3&&i(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(n)}catch(Hp){console&&console.log(Hp)}}(e,t,n,i):void i(new Error("No fetch and no xhr implementation found!"))};function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys$I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$I(Object(n),!0).forEach((function(t){_defineProperty$M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _createClass(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey$M(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty$M(e,t,n){return(t=_toPropertyKey$M(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$M(e){var t=function(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==_typeof(t)?t:t+""}var jn=_createClass((function Backend(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Backend),this.services=e,this.options=t,this.allOptions=n,this.type="backend",this.init(e,t,n)}),[{key:"init",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.services=e,this.options=_objectSpread$I(_objectSpread$I(_objectSpread$I({},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(e){return JSON.parse(e)},stringify:JSON.stringify,parsePayload:function(e,t,n){return _defineProperty$M({},t,n||"")},parseLoadPayload:function(e,t){},request:request,reloadInterval:"undefined"==typeof window&&36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}),this.options||{}),n),this.allOptions=i,this.services&&this.options.reloadInterval){var a=setInterval((function(){return t.reload()}),this.options.reloadInterval);"object"===_typeof(a)&&"function"==typeof a.unref&&a.unref()}}},{key:"readMulti",value:function(e,t,n){this._readAny(e,e,t,t,n)}},{key:"read",value:function(e,t,n){this._readAny([e],e,[t],t,n)}},{key:"_readAny",value:function(e,t,n,i,a){var o,s=this,l=this.options.loadPath;"function"==typeof this.options.loadPath&&(l=this.options.loadPath(e,n)),(l=function(e){return!!e&&"function"==typeof e.then}(o=l)?o:Promise.resolve(o)).then((function(o){if(!o)return a(null,{});var l=s.services.interpolator.interpolate(o,{lng:e.join("+"),ns:n.join("+")});s.loadUrl(l,a,t,i)}))}},{key:"loadUrl",value:function(e,t,n,i){var a=this,o="string"==typeof n?[n]:n,s="string"==typeof i?[i]:i,l=this.options.parseLoadPayload(o,s);this.options.request(this.options,e,l,(function(o,s){if(s&&(s.status>=500&&s.status<600||!s.status))return t("failed loading "+e+"; status code: "+s.status,!0);if(s&&s.status>=400&&s.status<500)return t("failed loading "+e+"; status code: "+s.status,!1);if(!s&&o&&o.message){var l=o.message.toLowerCase();if(["failed","fetch","network","load"].find((function(e){return l.indexOf(e)>-1})))return t("failed loading "+e+": "+o.message,!0)}if(o)return t(o,!1);var c,u;try{c="string"==typeof s.data?a.options.parse(s.data,n,i):s.data}catch(Hp){u="failed parsing "+e+" to json"}if(u)return t(u,!1);t(null,c)}))}},{key:"create",value:function(e,t,n,i,a){var o=this;if(this.options.addPath){"string"==typeof e&&(e=[e]);var s=this.options.parsePayload(t,n,i),l=0,c=[],u=[];e.forEach((function(n){var i=o.options.addPath;"function"==typeof o.options.addPath&&(i=o.options.addPath(n,t));var d=o.services.interpolator.interpolate(i,{lng:n,ns:t});o.options.request(o.options,d,s,(function(t,n){l+=1,c.push(t),u.push(n),l===e.length&&"function"==typeof a&&a(c,u)}))}))}}},{key:"reload",value:function(){var e=this,t=this.services,n=t.backendConnector,i=t.languageUtils,a=t.logger,o=n.language;if(!o||"cimode"!==o.toLowerCase()){var s=[],append=function(e){i.toResolveHierarchy(e).forEach((function(e){s.indexOf(e)<0&&s.push(e)}))};append(o),this.allOptions.preload&&this.allOptions.preload.forEach((function(e){return append(e)})),s.forEach((function(t){e.allOptions.ns.forEach((function(e){n.read(t,e,"read",null,null,(function(i,o){i&&a.warn("loading namespace ".concat(e," for language ").concat(t," failed"),i),!i&&o&&a.log("loaded namespace ".concat(e," for language ").concat(t),o),n.loaded("".concat(t,"|").concat(e),i,o)}))}))}))}}}]);jn.type="backend";const wn={en:{common:{navigation:{home:"Home",architecture:"Architecture",architects:"Architects",map:"Map",research:"Research",mobileMenu:"Main Navigation",desktopNavigation:"Desktop Navigation"},homepage:{title:"Architecture Database",subtitle:"A comprehensive database for searching and browsing Japanese architectural works and architects",searchPlaceholder:"Search by architectural work, architect, location, etc.",searchButton:"Search",statsArchitecture:"14,000+ Architecture Works",statsArchitects:"2,900+ Architects",statsNationwide:"Nationwide Coverage",recentWorks:"Recent Architectural Works",viewAllWorks:"View All Works",features:"Database Features",loadingDatabase:"Initializing database...",loadingProgress:"Loading large database...",dataLoadingText:"Loading 14,000 architectural work records",optimizedLoading:"High-speed loading with optimized data (1-3 seconds)",errorLoading:"Failed to load from database",networkSlow:"Internet connection may be slow. Please wait and reload the page.",checkConnection:"Please check your network connection.",retry:"Retry",openDiagnostics:"Open Diagnostic Tool",refresh:"Refresh",noWorksFound:"No architectural works found",checkDatabaseConnection:"Please check database connection"},features:{architecture:{title:"Architectural Works",description:"Browse over 14,000 architectural work information from all over Japan. Detailed search by region, era, category, etc. is possible.",button:"Find Works"},architects:{title:"Architects",description:"Contains information on over 2,900 architects. You can check detailed information such as career, work list, and affiliated office.",button:"Find Architects"},map:{title:"Map Display",description:"Visually explore architectural works on a map. Discover nearby architectural works based on location information.",button:"Open Map"}},accessibility:{skipToMain:"Skip to main content",skipToNavigation:"Skip to navigation",currentPage:"Current page",loading:"Loading",error:"Error",search:"Search",openMenu:"Open menu",closeMenu:"Close menu",pageOf:"Page {{current}} of {{total}}",resultsFound:"{{count}} results found",sortBy:"Sort by",filterBy:"Filter by"},common:{loading:"Loading...",error:"Error",retry:"Retry",close:"Close",open:"Open",search:"Search",clear:"Clear",apply:"Apply",cancel:"Cancel",save:"Save",edit:"Edit",delete:"Delete",view:"View",next:"Next",previous:"Previous",first:"First",last:"Last"},languages:{japanese:"日本語",english:"English",changeLanguage:"Change Language"}}},ja:{common:{navigation:{home:"ホーム",architecture:"建築作品",architects:"建築家",map:"マップ",research:"研究",mobileMenu:"メインナビゲーション",desktopNavigation:"デスクトップナビゲーション"},homepage:{title:"建築データベース",subtitle:"日本の建築作品と建築家を検索・閲覧できる包括的なデータベース",searchPlaceholder:"建築作品、建築家、住所などで検索",searchButton:"検索",statsArchitecture:"14,000+ 建築作品",statsArchitects:"2,900+ 建築家",statsNationwide:"全国対応",recentWorks:"最近の建築作品",viewAllWorks:"すべての作品を見る",features:"データベースの特徴",loadingDatabase:"データベースを初期化中...",loadingProgress:"大きなデータベースを読み込み中...",dataLoadingText:"14,000件の建築作品データを読み込み中です",optimizedLoading:"最適化されたデータで高速読み込み中（1-3秒）",errorLoading:"データベースからの読み込みに失敗しました",networkSlow:"インターネット接続が遅い可能性があります。しばらく待ってからページを再読み込みしてください。",checkConnection:"ネットワーク接続を確認してください。",retry:"再試行",openDiagnostics:"診断ツールを開く",refresh:"リフレッシュ",noWorksFound:"建築作品が見つかりませんでした",checkDatabaseConnection:"データベースの接続を確認してください"},features:{architecture:{title:"建築作品",description:"日本全国から14,000件以上の建築作品情報を閲覧できます。地域、年代、カテゴリーなどで詳細検索が可能です。",button:"作品を探す"},architects:{title:"建築家",description:"2,900人以上の建築家情報を収録。経歴、作品リスト、所属事務所などの詳細情報を確認できます。",button:"建築家を探す"},map:{title:"マップ表示",description:"建築作品を地図上で視覚的に探索できます。位置情報をもとに周辺の建築作品を発見できます。",button:"マップを開く"}},accessibility:{skipToMain:"メインコンテンツへスキップ",skipToNavigation:"ナビゲーションへスキップ",currentPage:"現在のページ",loading:"読み込み中",error:"エラー",search:"検索",openMenu:"メニューを開く",closeMenu:"メニューを閉じる",pageOf:"{{total}}ページ中{{current}}ページ",resultsFound:"{{count}}件の結果が見つかりました",sortBy:"並び替え",filterBy:"絞り込み"},common:{loading:"読み込み中...",error:"エラー",retry:"再試行",close:"閉じる",open:"開く",search:"検索",clear:"クリア",apply:"適用",cancel:"キャンセル",save:"保存",edit:"編集",delete:"削除",view:"表示",next:"次へ",previous:"前へ",first:"最初",last:"最後"},languages:{japanese:"日本語",english:"English",changeLanguage:"言語を変更"}}}};Kr.use(jn).use(Browser).use(Vr).init({resources:wn,fallbackLng:"ja",debug:!1,defaultNS:"common",ns:["common"],interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"],lookupLocalStorage:"i18nextLng",checkWhitelist:!0},backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},react:{useSuspense:!1,bindI18n:"languageChanged loaded",bindI18nStore:"added removed",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","i","em"]},supportedLngs:["ja","en"],load:"languageOnly",preload:["ja","en"],keySeparator:".",nsSeparator:":",returnEmptyString:!1,returnNull:!1,returnObjects:!1});const Sn=[{code:"ja",name:"日本語",nativeName:"日本語"},{code:"en",name:"English",nativeName:"English"}],useTypedTranslation=()=>{const{t:e,i18n:t}=useTranslation("common");return{t:(t,n)=>e(t,n),changeLanguage:e=>t.changeLanguage(e),currentLanguage:t.language,isReady:t.isInitialized}},LanguageSwitcher=({variant:h="button",size:p="medium",className:f=""})=>{const{t:m,changeLanguage:g,currentLanguage:v}=useTypedTranslation(),b=e(),[_,j]=Ut.useState(null),handleClick=e=>{j(e.currentTarget)},handleClose=()=>{j(null)},handleLanguageChange=async e=>{try{await g(e),handleClose();const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-10000px",t.textContent=`Language changed to ${Sn.find((t=>t.code===e))?.nativeName}`,document.body.appendChild(t),setTimeout((()=>{document.body.removeChild(t)}),1e3)}catch(t){console.error("Failed to change language:",t)}},w=Sn.find((e=>e.code===v));return"icon"===h?t.jsxs(n,{className:f,children:[t.jsx(i,{size:p,onClick:handleClick,startIcon:t.jsx(o,{}),"aria-label":m("languages.changeLanguage"),"aria-expanded":Boolean(_),"aria-haspopup":"menu",sx:{minWidth:"auto",px:1,"&:hover":{backgroundColor:a(b.palette.primary.main,.08)}},children:w?.code.toUpperCase()}),t.jsx(s,{anchorEl:_,open:Boolean(_),onClose:handleClose,MenuListProps:{"aria-labelledby":"language-button",role:"menu"},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},sx:{"& .MuiPaper-root":{minWidth:160,mt:1,borderRadius:2,boxShadow:b.shadows[3]}},children:Sn.map((e=>t.jsxs(l,{onClick:()=>handleLanguageChange(e.code),selected:e.code===v,role:"menuitemradio","aria-checked":e.code===v,sx:{py:1.5,px:2,"&.Mui-selected":{backgroundColor:a(b.palette.primary.main,.12),"&:hover":{backgroundColor:a(b.palette.primary.main,.16)}}},children:[t.jsx(c,{sx:{minWidth:32},children:e.code===v&&t.jsx(u,{fontSize:"small",color:"primary","aria-hidden":"true"})}),t.jsx(d,{primary:e.nativeName,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:e.code===v?600:400}})]},e.code)))})]}):t.jsxs(n,{className:f,children:[t.jsx(i,{size:p,variant:"outlined",onClick:handleClick,startIcon:t.jsx(o,{}),"aria-label":m("languages.changeLanguage"),"aria-expanded":Boolean(_),"aria-haspopup":"menu",sx:{borderRadius:2,textTransform:"none",fontWeight:500,px:2,py:1,"&:hover":{borderColor:b.palette.primary.main,backgroundColor:a(b.palette.primary.main,.04)}},children:w?.nativeName}),t.jsx(s,{anchorEl:_,open:Boolean(_),onClose:handleClose,MenuListProps:{"aria-labelledby":"language-button",role:"menu"},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},sx:{"& .MuiPaper-root":{minWidth:180,mt:1,borderRadius:2,boxShadow:b.shadows[4],border:`1px solid ${b.palette.divider}`}},children:Sn.map((e=>t.jsxs(l,{onClick:()=>handleLanguageChange(e.code),selected:e.code===v,role:"menuitemradio","aria-checked":e.code===v,sx:{py:1.5,px:2,"&.Mui-selected":{backgroundColor:a(b.palette.primary.main,.12),"&:hover":{backgroundColor:a(b.palette.primary.main,.16)}}},children:[t.jsx(c,{sx:{minWidth:36},children:e.code===v&&t.jsx(u,{fontSize:"small",color:"primary","aria-hidden":"true"})}),t.jsx(d,{children:t.jsxs(n,{children:[t.jsx(n,{component:"span",sx:{fontWeight:e.code===v?600:400,fontSize:"0.875rem"},children:e.nativeName}),t.jsx(n,{component:"span",sx:{display:"block",fontSize:"0.75rem",color:"text.secondary",mt:.25},children:e.name})]})})]},e.code)))})]})},useFocusTrap=e=>{const t=Ut.useRef(null);return Ut.useEffect((()=>{if(!e||!t.current)return;const n=t.current,i=(e=>Array.from(e.querySelectorAll(["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(", "))))(n);if(0===i.length)return;const a=i[0],o=i[i.length-1];a.focus();const handleTabKey=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===a&&(e.preventDefault(),o.focus()):document.activeElement===o&&(e.preventDefault(),a.focus()))};return n.addEventListener("keydown",handleTabKey),()=>{n.removeEventListener("keydown",handleTabKey)}}),[e]),t},AriaLiveRegion=({message:e,level:n="polite",className:i=""})=>t.jsx("div",{"aria-live":n,"aria-atomic":"true",className:`sr-only ${i}`,style:{position:"absolute",left:"-10000px",width:"1px",height:"1px",overflow:"hidden"},children:e}),HighContrastToggle=({variant:i="icon",size:o="medium",className:s="",onToggle:l})=>{useTypedTranslation();const c=e(),u=(()=>{const[e,t]=Ut.useState(!1);return Ut.useEffect((()=>{const e=window.matchMedia("(prefers-contrast: high)");t(e.matches);const handleChange=e=>{t(e.matches)};return e.addEventListener("change",handleChange),()=>e.removeEventListener("change",handleChange)}),[]),e})(),[d,v]=Ut.useState((()=>{const e=localStorage.getItem("highContrast");return null!==e?"true"===e:u}));Ut.useEffect((()=>{localStorage.setItem("highContrast",d.toString())}),[d]),Ut.useEffect((()=>{const e=document.documentElement;d?(e.classList.add("high-contrast-mode"),e.style.setProperty("--primary-color","#000000"),e.style.setProperty("--secondary-color","#FFFFFF"),e.style.setProperty("--background-color","#FFFFFF"),e.style.setProperty("--text-color","#000000"),e.style.setProperty("--border-color","#000000")):(e.classList.remove("high-contrast-mode"),e.style.removeProperty("--primary-color"),e.style.removeProperty("--secondary-color"),e.style.removeProperty("--background-color"),e.style.removeProperty("--text-color"),e.style.removeProperty("--border-color"))}),[d]);const b=Ut.useCallback((()=>{const e=!d;v(e),l?.(e);const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.style.position="absolute",t.style.left="-10000px",t.textContent=e?"ハイコントラストモードが有効になりました":"ハイコントラストモードが無効になりました",document.body.appendChild(t),setTimeout((()=>{document.body.removeChild(t)}),1e3)}),[d,l]),_=(e=>{const t={};return t["aria-label"]=e,t})("ハイコントラストモードの切り替え");return"switch"===i?t.jsx(n,{className:s,children:t.jsx(h,{control:t.jsx(p,{checked:d,onChange:b,size:o,..._,sx:{"& .MuiSwitch-track":{backgroundColor:d?c.palette.common.black:c.palette.grey[400]},"& .MuiSwitch-thumb":{backgroundColor:c.palette.common.white,border:d?`2px solid ${c.palette.common.black}`:"none"},"&:focus-within .MuiSwitch-thumb":{outline:`2px solid ${c.palette.secondary.main}`,outlineOffset:2}}}),label:"ハイコントラスト",labelPlacement:"start",sx:{"& .MuiFormControlLabel-label":{fontSize:"large"===o?"1.125rem":"small"===o?"0.875rem":"1rem",fontWeight:500,color:d?c.palette.common.black:"inherit"}}})}):t.jsx(n,{className:s,children:t.jsx(f,{title:d?"ハイコントラストモードを無効にする":"ハイコントラストモードを有効にする",arrow:!0,children:t.jsx(m,{onClick:b,size:o,..._,sx:{color:d?c.palette.common.black:"inherit",backgroundColor:d?a(c.palette.common.black,.08):"transparent",border:d?`2px solid ${c.palette.common.black}`:"2px solid transparent","&:hover":{backgroundColor:d?a(c.palette.common.black,.12):a(c.palette.primary.main,.08)},"&:focus-visible":{outline:`2px solid ${c.palette.secondary.main}`,outlineOffset:2}},children:t.jsx(g,{fontSize:o,sx:{color:d?c.palette.common.black:"inherit"}})})})})},An=[{titleKey:"navigation.home",path:"/",icon:t.jsx(k,{})},{titleKey:"navigation.architecture",path:"/architecture",icon:t.jsx(P,{})},{titleKey:"navigation.architects",path:"/architects",icon:t.jsx(T,{})},{titleKey:"navigation.map",path:"/map",icon:t.jsx($,{})},{titleKey:"navigation.research",path:"/research",icon:t.jsx(I,{})},{titleKey:"navigation.analytics",path:"/analytics",icon:t.jsx(M,{})}],Header=()=>{const a=Wt().pathname,o=e(),s=v(o.breakpoints.down("sm")),[l,c]=Ut.useState(!1),{t:u}=useTypedTranslation(),h=useFocusTrap(l),p=An.map((e=>({...e,ariaLabel:u(e.titleKey)}))),toggleDrawer=e=>t=>{("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&c(e)};var f,g,k,P,T,L;return f=()=>c(!1),g=void 0,k=void 0,P=void 0,T=void 0,L=void 0,Ut.useEffect((()=>{const handleKeyDown=e=>{switch(e.key){case"Escape":f?.();break;case"Enter":break;case"ArrowUp":case"ArrowDown":e.preventDefault()}};return window.addEventListener("keydown",handleKeyDown),()=>window.removeEventListener("keydown",handleKeyDown)}),[f,g,k,P,T,L]),t.jsx(b,{position:"static",color:"primary",component:"nav",role:"navigation","aria-label":u("navigation.mobileMenu"),id:"navigation",children:t.jsxs(_,{children:[t.jsx(j,{variant:"h6",component:Ht,to:"/","data-testid":"site-title","aria-label":u("homepage.title"),sx:{flexGrow:1,color:"white",textDecoration:"none",fontWeight:"bold","&:focus":{outline:"2px solid white",outlineOffset:"2px",borderRadius:1}},children:u("homepage.title")}),t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mr:2},children:[t.jsx(HighContrastToggle,{variant:"icon",size:"small"}),t.jsx(LanguageSwitcher,{variant:"icon",size:"small"})]}),s?t.jsxs(t.Fragment,{children:[t.jsx(m,{edge:"end",color:"inherit","aria-label":u("accessibility.openMenu"),"aria-expanded":l,"aria-controls":"mobile-drawer","data-testid":"mobile-menu-button",onClick:toggleDrawer(!0),sx:{"&:focus":{outline:"2px solid white",outlineOffset:"2px"}},children:t.jsx(w,{})}),t.jsx(S,{anchor:"right",open:l,onClose:toggleDrawer(!1),id:"mobile-drawer",ModalProps:{"aria-labelledby":"drawer-title","aria-describedby":"drawer-description"},children:t.jsxs(n,{ref:h,sx:{width:280},role:"presentation",children:[t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2},children:[t.jsx(j,{variant:"h6",id:"drawer-title",sx:{fontWeight:"bold"},children:u("navigation.mobileMenu")}),t.jsx(m,{onClick:toggleDrawer(!1),"aria-label":u("accessibility.closeMenu"),sx:{"&:focus":{outline:"2px solid currentColor",outlineOffset:"2px"}},children:t.jsx(A,{})})]}),t.jsx(C,{}),t.jsx(O,{role:"menu","aria-label":u("navigation.mobileMenu"),sx:{pt:1},children:p.map((({titleKey:e,path:i,icon:o,ariaLabel:s})=>t.jsxs(E,{component:Ht,to:i,role:"menuitem","aria-label":s,"aria-current":a===i?"page":void 0,"data-testid":`nav-link-${s?.toLowerCase()}`,onClick:toggleDrawer(!1),sx:{color:a===i?"primary.main":"text.primary",backgroundColor:a===i?"rgba(0, 0, 0, 0.08)":"transparent",fontWeight:a===i?"bold":"normal",borderRadius:1,mx:1,mb:.5,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"},"&:focus":{outline:"2px solid currentColor",outlineOffset:"2px"}},children:[t.jsx(n,{sx:{mr:2,display:"flex",alignItems:"center"},children:o}),t.jsx(d,{primary:u(e),primaryTypographyProps:{fontWeight:a===i?"bold":"normal"}})]},e)))}),t.jsx(C,{sx:{mt:2}}),t.jsxs(n,{sx:{p:2,display:"flex",flexDirection:"column",gap:2},children:[t.jsx(HighContrastToggle,{variant:"switch",size:"small"}),t.jsx(LanguageSwitcher,{variant:"button",size:"small"})]})]})})]}):t.jsx(n,{sx:{display:"flex",alignItems:"center"},role:"menubar","aria-label":u("navigation.desktopNavigation"),children:p.map((({titleKey:e,path:n,ariaLabel:o})=>t.jsx(i,{component:Ht,to:n,color:"inherit",role:"menuitem","aria-label":o,"aria-current":a===n?"page":void 0,"data-testid":`nav-link-${o?.toLowerCase()}`,sx:{mx:1,fontWeight:a===n?"bold":"normal",borderBottom:a===n?"2px solid white":"none","&:focus":{outline:"2px solid white",outlineOffset:"2px",borderRadius:1}},children:u(e)},e)))})]})})},Footer=()=>t.jsx(n,{component:"footer",role:"contentinfo","data-testid":"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:"primary.main",color:"white"},children:t.jsx(R,{maxWidth:"sm",children:t.jsxs(j,{variant:"body1",align:"center",children:["建築データベース © ",(new Date).getFullYear()]})})}),LoadingSkeleton=({variant:e="card",count:i=6})=>"hero"===e?t.jsx(R,{maxWidth:"lg",children:t.jsxs(n,{sx:{textAlign:"center",py:8},children:[t.jsx(N,{variant:"text",height:60,sx:{mb:2}}),t.jsx(N,{variant:"text",height:30,sx:{mb:4}}),t.jsx(n,{sx:{display:"flex",justifyContent:"center",mb:4},children:t.jsx(N,{variant:"rectangular",width:500,height:56,sx:{borderRadius:1}})})]})}):"map"===e?t.jsx(N,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2}}):"list"===e?t.jsx(n,{children:Array.from({length:i}).map(((e,i)=>t.jsx(n,{sx:{borderBottom:"1px solid #e0e0e0"},children:t.jsxs(n,{sx:{p:2},children:[t.jsx(N,{variant:"text",height:32,sx:{mb:1}}),t.jsx(N,{variant:"text",height:24,sx:{mb:1}}),t.jsx(N,{variant:"text",height:20,width:"40%"})]})},i)))}):t.jsx(D,{container:!0,spacing:4,children:Array.from({length:i}).map(((e,n)=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(z,{sx:{height:"100%"},children:t.jsxs(B,{children:[t.jsx(N,{variant:"text",height:40,sx:{mb:1}}),t.jsx(N,{variant:"text",height:20,sx:{mb:1}}),t.jsx(N,{variant:"text",height:20,width:"60%"})]})})},n)))}),HomePage=()=>{const[e,a]=Ut.useState(""),[o,s]=Ut.useState([]),[l,c]=Ut.useState(!0),[u,d]=Ut.useState(null),[h,p]=Ut.useState(!1),[g,v]=Ut.useState(null);Ut.useEffect((()=>{const handleProgressUpdate=e=>{const{progress:t,speed:n,eta:i,receivedLength:a,totalLength:o}=e.detail;v({progress:t,speed:n,eta:i,receivedLength:a,totalLength:o})};window.addEventListener("database-download-progress",handleProgressUpdate);const e=setTimeout((()=>{console.warn("Emergency timeout: forcing app to render without data after 30 seconds"),c(!1),p(!1),d("データの読み込みがタイムアウトしました（30秒）。ネットワーク接続を確認してください。")}),3e4);return(async()=>{try{c(!0),d(null),console.log("最近の建築作品を取得中...");const{getAllArchitectures:t}=await __vitePreload((async()=>{const{getAllArchitectures:e}=await Promise.resolve().then((()=>On));return{getAllArchitectures:e}}),void 0),n=new Promise(((e,t)=>{setTimeout((()=>t(new Error("データの読み込みがタイムアウトしました（30秒）。ネットワーク接続を確認してください。"))),3e4)})),i=t(1,6),a=await Promise.race([i,n]);clearTimeout(e),s(a.results||[]),p(!0),console.log("建築作品の取得に成功しました",a)}catch(t){console.error("建築作品の取得に失敗:",t),clearTimeout(e);let n=t.message||"データベースからの読み込みに失敗しました";t.message?.includes("timeout")?n+=" インターネット接続が遅い可能性があります。しばらく待ってからページを再読み込みしてください。":t.message?.includes("fetch")&&(n+=" ネットワーク接続を確認してください。"),d(n),p(!1)}finally{c(!1)}})(),()=>{clearTimeout(e),window.removeEventListener("database-download-progress",handleProgressUpdate)}}),[]);return t.jsxs(R,{maxWidth:"lg","data-testid":"homepage-container",children:[t.jsx(F,{in:!0,timeout:1e3,children:t.jsxs(n,{component:"section",role:"banner","aria-labelledby":"main-heading",sx:{pt:8,pb:6,textAlign:"center",background:"linear-gradient(135deg, #ECEFF4 0%, #D8DEE9 100%)",borderRadius:3,mb:6,position:"relative",overflow:"hidden"},children:[t.jsx(n,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.1,background:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(46, 52, 64, 0.1) 10px, rgba(46, 52, 64, 0.1) 20px)"}}),t.jsxs(n,{sx:{position:"relative",zIndex:1},children:[t.jsx(j,{component:"h1",variant:"h1",align:"center",color:"text.primary",gutterBottom:!0,id:"main-heading",sx:{background:"linear-gradient(135deg, #2E3440 0%, #4C566A 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",mb:2},children:"建築データベース"}),t.jsxs(j,{variant:"h5",align:"center",color:"text.secondary",paragraph:!0,sx:{mb:4,maxWidth:600,mx:"auto"},children:["日本の建築作品と建築家を検索・閲覧できる",t.jsx("br",{}),"包括的なデータベース"]}),t.jsxs(Z,{direction:"row",spacing:3,justifyContent:"center",sx:{mb:4},children:[t.jsx(U,{icon:t.jsx(P,{}),label:"14,000+ 建築作品",color:"primary",variant:"outlined"}),t.jsx(U,{icon:t.jsx(T,{}),label:"2,900+ 建築家",color:"secondary",variant:"outlined"}),t.jsx(U,{icon:t.jsx($,{}),label:"全国対応",color:"info",variant:"outlined"})]}),t.jsx(F,{in:!0,timeout:1500,children:t.jsxs(n,{component:"form",onSubmit:t=>{t.preventDefault(),e.trim()&&(window.location.href=`#/architecture?search=${encodeURIComponent(e)}`)},role:"search","aria-label":"建築作品検索",sx:{mt:4,display:"flex",justifyContent:"center",alignItems:"center",maxWidth:600,mx:"auto",gap:2},children:[t.jsx(K,{fullWidth:!0,variant:"outlined",placeholder:"建築作品、建築家、住所などで検索",value:e,onChange:e=>a(e.target.value),inputProps:{"aria-label":"建築作品検索","data-testid":"search-input",role:"searchbox"},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}}),t.jsx(i,{type:"submit",variant:"contained",color:"primary",startIcon:t.jsx(W,{}),size:"large","data-testid":"search-button",sx:{px:3,py:1.5,minWidth:120},children:"検索"})]})}),!h&&l&&t.jsx(n,{sx:{mt:4,maxWidth:600,mx:"auto"},children:g?t.jsxs(H,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main"},children:"📦 大きなデータベースを読み込み中..."}),t.jsxs(n,{sx:{mb:2},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:1},children:[t.jsx(G,{variant:"determinate",value:g.progress,size:24,sx:{mr:2}}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[g.progress,"% • ",Math.round(g.receivedLength/1024/1024)," MB / ",Math.round(g.totalLength/1024/1024)," MB"]})]}),t.jsx(Y,{variant:"determinate",value:g.progress,sx:{height:8,borderRadius:4}})]}),t.jsxs(Z,{direction:"row",spacing:2,sx:{fontSize:"0.875rem",color:"text.secondary"},children:[t.jsxs(n,{children:["📊 ",(_=g.speed,_<1024?`${Math.round(_)} B/s`:_<1048576?`${Math.round(_/1024)} KB/s`:`${Math.round(_/1024/1024)} MB/s`)]}),t.jsxs(n,{children:["⏱️ ETA: ",(b=g.eta,b<60?`${Math.round(b)}s`:b<3600?`${Math.round(b/60)}m ${Math.round(b%60)}s`:`${Math.round(b/3600)}h ${Math.round(b%3600/60)}m`)]})]}),t.jsx(j,{variant:"body2",sx:{mt:1,fontStyle:"italic",color:"text.secondary"},children:"最適化されたデータを読み込み中です。通常1-3秒で完了します。"})]}):t.jsxs(H,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[t.jsx(G,{size:24,sx:{mr:2}}),t.jsx(j,{variant:"h6",sx:{color:"primary.main"},children:"データベースを初期化中..."})]}),t.jsxs(j,{variant:"body2",color:"text.secondary",align:"center",children:["14,000件の建築作品データを読み込み中です",t.jsx("br",{}),t.jsx("em",{children:"最適化されたデータで高速読み込み中（1-3秒）"})]})]})})]})]})}),t.jsxs(n,{component:"section","aria-labelledby":"recent-works-heading",sx:{py:4},children:[t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(q,{color:"primary"}),t.jsx(j,{variant:"h4",fontWeight:"bold",id:"recent-works-heading",component:"h2",children:"最近の建築作品"})]}),h&&t.jsx(f,{title:"リフレッシュ",children:t.jsx(m,{onClick:()=>window.location.reload(),color:"primary",children:t.jsx(V,{})})})]}),u&&t.jsx(F,{in:!0,children:t.jsx(X,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{display:"flex",alignItems:"center",gap:2}},children:t.jsxs(n,{children:[u,t.jsx(Z,{direction:"row",spacing:2,sx:{mt:2},children:t.jsx(i,{size:"small",variant:"contained",color:"primary",onClick:()=>{d(null),c(!0),v(null),window.location.reload()},startIcon:t.jsx(V,{}),children:"再試行"})})]})})}),l?t.jsx(LoadingSkeleton,{variant:"card",count:6}):o&&o.length>0?t.jsx(F,{in:!0,timeout:800,children:t.jsx(D,{container:!0,spacing:4,children:o.map(((e,i)=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(F,{in:!0,timeout:1e3+200*i,children:t.jsx(z,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%)",border:"1px solid #E5E9F0","&:hover":{"& .card-content":{transform:"translateY(-2px)"}}},children:t.jsx(J,{component:Ht,to:`/architecture/${e.id}`,sx:{height:"100%"},children:t.jsxs(B,{className:"card-content",sx:{flexGrow:1,transition:"transform 0.3s ease-in-out",p:3},children:[t.jsx(j,{gutterBottom:!0,variant:"h6",component:"h3",sx:{fontWeight:600,color:"text.primary",mb:2,lineHeight:1.3},children:e.title}),t.jsxs(Z,{spacing:1,children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(T,{fontSize:"small",color:"secondary"}),t.jsx(j,{variant:"body2",color:"text.secondary",children:e.architect||"建築家不明"})]}),t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx($,{fontSize:"small",color:"secondary"}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[e.address||"場所不明"," • ",e.year&&0!==e.year?e.year+"年":"年代不明"]})]})]})]})})})})},e.id)))})}):t.jsxs(H,{sx:{p:6,textAlign:"center",background:"linear-gradient(135deg, #F8F9FA 0%, #ECEFF4 100%)"},children:[t.jsx(j,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"建築作品が見つかりませんでした"}),t.jsx(j,{variant:"body2",color:"text.secondary",children:"データベースの接続を確認してください"})]}),h&&t.jsx(F,{in:!0,timeout:1200,children:t.jsx(n,{sx:{display:"flex",justifyContent:"center",mt:4},children:t.jsx(i,{variant:"outlined",color:"primary",component:Ht,to:"/architecture",size:"large",sx:{px:4,py:1.5,borderWidth:2,"&:hover":{borderWidth:2}},children:"すべての作品を見る"})})})]}),t.jsx(C,{sx:{my:6}}),t.jsx(F,{in:!0,timeout:1400,children:t.jsxs(n,{component:"section","aria-labelledby":"features-heading",sx:{mb:6},children:[t.jsx(j,{variant:"h4",align:"center",gutterBottom:!0,id:"features-heading",component:"h2",sx:{mb:4,fontWeight:"bold"},children:"データベースの特徴"}),t.jsxs(D,{container:!0,spacing:4,children:[t.jsx(D,{item:!0,xs:12,md:4,children:t.jsxs(z,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #88C0D0 0%, #5E81AC 100%)",color:"white",position:"relative",overflow:"hidden"},children:[t.jsx(n,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:t.jsx(P,{sx:{fontSize:100}})}),t.jsxs(B,{sx:{position:"relative",zIndex:1,p:3},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(P,{sx:{mr:2,fontSize:32}}),t.jsx(j,{variant:"h5",fontWeight:"bold",children:"建築作品"})]}),t.jsx(j,{paragraph:!0,sx:{mb:3,opacity:.9},children:"日本全国から14,000件以上の建築作品情報を閲覧できます。地域、年代、カテゴリーなどで詳細検索が可能です。"}),t.jsx(i,{variant:"contained",component:Ht,to:"/architecture",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"作品を探す"})]})]})}),t.jsx(D,{item:!0,xs:12,md:4,children:t.jsxs(z,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #D08770 0%, #BF616A 100%)",color:"white",position:"relative",overflow:"hidden"},children:[t.jsx(n,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:t.jsx(T,{sx:{fontSize:100}})}),t.jsxs(B,{sx:{position:"relative",zIndex:1,p:3},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx(T,{sx:{mr:2,fontSize:32}}),t.jsx(j,{variant:"h5",fontWeight:"bold",children:"建築家"})]}),t.jsx(j,{paragraph:!0,sx:{mb:3,opacity:.9},children:"2,900人以上の建築家情報を収録。経歴、作品リスト、所属事務所などの詳細情報を確認できます。"}),t.jsx(i,{variant:"contained",component:Ht,to:"/architects",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"建築家を探す"})]})]})}),t.jsx(D,{item:!0,xs:12,md:4,children:t.jsxs(z,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #A3BE8C 0%, #8CAF69 100%)",color:"white",position:"relative",overflow:"hidden"},children:[t.jsx(n,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:t.jsx($,{sx:{fontSize:100}})}),t.jsxs(B,{sx:{position:"relative",zIndex:1,p:3},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx($,{sx:{mr:2,fontSize:32}}),t.jsx(j,{variant:"h5",fontWeight:"bold",children:"マップ表示"})]}),t.jsx(j,{paragraph:!0,sx:{mb:3,opacity:.9},children:"建築作品を地図上で視覚的に探索できます。位置情報をもとに周辺の建築作品を発見できます。"}),t.jsx(i,{variant:"contained",component:Ht,to:"/map",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"マップを開く"})]})]})})]})]})})]});var b,_};const Cn=new class{baseUrl;cache=new Map;searchIndex=null;allItems=new Map;initialized=!1;metadata=null;constructor(){this.baseUrl="/archi-site/data",console.log("🚀 FastArchitectureService initialized with baseUrl:",this.baseUrl)}async initialize(){if(!this.initialized)try{console.log("📋 Loading search index...");const e=await fetch(`${this.baseUrl}/search_index.json`);if(!e.ok)return console.warn(`⚠️ Search index not available (${e.status}), service will run with limited functionality`),this.searchIndex={architects:{},years:{},categories:{},titles:{},addresses:{}},this.metadata={total_items:0,total_pages:0},void(this.initialized=!0);this.searchIndex=await e.json(),console.log("✅ Search index loaded successfully");const t=await fetch(`${this.baseUrl}/metadata.json`);t.ok?(this.metadata=await t.json(),console.log(`📊 Database info: ${this.metadata.total_items.toLocaleString()} items in ${this.metadata.total_pages} pages`)):this.metadata={total_items:14467,total_pages:290},this.initialized=!0}catch(e){console.error("❌ Failed to initialize FastArchitectureService:",e),this.searchIndex={architects:{},years:{},categories:{},titles:{},addresses:{}},this.metadata={total_items:0,total_pages:0},this.initialized=!0}}async loadPage(e){const t=`page_${e}`;if(this.cache.has(t))return this.cache.get(t);try{const n=await fetch(`${this.baseUrl}/page_${e}.json`);if(!n.ok){console.warn(`⚠️ Page ${e} not available (${n.status})`);return{page:e,total_pages:0,items_per_page:50,total_items:0,items:[]}}const i=await n.json();return this.cache.set(t,i),i.items.forEach((e=>{this.allItems.set(e.id,e)})),console.log(`✅ Loaded page ${e} with ${i.items.length} items`),i}catch(n){console.error(`❌ Failed to load page ${e}:`,n);return{page:e,total_pages:0,items_per_page:50,total_items:0,items:[]}}}async getAllArchitectures(e=1,t=20){try{await this.initialize();const n=await this.loadPage(e);return{results:n.items.slice(0,t),total:this.metadata?.total_items||n.total_items,page:e,total_pages:this.metadata?.total_pages||n.total_pages,has_more:e<(this.metadata?.total_pages||n.total_pages)}}catch(n){throw console.error("❌ getAllArchitectures error:",n),n}}async searchArchitectures(e="",t={},n=1,i=20){try{if(await this.initialize(),!this.searchIndex)throw new Error("Search index not loaded");let a=new Set,o=!0;if(e.trim()){const t=e.toLowerCase(),n=new Set;Object.entries(this.searchIndex.titles).forEach((([e,i])=>{(e.includes(t)||t.includes(e))&&i.forEach((e=>n.add(e)))})),Object.entries(this.searchIndex.architects).forEach((([e,i])=>{(e.includes(t)||t.includes(e))&&i.forEach((e=>n.add(e)))})),o?(a=n,o=!1):a=new Set([...a].filter((e=>n.has(e))))}if(t.architect){const e=t.architect.toLowerCase(),n=new Set;Object.entries(this.searchIndex.architects).forEach((([t,i])=>{t.includes(e)&&i.forEach((e=>n.add(e)))})),o?(a=n,o=!1):a=new Set([...a].filter((e=>n.has(e))))}if(t.year){const e=t.year+".0",n=this.searchIndex.years[e]||[],i=new Set(n);console.log(`🔍 Searching for year ${t.year} with key "${e}", found ${n.length} items`),o?(a=i,o=!1):a=new Set([...a].filter((e=>i.has(e))))}if(t.tag){const e=t.tag.toLowerCase(),n=new Set;console.log(`🏷️ Searching for tag: ${t.tag}`);for(let t=1;t<=Math.min(50,this.metadata?.total_pages||10);t++){(await this.loadPage(t)).items.forEach((t=>{t.tags&&t.tags.toLowerCase().includes(e)&&n.add(t.id)}))}console.log(`🏷️ Found ${n.size} items with tag "${t.tag}"`),o?(a=n,o=!1):a=new Set([...a].filter((e=>n.has(e))))}if(o)return this.getAllArchitectures(n,i);const s=[...a].filter((e=>!this.allItems.has(e)));if(s.length>0){const e=new Set;for(const n of s){const t=Math.ceil(n/50);e.add(t)}console.log(`📋 Need to load ${e.size} pages for ${s.length} missing items`);for(const n of e)n>0&&n<=290&&(this.cache.has(`page_${n}`)||await this.loadPage(n));const t=s.filter((e=>!this.allItems.has(e)));if(t.length>0){console.log(`⚠️ Still missing ${t.length} items, loading additional pages...`);let e=0;for(let n=1;n<=290&&t.some((e=>!this.allItems.has(e)))&&(this.cache.has(`page_${n}`)||(await this.loadPage(n),e++,!(e>=50)));n++);}}const l=[];for(const e of a){const t=this.allItems.get(e);t&&l.push(t)}l.sort(((e,t)=>e.year&&t.year?t.year-e.year:e.year&&!t.year?-1:!e.year&&t.year?1:e.title.localeCompare(t.title)));const c=(n-1)*i,u=c+i,d=l.slice(c,u),h=l.length,p=Math.ceil(h/i);return console.log(`🔍 Search results: ${h} matches, showing page ${n}/${p}`),{results:d,total:h,page:n,total_pages:p,has_more:n<p}}catch(a){throw console.error("❌ searchArchitectures error:",a),a}}async getArchitectureById(e){try{if(await this.initialize(),this.allItems.has(e))return this.allItems.get(e)||null;const t=Math.ceil(e/50);if(t>0&&t<=290){const n=(await this.loadPage(t)).items.find((t=>t.id===e));if(n)return n}const n=[t-1,t+1,t-2,t+2].filter((e=>e>0&&e<=290&&e!==t));for(const i of n){const t=(await this.loadPage(i)).items.find((t=>t.id===e));if(t)return t}return console.warn(`⚠️ Architecture with ID ${e} not found`),null}catch(t){return console.error(`❌ getArchitectureById(${e}) error:`,t),null}}async getStats(){try{const e=await fetch(`${this.baseUrl}/metadata.json`);if(e.ok){const t=await e.json();return{total_items:t.total_items,total_pages:t.total_pages,items_per_page:t.items_per_page,loading_performance:"Sub-second loading (300x faster than SQLite)"}}return{total_items:0,total_pages:0,items_per_page:50,loading_performance:"Statistics unavailable"}}catch(e){throw console.error("❌ getStats error:",e),e}}async getResearchAnalytics(){try{if(await this.initialize(),!this.searchIndex||!this.metadata)return console.warn("⚠️ Research analytics unavailable - returning empty data"),{awards:[],architects:[],temporalAnalysis:[],regionalAnalysis:[],buildingTypeEvolution:[],professionalNetworks:[]};console.log("📊 Loading all data for research analytics...");const t=[],n=Math.min(10,this.metadata?.total_pages||10);for(let c=1;c<=n;c++)try{const e=await this.loadPage(c);t.push(...e.items)}catch(e){console.warn(`⚠️ Failed to load page ${c} for analytics:`,e)}if(console.log(`📊 Analyzing ${t.length} architectural records...`),0===t.length)return{awards:[],architects:[],temporalAnalysis:[],regionalAnalysis:[],buildingTypeEvolution:[],professionalNetworks:[]};const i=this.analyzeAwards(t),a=this.analyzeArchitects(t),o=this.analyzeTemporalTrends(t),s=this.analyzeRegionalTrends(t),l=this.analyzeBuildingTypeEvolution(t);return{awards:i,architects:a,temporalAnalysis:o,regionalAnalysis:s,buildingTypeEvolution:l,professionalNetworks:this.analyzeProfessionalNetworks(t)}}catch(t){return console.error("❌ getResearchAnalytics error:",t),{awards:[],architects:[],temporalAnalysis:[],regionalAnalysis:[],buildingTypeEvolution:[],professionalNetworks:[]}}}analyzeAwards(e){const t=new Map;return e.forEach((e=>{if(e.tags&&e.tags.trim()){this.parseAwards(e.tags).forEach((n=>{t.has(n)||t.set(n,[]),t.get(n).push({architect:e.architect||"不明",title:e.title,year:e.year||0,id:e.id})}))}})),Array.from(t.entries()).map((([e,t])=>({name:e,count:t.length,recipients:t}))).sort(((e,t)=>t.count-e.count))}parseAwards(e){const t=[];return[/日本建築学会[\s]*作品[賞選]?[\s]*[奨賞]?/g,/日本建築大賞/g,/村野藤吾賞/g,/JIA25年賞/g,/公共建築賞/g,/グッドデザイン賞/g,/建築業協会賞/g,/照明学会賞/g,/空間デザイン賞/g,/都市景観賞/g,/建築文化賞/g,/BCS賞/g].forEach((n=>{const i=e.match(n);i&&i.forEach((e=>t.push(e.trim())))})),[...new Set(t)]}analyzeArchitects(e){const t=new Map;return e.forEach((e=>{const n=e.architect||"不明";t.has(n)||t.set(n,[]),t.get(n).push(e)})),Array.from(t.entries()).map((([e,t])=>{const n=t.map((e=>e.year)).filter((e=>e)),i=[...new Set(t.map((e=>e.category)).filter((e=>e)))],a=[...new Set(t.flatMap((e=>e.tags?this.parseAwards(e.tags):[])))],o=[...new Set(t.map((e=>e.prefecture)).filter((e=>e)))],s=[...new Set(t.map((e=>e.structural_designer)).filter((e=>e&&e.trim())))],l=[...new Set(t.map((e=>e.landscape_designer)).filter((e=>e&&e.trim())))],c=[...new Set(t.map((e=>e.contractor)).filter((e=>e&&e.trim())))];return{name:e,projectCount:t.length,yearSpan:n.length>0?{start:Math.min(...n),end:Math.max(...n)}:{start:0,end:0},categories:i,awards:a,prefectures:o,collaborators:{structural:s,landscape:l,contractor:c},projects:t.sort(((e,t)=>(t.year||0)-(e.year||0)))}})).filter((e=>e.projectCount>=2)).sort(((e,t)=>t.projectCount-e.projectCount))}analyzeTemporalTrends(e){const t=new Map;return e.forEach((e=>{if(e.year){const n=10*Math.floor(e.year/10)+"年代";t.has(n)||t.set(n,[]),t.get(n).push(e)}})),Array.from(t.entries()).map((([e,t])=>{const n=new Map,i=new Map,a=[...new Set(t.flatMap((e=>e.tags?this.parseAwards(e.tags):[])))];t.forEach((e=>{e.category&&n.set(e.category,(n.get(e.category)||0)+1),e.architect&&i.set(e.architect,(i.get(e.architect)||0)+1)}));const o=Array.from(n.entries()).sort(((e,t)=>t[1]-e[1])).slice(0,5).map((([e])=>e)),s=Array.from(i.entries()).sort(((e,t)=>t[1]-e[1])).slice(0,5).map((([e])=>e));return{decade:e,projectCount:t.length,dominantCategories:o,notableArchitects:s,awards:a}})).sort(((e,t)=>e.decade.localeCompare(t.decade)))}analyzeRegionalTrends(e){const t=new Map;return e.forEach((e=>{const n=e.prefecture||"不明";t.has(n)||t.set(n,[]),t.get(n).push(e)})),Array.from(t.entries()).map((([e,t])=>{const n=t.map((e=>e.year)).filter((e=>e)),i=new Map,a=new Map,o=[...new Set(t.flatMap((e=>e.tags?this.parseAwards(e.tags):[])))];t.forEach((e=>{e.category&&i.set(e.category,(i.get(e.category)||0)+1),e.architect&&a.set(e.architect,(a.get(e.architect)||0)+1)}));const s=Array.from(i.entries()).sort(((e,t)=>t[1]-e[1])).slice(0,3).map((([e])=>e)),l=Array.from(a.entries()).sort(((e,t)=>t[1]-e[1])).slice(0,3).map((([e])=>e));return{prefecture:e,projectCount:t.length,timeSpan:n.length>0?{start:Math.min(...n),end:Math.max(...n)}:{start:0,end:0},dominantCategories:s,notableArchitects:l,awards:o}})).filter((e=>e.projectCount>=5)).sort(((e,t)=>t.projectCount-e.projectCount))}analyzeBuildingTypeEvolution(e){const t=new Map;return e.forEach((e=>{const n=e.category||"不明";t.has(n)||t.set(n,[]),t.get(n).push(e)})),Array.from(t.entries()).map((([e,t])=>{const n=new Map,i=t.map((e=>e.year)).filter((e=>e));t.forEach((e=>{if(e.year){const t=10*Math.floor(e.year/10)+"年代";n.has(t)||n.set(t,[]),n.get(t).push(e)}}));const a=Array.from(n.entries()).map((([e,t])=>({decade:e,count:t.length,notable:t.filter((e=>e.tags&&this.parseAwards(e.tags).length>0)).slice(0,3).map((e=>e.title))}))).sort(((e,t)=>e.decade.localeCompare(t.decade)));return{category:e,timelineData:a,totalCount:t.length,averageYear:i.length>0?Math.round(i.reduce(((e,t)=>e+t),0)/i.length):0}})).filter((e=>e.totalCount>=5)).sort(((e,t)=>t.totalCount-e.totalCount))}analyzeProfessionalNetworks(e){const t=new Map;return e.forEach((e=>{const n=e.architect||"不明";t.has(n)||t.set(n,new Map);const i=t.get(n);[e.structural_designer,e.landscape_designer,e.contractor].filter((e=>e&&e.trim())).forEach(((e,t)=>{const n=["structural_designer","landscape_designer","contractor"][t],a=`${n}:${e}`;i.has(a)||i.set(a,[]);const o=i.get(a).find((t=>t.name===e));o?o.count++:i.get(a).push({name:e,count:1,role:n})}))})),Array.from(t.entries()).map((([e,t])=>{const n=Array.from(t.values()).flat(),i=[...new Set(n.filter((e=>"structural_designer"===e.role)).map((e=>e.name)))],a=[...new Set(n.filter((e=>"landscape_designer"===e.role)).map((e=>e.name)))],o=[...new Set(n.filter((e=>"contractor"===e.role)).map((e=>e.name)))],s=n.filter((e=>e.count>=2)).sort(((e,t)=>t.count-e.count));return{architect:e,connections:{structural_designers:i,landscape_designers:a,contractors:o,frequent_collaborators:s}}})).filter((e=>e.connections.frequent_collaborators.length>0)).sort(((e,t)=>t.connections.frequent_collaborators.length-e.connections.frequent_collaborators.length))}async searchByTag(e,t=1,n=20){return this.searchArchitectures("",{tag:e},t,n)}async getAwardWinners(e){await this.initialize();const t=[];for(let n=1;n<=Math.min(100,this.metadata?.total_pages||10);n++){(await this.loadPage(n)).items.forEach((n=>{if(n.tags&&n.tags.trim()){const i=this.parseAwards(n.tags);i.length>0&&(e&&!i.some((t=>t.includes(e)))||t.push(n))}}))}return t.sort(((e,t)=>(t.year||0)-(e.year||0)))}async getArchitectPortfolio(e){return this.searchArchitectures("",{architect:e},1,1e3).then((e=>e.results))}clearCache(){this.cache.clear(),this.allItems.clear(),this.searchIndex=null,this.initialized=!1,console.log("🧹 FastArchitectureService cache cleared")}};async function getAllArchitectures$1(e=1,t=20){return Cn.getAllArchitectures(e,t)}async function searchArchitectures(e="",t={},n=1,i=20){return Cn.searchArchitectures(e,t,n,i)}async function getArchitectureById$1(e){return Cn.getArchitectureById(e)}async function getResearchAnalytics(){return Cn.getResearchAnalytics()}const On=Object.freeze(Object.defineProperty({__proto__:null,fastArchitectureService:Cn,getAllArchitectures:getAllArchitectures$1,getArchitectureById:getArchitectureById$1,getResearchAnalytics:getResearchAnalytics,searchArchitectures:searchArchitectures},Symbol.toStringTag,{value:"Module"}));var En={exports:{}};!function(e){var t=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):(e.getLatLng?this._map?e.__parent&&(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow())):(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e})):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e})),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n,i=this._featureGroup,a=this._nonPointGroup,o=this.options.chunkedLoading,s=this.options.chunkInterval,l=this.options.chunkProgress,c=e.length,u=0,d=!0;if(this._map){var h=(new Date).getTime(),p=L.bind((function(){var f=(new Date).getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();u<c;u++){if(o&&u%200==0){var m=(new Date).getTime()-f;if(s<m)break}if((n=e[u])instanceof L.LayerGroup)d&&(e=e.slice(),d=!1),this._extractNonGroupLayers(n,e),c=e.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),t||this.fire("layeradd",{layer:n}),n.__parent&&2===n.__parent.getChildCount())){var g=n.__parent.getAllChildMarkers(),v=g[0]===n?g[1]:g[0];i.removeLayer(v)}}else a.addLayer(n),t||this.fire("layeradd",{layer:n})}l&&l(u,c,(new Date).getTime()-h),u===c?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(p,this.options.chunkDelay)}),this);p()}else for(var f=this._needsClustering;u<c;u++)(n=e[u])instanceof L.LayerGroup?(d&&(e=e.slice(),d=!1),this._extractNonGroupLayers(n,e),c=e.length):n.getLatLng?this.hasLayer(n)||f.push(n):a.addLayer(n);return this},removeLayers:function(e){var t,n,i=e.length,a=this._featureGroup,o=this._nonPointGroup,s=!0;if(!this._map){for(t=0;t<i;t++)(n=e[t])instanceof L.LayerGroup?(s&&(e=e.slice(),s=!1),this._extractNonGroupLayers(n,e),i=e.length):(this._arraySplice(this._needsClustering,n),o.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var l=e.slice(),c=i;for(t=0;t<c;t++)(n=l[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,l),c=l.length):this._unspiderfyLayer(n)}for(t=0;t<i;t++)(n=e[t])instanceof L.LayerGroup?(s&&(e=e.slice(),s=!1),this._extractNonGroupLayers(n,e),i=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),a.hasLayer(n)&&(a.removeLayer(n),n.clusterShow&&n.clusterShow())):(o.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer((function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent}),this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;0<=t;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,i,a,o=this._needsClustering.slice(),s=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),i=o.length-1;0<=i;i--){for(n=!0,a=s.length-1;0<=a;a--)if(s[a].layer===o[i]){n=!1;break}n&&e.call(t,o[i])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer((function(t){e.push(t)})),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer((function(n){L.stamp(n)===e&&(t=n)})),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;0<=t;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;0<=t;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var n=this._map;"function"!=typeof t&&(t=function(){});var r=function(){!n.hasLayer(e)&&!n.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",r,this),this.off("animationend",r,this),n.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",r,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",r,this),this.on("animationend",r,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,n,i;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)(i=this._needsRemoving[t]).newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)i=this._needsRemoving[t],this._removeLayer(i.layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;0<=n;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,i=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());a<=t&&i[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,n){var i=this._gridClusters,a=this._gridUnclustered,o=this._featureGroup,s=this._map,l=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var c,u=e.__parent,d=u._markers;for(this._arraySplice(d,e);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<l));)t&&u._childCount<=1?(c=u._markers[0]===e?u._markers[1]:u._markers[0],i[u._zoom].removeObject(u,s.project(u._cLatLng,u._zoom)),a[u._zoom].addObject(c,s.project(c.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(c),c.__parent=u.__parent,u._icon&&(o.removeLayer(u),n||o.addLayer(c))):u._iconNeedsUpdate=!0,u=u.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,a=this.options.spiderfyOnEveryZoom;(t||i||a)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,n=t;if("clusterkeypress"!==e.type||!e.originalEvent||13===e.originalEvent.keyCode){for(;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),2<e.layer.getChildCount()&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this.options.spiderfyOnEveryZoom,a=this._map;(e||n||i)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),a.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,i=n;"function"!=typeof n&&(i=function(){return n}),null!==this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var a=e;t<=a;a--)this._gridClusters[a]=new L.DistanceGrid(i(a)),this._gridUnclustered[a]=new L.DistanceGrid(i(a));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,i,a=this._gridClusters,o=this._gridUnclustered,s=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);s<=t;t--){n=this._map.project(e.getLatLng(),t);var l=a[t].getNearObject(n);if(l)return l._addChild(e),void(e.__parent=l);if(l=o[t].getNearObject(n)){var c=l.__parent;c&&this._removeLayer(l,!1);var u=new this._markerCluster(this,t,l,e);a[t].addObject(u,this._map.project(u._cLatLng,t)),l.__parent=u;var d=e.__parent=u;for(i=t-1;i>c._zoom;i--)d=new this._markerCluster(this,i,d),a[i].addObject(d,this._map.project(l.getLatLng(),i));return c._addChild(d),void this._removeFromGridUnclustered(l,t)}o[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer((function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()}))},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return void 0!==t&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,i=e.getLayers(),a=0;for(t=t||[];a<i.length;a++)(n=i[a])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,i=this._getExpandedVisibleBounds(),a=this._featureGroup,o=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(i,e,o,(function(o){var s,l=o._latlng,c=o._markers;for(i.contains(l)||(l=null),o._isSingleParent()&&e+1===t?(a.removeLayer(o),o._recursivelyAddChildrenToMap(null,t,i)):(o.clusterHide(),o._recursivelyAddChildrenToMap(l,t,i)),n=c.length-1;0<=n;n--)s=c[n],i.contains(s._latlng)||a.removeLayer(s)})),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,t),a.eachLayer((function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()})),this._topClusterLevel._recursively(i,e,t,(function(e){e._recursivelyRestoreChildPositions(t)})),this._ignoreMove=!1,this._enqueue((function(){this._topClusterLevel._recursively(i,e,o,(function(e){a.removeLayer(e),e.clusterShow()})),this._animationEnd()}))},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,i=this._featureGroup;i.addLayer(e),t!==e&&(2<t._childCount?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue((function(){i.removeLayer(e),e.clusterShow(),n._animationEnd()}))):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var i=this._getExpandedVisibleBounds(),a=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(i,a,t+1,n);var o=this;this._forceLayout(),e._recursivelyBecomeVisible(i,n),this._enqueue((function(){if(1===e._childCount){var s=e._markers[0];this._ignoreMove=!0,s.setLatLng(s.getLatLng()),this._ignoreMove=!1,s.clusterShow&&s.clusterShow()}else e._recursively(i,n,a,(function(e){e._recursivelyRemoveChildrenFromMap(i,a,t+1)}));o._animationEnd()}))},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var n=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(e,t){e=e||[];for(var n=this._childClusters.length-1;0<=n;n--)this._childClusters[n].getAllChildMarkers(e,t);for(var i=this._markers.length-1;0<=i;i--)t&&this._markers[i].__dragStart||e.push(this._markers[i]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),i=this._group._map,a=i.getBoundsZoom(this._bounds),o=this._zoom+1,s=i.getZoom();0<n.length&&o<a;){o++;var l=[];for(t=0;t<n.length;t++)l=l.concat(n[t]._childClusters);n=l}o<a?this._group._map.setView(this._latlng,o):a<=s?this._group._map.setView(this._latlng,s+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,i,a=this._markers,o=this._childClusters,s=0,l=0,c=this._childCount;if(0!==c){for(this._resetBounds(),e=0;e<a.length;e++)n=a[e]._latlng,this._bounds.extend(n),s+=n.lat,l+=n.lng;for(e=0;e<o.length;e++)(t=o[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,i=t._childCount,s+=n.lat*i,l+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(s/c,l/c),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,(function(e){var n,i,a=e._markers;for(n=a.length-1;0<=n;n--)(i=a[n])._icon&&(i._setPos(t),i.clusterHide())}),(function(e){var n,i,a=e._childClusters;for(n=a.length-1;0<=n;n--)(i=a[n])._icon&&(i._setPos(t),i.clusterHide())}))},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,i){this._recursively(e,i,t,(function(a){a._recursivelyAnimateChildrenIn(e,a._group._map.latLngToLayerPoint(a.getLatLng()).round(),n),a._isSingleParent()&&n-1===i?(a.clusterShow(),a._recursivelyRemoveChildrenFromMap(e,t,n)):a.clusterHide(),a._addToMap()}))},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,(function(e){e.clusterShow()}))},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,(function(i){if(t!==i._zoom)for(var a=i._markers.length-1;0<=a;a--){var o=i._markers[a];n.contains(o._latlng)&&(e&&(o._backupLatlng=o.getLatLng(),o.setLatLng(e),o.clusterHide&&o.clusterHide()),i._group._featureGroup.addLayer(o))}}),(function(t){t._addToMap(e)}))},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;0<=t;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;0<=i;i--)this._childClusters[i]._restorePosition();else for(var a=this._childClusters.length-1;0<=a;a--)this._childClusters[a]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,i){var a,o;this._recursively(e,t-1,n-1,(function(e){for(o=e._markers.length-1;0<=o;o--)a=e._markers[o],i&&i.contains(a._latlng)||(e._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())}),(function(e){for(o=e._childClusters.length-1;0<=o;o--)a=e._childClusters[o],i&&i.contains(a._latlng)||(e._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())}))},_recursively:function(e,t,n,i,a){var o,s,l=this._childClusters,c=this._zoom;if(t<=c&&(i&&i(this),a&&c===n&&a(this)),c<t||c<n)for(o=l.length-1;0<=o;o--)(s=l[o])._boundsNeedUpdate&&s._recalculateBounds(),e.intersects(s._bounds)&&s._recursively(e,t,n,i,a)},_isSingleParent:function(){return 0<this._childClusters.length&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),a=this._grid,o=a[i]=a[i]||{},s=o[n]=o[n]||[],l=L.Util.stamp(e);this._objectPoint[l]=t,s.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,i,a=this._getCoord(t.x),o=this._getCoord(t.y),s=this._grid,l=s[o]=s[o]||{},c=l[a]=l[a]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,i=c.length;n<i;n++)if(c[n]===e)return c.splice(n,1),1===i&&delete l[a],!0},eachObject:function(e,t){var n,i,a,o,s,l,c=this._grid;for(n in c)for(i in s=c[n])for(a=0,o=(l=s[i]).length;a<o;a++)e.call(t,l[a])&&(a--,o--)},getNearObject:function(e){var t,n,i,a,o,s,l,c,u=this._getCoord(e.x),d=this._getCoord(e.y),h=this._objectPoint,p=this._sqCellSize,f=null;for(t=d-1;t<=d+1;t++)if(a=this._grid[t])for(n=u-1;n<=u+1;n++)if(o=a[n])for(i=0,s=o.length;i<s;i++)l=o[i],((c=this._sqDist(h[L.Util.stamp(l)],e))<p||c<=p&&null===f)&&(p=c,f=l);return f},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,i,a,o=0,s=null,l=[];for(n=t.length-1;0<=n;n--)i=t[n],0<(a=this.getDistant(i,e))&&(l.push(i),o<a&&(o=a,s=i));return{maxPoint:s,newPoints:l}},buildConvexHull:function(e,t){var n=[],i=this.findMostDistantPointFromBaseLine(e,t);return i.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints))).concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,i=!1,a=!1,o=!1,s=null,l=null,c=null,u=null,d=null,h=null;for(t=e.length-1;0<=t;t--){var p=e[t];(!1===n||p.lat>n)&&(n=(s=p).lat),(!1===i||p.lat<i)&&(i=(l=p).lat),(!1===a||p.lng>a)&&(a=(c=p).lng),(!1===o||p.lng<o)&&(o=(u=p).lng)}return d=i!==n?(h=l,s):(h=u,c),[].concat(this.buildConvexHull([h,d],e),this.buildConvexHull([d,h],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),i=[];for(t=n.length-1;0<=t;t--)e=n[t].getLatLng(),i.push(e);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),e=(this._group._spiderfied=this)._group.options.spiderfyShapePositions?this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?this._generatePointsSpiral(t.length,n):(n.y+=10,this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,i,a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,o=this._2PI/e,s=[];for(a=Math.max(a,35),s.length=e,n=0;n<e;n++)i=this._circleStartAngle+n*o,s[n]=new L.Point(t.x+a*Math.cos(i),t.y+a*Math.sin(i))._round();return s},_generatePointsSpiral:function(e,t){var n,i=this._group.options.spiderfyDistanceMultiplier,a=i*this._spiralLengthStart,o=i*this._spiralFootSeparation,s=i*this._spiralLengthFactor*this._2PI,l=0,c=[];for(n=c.length=e;0<=n;n--)n<e&&(c[n]=new L.Point(t.x+a*Math.cos(l),t.y+a*Math.sin(l))._round()),a+=s/(l+=o/a+5e-4*n);return c},_noanimationUnspiderfy:function(){var e,t,n=this._group,i=n._map,a=n._featureGroup,o=this.getAllChildMarkers(null,!0);for(n._ignoreMove=!0,this.setOpacity(1),t=o.length-1;0<=t;t--)e=o[t],a.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(i.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:o}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,i,a,o,s=this._group,l=s._map,c=s._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(s._ignoreMove=!0,n=0;n<e.length;n++)o=l.layerPointToLatLng(t[n]),i=e[n],a=new L.Polyline([this._latlng,o],u),l.addLayer(a),i._spiderLeg=a,i._preSpiderfyLatlng=i._latlng,i.setLatLng(o),i.setZIndexOffset&&i.setZIndexOffset(1e6),c.addLayer(i);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,i,a,o,s,l,c=this,u=this._group,d=u._map,h=u._featureGroup,p=this._latlng,f=d.latLngToLayerPoint(p),m=L.Path.SVG,g=L.extend({},this._group.options.spiderLegPolylineOptions),v=g.opacity;for(void 0===v&&(v=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),m?(g.opacity=0,g.className=(g.className||"")+" leaflet-cluster-spider-leg"):g.opacity=v,u._ignoreMove=!0,n=0;n<e.length;n++)i=e[n],l=d.layerPointToLatLng(t[n]),a=new L.Polyline([p,l],g),d.addLayer(a),i._spiderLeg=a,m&&(s=(o=a._path).getTotalLength()+.1,o.style.strokeDasharray=s,o.style.strokeDashoffset=s),i.setZIndexOffset&&i.setZIndexOffset(1e6),i.clusterHide&&i.clusterHide(),h.addLayer(i),i._setPos&&i._setPos(f);for(u._forceLayout(),u._animationStart(),n=e.length-1;0<=n;n--)l=d.layerPointToLatLng(t[n]),(i=e[n])._preSpiderfyLatlng=i._latlng,i.setLatLng(l),i.clusterShow&&i.clusterShow(),m&&((o=(a=i._spiderLeg)._path).style.strokeDashoffset=0,a.setStyle({opacity:v}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout((function(){u._animationEnd(),u.fire("spiderfied",{cluster:c,markers:e})}),200)},_animationUnspiderfy:function(e){var t,n,i,a,o,s,l=this,c=this._group,u=c._map,d=c._featureGroup,h=e?u._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):u.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),f=L.Path.SVG;for(c._ignoreMove=!0,c._animationStart(),this.setOpacity(1),n=p.length-1;0<=n;n--)(t=p[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,s=!0,t._setPos&&(t._setPos(h),s=!1),t.clusterHide&&(t.clusterHide(),s=!1),s&&d.removeLayer(t),f&&(o=(a=(i=t._spiderLeg)._path).getTotalLength()+.1,a.style.strokeDashoffset=o,i.setStyle({opacity:0})));c._ignoreMove=!1,setTimeout((function(){var e=0;for(n=p.length-1;0<=n;n--)(t=p[n])._spiderLeg&&e++;for(n=p.length-1;0<=n;n--)(t=p[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),1<e&&d.removeLayer(t),u.removeLayer(t._spiderLeg),delete t._spiderLeg);c._animationEnd(),c.fire("unspiderfied",{cluster:l,markers:p})}),200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),e.MarkerClusterGroup=t,e.MarkerCluster=n,Object.defineProperty(e,"__esModule",{value:!0})}(En.exports);const kn={swipeThreshold:50,velocityThreshold:.3,longPressDelay:500,doubleTapDelay:300,pinchThreshold:.1},useGestureNavigation=(e={},t={})=>{const n={...kn,...t},i=Ut.useRef(null),a=Ut.useRef([]),o=Ut.useRef(null),s=Ut.useRef(0),l=Ut.useRef(0),c=Ut.useRef(1),u=Ut.useCallback(((e,t)=>{const n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)}),[]),d=Ut.useCallback(((e,t,n)=>{const i=t-e;return i>0?n/i:0}),[]),h=Ut.useCallback((t=>{t.preventDefault(),a.current=Array.from(t.touches);const i=t.touches[0],d=Date.now();if(d-s.current<(n.doubleTapDelay||300))return e.onDoubleTap?.(i.clientX,i.clientY),void(s.current=0);if(s.current=d,e.onLongPress&&(o.current=setTimeout((()=>{e.onLongPress?.(i.clientX,i.clientY)}),n.longPressDelay||500)),2===t.touches.length&&e.onPinchStart){const n=u(t.touches[0],t.touches[1]);l.current=n,c.current=1,e.onPinchStart(1)}}),[e,n,u]),p=Ut.useCallback((t=>{if(t.preventDefault(),o.current&&(clearTimeout(o.current),o.current=null),2===t.touches.length&&e.onPinchMove&&l.current>0){const i=u(t.touches[0],t.touches[1])/l.current;c.current=i,Math.abs(i-1)>(n.pinchThreshold||.1)&&e.onPinchMove(i)}}),[e,n,u]),f=Ut.useCallback((t=>{t.preventDefault(),o.current&&(clearTimeout(o.current),o.current=null);const i=a.current;if(0!==i.length){if(0===t.touches.length&&2===i.length&&e.onPinchEnd)return e.onPinchEnd(c.current),l.current=0,void(c.current=1);if(1===i.length&&1===t.changedTouches.length){const a=i[0],o=t.changedTouches[0],s=o.clientX-a.clientX,l=o.clientY-a.clientY,c=Math.sqrt(s*s+l*l),u=t.timeStamp||Date.now(),h=Date.now(),p=d(u,h,c);if(c>(n.swipeThreshold||50)&&p>(n.velocityThreshold||.3)){Math.abs(s)>Math.abs(l)?s>0?e.onSwipeRight?.():e.onSwipeLeft?.():l>0?e.onSwipeDown?.():e.onSwipeUp?.()}}a.current=[]}}),[e,n,d]),m=Ut.useCallback((t=>{switch(t.key){case"ArrowLeft":(t.metaKey||t.ctrlKey)&&e.onSwipeLeft?.();break;case"ArrowRight":(t.metaKey||t.ctrlKey)&&e.onSwipeRight?.();break;case"ArrowUp":(t.metaKey||t.ctrlKey)&&e.onSwipeUp?.();break;case"ArrowDown":(t.metaKey||t.ctrlKey)&&e.onSwipeDown?.();break;case" ":if(t.ctrlKey){const t=i.current?.getBoundingClientRect();t&&e.onLongPress?.(t.width/2,t.height/2)}break;case"Enter":if(t.ctrlKey){const t=i.current?.getBoundingClientRect();t&&e.onDoubleTap?.(t.width/2,t.height/2)}}}),[e]);return Ut.useEffect((()=>{const e=i.current;if(e)return e.addEventListener("touchstart",h,{passive:!1}),e.addEventListener("touchmove",p,{passive:!1}),e.addEventListener("touchend",f,{passive:!1}),e.addEventListener("keydown",m),e.addEventListener("contextmenu",(e=>e.preventDefault())),()=>{e.removeEventListener("touchstart",h),e.removeEventListener("touchmove",p),e.removeEventListener("touchend",f),e.removeEventListener("keydown",m),e.removeEventListener("contextmenu",(e=>e.preventDefault())),o.current&&clearTimeout(o.current)}}),[h,p,f,m]),{gestureRef:e=>{i.current=e},simulateSwipe:Ut.useCallback((t=>{switch(t){case"left":e.onSwipeLeft?.();break;case"right":e.onSwipeRight?.();break;case"up":e.onSwipeUp?.();break;case"down":e.onSwipeDown?.()}}),[e]),simulatePinch:Ut.useCallback((t=>{e.onPinchStart?.(1),e.onPinchMove?.(t),e.onPinchEnd?.(t)}),[e]),simulateLongPress:Ut.useCallback(((t=0,n=0)=>{e.onLongPress?.(t,n)}),[e]),simulateDoubleTap:Ut.useCallback(((t=0,n=0)=>{e.onDoubleTap?.(t,n)}),[e])}};delete Qt.Icon.Default.prototype._getIconUrl,Qt.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const MapWithClustering=({markers:i,center:a=[35.6762,139.6503],zoom:o=6,height:s="600px",enableMobileControls:l=!0,enableGestures:c=!0,enableFullscreen:u=!0,onMarkerClick:d,showLocationButton:h=!0})=>{const p=Yt(),g=e(),b=v(g.breakpoints.down("md")),[_,w]=Ut.useState(null),[S,C]=Ut.useState(!0),[O,E]=Ut.useState(null),[k,P]=Ut.useState(!1),[T,L]=Ut.useState(o),[$,I]=Ut.useState(null),[M,R]=Ut.useState(!b),{gestureRef:D}=useGestureNavigation({onPinchStart:e=>{_&&c&&_.dragging.disable()},onPinchMove:e=>{if(_&&c){const t=Math.max(2,Math.min(18,T+2*(e-1)));L(t),_.setZoom(t)}},onPinchEnd:e=>{_&&c&&_.dragging.enable()},onDoubleTap:(e,t)=>{if(_&&c){const n=[e,t],i=_.containerPointToLatLng(n);_.setView(i,Math.min(T+2,18))}},onLongPress:(e,t)=>{b&&R(!M)}}),N=Ut.useCallback((()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((e=>{const{latitude:t,longitude:n}=e.coords;I([t,n]),_&&_.setView([t,n],15)}),(e=>{console.warn("Failed to get user location:",e)}),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e5})}),[_]),z=Ut.useCallback((()=>{if(_){const e=Math.min(T+1,18);L(e),_.setZoom(e)}}),[_,T]),B=Ut.useCallback((()=>{if(_){const e=Math.max(T-1,2);L(e),_.setZoom(e)}}),[_,T]),F=Ut.useCallback((()=>{const e=document.getElementById("map-with-clustering");e&&(k?(document.exitFullscreen&&document.exitFullscreen(),P(!1)):(e.requestFullscreen&&e.requestFullscreen(),P(!0)))}),[k]);return Ut.useEffect((()=>{if(!document.getElementById("map-with-clustering"))return;_&&_.remove();const e=Qt.map("map-with-clustering",{center:a,zoom:o,scrollWheelZoom:!b,zoomControl:!l,touchZoom:c,doubleClickZoom:c,boxZoom:!1,keyboard:!1,dragging:!0,tap:b,tapTolerance:20,zoomSnap:.5,zoomDelta:.5,wheelPxPerZoomLevel:100,maxZoom:18,minZoom:2});Qt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(e);const t=Qt.markerClusterGroup({showCoverageOnHover:!1,zoomToBoundsOnClick:!0,spiderfyOnMaxZoom:!0,removeOutsideVisibleBounds:!0,animate:!0,chunkedLoading:!0,chunkInterval:200,chunkDelay:50,maxClusterRadius:80,iconCreateFunction:function(e){const t=e.getChildCount();let n="marker-cluster-small";return t>100?n="marker-cluster-large":t>50&&(n="marker-cluster-medium"),new Qt.DivIcon({html:`<div><span>${t}</span></div>`,className:`marker-cluster ${n}`,iconSize:new Qt.Point(40,40)})}});return e.addLayer(t),e.on("zoomend",(()=>{L(e.getZoom())})),b&&(e.on("movestart",(()=>{R(!1)})),e.on("moveend",(()=>{setTimeout((()=>R(!1)),2e3)}))),w(e),E(t),C(!1),()=>{e.remove()}}),[]),Ut.useEffect((()=>{if(!_||!O||!i||0===i.length)return;O.clearLayers();const e=i.filter((e=>e.position&&e.position[0]&&e.position[1]&&!isNaN(e.position[0])&&!isNaN(e.position[1]))),t=e.map((e=>{const{position:t,title:n,architect:i,year:a,category:o,tags:s,address:l,id:c}=e,u=s&&s.includes("賞")?new Qt.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}):new Qt.Icon.Default,h=Qt.marker(t,{icon:u}),p=window.innerWidth<768,f=`\n        <div style="min-width: ${p?"200px":"250px"}; max-width: ${p?"250px":"300px"}; \n                    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">\n          <h3 style="margin: 0 0 12px 0; font-size: ${p?"14px":"16px"}; font-weight: bold; line-height: 1.3;">\n            ${n}\n          </h3>\n          ${i?`\n            <div style="display: flex; align-items: center; margin-bottom: 6px; font-size: ${p?"12px":"13px"};">\n              <span style="color: #666; margin-right: 8px; min-width: 50px;">建築家:</span>\n              <span style="font-weight: 500;">${i}</span>\n            </div>\n          `:""}\n          ${a?`\n            <div style="display: flex; align-items: center; margin-bottom: 6px; font-size: ${p?"12px":"13px"};">\n              <span style="color: #666; margin-right: 8px; min-width: 50px;">竣工年:</span>\n              <span>${a}年</span>\n            </div>\n          `:""}\n          ${o?`\n            <div style="display: flex; align-items: center; margin-bottom: 6px; font-size: ${p?"12px":"13px"};">\n              <span style="color: #666; margin-right: 8px; min-width: 50px;">カテゴリ:</span>\n              <span>${o}</span>\n            </div>\n          `:""}\n          ${s?`\n            <div style="display: flex; align-items: center; margin-bottom: 6px; font-size: ${p?"12px":"13px"};">\n              <span style="color: #666; margin-right: 8px; min-width: 50px;">タグ:</span>\n              <span style="color: #ff6b00; font-weight: bold;">${s}</span>\n            </div>\n          `:""}\n          ${l?`\n            <div style="display: flex; align-items: flex-start; margin-bottom: 12px; font-size: ${p?"11px":"12px"};">\n              <span style="color: #666; margin-right: 8px; min-width: 50px; margin-top: 2px;">住所:</span>\n              <span style="line-height: 1.3;">${l}</span>\n            </div>\n          `:""}\n          <div style="text-align: center; margin-top: 16px;">\n            <button onclick="window.location.hash='/architecture/${c}'" \n              style="background: #1976d2; color: white; border: none; \n                     padding: ${p?"12px 20px":"10px 18px"}; \n                     border-radius: 6px; cursor: pointer; \n                     font-size: ${p?"14px":"13px"}; \n                     font-weight: 500; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n                     min-height: 44px; min-width: ${p?"120px":"100px"};">\n              詳細を見る\n            </button>\n          </div>\n        </div>\n      `;return h.bindPopup(f,{maxWidth:p?280:320,minWidth:p?200:250,className:"architecture-popup",closeButton:!0,autoClose:!0,keepInView:!0,offset:[0,-10]}),h.on("click",(function(){d&&d(e),b&&(R(!0),setTimeout((()=>R(!1)),3e3))})),h}));O.addLayers(t),e.length>0&&setTimeout((()=>{const e=O.getBounds();e.isValid()&&_.fitBounds(e,{padding:[50,50],maxZoom:15})}),100)}),[i,_,O,p]),Ut.useEffect((()=>{_&&a&&o&&_.setView(a,o)}),[a,o,_]),t.jsxs(n,{sx:{position:"relative",height:s,width:"100%"},children:[S&&t.jsxs(n,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t.jsx(G,{}),t.jsx(j,{children:"地図を読み込み中..."})]}),t.jsx("div",{id:"map-with-clustering",ref:D,style:{height:"100%",width:"100%",borderRadius:"4px",overflow:"hidden"}}),l&&b&&t.jsx(Q,{in:M||S,children:t.jsxs(n,{sx:{position:"absolute",top:g.spacing(2),right:g.spacing(2),display:"flex",flexDirection:"column",gap:1,zIndex:1e3},children:[t.jsx(f,{title:"ズームイン",placement:"left",children:t.jsx(ee,{size:"small",color:"primary",onClick:z,disabled:T>=18,sx:{minHeight:"48px",minWidth:"48px",boxShadow:g.shadows[6]},children:t.jsx(te,{})})}),t.jsx(f,{title:"ズームアウト",placement:"left",children:t.jsx(ee,{size:"small",color:"primary",onClick:B,disabled:T<=2,sx:{minHeight:"48px",minWidth:"48px",boxShadow:g.shadows[6]},children:t.jsx(re,{})})}),h&&t.jsx(f,{title:"現在地",placement:"left",children:t.jsx(ee,{size:"small",color:"secondary",onClick:N,sx:{minHeight:"48px",minWidth:"48px",boxShadow:g.shadows[6]},children:t.jsx(ne,{})})}),u&&t.jsx(f,{title:k?"全画面終了":"全画面表示",placement:"left",children:t.jsx(ee,{size:"small",color:"default",onClick:F,sx:{minHeight:"48px",minWidth:"48px",boxShadow:g.shadows[6]},children:k?t.jsx(A,{}):t.jsx(ie,{})})})]})}),l&&!b&&t.jsxs(n,{sx:{position:"absolute",bottom:g.spacing(2),right:g.spacing(2),display:"flex",gap:1,zIndex:1e3},children:[h&&t.jsx(f,{title:"現在地",children:t.jsx(m,{color:"primary",onClick:N,sx:{backgroundColor:"background.paper",boxShadow:g.shadows[2],"&:hover":{backgroundColor:"background.paper",boxShadow:g.shadows[4]}},children:t.jsx(ne,{})})}),u&&t.jsx(f,{title:k?"全画面終了":"全画面表示",children:t.jsx(m,{color:"default",onClick:F,sx:{backgroundColor:"background.paper",boxShadow:g.shadows[2],"&:hover":{backgroundColor:"background.paper",boxShadow:g.shadows[4]}},children:k?t.jsx(A,{}):t.jsx(ie,{})})})]}),b&&!S&&M&&t.jsx(Q,{in:M,children:t.jsx(n,{sx:{position:"absolute",bottom:g.spacing(2),left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",padding:g.spacing(1,2),borderRadius:2,zIndex:1e3,fontSize:"12px",textAlign:"center"},children:t.jsx(j,{variant:"caption",color:"inherit",children:"長押しでコントロール表示 • ピンチでズーム • ダブルタップで拡大"})})}),$&&_&&t.jsx(n,{sx:{position:"absolute",bottom:g.spacing(1),left:g.spacing(1),backgroundColor:"primary.main",color:"white",padding:g.spacing(.5,1),borderRadius:1,fontSize:"12px",zIndex:1e3},children:"現在地表示中"}),0===i.length&&!S&&t.jsxs(n,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",backgroundColor:"rgba(255, 255, 255, 0.9)",padding:3,borderRadius:1,boxShadow:2},children:[t.jsx(ae,{sx:{fontSize:48,color:"text.secondary",mb:2}}),t.jsx(j,{variant:"h6",color:"text.secondary",children:"表示する建築物がありません"}),t.jsx(j,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"フィルターを調整するか、検索条件を変更してください"})]})]})},Pn={};async function getCachedQuery(e,t,n=3e5){const i=Date.now(),a=Pn[e];if(a&&i-a.timestamp<a.ttl)return a.lastAccessed=i,a.accessCount++,console.log(`🔵 Cache hit for: ${e.substring(0,50)}...`),a.data;console.log(`🟠 Cache miss for: ${e.substring(0,50)}...`);const o=await t();return Object.keys(Pn).length>=120&&performCacheCleanup(),Pn[e]={data:o,timestamp:i,ttl:n,lastAccessed:i,accessCount:1},o}function performCacheCleanup(){const e=Date.now(),t=Object.keys(Pn),n=t.length;let i=0;t.forEach((t=>{const n=Pn[t];e-n.timestamp>n.ttl&&(delete Pn[t],i++)}));const a=Object.keys(Pn);if(a.length>100){const e=a.sort(((e,t)=>{const n=Pn[e],i=Pn[t],a=n.lastAccessed-i.lastAccessed;return 0!==a?a:n.accessCount-i.accessCount})),t=a.length-100;for(let n=0;n<t;n++)delete Pn[e[n]];console.log(`🧹 Cache cleanup: removed ${i} expired + ${t} LRU items (${n} → ${Object.keys(Pn).length})`)}else i>0&&console.log(`🧹 Cache cleanup: removed ${i} expired items (${n} → ${Object.keys(Pn).length})`)}"undefined"!=typeof window&&setInterval(performCacheCleanup,3e4);let Tn=null,Ln=null;const $n="/archi-site/".replace(/\/$/,"");async function executeQuery$1(e,t=[],n=!0){const i=n?function(e,t=[]){return`sql:${e}|params:${JSON.stringify(t)}`}(e,t):"";return n?getCachedQuery(i,(()=>executeQueryDirect(e,t)),e.trim().toLowerCase().startsWith("select")?3e5:6e4):executeQueryDirect(e,t)}async function executeQueryDirect(e,t=[]){const n=await async function(){if(Tn)return Tn;if(Ln)return Ln;let e;console.log(`Initializing database from ${$n}/db/archimap.sqlite`);try{const t=await fetch(`${$n}/db/database-info.json`);if(!t.ok)throw new Error("Could not load database metadata");{const n=await t.json();console.log(`Database info loaded - size: ${n.size} bytes, chunks: ${n.chunks}`),e={serverMode:"full",requestChunkSize:n.chunkSize||65536,url:`${$n}/db/archimap.sqlite`,suffixUrl:`${$n}/db/archimap.sqlite.suffix`,size:n.size,maxBytesToRead:n.size}}}catch(t){console.warn("Could not load database metadata, using fallback configuration:",t),e={serverMode:"full",requestChunkSize:65536,url:`${$n}/db/archimap.sqlite`,suffixUrl:`${$n}/db/archimap.sqlite.suffix`,size:12730368,maxBytesToRead:12730368}}return Ln=er.createDbWorker([{from:"chunks",config:e}],`${$n}/sqlite.worker.js`,`${$n}/sql-wasm.wasm`).then((e=>(Tn=e,console.log("Database initialized successfully"),e))).catch((e=>{throw console.error("Database initialization failed:",e),Ln=null,e})),Ln}();try{const i=await n.db.exec(e,t);if(!i||0===i.length)return[];const a=[],o=i[0].columns,s=i[0].values;for(const e of s){const t={};o.forEach(((n,i)=>{t[n]=e[i]})),a.push(t)}return a}catch(i){throw console.error("Query execution failed:",i),console.error("SQL:",e),console.error("Params:",t),i}}class AutocompleteService{static instance;searchIndex={architectures:new Map,architects:new Map,locations:new Map,categories:new Map,keywords:new Map};isIndexBuilt=!1;recentSearches=[];popularSearches=[];RECENT_SEARCHES_KEY="recent-searches";MAX_RECENT_SEARCHES=20;constructor(){this.loadRecentSearches(),this.initializePopularSearches()}static getInstance(){return AutocompleteService.instance||(AutocompleteService.instance=new AutocompleteService),AutocompleteService.instance}async getAutocompleteResults(e,t=10){if(!e||""===e.trim())return{suggestions:[],categories:[],recent:this.recentSearches.slice(0,5),popular:this.popularSearches.slice(0,5),total:0};this.isIndexBuilt||await this.buildSearchIndex();const n=this.normalizeQuery(e);return getCachedQuery(`autocomplete:${n}:${t}`,(async()=>{const e=await this.generateSuggestions(n,t);return{suggestions:e,categories:await this.getCategorySuggestions(n),recent:this.getRecentSuggestions(n),popular:this.getPopularSuggestions(n),total:e.length}}),3e4)}async buildSearchIndex(){console.log("Building autocomplete search index...");try{await this.indexArchitectures(),await this.indexArchitects(),await this.indexLocations(),await this.indexCategories(),await this.buildKeywordMappings(),this.isIndexBuilt=!0,console.log("Search index built successfully")}catch(e){throw console.error("Failed to build search index:",e),e}}async indexArchitectures(){const e=await executeQuery$1("\n      SELECT \n        Z_PK as id,\n        ZAR_TITLE as name,\n        ZAR_ARCHITECT as architectName,\n        ZAR_PREFECTURE as prefecture,\n        ZAR_CATEGORY as category\n      FROM ZCDARCHITECTURE\n      WHERE ZAR_TITLE IS NOT NULL \n        AND ZAR_TITLE != ''\n        AND ZAR_TAG NOT LIKE '%の追加建築%'\n      ORDER BY ZAR_TITLE\n    ",[],!1),t=new Map;e.forEach((e=>{const n=t.get(e.name)||0;t.set(e.name,n+1)})),e.forEach((e=>{const n={id:`arch-${e.id}`,text:e.name,type:"architecture",count:t.get(e.name)||1,icon:"architecture",relevanceScore:this.calculateRelevanceScore(e.name,"architecture")};this.searchIndex.architectures.set(e.name.toLowerCase(),n),this.addSearchVariations(e.name,n)}))}async indexArchitects(){(await executeQuery$1("\n      SELECT DISTINCT\n        Z_PK as id,\n        ZAT_ARCHITECT as name,\n        ZAT_OFFICE as office\n      FROM ZCDARCHITECT\n      WHERE ZAT_ARCHITECT IS NOT NULL \n        AND ZAT_ARCHITECT != ''\n      ORDER BY ZAT_ARCHITECT\n    ",[],!1)).forEach((e=>{const t={id:`architect-${e.id}`,text:e.name,type:"architect",count:1,icon:"person",relevanceScore:this.calculateRelevanceScore(e.name,"architect")};if(this.searchIndex.architects.set(e.name.toLowerCase(),t),e.office&&e.office!==e.name){const t={id:`office-${e.id}`,text:e.office,type:"architect",count:1,icon:"business",relevanceScore:this.calculateRelevanceScore(e.office,"architect")};this.searchIndex.architects.set(e.office.toLowerCase(),t),this.addSearchVariations(e.office,t)}this.addSearchVariations(e.name,t)}))}async indexLocations(){(await executeQuery$1("\n      SELECT \n        ZAR_PREFECTURE as prefecture,\n        COUNT(*) as count\n      FROM ZCDARCHITECTURE\n      WHERE ZAR_PREFECTURE IS NOT NULL \n        AND ZAR_PREFECTURE != ''\n        AND ZAR_TAG NOT LIKE '%の追加建築%'\n      GROUP BY ZAR_PREFECTURE\n      ORDER BY count DESC\n    ",[],!1)).forEach((e=>{const t={id:`location-${e.prefecture}`,text:e.prefecture,type:"location",count:e.count,icon:"location_on",relevanceScore:this.calculateRelevanceScore(e.prefecture,"location")};this.searchIndex.locations.set(e.prefecture.toLowerCase(),t),this.addSearchVariations(e.prefecture,t)}))}async indexCategories(){(await executeQuery$1("\n      SELECT \n        ZAR_CATEGORY as category,\n        ZAR_BIGCATEGORY as bigCategory,\n        COUNT(*) as count\n      FROM ZCDARCHITECTURE\n      WHERE ZAR_CATEGORY IS NOT NULL \n        AND ZAR_CATEGORY != ''\n        AND ZAR_TAG NOT LIKE '%の追加建築%'\n      GROUP BY ZAR_CATEGORY, ZAR_BIGCATEGORY\n      ORDER BY count DESC\n    ",[],!1)).forEach((e=>{const t={id:`category-${e.category}`,text:e.category,type:"category",count:e.count,icon:"category",relevanceScore:this.calculateRelevanceScore(e.category,"category")};if(this.searchIndex.categories.set(e.category.toLowerCase(),t),this.addSearchVariations(e.category,t),e.bigCategory&&e.bigCategory!==e.category){const t={id:`bigcategory-${e.bigCategory}`,text:e.bigCategory,type:"category",count:e.count,icon:"category",relevanceScore:this.calculateRelevanceScore(e.bigCategory,"category")};this.searchIndex.categories.set(e.bigCategory.toLowerCase(),t),this.addSearchVariations(e.bigCategory,t)}}))}async buildKeywordMappings(){[...this.searchIndex.architectures.values(),...this.searchIndex.architects.values(),...this.searchIndex.locations.values(),...this.searchIndex.categories.values()].forEach((e=>{this.extractKeywords(e.text).forEach((t=>{const n=this.searchIndex.keywords.get(t)||[];n.push(e),this.searchIndex.keywords.set(t,n)}))}))}async generateSuggestions(e,t){const n=[],i=e.toLowerCase(),a=this.findExactMatches(i);n.push(...a);const o=this.findStartsWithMatches(i);n.push(...o.filter((e=>!n.some((t=>t.id===e.id)))));const s=this.findContainsMatches(i);n.push(...s.filter((e=>!n.some((t=>t.id===e.id)))));const l=this.findFuzzyMatches(i);return n.push(...l.filter((e=>!n.some((t=>t.id===e.id))))),n.sort(((e,t)=>(t.relevanceScore||0)-(e.relevanceScore||0))).slice(0,t)}findExactMatches(e){const t=[];return[this.searchIndex.architectures,this.searchIndex.architects,this.searchIndex.locations,this.searchIndex.categories].forEach((n=>{const i=n.get(e);i&&t.push({...i,relevanceScore:(i.relevanceScore||0)+100})})),t}findStartsWithMatches(e){const t=[];return[this.searchIndex.architectures,this.searchIndex.architects,this.searchIndex.locations,this.searchIndex.categories].forEach((n=>{n.forEach(((n,i)=>{i.startsWith(e)&&i!==e&&t.push({...n,relevanceScore:(n.relevanceScore||0)+50})}))})),t}findContainsMatches(e){const t=[];return[this.searchIndex.architectures,this.searchIndex.architects,this.searchIndex.locations,this.searchIndex.categories].forEach((n=>{n.forEach(((n,i)=>{i.includes(e)&&!i.startsWith(e)&&t.push({...n,relevanceScore:(n.relevanceScore||0)+25})}))})),t}findFuzzyMatches(e){const t=[];return this.extractKeywords(e).forEach((e=>{(this.searchIndex.keywords.get(e)||[]).forEach((e=>{t.push({...e,relevanceScore:(e.relevanceScore||0)+10})}))})),t}async getCategorySuggestions(e){return[]}getRecentSuggestions(e){return this.recentSearches.filter((t=>t.query.toLowerCase().includes(e.toLowerCase()))).slice(0,3)}getPopularSuggestions(e){return this.popularSearches.filter((t=>t.query.toLowerCase().includes(e.toLowerCase()))).slice(0,3)}calculateRelevanceScore(e,t){let n=0;switch(t){case"architecture":n+=50;break;case"architect":n+=40;break;case"location":n+=30;break;case"category":n+=20}return n+=Math.max(0,50-e.length),n}addSearchVariations(e,t){this.generateTextVariations(e).forEach((e=>{this.searchIndex.keywords.has(e)||this.searchIndex.keywords.set(e,[]),this.searchIndex.keywords.get(e).push(t)}))}generateTextVariations(e){const t=new Set,n=this.normalizeQuery(e);t.add(n);const i=this.extractKeywords(n);if(i.forEach((e=>t.add(e))),i.length>1)for(let a=0;a<i.length-1;a++)t.add(i.slice(a,a+2).join(" "));return Array.from(t)}extractKeywords(e){return e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter((e=>e.length>1)).filter((e=>!this.isStopWord(e)))}isStopWord(e){return["の","に","を","は","が","で","と","から","まで","より"].includes(e)}normalizeQuery(e){return e.toLowerCase().trim().replace(/\s+/g," ")}addRecentSearch(e,t){const n={query:e,timestamp:Date.now(),resultCount:t};this.recentSearches=this.recentSearches.filter((t=>t.query!==e)),this.recentSearches.unshift(n),this.recentSearches=this.recentSearches.slice(0,this.MAX_RECENT_SEARCHES),this.saveRecentSearches()}loadRecentSearches(){try{const e=localStorage.getItem(this.RECENT_SEARCHES_KEY);e&&(this.recentSearches=JSON.parse(e))}catch(e){console.warn("Failed to load recent searches:",e),this.recentSearches=[]}}saveRecentSearches(){try{localStorage.setItem(this.RECENT_SEARCHES_KEY,JSON.stringify(this.recentSearches))}catch(e){console.warn("Failed to save recent searches:",e)}}initializePopularSearches(){this.popularSearches=[{query:"東京",searchCount:1500,trend:"stable"},{query:"安藤忠雄",searchCount:1200,trend:"rising"},{query:"住宅",searchCount:1e3,trend:"stable"},{query:"大阪",searchCount:800,trend:"stable"},{query:"隈研吾",searchCount:750,trend:"rising"}]}async refreshIndex(){this.searchIndex={architectures:new Map,architects:new Map,locations:new Map,categories:new Map,keywords:new Map},this.isIndexBuilt=!1,await this.buildSearchIndex()}}const TouchOptimizedSearchBar=({onSearch:i,onVoiceSearch:a,onCameraSearch:o,onRandomDiscovery:s,placeholder:l="建築名、建築家、場所で検索...",autoFocus:c=!1,gestureEnabled:u=!0,showAdvancedOptions:d=!0,recentSearches:h=[],value:p,onChange:f})=>{const g=e(),b=v(g.breakpoints.down("md")),_="ontouchstart"in window,[w,S]=Ut.useState(p||""),[A,C]=Ut.useState([]),[O,E]=Ut.useState(!1),[k,P]=Ut.useState(!1),[T,L]=Ut.useState(!1),$=Ut.useRef(null),I=Ut.useRef(),M=Ut.useRef(new AutocompleteService);useGestureNavigation();const{triggerHapticFeedback:R}=(()=>{const e=Ut.useRef(0),t={isSupported:"undefined"!=typeof navigator&&("vibrate"in navigator||"hapticFeedback"in navigator||"getGamepads"in navigator),hasVibrationAPI:"undefined"!=typeof navigator&&"vibrate"in navigator,hasHapticFeedback:"undefined"!=typeof navigator&&"hapticFeedback"in navigator,hasGamepadVibration:"undefined"!=typeof navigator&&"getGamepads"in navigator,supportsIntensity:!1,supportsDuration:"undefined"!=typeof navigator&&"vibrate"in navigator},n=Ut.useCallback((()=>{if(!t.hasVibrationAPI)return!1;try{return!1!==navigator.vibrate([1])}catch{return!1}}),[t.hasVibrationAPI]),i=Ut.useCallback((e=>{switch(e){case"selection":case"light":return 10;case"impact":case"medium":default:return 25;case"heavy":return 50;case"notification":return[50,50,50];case"success":return[25,25,25,25,25];case"warning":return[100,50,100];case"error":return[200,100,200,100,200]}}),[]),a=Ut.useCallback((e=>{if("undefined"!=typeof window&&window.TapticEngine)try{switch(e){case"selection":return window.TapticEngine.selection(),!0;case"impact":case"light":return window.TapticEngine.impact({style:"light"}),!0;case"medium":return window.TapticEngine.impact({style:"medium"}),!0;case"heavy":return window.TapticEngine.impact({style:"heavy"}),!0;case"notification":case"success":return window.TapticEngine.notification({type:"success"}),!0;case"warning":return window.TapticEngine.notification({type:"warning"}),!0;case"error":return window.TapticEngine.notification({type:"error"}),!0}}catch(t){console.debug("iOS Haptic feedback failed:",t)}return!1}),[]),o=Ut.useCallback((e=>{if("undefined"!=typeof window&&window.AndroidInterface?.hapticFeedback)try{const t="selection"===e?"VIRTUAL_KEY":"impact"===e?"LONG_PRESS":"success"===e?"CONTEXT_CLICK":"VIRTUAL_KEY";return window.AndroidInterface.hapticFeedback(t),!0}catch(t){console.debug("Android Haptic feedback failed:",t)}return!1}),[]),s=Ut.useCallback(((e,n)=>{if(!t.hasGamepadVibration)return!1;try{const t=navigator.getGamepads();for(const i of t)if(i&&i.vibrationActuator){const t=n.intensity||.5,a=n.duration||100;let o=0,s=0;switch(e){case"light":case"selection":o=.3*t;break;case"medium":case"impact":s=.5*t;break;case"heavy":case"error":s=.8*t;break;case"success":o=.4*t,s=.2*t}return i.vibrationActuator.playEffect("dual-rumble",{duration:a,weakMagnitude:o,strongMagnitude:s}),!0}}catch(i){console.debug("Gamepad vibration failed:",i)}return!1}),[t.hasGamepadVibration]),l=Ut.useCallback((e=>{if(!t.hasVibrationAPI)return!1;try{const t=i(e);return!1!==navigator.vibrate(t)}catch(n){return console.debug("Web vibration failed:",n),!1}}),[t.hasVibrationAPI,i]),c=Ut.useCallback((e=>{try{const t=new(window.AudioContext||window.webkitAudioContext),n=t.createOscillator(),i=t.createGain();n.connect(i),i.connect(t.destination);let a=200,o=.05,s=.1;switch(e){case"selection":case"light":a=400,o=.02,s=.05;break;case"impact":case"medium":a=300,o=.05,s=.08;break;case"heavy":case"error":a=150,o=.1,s=.1;break;case"success":a=500,o=.08,s=.06}return n.frequency.setValueAtTime(a,t.currentTime),i.gain.setValueAtTime(s,t.currentTime),i.gain.exponentialRampToValueAtTime(.01,t.currentTime+o),n.start(t.currentTime),n.stop(t.currentTime+o),!0}catch(t){return console.debug("Audio fallback failed:",t),!1}}),[]),u=Ut.useCallback((e=>{try{const t=document.createElement("div");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="9999",t.style.transition="opacity 0.1s ease-out";let n="rgba(255, 255, 255, 0.1)";switch(e){case"success":n="rgba(76, 175, 80, 0.1)";break;case"warning":n="rgba(255, 193, 7, 0.1)";break;case"error":n="rgba(244, 67, 54, 0.1)"}return t.style.backgroundColor=n,document.body.appendChild(t),requestAnimationFrame((()=>{t.style.opacity="0",setTimeout((()=>{document.body.removeChild(t)}),100)})),!0}catch(t){return console.debug("Visual fallback failed:",t),!1}}),[]),d=Ut.useCallback(((t,n={})=>{const i=Date.now();if(i-e.current<50)return!1;e.current=i;const{fallback:d=!0}=n;return!!a(t)||!!o(t)||!!s(t,n)||!!l(t)||!!d&&("selection"===t||"light"===t?c(t):"success"===t||"warning"===t||"error"===t?u(t):c(t))}),[a,o,s,l,c,u]),h=Ut.useCallback((()=>d("selection")),[d]),p=Ut.useCallback(((e="medium")=>d(e)),[d]),f=Ut.useCallback(((e="success")=>d(e)),[d]),m=Ut.useCallback((async()=>{const e={...t};if(t.hasVibrationAPI&&(e.supportsDuration=n()),t.hasGamepadVibration)try{const t=navigator.getGamepads();e.hasGamepadVibration=Array.from(t).some((e=>e?.vibrationActuator))}catch{e.hasGamepadVibration=!1}return e}),[t,n]);return{triggerHapticFeedback:d,triggerSelectionFeedback:h,triggerImpactFeedback:p,triggerNotificationFeedback:f,testHapticSupport:m,capabilities:t,isSupported:t.isSupported}})(),D=void 0!==p?p:w,handleValueChange=e=>{void 0!==p?f?.(e):S(e)},N=Ut.useCallback((async e=>{if(e.length<2)return C([]),void E(!1);try{P(!0);const t=await M.current.getAutocompleteResults(e,8);C(t.suggestions),E(!0)}catch(t){console.error("Autocomplete error:",t),C([])}finally{P(!1)}}),[]),z=Ut.useCallback((e=>{const t=e||D;t.trim()&&(_&&R("selection"),i(t.trim()),E(!1),h.includes(t.trim())||console.log("Adding to recent searches:",t.trim()))}),[D,i,_,R,h]),handleSuggestionClick=e=>{handleValueChange(e.text),z(e.text),_&&R("impact")},handleClear=()=>{handleValueChange(""),C([]),E(!1),$.current?.focus(),_&&R("selection")};return Ut.useEffect((()=>()=>{I.current&&clearTimeout(I.current)}),[]),t.jsxs(n,{sx:{position:"relative",width:"100%"},children:[t.jsx(K,{ref:$,fullWidth:!0,value:D,onChange:e=>{const t=e.target.value;handleValueChange(t),I.current&&clearTimeout(I.current),I.current=setTimeout((()=>{N(t)}),300)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),z()):"Escape"===e.key&&E(!1)},onTouchStart:e=>{if(!u)return;const t=e.touches[0].clientX,handleGestureMove=e=>{e.touches[0].clientX-t>100&&D&&(handleClear(),document.removeEventListener("touchmove",handleGestureMove),document.removeEventListener("touchend",handleGestureEnd))},handleGestureEnd=()=>{document.removeEventListener("touchmove",handleGestureMove),document.removeEventListener("touchend",handleGestureEnd)};document.addEventListener("touchmove",handleGestureMove),document.addEventListener("touchend",handleGestureEnd)},placeholder:l,autoFocus:c,"data-testid":"search-bar",InputProps:{startAdornment:t.jsx(oe,{position:"start",children:t.jsx(W,{sx:{color:g.palette.text.secondary,fontSize:b?24:20}})}),endAdornment:t.jsx(oe,{position:"end",children:t.jsxs(n,{sx:{display:"flex",gap:.5},children:[D&&t.jsx(m,{onClick:handleClear,size:b?"medium":"small","aria-label":"検索をクリア",sx:{minWidth:44,minHeight:44,"@media (max-width:600px)":{minWidth:48,minHeight:48}},children:t.jsx(se,{})}),d&&t.jsxs(t.Fragment,{children:[a&&t.jsx(m,{onClick:()=>{_&&R("impact"),a?.()},size:b?"medium":"small","aria-label":"音声検索",sx:{minWidth:44,minHeight:44,"@media (max-width:600px)":{minWidth:48,minHeight:48}},children:t.jsx(le,{})}),o&&t.jsx(m,{onClick:()=>{_&&R("impact"),o?.()},size:b?"medium":"small","aria-label":"画像検索",sx:{minWidth:44,minHeight:44,"@media (max-width:600px)":{minWidth:48,minHeight:48}},children:t.jsx(ce,{})}),s&&t.jsx(m,{onClick:()=>{_&&R("success"),s?.()},size:b?"medium":"small","aria-label":"ランダム発見",sx:{minWidth:44,minHeight:44,"@media (max-width:600px)":{minWidth:48,minHeight:48}},children:t.jsx(ue,{})})]})]})}),sx:{borderRadius:3,backgroundColor:g.palette.background.paper,"& .MuiOutlinedInput-input":{padding:b?"16px 14px":"12px 14px",fontSize:b?16:14},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:g.palette.secondary.main,borderWidth:2},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:g.palette.primary.main,borderWidth:2}}}}),!D&&h.length>0&&t.jsx(F,{in:!O,children:t.jsxs(n,{sx:{mt:1,display:"flex",flexWrap:"wrap",gap:1,maxHeight:T?"none":60,overflow:"hidden"},children:[t.jsx(j,{variant:"caption",sx:{width:"100%",color:"text.secondary"},children:"最近の検索"}),h.slice(0,T?void 0:3).map(((e,n)=>t.jsx(U,{label:e,size:"small",onClick:()=>handleSuggestionClick({text:e}),sx:{height:32,fontSize:"0.875rem","&:hover":{backgroundColor:g.palette.action.hover},"&:active":{transform:"scale(0.95)"}}},n))),h.length>3&&t.jsx(U,{label:T?"折りたたむ":`他${h.length-3}件`,size:"small",variant:"outlined",onClick:()=>L(!T)})]})}),O&&A.length>0&&t.jsx(F,{in:O,children:t.jsx(n,{sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,mt:1,backgroundColor:g.palette.background.paper,borderRadius:2,boxShadow:g.shadows[8],border:`1px solid ${g.palette.divider}`,maxHeight:300,overflow:"auto"},"data-testid":"autocomplete-suggestions",children:A.map(((e,i)=>t.jsxs(n,{onClick:()=>handleSuggestionClick(e),"data-testid":"suggestion-item",sx:{p:2,cursor:"pointer",display:"flex",alignItems:"center",gap:2,minHeight:48,borderBottom:i<A.length-1?`1px solid ${g.palette.divider}`:"none","&:hover":{backgroundColor:g.palette.action.hover},"&:active":{backgroundColor:g.palette.action.selected,transform:"scale(0.98)"},transition:"all 0.1s ease-in-out"},children:[t.jsx(W,{sx:{color:"text.secondary",fontSize:20}}),t.jsxs(n,{sx:{flex:1},children:[t.jsx(j,{variant:"body2",sx:{fontWeight:500},children:e.text}),t.jsxs(j,{variant:"caption",sx:{color:"text.secondary"},children:["architecture"===e.type&&"建築","architect"===e.type&&"建築家","location"===e.type&&"場所","category"===e.type&&"カテゴリ",e.count>0&&` • ${e.count}件`]})]})]},e.id)))})})]})},ArchitecturePageEnhanced=()=>{const[e,a]=Ut.useState([]),[o,s]=Ut.useState(!0),[c,u]=Ut.useState(!0),[h,p]=Ut.useState(0),[g,v]=Ut.useState(1),[b,_]=Ut.useState(null),[w,S]=Ut.useState(""),[k,P]=Ut.useState("year_desc"),[T,L]=Ut.useState(null),[I,M]=Ut.useState(!0),[F,K]=Ut.useState("grid"),[W,G]=Ut.useState([]),[Y,V]=Ut.useState([]),[X,Q]=Ut.useState([]),[ee,te]=Ut.useState(!1),re="grid"===F?12:"list"===F?20:200,ne=Wt(),ie=Yt(),{gestureRef:oe}=useGestureNavigation({onSwipeLeft:()=>{g<Math.ceil(h/re)&&handlePageChange(null,g+1)},onSwipeRight:()=>{g>1&&handlePageChange(null,g-1)},onSwipeUp:()=>{const e=["grid","list","map"],t=(e.indexOf(F)+1)%e.length;K(e[t])},onSwipeDown:()=>{(b||w||W.length>0)&&handleClearFilters()}}),le=Ut.useCallback((e=>{V((t=>{const n=t.filter((t=>t.value!==e.value)),i=[e,...n].slice(0,5);try{localStorage.setItem("archi-recent-searches",JSON.stringify(i))}catch(Hp){console.warn("Failed to save recent searches to localStorage")}return i}))}),[]);Ut.useEffect((()=>{try{const e=localStorage.getItem("archi-recent-searches");e&&V(JSON.parse(e))}catch(Hp){console.warn("Failed to load recent searches from localStorage")}}),[]),Ut.useEffect((()=>{if(T){const e=[...T.architects.slice(0,3).map((e=>({label:e.name,value:`architect:${e.name}`,category:"建築家",icon:"👨‍🎨",count:e.count,type:"trending"}))),...T.regionalAnalysis.slice(0,2).map((e=>({label:e.prefecture,value:`prefecture:${e.prefecture}`,category:"地域",icon:"📍",count:e.projectCount,type:"trending"})))];Q(e)}}),[T]);const ce=Ut.useCallback((e=>{te(!0),S(e),setTimeout((()=>{te(!1)}),300)}),[]),ue=Ut.useCallback((()=>{console.log("Voice search activated")}),[]),Ce=Ut.useCallback((()=>{console.log("Camera search activated");const e=document.createElement("input");e.type="file",e.accept="image/*",e.capture="environment",e.onchange=async e=>{const t=e.target.files?.[0];if(t)try{const e=URL.createObjectURL(t),n=prompt("画像が選択されました。検索キーワードを入力してください（将来的には自動認識されます）:");n&&(S(n),ce(n)),URL.revokeObjectURL(e)}catch(n){console.error("Camera search error:",n),alert("画像の処理中にエラーが発生しました")}},e.click()}),[ce]);Ut.useEffect((()=>{(async()=>{try{u(!0);const e=await getResearchAnalytics();L(e)}catch(e){console.error("初期データ取得エラー:",e),L({awards:[],architects:[],temporalAnalysis:[],regionalAnalysis:[],buildingTypeEvolution:[],professionalNetworks:[]})}finally{u(!1)}})()}),[]);const Oe=Ut.useMemo((()=>{if(!T)return[];const e=[];return T.awards.slice(0,5).forEach((t=>{e.push({label:t.name,value:`tag:${t.name}`,category:"建築賞",icon:"🏆",count:t.count})})),T.architects.slice(0,10).forEach((t=>{e.push({label:t.name,value:`architect:${t.name}`,category:"建築家",icon:"👨‍💼",count:t.projectCount})})),T.buildingTypeEvolution.slice(0,8).forEach((t=>{e.push({label:t.category,value:`category:${t.category}`,category:"カテゴリ",icon:"🏛️",count:t.totalCount})})),T.regionalAnalysis.slice(0,8).forEach((t=>{e.push({label:t.prefecture,value:`prefecture:${t.prefecture}`,category:"地域",icon:"📍",count:t.projectCount})})),T.temporalAnalysis.forEach((t=>{const n=t.decade.replace("年代","");e.push({label:t.decade,value:`year:${n}`,category:"年代",icon:"📅",count:t.projectCount})})),e}),[T]),Ee=Ut.useMemo((()=>T?{topAwards:T.awards.slice(0,3),topArchitects:T.architects.slice(0,5),popularCategories:T.buildingTypeEvolution.slice(0,5),recentTrends:T.temporalAnalysis.slice(-3).reverse()}:null),[T]),fetchArchitectures=async(e,t="",n=k)=>{s(!0);try{let n;if(t&&""!==t.trim())if(t.startsWith("tag:")){const i=t.substring(4).trim();n=await searchArchitectures("",{tag:i},e,re)}else if(t.startsWith("year:")){const i=parseInt(t.substring(5).trim());n=await searchArchitectures("",{year:i},e,re)}else if(t.startsWith("architect:")){const i=t.substring(10).trim();n=await searchArchitectures("",{architect:i},e,re)}else if(t.startsWith("category:")){const i=t.substring(9).trim();n=await searchArchitectures("",{category:i},e,re)}else if(t.startsWith("prefecture:")){const i=t.substring(11).trim();n=await searchArchitectures(i,{},e,re)}else n=await searchArchitectures(t,{},e,re);else n=await getAllArchitectures$1(e,re);a(n.results),p(n.total),v(e)}catch(i){console.error("Error fetching architectures:",i),a([]),p(0)}finally{s(!1)}};Ut.useEffect((()=>{const e=new URLSearchParams(ne.search),t=[];let n="";[{param:"tag",type:"賞/タグ",prefix:"tag:"},{param:"architect",type:"建築家",prefix:"architect:"},{param:"category",type:"カテゴリ",prefix:"category:"},{param:"prefecture",type:"地域",prefix:"prefecture:"},{param:"year",type:"年",prefix:"year:"}].forEach((({param:i,type:a,prefix:o})=>{const s=e.get(i);s&&(t.push({type:a,value:s,label:s}),n||(n=`${o}${s}`))}));const i=e.get("search");if(i&&!n){n=i;const e=Oe.find((e=>e.value===i));e?_(e):S(i)}const a=e.get("sort");a&&P(a),G(t),n||t.length>0?fetchArchitectures(1,n||t[0]?.prefix+t[0]?.value,a||k):fetchArchitectures(1,"",a||k)}),[ne.search,Oe,k]);const handlePageChange=(e,t)=>{v(t);fetchArchitectures(t,b?.value||w,k),window.scrollTo(0,0)},handleSearch=e=>{if(_(e),e){const t=new URLSearchParams,[n,...i]=e.value.split(":"),a=i.join(":");"tag"===n?t.set("tag",a):"architect"===n?t.set("architect",a):"category"===n?t.set("category",a):"prefecture"===n?t.set("prefecture",a):"year"===n?t.set("year",a):t.set("search",e.value),"year_desc"!==k&&t.set("sort",k),ie({search:t.toString()})}else if(w){const e=new URLSearchParams;e.set("search",w),"year_desc"!==k&&e.set("sort",k),ie({search:e.toString()})}},ke=Ut.useCallback((e=>{e&&le(e),handleSearch(e)}),[le,handleSearch]),handleClearFilters=()=>{_(null),S(""),G([]),P("year_desc"),ie({search:""})},handleQuickFilter=(e,t)=>{const n=new URLSearchParams;"award"===e?n.set("tag",t):"architect"===e?n.set("architect",t):"category"===e?n.set("category",t):"decade"===e&&n.set("year",t.replace("年代","")),"year_desc"!==k&&n.set("sort",k),ie({search:n.toString()})},Pe=Math.ceil(h/re);return t.jsxs(R,{maxWidth:"xl",sx:{py:4},ref:oe,children:[t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(j,{variant:"h4",component:"h1",children:"建築作品一覧"}),t.jsxs(de,{value:F,exclusive:!0,onChange:(e,t)=>{if(t&&(K(t),"map"===t)){fetchArchitectures(g,b?.value||w,k)}},size:"small",children:[t.jsx(he,{value:"grid","aria-label":"カードビュー",children:t.jsx(f,{title:"カードビュー",children:t.jsx(pe,{})})}),t.jsx(he,{value:"list","aria-label":"リストビュー",children:t.jsx(f,{title:"リストビュー",children:t.jsx(fe,{})})}),t.jsx(he,{value:"map","aria-label":"マップビュー",children:t.jsx(f,{title:"マップビュー",children:t.jsx($,{})})})]})]}),t.jsxs(D,{container:!0,spacing:3,children:[t.jsxs(D,{item:!0,xs:12,lg:I?9:12,children:[t.jsxs(H,{sx:{p:3,mb:3},children:[t.jsxs(n,{sx:{mb:3},children:[t.jsx(TouchOptimizedSearchBar,{value:b,onSearch:ke,onInputChange:ce,inputValue:w,suggestions:Oe,loading:ee,placeholder:"建築作品、建築家、場所を検索...",onVoiceSearch:ue,onCameraSearch:Ce,recentSearches:Y,trendingSearches:X}),t.jsxs(n,{sx:{display:"flex",gap:2,mt:2},children:[t.jsx(i,{variant:"contained",onClick:()=>handleSearch(b),disabled:!b&&!w,children:"検索"}),t.jsxs(me,{size:"small",sx:{minWidth:120},children:[t.jsx(ge,{children:"並び替え"}),t.jsxs(ye,{value:k,label:"並び替え",onChange:e=>{const t=e.target.value;P(t);const n=new URLSearchParams(ne.search);"year_desc"!==t?n.set("sort",t):n.delete("sort"),ie({search:n.toString()})},startAdornment:t.jsx(xe,{sx:{mr:1,color:"action.active"}}),children:[t.jsx(l,{value:"year_desc",children:"新しい順"}),t.jsx(l,{value:"year_asc",children:"古い順"}),t.jsx(l,{value:"name_asc",children:"名前順"})]})]})]})]}),W.length>0&&t.jsxs(n,{sx:{mb:3},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[t.jsx(ve,{color:"action"}),t.jsx(j,{variant:"body2",color:"text.secondary",children:"絞り込み条件:"})]}),t.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[W.map(((e,n)=>t.jsx(U,{label:`${e.type}: ${e.label}`,onDelete:()=>(e=>{const t=new URLSearchParams(ne.search);["tag","architect","category","prefecture","year"].forEach((n=>{t.get(n)===e.value&&t.delete(n)})),ie({search:t.toString()})})(e),color:"primary",variant:"outlined"},n))),t.jsx(i,{size:"small",startIcon:t.jsx(se,{}),onClick:handleClearFilters,children:"すべてクリア"})]})]}),t.jsx(n,{sx:{mb:2},children:t.jsxs(j,{variant:"body2",color:"text.secondary",children:[h.toLocaleString(),"件の建築作品",W.length>0&&" (絞り込み結果)","map"===F&&e.filter((e=>e.latitude&&e.longitude)).length<e.length&&` - ${e.filter((e=>e.latitude&&e.longitude)).length}件を地図に表示`]})})]}),o?"list"===F?t.jsx(H,{sx:{p:2},children:[...Array(re)].map(((e,i)=>t.jsxs(n,{sx:{mb:2},children:[t.jsx(N,{variant:"text",height:40}),t.jsx(N,{variant:"text",height:20,width:"60%"})]},i)))}):"grid"===F?t.jsx(D,{container:!0,spacing:2,children:[...Array(re)].map(((e,n)=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(N,{variant:"rectangular",height:300})},n)))}):t.jsx(N,{variant:"rectangular",height:600}):"list"===F?t.jsx(H,{sx:{p:2},children:t.jsx(O,{children:e.map(((i,a)=>t.jsxs(Kt.Fragment,{children:[t.jsx(E,{alignItems:"flex-start",component:Ht,to:`/architecture/${i.id}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"action.hover"}},children:t.jsx(d,{primary:t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(j,{variant:"h6",component:"span",children:i.title}),i.tags&&t.jsx(U,{label:i.tags,size:"small",color:"warning",variant:"outlined",icon:t.jsx(we,{}),onClick:e=>{e.preventDefault(),e.stopPropagation(),handleQuickFilter("award",i.tags)}})]}),secondary:t.jsx(n,{sx:{mt:1},children:t.jsxs(D,{container:!0,spacing:2,children:[i.architect&&t.jsx(D,{item:!0,xs:12,sm:4,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(be,{sx:{mr:.5,color:"text.secondary",fontSize:16}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:i.architect})]})}),i.year&&t.jsx(D,{item:!0,xs:12,sm:2,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(_e,{sx:{mr:.5,color:"text.secondary",fontSize:16}}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[i.year,"年"]})]})}),i.category&&t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(je,{sx:{mr:.5,color:"text.secondary",fontSize:16}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:i.category})]})}),i.address&&t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(ae,{sx:{mr:.5,color:"text.secondary",fontSize:16}}),t.jsx(j,{variant:"body2",color:"text.secondary",noWrap:!0,children:i.address})]})})]})})})}),a<e.length-1&&t.jsx(C,{component:"li"})]},i.id)))})}):"map"===F?t.jsx(H,{sx:{height:"600px",overflow:"hidden",position:"relative"},children:t.jsx(MapWithClustering,{markers:e.filter((e=>e.latitude&&e.longitude)).map((e=>({id:e.id,position:[e.latitude,e.longitude],title:e.title,architect:e.architect,year:e.year,category:e.category,tags:e.tags,address:e.address}))),center:W.some((e=>"地域"===e.type))||e.filter((e=>e.latitude&&e.longitude)).length>0?void 0:[35.6762,139.6503],zoom:W.some((e=>"地域"===e.type))?10:W.length>0?8:6,height:"600px",onMarkerClick:e=>{ie(`/architecture/${e}`)}})}):t.jsxs(t.Fragment,{children:[t.jsx(D,{container:!0,spacing:2,children:e.map((e=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(z,{children:t.jsx(J,{component:Ht,to:`/architecture/${e.id}`,children:t.jsxs(B,{children:[t.jsx(j,{variant:"h6",component:"h2",gutterBottom:!0,children:e.title}),t.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.architect&&t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(be,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:e.architect})]}),e.year&&t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(_e,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[e.year,"年"]})]}),e.address&&t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(ae,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t.jsx(j,{variant:"body2",color:"text.secondary",noWrap:!0,children:e.address})]}),e.category&&t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(je,{sx:{mr:1,color:"text.secondary",fontSize:20}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:e.category})]}),e.tags&&t.jsxs(n,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:.5,mt:1},children:[t.jsx(we,{sx:{mr:1,color:"warning.main",fontSize:20}}),t.jsx(U,{label:e.tags,size:"small",color:"warning",variant:"outlined",onClick:t=>{t.preventDefault(),handleQuickFilter("award",e.tags)}})]})]})]})})})},e.id)))}),Pe>1&&t.jsx(n,{sx:{display:"flex",justifyContent:"center",mt:4},children:t.jsx(Se,{count:Pe,page:g,onChange:handlePageChange,color:"primary",size:"large"})})]}),"list"===F&&Pe>1&&!o&&t.jsx(n,{sx:{display:"flex",justifyContent:"center",mt:4},children:t.jsx(Se,{count:Pe,page:g,onChange:handlePageChange,color:"primary",size:"large"})})]}),I&&t.jsx(D,{item:!0,xs:12,lg:3,children:t.jsxs(H,{sx:{p:2,position:"sticky",top:20},children:[t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsxs(j,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:[t.jsx(Ae,{sx:{mr:1}}),"研究インサイト"]}),t.jsx(m,{size:"small",onClick:()=>M(!1),children:t.jsx(A,{})})]}),c?t.jsxs(n,{children:[t.jsx(N,{variant:"text",height:30}),t.jsx(N,{variant:"text",height:30}),t.jsx(N,{variant:"text",height:30})]}):Ee&&t.jsxs(Z,{spacing:3,children:[t.jsxs(n,{children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[t.jsx(we,{sx:{mr:1,color:"warning.main"}}),"主要建築賞"]}),t.jsx(O,{dense:!0,children:Ee.topAwards.map(((e,n)=>t.jsx(E,{button:!0,onClick:()=>handleQuickFilter("award",e.name),children:t.jsx(d,{primary:e.name,secondary:`${e.count}作品`})},n)))})]}),t.jsx(C,{}),t.jsxs(n,{children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[t.jsx(be,{sx:{mr:1,color:"primary.main"}}),"注目建築家"]}),t.jsx(O,{dense:!0,children:Ee.topArchitects.map(((e,n)=>t.jsx(E,{button:!0,onClick:()=>handleQuickFilter("architect",e.name),children:t.jsx(d,{primary:e.name,secondary:`${e.projectCount}作品 (${e.yearSpan.start}-${e.yearSpan.end})`})},n)))})]}),t.jsx(C,{}),t.jsxs(n,{children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[t.jsx(je,{sx:{mr:1,color:"secondary.main"}}),"人気カテゴリ"]}),t.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Ee.popularCategories.map(((e,n)=>t.jsx(U,{label:`${e.category} (${e.totalCount})`,size:"small",onClick:()=>handleQuickFilter("category",e.category)},n)))})]}),t.jsx(C,{}),t.jsxs(n,{children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[t.jsx(q,{sx:{mr:1,color:"success.main"}}),"時代トレンド"]}),t.jsx(O,{dense:!0,children:Ee.recentTrends.map(((e,n)=>t.jsx(E,{button:!0,onClick:()=>handleQuickFilter("decade",e.decade),children:t.jsx(d,{primary:e.decade,secondary:`${e.projectCount}件`})},n)))})]})]})]})})]})]})};var In={exports:{}};!function(e){var t=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(e){L.Util.setOptions(this,e),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var t=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,t?this._withAnimation:this._noAnimation),this._markerCluster=t?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(e){if(e instanceof L.LayerGroup)return this.addLayers([e]);if(!e.getLatLng)return this._nonPointGroup.addLayer(e),this.fire("layeradd",{layer:e}),this;if(!this._map)return this._needsClustering.push(e),this.fire("layeradd",{layer:e}),this;if(this.hasLayer(e))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(e,this._maxZoom),this.fire("layeradd",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var t=e,n=this._zoom;if(e.__parent)for(;t.__parent._zoom>=n;)t=t.__parent;return this._currentShownBounds.contains(t.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(e,t):this._animationAddLayerNonAnimated(e,t)),this},removeLayer:function(e){return e instanceof L.LayerGroup?this.removeLayers([e]):e.getLatLng?this._map?e.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(e)),this._removeLayer(e,!0),this.fire("layerremove",{layer:e}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),e.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(e)&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,e)&&this.hasLayer(e)&&this._needsRemoving.push({layer:e,latlng:e._latlng}),this.fire("layerremove",{layer:e}),this):(this._nonPointGroup.removeLayer(e),this.fire("layerremove",{layer:e}),this)},addLayers:function(e,t){if(!L.Util.isArray(e))return this.addLayer(e);var n,i=this._featureGroup,a=this._nonPointGroup,o=this.options.chunkedLoading,s=this.options.chunkInterval,l=this.options.chunkProgress,c=e.length,u=0,d=!0;if(this._map){var h=(new Date).getTime(),p=L.bind((function(){var f=(new Date).getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();u<c&&!(o&&u%200==0&&(new Date).getTime()-f>s);u++)if((n=e[u])instanceof L.LayerGroup)d&&(e=e.slice(),d=!1),this._extractNonGroupLayers(n,e),c=e.length;else if(n.getLatLng){if(!this.hasLayer(n)&&(this._addLayer(n,this._maxZoom),t||this.fire("layeradd",{layer:n}),n.__parent&&2===n.__parent.getChildCount())){var m=n.__parent.getAllChildMarkers(),g=m[0]===n?m[1]:m[0];i.removeLayer(g)}}else a.addLayer(n),t||this.fire("layeradd",{layer:n});l&&l(u,c,(new Date).getTime()-h),u===c?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(p,this.options.chunkDelay)}),this);p()}else for(var f=this._needsClustering;u<c;u++)(n=e[u])instanceof L.LayerGroup?(d&&(e=e.slice(),d=!1),this._extractNonGroupLayers(n,e),c=e.length):n.getLatLng?this.hasLayer(n)||f.push(n):a.addLayer(n);return this},removeLayers:function(e){var t,n,i=e.length,a=this._featureGroup,o=this._nonPointGroup,s=!0;if(!this._map){for(t=0;t<i;t++)(n=e[t])instanceof L.LayerGroup?(s&&(e=e.slice(),s=!1),this._extractNonGroupLayers(n,e),i=e.length):(this._arraySplice(this._needsClustering,n),o.removeLayer(n),this.hasLayer(n)&&this._needsRemoving.push({layer:n,latlng:n._latlng}),this.fire("layerremove",{layer:n}));return this}if(this._unspiderfy){this._unspiderfy();var l=e.slice(),c=i;for(t=0;t<c;t++)(n=l[t])instanceof L.LayerGroup?(this._extractNonGroupLayers(n,l),c=l.length):this._unspiderfyLayer(n)}for(t=0;t<i;t++)(n=e[t])instanceof L.LayerGroup?(s&&(e=e.slice(),s=!1),this._extractNonGroupLayers(n,e),i=e.length):n.__parent?(this._removeLayer(n,!0,!0),this.fire("layerremove",{layer:n}),a.hasLayer(n)&&(a.removeLayer(n),n.clusterShow&&n.clusterShow())):(o.removeLayer(n),this.fire("layerremove",{layer:n}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer((function(e){e.off(this._childMarkerEventHandlers,this),delete e.__parent}),this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var e=new L.LatLngBounds;this._topClusterLevel&&e.extend(this._topClusterLevel._bounds);for(var t=this._needsClustering.length-1;t>=0;t--)e.extend(this._needsClustering[t].getLatLng());return e.extend(this._nonPointGroup.getBounds()),e},eachLayer:function(e,t){var n,i,a,o=this._needsClustering.slice(),s=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),i=o.length-1;i>=0;i--){for(n=!0,a=s.length-1;a>=0;a--)if(s[a].layer===o[i]){n=!1;break}n&&e.call(t,o[i])}this._nonPointGroup.eachLayer(e,t)},getLayers:function(){var e=[];return this.eachLayer((function(t){e.push(t)})),e},getLayer:function(e){var t=null;return e=parseInt(e,10),this.eachLayer((function(n){L.stamp(n)===e&&(t=n)})),t},hasLayer:function(e){if(!e)return!1;var t,n=this._needsClustering;for(t=n.length-1;t>=0;t--)if(n[t]===e)return!0;for(t=(n=this._needsRemoving).length-1;t>=0;t--)if(n[t].layer===e)return!1;return!(!e.__parent||e.__parent._group!==this)||this._nonPointGroup.hasLayer(e)},zoomToShowLayer:function(e,t){var n=this._map;"function"!=typeof t&&(t=function(){});var showMarker=function(){!n.hasLayer(e)&&!n.hasLayer(e.__parent)||this._inZoomAnimation||(this._map.off("moveend",showMarker,this),this.off("animationend",showMarker,this),n.hasLayer(e)?t():e.__parent._icon&&(this.once("spiderfied",t,this),e.__parent.spiderfy()))};e._icon&&this._map.getBounds().contains(e.getLatLng())?t():e.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",showMarker,this),this._map.panTo(e.getLatLng())):(this._map.on("moveend",showMarker,this),this.on("animationend",showMarker,this),e.__parent.zoomToBounds())},onAdd:function(e){var t,n,i;if(this._map=e,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(e),this._nonPointGroup.addTo(e),this._gridClusters||this._generateInitialClusters(),this._maxLat=e.options.crs.projection.MAX_LATITUDE,t=0,n=this._needsRemoving.length;t<n;t++)(i=this._needsRemoving[t]).newlatlng=i.layer._latlng,i.layer._latlng=i.latlng;for(t=0,n=this._needsRemoving.length;t<n;t++)i=this._needsRemoving[t],this._removeLayer(i.layer,!0),i.layer._latlng=i.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),n=this._needsClustering,this._needsClustering=[],this.addLayers(n,!0)},onRemove:function(e){e.off("zoomend",this._zoomEnd,this),e.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(e){for(var t=e;t&&!t._icon;)t=t.__parent;return t||null},_arraySplice:function(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return e.splice(n,1),!0},_removeFromGridUnclustered:function(e,t){for(var n=this._map,i=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());t>=a&&i[t].removeObject(e,n.project(e.getLatLng(),t));t--);},_childMarkerDragStart:function(e){e.target.__dragStart=e.target._latlng},_childMarkerMoved:function(e){if(!this._ignoreMove&&!e.target.__dragStart){var t=e.target._popup&&e.target._popup.isOpen();this._moveChild(e.target,e.oldLatLng,e.latlng),t&&e.target.openPopup()}},_moveChild:function(e,t,n){e._latlng=t,this.removeLayer(e),e._latlng=n,this.addLayer(e)},_childMarkerDragEnd:function(e){var t=e.target.__dragStart;delete e.target.__dragStart,t&&this._moveChild(e.target,t,e.target._latlng)},_removeLayer:function(e,t,n){var i=this._gridClusters,a=this._gridUnclustered,o=this._featureGroup,s=this._map,l=Math.floor(this._map.getMinZoom());t&&this._removeFromGridUnclustered(e,this._maxZoom);var c,u=e.__parent,d=u._markers;for(this._arraySplice(d,e);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<l));)t&&u._childCount<=1?(c=u._markers[0]===e?u._markers[1]:u._markers[0],i[u._zoom].removeObject(u,s.project(u._cLatLng,u._zoom)),a[u._zoom].addObject(c,s.project(c.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(c),c.__parent=u.__parent,u._icon&&(o.removeLayer(u),n||o.addLayer(c))):u._iconNeedsUpdate=!0,u=u.__parent;delete e.__parent},_isOrIsParent:function(e,t){for(;t;){if(e===t)return!0;t=t.parentNode}return!1},fire:function(e,t,n){if(t&&t.layer instanceof L.MarkerCluster){if(t.originalEvent&&this._isOrIsParent(t.layer._icon,t.originalEvent.relatedTarget))return;e="cluster"+e}L.FeatureGroup.prototype.fire.call(this,e,t,n)},listens:function(e,t){return L.FeatureGroup.prototype.listens.call(this,e,t)||L.FeatureGroup.prototype.listens.call(this,"cluster"+e,t)},_defaultIconCreateFunction:function(e){var t=e.getChildCount(),n=" marker-cluster-";return n+=t<10?"small":t<100?"medium":"large",new L.DivIcon({html:"<div><span>"+t+"</span></div>",className:"marker-cluster"+n,iconSize:new L.Point(40,40)})},_bindEvents:function(){var e=this._map,t=this.options.spiderfyOnMaxZoom,n=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,a=this.options.spiderfyOnEveryZoom;(t||i||a)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),n&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),e.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var t=e.layer,n=t;if("clusterkeypress"!==e.type||!e.originalEvent||13===e.originalEvent.keyCode){for(;1===n._childClusters.length;)n=n._childClusters[0];n._zoom===this._maxZoom&&n._childCount===t._childCount&&this.options.spiderfyOnMaxZoom?t.spiderfy():this.options.zoomToBoundsOnClick&&t.zoomToBounds(),this.options.spiderfyOnEveryZoom&&t.spiderfy(),e.originalEvent&&13===e.originalEvent.keyCode&&this._map._container.focus()}},_showCoverage:function(e){var t=this._map;this._inZoomAnimation||(this._shownPolygon&&t.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),t.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var e=this.options.spiderfyOnMaxZoom,t=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick,i=this.options.spiderfyOnEveryZoom,a=this._map;(e||n||i)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),t&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),a.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var e=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),e),this._currentShownBounds=e}},_generateInitialClusters:function(){var e=Math.ceil(this._map.getMaxZoom()),t=Math.floor(this._map.getMinZoom()),n=this.options.maxClusterRadius,i=n;"function"!=typeof n&&(i=function(){return n}),null!==this.options.disableClusteringAtZoom&&(e=this.options.disableClusteringAtZoom-1),this._maxZoom=e,this._gridClusters={},this._gridUnclustered={};for(var a=e;a>=t;a--)this._gridClusters[a]=new L.DistanceGrid(i(a)),this._gridUnclustered[a]=new L.DistanceGrid(i(a));this._topClusterLevel=new this._markerCluster(this,t-1)},_addLayer:function(e,t){var n,i,a=this._gridClusters,o=this._gridUnclustered,s=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(e),e.on(this._childMarkerEventHandlers,this);t>=s;t--){n=this._map.project(e.getLatLng(),t);var l=a[t].getNearObject(n);if(l)return l._addChild(e),void(e.__parent=l);if(l=o[t].getNearObject(n)){var c=l.__parent;c&&this._removeLayer(l,!1);var u=new this._markerCluster(this,t,l,e);a[t].addObject(u,this._map.project(u._cLatLng,t)),l.__parent=u,e.__parent=u;var d=u;for(i=t-1;i>c._zoom;i--)d=new this._markerCluster(this,i,d),a[i].addObject(d,this._map.project(l.getLatLng(),i));return c._addChild(d),void this._removeFromGridUnclustered(l,t)}o[t].addObject(e,n)}this._topClusterLevel._addChild(e),e.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer((function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()}))},_enqueue:function(e){this._queue.push(e),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var e=0;e<this._queue.length;e++)this._queue[e].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var e=Math.round(this._map._zoom);this._processQueue(),this._zoom<e&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,e)):this._zoom>e?(this._animationStart(),this._animationZoomOut(this._zoom,e)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(e){var t=this._maxLat;return void 0!==t&&(e.getNorth()>=t&&(e._northEast.lat=1/0),e.getSouth()<=-t&&(e._southWest.lat=-1/0)),e},_animationAddLayerNonAnimated:function(e,t){if(t===e)this._featureGroup.addLayer(e);else if(2===t._childCount){t._addToMap();var n=t.getAllChildMarkers();this._featureGroup.removeLayer(n[0]),this._featureGroup.removeLayer(n[1])}else t._updateIcon()},_extractNonGroupLayers:function(e,t){var n,i=e.getLayers(),a=0;for(t=t||[];a<i.length;a++)(n=i[a])instanceof L.LayerGroup?this._extractNonGroupLayers(n,t):t.push(n);return t},_overrideMarkerIcon:function(e){return e.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[e]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(e,t){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(e,t){this._animationAddLayerNonAnimated(e,t)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(e,t){var n,i=this._getExpandedVisibleBounds(),a=this._featureGroup,o=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(i,e,o,(function(o){var s,l=o._latlng,c=o._markers;for(i.contains(l)||(l=null),o._isSingleParent()&&e+1===t?(a.removeLayer(o),o._recursivelyAddChildrenToMap(null,t,i)):(o.clusterHide(),o._recursivelyAddChildrenToMap(l,t,i)),n=c.length-1;n>=0;n--)s=c[n],i.contains(s._latlng)||a.removeLayer(s)})),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(i,t),a.eachLayer((function(e){e instanceof L.MarkerCluster||!e._icon||e.clusterShow()})),this._topClusterLevel._recursively(i,e,t,(function(e){e._recursivelyRestoreChildPositions(t)})),this._ignoreMove=!1,this._enqueue((function(){this._topClusterLevel._recursively(i,e,o,(function(e){a.removeLayer(e),e.clusterShow()})),this._animationEnd()}))},_animationZoomOut:function(e,t){this._animationZoomOutSingle(this._topClusterLevel,e-1,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,t,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),e,this._getExpandedVisibleBounds())},_animationAddLayer:function(e,t){var n=this,i=this._featureGroup;i.addLayer(e),t!==e&&(t._childCount>2?(t._updateIcon(),this._forceLayout(),this._animationStart(),e._setPos(this._map.latLngToLayerPoint(t.getLatLng())),e.clusterHide(),this._enqueue((function(){i.removeLayer(e),e.clusterShow(),n._animationEnd()}))):(this._forceLayout(),n._animationStart(),n._animationZoomOutSingle(t,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(e,t,n){var i=this._getExpandedVisibleBounds(),a=Math.floor(this._map.getMinZoom());e._recursivelyAnimateChildrenInAndAddSelfToMap(i,a,t+1,n);var o=this;this._forceLayout(),e._recursivelyBecomeVisible(i,n),this._enqueue((function(){if(1===e._childCount){var s=e._markers[0];this._ignoreMove=!0,s.setLatLng(s.getLatLng()),this._ignoreMove=!1,s.clusterShow&&s.clusterShow()}else e._recursively(i,n,a,(function(e){e._recursivelyRemoveChildrenFromMap(i,a,t+1)}));o._animationEnd()}))},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(e){return new L.MarkerClusterGroup(e)};var n=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(e,t,n,i){L.Marker.prototype.initialize.call(this,n?n._cLatLng||n.getLatLng():new L.LatLng(0,0),{icon:this,pane:e.options.clusterPane}),this._group=e,this._zoom=t,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,n&&this._addChild(n),i&&this._addChild(i)},getAllChildMarkers:function(e,t){e=e||[];for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n].getAllChildMarkers(e,t);for(var i=this._markers.length-1;i>=0;i--)t&&this._markers[i].__dragStart||e.push(this._markers[i]);return e},getChildCount:function(){return this._childCount},zoomToBounds:function(e){for(var t,n=this._childClusters.slice(),i=this._group._map,a=i.getBoundsZoom(this._bounds),o=this._zoom+1,s=i.getZoom();n.length>0&&a>o;){o++;var l=[];for(t=0;t<n.length;t++)l=l.concat(n[t]._childClusters);n=l}a>o?this._group._map.setView(this._latlng,o):a<=s?this._group._map.setView(this._latlng,s+1):this._group._map.fitBounds(this._bounds,e)},getBounds:function(){var e=new L.LatLngBounds;return e.extend(this._bounds),e},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(e,t){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(e),e instanceof L.MarkerCluster?(t||(this._childClusters.push(e),e.__parent=this),this._childCount+=e._childCount):(t||this._markers.push(e),this._childCount++),this.__parent&&this.__parent._addChild(e,!0)},_setClusterCenter:function(e){this._cLatLng||(this._cLatLng=e._cLatLng||e._latlng)},_resetBounds:function(){var e=this._bounds;e._southWest&&(e._southWest.lat=1/0,e._southWest.lng=1/0),e._northEast&&(e._northEast.lat=-1/0,e._northEast.lng=-1/0)},_recalculateBounds:function(){var e,t,n,i,a=this._markers,o=this._childClusters,s=0,l=0,c=this._childCount;if(0!==c){for(this._resetBounds(),e=0;e<a.length;e++)n=a[e]._latlng,this._bounds.extend(n),s+=n.lat,l+=n.lng;for(e=0;e<o.length;e++)(t=o[e])._boundsNeedUpdate&&t._recalculateBounds(),this._bounds.extend(t._bounds),n=t._wLatLng,i=t._childCount,s+=n.lat*i,l+=n.lng*i;this._latlng=this._wLatLng=new L.LatLng(s/c,l/c),this._boundsNeedUpdate=!1}},_addToMap:function(e){e&&(this._backupLatlng=this._latlng,this.setLatLng(e)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(e,t,n){this._recursively(e,this._group._map.getMinZoom(),n-1,(function(e){var n,i,a=e._markers;for(n=a.length-1;n>=0;n--)(i=a[n])._icon&&(i._setPos(t),i.clusterHide())}),(function(e){var n,i,a=e._childClusters;for(n=a.length-1;n>=0;n--)(i=a[n])._icon&&(i._setPos(t),i.clusterHide())}))},_recursivelyAnimateChildrenInAndAddSelfToMap:function(e,t,n,i){this._recursively(e,i,t,(function(a){a._recursivelyAnimateChildrenIn(e,a._group._map.latLngToLayerPoint(a.getLatLng()).round(),n),a._isSingleParent()&&n-1===i?(a.clusterShow(),a._recursivelyRemoveChildrenFromMap(e,t,n)):a.clusterHide(),a._addToMap()}))},_recursivelyBecomeVisible:function(e,t){this._recursively(e,this._group._map.getMinZoom(),t,null,(function(e){e.clusterShow()}))},_recursivelyAddChildrenToMap:function(e,t,n){this._recursively(n,this._group._map.getMinZoom()-1,t,(function(i){if(t!==i._zoom)for(var a=i._markers.length-1;a>=0;a--){var o=i._markers[a];n.contains(o._latlng)&&(e&&(o._backupLatlng=o.getLatLng(),o.setLatLng(e),o.clusterHide&&o.clusterHide()),i._group._featureGroup.addLayer(o))}}),(function(t){t._addToMap(e)}))},_recursivelyRestoreChildPositions:function(e){for(var t=this._markers.length-1;t>=0;t--){var n=this._markers[t];n._backupLatlng&&(n.setLatLng(n._backupLatlng),delete n._backupLatlng)}if(e-1===this._zoom)for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i]._restorePosition();else for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a]._recursivelyRestoreChildPositions(e)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(e,t,n,i){var a,o;this._recursively(e,t-1,n-1,(function(e){for(o=e._markers.length-1;o>=0;o--)a=e._markers[o],i&&i.contains(a._latlng)||(e._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())}),(function(e){for(o=e._childClusters.length-1;o>=0;o--)a=e._childClusters[o],i&&i.contains(a._latlng)||(e._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())}))},_recursively:function(e,t,n,i,a){var o,s,l=this._childClusters,c=this._zoom;if(t<=c&&(i&&i(this),a&&c===n&&a(this)),c<t||c<n)for(o=l.length-1;o>=0;o--)(s=l[o])._boundsNeedUpdate&&s._recalculateBounds(),e.intersects(s._bounds)&&s._recursively(e,t,n,i,a)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var e=this.options.opacity;return this.setOpacity(0),this.options.opacity=e,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(e){this._cellSize=e,this._sqCellSize=e*e,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(e,t){var n=this._getCoord(t.x),i=this._getCoord(t.y),a=this._grid,o=a[i]=a[i]||{},s=o[n]=o[n]||[],l=L.Util.stamp(e);this._objectPoint[l]=t,s.push(e)},updateObject:function(e,t){this.removeObject(e),this.addObject(e,t)},removeObject:function(e,t){var n,i,a=this._getCoord(t.x),o=this._getCoord(t.y),s=this._grid,l=s[o]=s[o]||{},c=l[a]=l[a]||[];for(delete this._objectPoint[L.Util.stamp(e)],n=0,i=c.length;n<i;n++)if(c[n]===e)return c.splice(n,1),1===i&&delete l[a],!0},eachObject:function(e,t){var n,i,a,o,s,l,c=this._grid;for(n in c)for(i in s=c[n])for(a=0,o=(l=s[i]).length;a<o;a++)e.call(t,l[a])&&(a--,o--)},getNearObject:function(e){var t,n,i,a,o,s,l,c,u=this._getCoord(e.x),d=this._getCoord(e.y),h=this._objectPoint,p=this._sqCellSize,f=null;for(t=d-1;t<=d+1;t++)if(a=this._grid[t])for(n=u-1;n<=u+1;n++)if(o=a[n])for(i=0,s=o.length;i<s;i++)l=o[i],((c=this._sqDist(h[L.Util.stamp(l)],e))<p||c<=p&&null===f)&&(p=c,f=l);return f},_getCoord:function(e){var t=Math.floor(e/this._cellSize);return isFinite(t)?t:e},_sqDist:function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}},L.QuickHull={getDistant:function(e,t){var n=t[1].lat-t[0].lat;return(t[0].lng-t[1].lng)*(e.lat-t[0].lat)+n*(e.lng-t[0].lng)},findMostDistantPointFromBaseLine:function(e,t){var n,i,a,o=0,s=null,l=[];for(n=t.length-1;n>=0;n--)i=t[n],(a=this.getDistant(i,e))>0&&(l.push(i),a>o&&(o=a,s=i));return{maxPoint:s,newPoints:l}},buildConvexHull:function(e,t){var n=[],i=this.findMostDistantPointFromBaseLine(e,t);return i.maxPoint?n=(n=n.concat(this.buildConvexHull([e[0],i.maxPoint],i.newPoints))).concat(this.buildConvexHull([i.maxPoint,e[1]],i.newPoints)):[e[0]]},getConvexHull:function(e){var t,n=!1,i=!1,a=!1,o=!1,s=null,l=null,c=null,u=null,d=null,h=null;for(t=e.length-1;t>=0;t--){var p=e[t];(!1===n||p.lat>n)&&(s=p,n=p.lat),(!1===i||p.lat<i)&&(l=p,i=p.lat),(!1===a||p.lng>a)&&(c=p,a=p.lng),(!1===o||p.lng<o)&&(u=p,o=p.lng)}return i!==n?(h=l,d=s):(h=u,d=c),[].concat(this.buildConvexHull([h,d],e),this.buildConvexHull([d,h],e))}},L.MarkerCluster.include({getConvexHull:function(){var e,t,n=this.getAllChildMarkers(),i=[];for(t=n.length-1;t>=0;t--)e=n[t].getLatLng(),i.push(e);return L.QuickHull.getConvexHull(i)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var e,t=this.getAllChildMarkers(null,!0),n=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?e=this._group.options.spiderfyShapePositions(t.length,n):t.length>=this._circleSpiralSwitchover?e=this._generatePointsSpiral(t.length,n):(n.y+=10,e=this._generatePointsCircle(t.length,n)),this._animationSpiderfy(t,e)}},unspiderfy:function(e){this._group._inZoomAnimation||(this._animationUnspiderfy(e),this._group._spiderfied=null)},_generatePointsCircle:function(e,t){var n,i,a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+e)/this._2PI,o=this._2PI/e,s=[];for(a=Math.max(a,35),s.length=e,n=0;n<e;n++)i=this._circleStartAngle+n*o,s[n]=new L.Point(t.x+a*Math.cos(i),t.y+a*Math.sin(i))._round();return s},_generatePointsSpiral:function(e,t){var n,i=this._group.options.spiderfyDistanceMultiplier,a=i*this._spiralLengthStart,o=i*this._spiralFootSeparation,s=i*this._spiralLengthFactor*this._2PI,l=0,c=[];for(c.length=e,n=e;n>=0;n--)n<e&&(c[n]=new L.Point(t.x+a*Math.cos(l),t.y+a*Math.sin(l))._round()),a+=s/(l+=o/a+5e-4*n);return c},_noanimationUnspiderfy:function(){var e,t,n=this._group,i=n._map,a=n._featureGroup,o=this.getAllChildMarkers(null,!0);for(n._ignoreMove=!0,this.setOpacity(1),t=o.length-1;t>=0;t--)e=o[t],a.removeLayer(e),e._preSpiderfyLatlng&&(e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng),e.setZIndexOffset&&e.setZIndexOffset(0),e._spiderLeg&&(i.removeLayer(e._spiderLeg),delete e._spiderLeg);n.fire("unspiderfied",{cluster:this,markers:o}),n._ignoreMove=!1,n._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(e,t){var n,i,a,o,s=this._group,l=s._map,c=s._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(s._ignoreMove=!0,n=0;n<e.length;n++)o=l.layerPointToLatLng(t[n]),i=e[n],a=new L.Polyline([this._latlng,o],u),l.addLayer(a),i._spiderLeg=a,i._preSpiderfyLatlng=i._latlng,i.setLatLng(o),i.setZIndexOffset&&i.setZIndexOffset(1e6),c.addLayer(i);this.setOpacity(.3),s._ignoreMove=!1,s.fire("spiderfied",{cluster:this,markers:e})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(e,t){var n,i,a,o,s,l,c=this,u=this._group,d=u._map,h=u._featureGroup,p=this._latlng,f=d.latLngToLayerPoint(p),m=L.Path.SVG,g=L.extend({},this._group.options.spiderLegPolylineOptions),v=g.opacity;for(void 0===v&&(v=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),m?(g.opacity=0,g.className=(g.className||"")+" leaflet-cluster-spider-leg"):g.opacity=v,u._ignoreMove=!0,n=0;n<e.length;n++)i=e[n],l=d.layerPointToLatLng(t[n]),a=new L.Polyline([p,l],g),d.addLayer(a),i._spiderLeg=a,m&&(s=(o=a._path).getTotalLength()+.1,o.style.strokeDasharray=s,o.style.strokeDashoffset=s),i.setZIndexOffset&&i.setZIndexOffset(1e6),i.clusterHide&&i.clusterHide(),h.addLayer(i),i._setPos&&i._setPos(f);for(u._forceLayout(),u._animationStart(),n=e.length-1;n>=0;n--)l=d.layerPointToLatLng(t[n]),(i=e[n])._preSpiderfyLatlng=i._latlng,i.setLatLng(l),i.clusterShow&&i.clusterShow(),m&&((o=(a=i._spiderLeg)._path).style.strokeDashoffset=0,a.setStyle({opacity:v}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout((function(){u._animationEnd(),u.fire("spiderfied",{cluster:c,markers:e})}),200)},_animationUnspiderfy:function(e){var t,n,i,a,o,s,l=this,c=this._group,u=c._map,d=c._featureGroup,h=e?u._latLngToNewLayerPoint(this._latlng,e.zoom,e.center):u.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),f=L.Path.SVG;for(c._ignoreMove=!0,c._animationStart(),this.setOpacity(1),n=p.length-1;n>=0;n--)(t=p[n])._preSpiderfyLatlng&&(t.closePopup(),t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng,s=!0,t._setPos&&(t._setPos(h),s=!1),t.clusterHide&&(t.clusterHide(),s=!1),s&&d.removeLayer(t),f&&(o=(a=(i=t._spiderLeg)._path).getTotalLength()+.1,a.style.strokeDashoffset=o,i.setStyle({opacity:0})));c._ignoreMove=!1,setTimeout((function(){var e=0;for(n=p.length-1;n>=0;n--)(t=p[n])._spiderLeg&&e++;for(n=p.length-1;n>=0;n--)(t=p[n])._spiderLeg&&(t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),e>1&&d.removeLayer(t),u.removeLayer(t._spiderLeg),delete t._spiderLeg);c._animationEnd(),c.fire("unspiderfied",{cluster:l,markers:p})}),200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(e){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(e))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(e){this._spiderfied&&this._spiderfied.unspiderfy(e)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(e){e._spiderLeg&&(this._featureGroup.removeLayer(e),e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),this._map.removeLayer(e._spiderLeg),delete e._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(e){return e?e instanceof L.MarkerClusterGroup?e=e._topClusterLevel.getAllChildMarkers():e instanceof L.LayerGroup?e=e._layers:e instanceof L.MarkerCluster?e=e.getAllChildMarkers():e instanceof L.Marker&&(e=[e]):e=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(e),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(e),this},_flagParentsIconsNeedUpdate:function(e){var t,n;for(t in e)for(n=e[t].__parent;n;)n._iconNeedsUpdate=!0,n=n.__parent},_refreshSingleMarkerModeMarkers:function(e){var t,n;for(t in e)n=e[t],this.hasLayer(n)&&n.setIcon(this._overrideMarkerIcon(n))}}),L.Marker.include({refreshIconOptions:function(e,t){var n=this.options.icon;return L.setOptions(n,e),this.setIcon(n),t&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),e.MarkerClusterGroup=t,e.MarkerCluster=n,Object.defineProperty(e,"__esModule",{value:!0})}(In.exports),delete Qt.Icon.Default.prototype._getIconUrl,Qt.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const Map$1=({markers:e=[],center:n,zoom:i=13,height:a="500px",singleMarker:o})=>{const[s,l]=Ut.useState(null),[c,u]=Ut.useState(null),d=Ut.useCallback((t=>{if(null!==t&&!s)try{const a=o&&o.latitude&&o.longitude?[o.latitude,o.longitude]:n,s=Qt.map(t).setView(a,i);Qt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(s);const c=Qt.markerClusterGroup({maxClusterRadius:50,spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,chunkedLoading:!0,chunkProgress:(e,t,n)=>{e===t&&console.log(`All ${t} markers loaded in ${n}ms`)}});if(o){const e=o.latitude||o.position&&o.position[0],t=o.longitude||o.position&&o.position[1],n=o.name||o.title;if(e&&t){const i=Qt.marker([e,t]);i.bindPopup(`\n              <div style="min-width: 200px;">\n                <h3 style="margin: 0 0 8px 0; font-size: 1.1rem; font-weight: bold;">\n                  ${n}\n                </h3>\n                ${o.architect?`\n                  <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                    <strong>建築家:</strong> ${o.architect}\n                  </p>\n                `:""}\n                ${o.year?`\n                  <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                    <strong>竣工年:</strong> ${o.year}年\n                  </p>\n                `:""}\n                ${o.location?`\n                  <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #666;">\n                    ${o.location}\n                  </p>\n                `:""}\n                <a \n                  href="/architecture/${o.id}"\n                  style="\n                    display: inline-block;\n                    padding: 6px 12px;\n                    background-color: #1976d2;\n                    color: white;\n                    text-decoration: none;\n                    border-radius: 4px;\n                    font-size: 0.875rem;\n                  "\n                  onclick="window.location.href='/architecture/${o.id}'; return false;"\n                >\n                  詳細を見る\n                </a>\n              </div>\n            `),c.addLayer(i)}}if(e.forEach((e=>{const t=e.latitude||e.position&&e.position[0],n=e.longitude||e.position&&e.position[1],i=e.name||e.title;if(t&&n){const a=Qt.marker([t,n]);a.bindPopup(`\n              <div style="min-width: 250px;">\n                <h3 style="margin: 0 0 8px 0; font-size: 1.1rem; font-weight: bold;">\n                  ${i||"建築作品"}\n                </h3>\n                ${e.architect?`\n                  <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                    <strong>建築家:</strong> ${e.architect}\n                  </p>\n                `:""}\n                ${e.year?`\n                  <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                    <strong>竣工年:</strong> ${e.year}年\n                  </p>\n                `:""}\n                ${e.category?`\n                  <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                    <strong>カテゴリ:</strong> ${e.category}\n                  </p>\n                `:""}\n                ${e.tags?`\n                  <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                    <strong>受賞:</strong> <span style="color: #ff6f00;">${e.tags}</span>\n                  </p>\n                `:""}\n                ${e.location?`\n                  <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #666;">\n                    <strong>所在地:</strong> ${e.location}\n                  </p>\n                `:""}\n                <a \n                  href="/architecture/${e.id}"\n                  style="\n                    display: inline-block;\n                    padding: 6px 12px;\n                    background-color: #1976d2;\n                    color: white;\n                    text-decoration: none;\n                    border-radius: 4px;\n                    font-size: 0.875rem;\n                  "\n                  onclick="window.location.href='/architecture/${e.id}'; return false;"\n                >\n                  詳細を見る\n                </a>\n              </div>\n            `),c.addLayer(a)}})),e.length>0&&!o){const t=e.filter((e=>{const t=e.latitude||e.position&&e.position[0],n=e.longitude||e.position&&e.position[1];return t&&n}));if(t.length>0){const e=Qt.latLngBounds(t.map((e=>[e.latitude||e.position&&e.position[0],e.longitude||e.position&&e.position[1]])));s.fitBounds(e,{padding:[50,50]})}}s.addLayer(c),u(c),l(s)}catch(a){console.error("Map initialization error:",a)}}),[n,i,o,s]);return Ut.useEffect((()=>{if(s&&c&&e.length>0){c.clearLayers(),e.forEach((e=>{const t=e.latitude||e.position&&e.position[0],n=e.longitude||e.position&&e.position[1],i=e.name||e.title;if(t&&n){const a=Qt.marker([t,n]);a.bindPopup(`\n            <div style="min-width: 250px;">\n              <h3 style="margin: 0 0 8px 0; font-size: 1.1rem; font-weight: bold;">\n                ${i||"建築作品"}\n              </h3>\n              ${e.architect?`\n                <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                  <strong>建築家:</strong> ${e.architect}\n                </p>\n              `:""}\n              ${e.year?`\n                <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                  <strong>竣工年:</strong> ${e.year}年\n                </p>\n              `:""}\n              ${e.category?`\n                <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                  <strong>カテゴリ:</strong> ${e.category}\n                </p>\n              `:""}\n              ${e.tags?`\n                <p style="margin: 0 0 4px 0; font-size: 0.9rem;">\n                  <strong>受賞:</strong> <span style="color: #ff6f00;">${e.tags}</span>\n                </p>\n              `:""}\n              ${e.location?`\n                <p style="margin: 0 0 12px 0; font-size: 0.9rem; color: #666;">\n                  <strong>所在地:</strong> ${e.location}\n                </p>\n              `:""}\n              <a \n                href="/architecture/${e.id}"\n                style="\n                  display: inline-block;\n                  padding: 6px 12px;\n                  background-color: #1976d2;\n                  color: white;\n                  text-decoration: none;\n                  border-radius: 4px;\n                  font-size: 0.875rem;\n                "\n                onclick="window.location.href='/architecture/${e.id}'; return false;"\n              >\n                詳細を見る\n              </a>\n            </div>\n          `),c.addLayer(a)}}));const t=e.filter((e=>{const t=e.latitude||e.position&&e.position[0],n=e.longitude||e.position&&e.position[1];return t&&n}));if(t.length>0){const e=Qt.latLngBounds(t.map((e=>[e.latitude||e.position&&e.position[0],e.longitude||e.position&&e.position[1]])));s.fitBounds(e,{padding:[50,50]})}}}),[e,s,c]),Ut.useEffect((()=>()=>{c&&s&&s.removeLayer(c),s&&s.remove()}),[s,c]),t.jsx("div",{ref:d,style:{height:a,width:"100%",marginBottom:"20px"},className:"leaflet-container"})},ArchitectureSinglePage=()=>{const{id:e}=qt(),[a,o]=Ut.useState(null),[s,l]=Ut.useState(!0),[c,u]=Ut.useState(null),d=Yt();if(Ut.useEffect((()=>{(async()=>{l(!0);try{const t=await getArchitectureById$1(parseInt(e));if(!t)throw new Error("建築作品が見つかりませんでした");const n={id:t.id,name:t.title,location:t.address,completedYear:t.year||0,latitude:t.latitude,longitude:t.longitude,architect:t.architect?{id:0,name:t.architect}:null,city:t.prefecture||"",bigCategory:t.big_category||t.category,category:t.category,description:t.description,tag:t.tags||"",shinkenchikuUrl:t.shinkenchiku_url||"",contractor:t.contractor,structuralDesigner:t.structural_designer,landscapeDesigner:t.landscape_designer};o(n)}catch(t){console.error("Error fetching work:",t),u(t.message)}finally{l(!1)}})()}),[e]),s)return t.jsx(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:t.jsx(G,{})});if(c)return t.jsxs(R,{children:[t.jsxs(j,{variant:"h5",color:"error",sx:{textAlign:"center",my:4},children:["エラーが発生しました: ",c]}),t.jsx(i,{variant:"contained",component:Ht,to:"/architecture",startIcon:t.jsx(Ce,{}),children:"建築作品一覧に戻る"})]});if(!a)return t.jsxs(R,{children:[t.jsx(j,{variant:"h5",sx:{textAlign:"center",my:4},children:"建築作品が見つかりませんでした"}),t.jsx(i,{variant:"contained",component:Ht,to:"/architecture",startIcon:t.jsx(Ce,{}),children:"建築作品一覧に戻る"})]});const h=a.tag?a.tag.split(",").filter((e=>""!==e.trim()&&!e.includes("の追加建築"))):[],p=h.find((e=>e.includes("新建築"))),m=p?p.replace("新建築",""):"";return t.jsxs(R,{maxWidth:"lg",sx:{py:4},children:[t.jsx(i,{variant:"outlined",component:Ht,to:"/architecture",startIcon:t.jsx(Ce,{}),sx:{mb:3},children:"建築作品一覧に戻る"}),t.jsxs(H,{sx:{p:3,mb:4},children:[t.jsxs(n,{sx:{mb:2},children:[t.jsx(j,{variant:"h4",component:"h1",gutterBottom:!0,children:a.name||"無題"}),a.location&&t.jsxs(j,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:[t.jsx(ae,{fontSize:"small",sx:{verticalAlign:"middle",mr:.5}}),a.location]}),t.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[0!==a.completedYear&&t.jsx(U,{icon:t.jsx(_e,{}),label:`${a.completedYear}年`,variant:"outlined",size:"small",onClick:()=>d(`/architecture?year=${a.completedYear}`),clickable:!0}),a.city&&t.jsx(U,{icon:t.jsx(ae,{}),label:a.city,variant:"outlined",size:"small",onClick:()=>d(`/architecture?prefecture=${encodeURIComponent(a.city)}`),clickable:!0}),a.architect&&a.architect.name&&t.jsx(U,{icon:t.jsx(be,{}),label:a.architect.name,component:Ht,to:`/architects/${a.architect.id}`,clickable:!0,color:"primary",size:"small"}),a.bigCategory&&t.jsx(U,{icon:t.jsx(je,{}),label:a.bigCategory,variant:"outlined",size:"small",onClick:()=>d(`/architecture?category=${encodeURIComponent(a.bigCategory)}`),clickable:!0}),a.category&&a.category!==a.bigCategory&&t.jsx(U,{icon:t.jsx(je,{}),label:a.category,variant:"outlined",size:"small",onClick:()=>d(`/architecture?category=${encodeURIComponent(a.category)}`),clickable:!0})]}),h.length>0&&t.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:h.map(((e,n)=>t.jsx(U,{icon:t.jsx(we,{}),label:e,onClick:()=>(e=>{console.log(`タグがクリックされました: ${e}`),d(`/architecture?search=tag:${encodeURIComponent(e)}`)})(e),clickable:!0,color:"secondary",variant:"outlined",size:"small"},n)))})]}),t.jsx(C,{sx:{my:3}}),t.jsxs(n,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[a.shinkenchikuUrl&&t.jsx(f,{title:"新建築データで見る",children:t.jsxs(i,{variant:"contained",href:a.shinkenchikuUrl,target:"_blank",rel:"noopener noreferrer",size:"small",sx:{backgroundColor:"#003366",color:"#ffffff","&:hover":{backgroundColor:"#002244"}},children:[t.jsx(n,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mr:.5},children:t.jsx("img",{src:"https://data.shinkenchiku.online/favicon.ico",alt:"新建築データ",style:{height:"16px",width:"auto",marginRight:"4px"}})}),m&&t.jsx(j,{variant:"caption",children:m})]})}),t.jsx(f,{title:"Google画像検索",children:t.jsx(i,{href:(g=a.name,v=a.architect,`https://www.google.com/search?q=${encodeURIComponent(`${g} ${v?.name||""} 建築`)}&tbm=isch`),target:"_blank",rel:"noopener noreferrer",startIcon:t.jsx(Oe,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"画像"})}),t.jsx(f,{title:"Wikipediaで検索",children:t.jsx(i,{href:(e=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(e)}`)(a.name),target:"_blank",rel:"noopener noreferrer",startIcon:t.jsx(Ee,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),a.description&&t.jsxs(n,{sx:{mt:3},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"概要"}),t.jsx(j,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-line"},children:a.description})]}),(a.contractor||a.structuralDesigner||a.landscapeDesigner)&&t.jsxs(n,{sx:{mt:3},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"建築関係者"}),t.jsxs(D,{container:!0,spacing:2,children:[a.contractor&&t.jsxs(D,{item:!0,xs:12,sm:4,children:[t.jsx(j,{variant:"subtitle2",color:"text.secondary",children:"施工"}),t.jsx(j,{variant:"body2",children:a.contractor})]}),a.structuralDesigner&&t.jsxs(D,{item:!0,xs:12,sm:4,children:[t.jsx(j,{variant:"subtitle2",color:"text.secondary",children:"構造設計"}),t.jsx(j,{variant:"body2",children:a.structuralDesigner})]}),a.landscapeDesigner&&t.jsxs(D,{item:!0,xs:12,sm:4,children:[t.jsx(j,{variant:"subtitle2",color:"text.secondary",children:"ランドスケープ"}),t.jsx(j,{variant:"body2",children:a.landscapeDesigner})]})]})]}),a.latitude&&a.longitude&&t.jsxs(n,{sx:{mt:3},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"位置情報"}),t.jsx(n,{sx:{height:"400px",width:"100%",mt:2,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:t.jsx(Map$1,{singleMarker:{id:a.id||0,latitude:a.latitude,longitude:a.longitude,name:a.name,location:a.location},center:[a.latitude,a.longitude],zoom:15})})]})]})]});var g,v},Mn="/archi-site";let Rn=null,Dn=null,Nn=!1,zn=null;var Bn=(e=>(e.NOT_INITIALIZED="not_initialized",e.INITIALIZING="initializing",e.READY="ready",e.ERROR="error",e))(Bn||{});const getDatabaseStatus=()=>Rn||Dn?"ready":Nn?"initializing":"not_initialized";const initDatabase=async()=>Rn||Dn?(console.log("✅ Database already initialized"),Rn||Dn):zn?(console.log("⏳ Database initialization already in progress"),zn):(Nn=!0,zn=(async()=>{try{console.log("🚀 Starting database initialization (chunked preferred)..."),console.log("📍 Current URL:",window.location.href);try{const e=await async function(){console.log("🚀 Attempting chunked database loading...");try{const n=await __vitePreload((()=>import("./database-Kl6iTK8n.js").then((e=>e.i))),__vite__mapDeps([2,1])),{createDbWorker:i}=n;if(!i||"function"!=typeof i)throw new Error("createDbWorker function not found in sql.js-httpvfs module");const a=await fetch(`${Mn}/db/database-info.json`,{method:"HEAD"});if(!a.ok)throw new Error(`Database config not accessible: ${a.status}`);console.log("✅ Database config is accessible");const o=[{from:"jsonconfig",configUrl:`${Mn}/db/archimap.sqlite3.json`}];console.log("🔧 Using jsonconfig for production-safe loading");const s=window.location.origin,l=`${s}${Mn}/sqlite.worker.js`,c=`${s}${Mn}/sql-wasm.wasm`;console.log("📍 Worker URL:",l),console.log("📍 WASM URL:",c),Rn=await i(o,l,c),console.log("✅ Chunked database worker initialized");try{const e=Rn.db.exec||Rn.db.exec;if(!e||"function"!=typeof e)throw new Error("exec method not found on worker.db");const t=await e.call(Rn.db,"SELECT sqlite_version()");t&&t.length>0&&console.log(`🔍 SQLite version: ${t[0].values[0][0]}`)}catch(e){console.warn("⚠️ Version check failed, but continuing:",e)}try{const e=Rn.db.exec||Rn.db.exec,t=await e.call(Rn.db,"SELECT COUNT(*) FROM ZCDARCHITECTURE");t&&t.length>0&&console.log(`🏢 Architecture records: ${t[0].values[0][0]} (chunked loading)`)}catch(t){console.warn("⚠️ Architecture table check failed:",t)}try{const e=Rn.db.exec||Rn.db.exec,t=await e.call(Rn.db,"SELECT COUNT(*) FROM ZCDARCHITECT");t&&t.length>0&&console.log(`👤 Architect records: ${t[0].values[0][0]} (chunked loading)`)}catch(t){console.warn("⚠️ Architect table check failed:",t)}return Rn}catch(n){throw console.warn("⚠️ Chunked loading failed:",n),n}}();return console.log("🎉 Chunked loading successful!"),e}catch(e){console.warn("⚠️ Chunked loading failed, trying direct loading:",e.message)}const t=await async function(){console.log("🚀 Fallback: Direct loading (may be slow for large files)...");try{const e=(await __vitePreload((()=>import("./database-Kl6iTK8n.js").then((e=>e.s))),__vite__mapDeps([2,1]))).default;if(!e||"function"!=typeof e)throw new Error("sql.js initialization function not found");const t=await e({locateFile:e=>"sql-wasm.wasm"===e?`${Mn}/sql-wasm.wasm`:e});console.log("📥 Downloading 12MB database (this may take time)...");const n=await fetch(`${Mn}/db/archimap.sqlite`);if(!n.ok)throw new Error(`Failed to download database: ${n.status}`);const i=await n.arrayBuffer();console.log(`✅ Database downloaded: ${(i.byteLength/1024/1024).toFixed(2)} MB`),Dn=new t.Database(new Uint8Array(i));const a=Dn.exec("SELECT COUNT(*) FROM ZCDARCHITECTURE");a.length>0&&console.log(`🏢 Architecture records: ${a[0].values[0][0]} (direct loading)`);const o=Dn.exec("SELECT COUNT(*) FROM ZCDARCHITECT");return o.length>0&&console.log(`👤 Architect records: ${o[0].values[0][0]} (direct loading)`),Dn}catch(e){throw console.error("❌ Direct loading failed:",e),e}}();return console.log("🎉 Direct loading successful!"),t}catch(t){throw console.error("❌ Database initialization failed:",t),Rn=null,Dn=null,t}finally{Nn=!1,zn=null}})(),zn),getResultsArray=async(e,t=[])=>{const n=await(async(e,t=[])=>{if(Rn||Dn||await initDatabase(),Rn)try{const n=Rn.db.exec||Rn.db.exec;if(!n||"function"!=typeof n)throw new Error("exec method not found on worker.db");return await n.call(Rn.db,e,t)}catch(n){throw console.error("Worker query error:",n),n}else{if(!Dn)throw new Error("Database not initialized");try{return Dn.exec(e,t)}catch(n){throw console.error("Database query error:",n),n}}})(e,t);return(e=>{if(!e||0===e.length)return[];const{columns:t,values:n}=e[0];return n.map((e=>{const n={};return t.forEach(((t,i)=>{n[t]=e[i]})),n}))})(n)},getSingleResult=async(e,t=[])=>(await getResultsArray(e,t))[0],getAllArchitects=async(e=1,t=12,n="",i="name_asc")=>{console.log("🏗️ RealArchitectService.getAllArchitects called with:",{page:e,limit:t,searchTerm:n,sortBy:i});try{let a="",o="";if(n){const e=`%${n}%`;a=`WHERE (\n        ZAT_ARCHITECT LIKE '${e}' OR \n        ZAT_ARCHITECT_EN LIKE '${e}' OR \n        ZAT_NATIONALITY LIKE '${e}' OR \n        ZAT_CATEGORY LIKE '${e}' OR \n        ZAT_SCHOOL LIKE '${e}' OR\n        ZAT_OFFICE LIKE '${e}'\n      )`}switch(i){case"name_asc":default:o="ORDER BY ZAT_ARCHITECT ASC";break;case"name_desc":o="ORDER BY ZAT_ARCHITECT DESC";break;case"birth_year_asc":o="ORDER BY ZAT_BIRTHYEAR ASC";break;case"birth_year_desc":o="ORDER BY ZAT_BIRTHYEAR DESC"}const s=`SELECT COUNT(*) as total FROM ZCDARCHITECT ${a}`;console.log("📊 Count query:",s);const l=await getSingleResult(s);console.log("📊 Count result:",l);const c=l?.total||0,u=`\n      SELECT \n        Z_PK,\n        ZAT_ID,\n        ZAT_ARCHITECT,\n        ZAT_ARCHITECT_JP,\n        ZAT_ARCHITECT_EN,\n        ZAT_BIRTHYEAR,\n        ZAT_DEATHYEAR,\n        ZAT_NATIONALITY,\n        ZAT_CATEGORY,\n        ZAT_SCHOOL,\n        ZAT_OFFICE,\n        ZAT_DESCRIPTION,\n        ZAT_WEBSITE\n      FROM ZCDARCHITECT \n      ${a}\n      ${o}\n      LIMIT ${t} OFFSET ${(e-1)*t}\n    `,d=await getResultsArray(u);return{results:d.map((e=>({...e,id:e.ZAT_ID||e.Z_PK||0,name:e.ZAT_ARCHITECT||"",nameJp:e.ZAT_ARCHITECT_JP,nameEn:e.ZAT_ARCHITECT_EN,birthYear:e.ZAT_BIRTHYEAR,deathYear:e.ZAT_DEATHYEAR,nationality:e.ZAT_NATIONALITY,category:e.ZAT_CATEGORY,school:e.ZAT_SCHOOL,office:e.ZAT_OFFICE,bio:e.ZAT_DESCRIPTION,mainWorks:void 0,awards:void 0,imageUrl:void 0}))),total:c,page:e,limit:t,totalPages:Math.ceil(c/t)}}catch(a){throw console.error("❌ Error in RealArchitectService.getAllArchitects:",a),console.error("Error details:",{message:a instanceof Error?a.message:"Unknown error",stack:a instanceof Error?a.stack:void 0}),a}},getArchitectById=async e=>{try{const t=`\n      SELECT \n        Z_PK,\n        ZAT_ID,\n        ZAT_ARCHITECT,\n        ZAT_ARCHITECT_JP,\n        ZAT_ARCHITECT_EN,\n        ZAT_BIRTHYEAR,\n        ZAT_DEATHYEAR,\n        ZAT_NATIONALITY,\n        ZAT_CATEGORY,\n        ZAT_SCHOOL,\n        ZAT_OFFICE,\n        ZAT_DESCRIPTION,\n        ZAT_WEBSITE\n      FROM ZCDARCHITECT \n      WHERE ZAT_ID = ${e} OR Z_PK = ${e}\n      LIMIT 1\n    `,n=await getSingleResult(t);return n?{...n,id:n.ZAT_ID||n.Z_PK||0,name:n.ZAT_ARCHITECT||"",nameJp:n.ZAT_ARCHITECT_JP,nameEn:n.ZAT_ARCHITECT_EN,birthYear:n.ZAT_BIRTHYEAR,deathYear:n.ZAT_DEATHYEAR,nationality:n.ZAT_NATIONALITY,category:n.ZAT_CATEGORY,school:n.ZAT_SCHOOL,office:n.ZAT_OFFICE,bio:n.ZAT_DESCRIPTION,mainWorks:void 0,awards:void 0,imageUrl:void 0}:null}catch(t){throw console.error("Error fetching architect by ID:",t),t}},getArchitectNationalities=async()=>{try{const e="\n      SELECT DISTINCT ZAT_NATIONALITY \n      FROM ZCDARCHITECT \n      WHERE ZAT_NATIONALITY IS NOT NULL AND ZAT_NATIONALITY != ''\n      ORDER BY ZAT_NATIONALITY ASC\n    ";return(await getResultsArray(e)).map((e=>e.ZAT_NATIONALITY))}catch(e){return console.error("Error fetching nationalities:",e),[]}},getArchitectCategories=async()=>{try{const e="\n      SELECT DISTINCT ZAT_CATEGORY \n      FROM ZCDARCHITECT \n      WHERE ZAT_CATEGORY IS NOT NULL AND ZAT_CATEGORY != ''\n      ORDER BY ZAT_CATEGORY ASC\n    ";return(await getResultsArray(e)).map((e=>e.ZAT_CATEGORY))}catch(e){return console.error("Error fetching categories:",e),[]}},getArchitectSchools=async()=>{try{const e="\n      SELECT DISTINCT ZAT_SCHOOL \n      FROM ZCDARCHITECT \n      WHERE ZAT_SCHOOL IS NOT NULL AND ZAT_SCHOOL != ''\n      ORDER BY ZAT_SCHOOL ASC\n    ";return(await getResultsArray(e)).map((e=>e.ZAT_SCHOOL))}catch(e){return console.error("Error fetching schools:",e),[]}},ArchitectsPage=()=>{const[e,a]=Ut.useState([]),[o,s]=Ut.useState(!0),[c,u]=Ut.useState(0),[h,p]=Ut.useState(1),[g,v]=Ut.useState(""),[b,_]=Ut.useState("name_asc"),[w,S]=Ut.useState("grid"),[k,P]=Ut.useState(!1),[T,L]=Ut.useState(!0),[$,I]=Ut.useState([]),[M,F]=Ut.useState(!1),[G,Y]=Ut.useState(""),[V,X]=Ut.useState(""),[Q,ee]=Ut.useState(""),[te,re]=Ut.useState(""),[ne,ie]=Ut.useState(""),[ae,le]=Ut.useState(""),[ce,ue]=Ut.useState([]),[_e,Ce]=Ut.useState([]),[Oe,Ee]=Ut.useState([]),Ie="grid"===w?12:20,Me=Wt(),Re=Yt();Ut.useEffect((()=>{(async()=>{try{console.log("🏗️ Loading filter options...");const[e,t,n]=await Promise.all([getArchitectNationalities(),getArchitectCategories(),getArchitectSchools()]);console.log("✅ Filter options loaded:",{nationalities:e.length,categories:t.length,schools:n.length}),ue(e),Ce(t),Ee(n)}catch(e){console.error("❌ Failed to load filter options:",e)}})()}),[]),Ut.useEffect((()=>{const e=new URLSearchParams(Me.search),t=e.get("search")||"",n=parseInt(e.get("page")||"1"),i=e.get("sort")||"name_asc",a=e.get("nationality")||"",o=e.get("category")||"",s=e.get("school")||"";v(t),p(n),_(i),X(a),ee(o),re(s),fetchArchitects(n,t,i,{nationality:a||void 0,category:o||void 0,school:s||void 0})}),[Me.search]),Ut.useEffect((()=>{const e=[];V&&e.push({type:"国籍",value:V,label:V}),Q&&e.push({type:"カテゴリ",value:Q,label:Q}),te&&e.push({type:"学校",value:te,label:te}),g&&e.push({type:"検索",value:g,label:g}),I(e)}),[V,Q,te,g]);const De=Ut.useMemo((()=>{if(!e||0===e.length)return null;const t=new Map,n=new Map,i=new Map,a=new Map;return e.forEach((e=>{if(e.nationality&&t.set(e.nationality,(t.get(e.nationality)||0)+1),e.category&&n.set(e.category,(n.get(e.category)||0)+1),e.school&&i.set(e.school,(i.get(e.school)||0)+1),e.birthYear){const t=10*Math.floor(e.birthYear/10)+"年代";a.set(t,(a.get(t)||0)+1)}})),{topNationalities:Array.from(t.entries()).sort(((e,t)=>t[1]-e[1])).slice(0,5).map((([e,t])=>({name:e,count:t}))),topCategories:Array.from(n.entries()).sort(((e,t)=>t[1]-e[1])).slice(0,4).map((([e,t])=>({name:e,count:t}))),topSchools:Array.from(i.entries()).sort(((e,t)=>t[1]-e[1])).slice(0,3).map((([e,t])=>({name:e,count:t}))),recentDecades:Array.from(a.entries()).sort(((e,t)=>t[0].localeCompare(e[0]))).slice(0,3).map((([e,t])=>({decade:e,count:t})))}}),[e]),handleQuickFilter=(e,t)=>{const n=new URLSearchParams(Me.search);n.delete("nationality"===e?"nationality":"category"===e?"category":"school"===e?"school":e),n.set("nationality"===e?"nationality":"category"===e?"category":"school"===e?"school":e,t),n.set("page","1"),Re({search:n.toString()})},fetchArchitects=async(e,t=g,n=b,i={})=>{console.log("🔍 fetchArchitects called with:",{page:e,search:t,sort:n,filters:i}),s(!0);try{let o;t||Object.values(i).some((e=>e))?(console.log("📊 Using searchArchitects with filters"),o=await(async(e="",t={},n=1,i=12)=>{try{const a=[];if(e){const t=`%${e}%`;a.push(`(\n        ZAT_ARCHITECT LIKE '${t}' OR \n        ZAT_ARCHITECT_EN LIKE '${t}' OR \n        ZAT_NATIONALITY LIKE '${t}' OR \n        ZAT_CATEGORY LIKE '${t}' OR \n        ZAT_SCHOOL LIKE '${t}' OR\n        ZAT_OFFICE LIKE '${t}' OR\n        ZAT_DESCRIPTION LIKE '${t}'\n      )`)}t.nationality&&a.push(`ZAT_NATIONALITY = '${t.nationality}'`),t.category&&a.push(`ZAT_CATEGORY = '${t.category}'`),t.school&&a.push(`ZAT_SCHOOL LIKE '%${t.school}%'`),t.birthYearFrom&&a.push(`ZAT_BIRTHYEAR >= ${t.birthYearFrom}`),t.birthYearTo&&a.push(`ZAT_BIRTHYEAR <= ${t.birthYearTo}`);const o=a.length>0?`WHERE ${a.join(" AND ")}`:"",s=`SELECT COUNT(*) as total FROM ZCDARCHITECT ${o}`,l=await getSingleResult(s),c=l?.total||0,u=`\n      SELECT \n        Z_PK,\n        ZAT_ID,\n        ZAT_ARCHITECT,\n        ZAT_ARCHITECT_JP,\n        ZAT_ARCHITECT_EN,\n        ZAT_BIRTHYEAR,\n        ZAT_DEATHYEAR,\n        ZAT_NATIONALITY,\n        ZAT_CATEGORY,\n        ZAT_SCHOOL,\n        ZAT_OFFICE,\n        ZAT_DESCRIPTION,\n        ZAT_WEBSITE\n      FROM ZCDARCHITECT \n      ${o}\n      ORDER BY ZAT_ARCHITECT ASC\n      LIMIT ${i} OFFSET ${(n-1)*i}\n    `;return{results:(await getResultsArray(u)).map((e=>({...e,id:e.ZAT_ID||e.Z_PK||0,name:e.ZAT_ARCHITECT||"",nameJp:e.ZAT_ARCHITECT_JP,nameEn:e.ZAT_ARCHITECT_EN,birthYear:e.ZAT_BIRTHYEAR,deathYear:e.ZAT_DEATHYEAR,nationality:e.ZAT_NATIONALITY,category:e.ZAT_CATEGORY,school:e.ZAT_SCHOOL,office:e.ZAT_OFFICE,bio:e.ZAT_DESCRIPTION,mainWorks:void 0,awards:void 0,imageUrl:void 0}))),total:c,page:n,limit:i,totalPages:Math.ceil(c/i)}}catch(G){throw console.error("Error searching architects:",G),G}})(t,i,e,Ie)):(console.log("📋 Using getAllArchitects"),o=await getAllArchitects(e,Ie,"",n)),console.log("✅ Architects fetched successfully:",{total:o.total,resultsLength:o.results.length,page:o.page,totalPages:o.totalPages}),a(o.results),u(o.total),p(e),F(!1),Y("")}catch(o){console.error("❌ Error fetching architects:",o),a([]),u(0),F(!0),Y(o instanceof Error?o.message:"データベースに接続できませんでした")}finally{s(!1)}},handleSearch=()=>{const e=new URLSearchParams;g&&e.set("search",g),V&&e.set("nationality",V),Q&&e.set("category",Q),te&&e.set("school",te),"name_asc"!==b&&e.set("sort",b),Re({search:e.toString()})},handleClearFilters=()=>{v(""),X(""),ee(""),re(""),ie(""),le(""),_("name_asc"),P(!1),Re({search:""})},getArchitectDisplayName=e=>e.name||e.ZAT_ARCHITECT||"不明",getArchitectYears=e=>`${e.birthYear||e.ZAT_BIRTHYEAR||"?"}-${e.deathYear||e.ZAT_DEATHYEAR||"現在"}`,getArchitectTags=e=>{const t=[],n=e.nationality||e.ZAT_NATIONALITY,i=e.category||e.ZAT_CATEGORY,a=e.school||e.ZAT_SCHOOL;return n&&t.push(n),i&&t.push(i),a&&t.push(a),t},Ne=Math.ceil(c/Ie);return t.jsxs(R,{maxWidth:"xl",sx:{py:4},children:[t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[t.jsx(j,{variant:"h4",component:"h1",children:"建築家一覧"}),t.jsxs(de,{value:w,exclusive:!0,onChange:(e,t)=>{t&&S(t)},size:"small",children:[t.jsx(he,{value:"grid","aria-label":"カードビュー",children:t.jsx(f,{title:"カードビュー",children:t.jsx(pe,{})})}),t.jsx(he,{value:"list","aria-label":"リストビュー",children:t.jsx(f,{title:"リストビュー",children:t.jsx(fe,{})})})]})]}),t.jsxs(D,{container:!0,spacing:3,children:[t.jsxs(D,{item:!0,xs:12,lg:T?9:12,children:[t.jsxs(H,{sx:{p:3,mb:3},children:[t.jsxs(n,{sx:{mb:3},children:[t.jsx(K,{fullWidth:!0,variant:"outlined",placeholder:"建築家名、国籍、学校で検索...",value:g,onChange:e=>v(e.target.value),onKeyPress:e=>"Enter"===e.key&&handleSearch(),InputProps:{startAdornment:t.jsx(oe,{position:"start",children:t.jsx(W,{})}),endAdornment:g&&t.jsx(oe,{position:"end",children:t.jsx(m,{onClick:()=>v(""),size:"small",children:t.jsx(se,{})})})}}),t.jsxs(n,{sx:{display:"flex",gap:2,mt:2},children:[t.jsx(i,{variant:"contained",onClick:handleSearch,children:"検索"}),t.jsx(i,{variant:"outlined",startIcon:t.jsx(ve,{}),onClick:()=>P(!k),children:"フィルター"}),t.jsxs(me,{size:"small",sx:{minWidth:120},children:[t.jsx(ge,{children:"並び替え"}),t.jsxs(ye,{value:b,label:"並び替え",onChange:e=>{const t=e.target.value;_(t);const n=new URLSearchParams(Me.search);"name_asc"!==t?n.set("sort",t):n.delete("sort"),Re({search:n.toString()})},startAdornment:t.jsx(xe,{sx:{mr:1,color:"action.active"}}),children:[t.jsx(l,{value:"name_asc",children:"名前順"}),t.jsx(l,{value:"name_desc",children:"名前逆順"}),t.jsx(l,{value:"birth_year_asc",children:"生年順"}),t.jsx(l,{value:"birth_year_desc",children:"生年逆順"})]})]})]})]}),k&&t.jsxs(n,{sx:{mt:3,p:3,bgcolor:"grey.50",borderRadius:1},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"詳細フィルター"}),t.jsxs(D,{container:!0,spacing:2,children:[t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"国籍"}),t.jsxs(ye,{value:V,label:"国籍",onChange:e=>X(e.target.value),children:[t.jsx(l,{value:"",children:"すべて"}),ce.map((e=>t.jsx(l,{value:e,children:e},e)))]})]})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"カテゴリ"}),t.jsxs(ye,{value:Q,label:"カテゴリ",onChange:e=>ee(e.target.value),children:[t.jsx(l,{value:"",children:"すべて"}),_e.map((e=>t.jsx(l,{value:e,children:e},e)))]})]})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"学校"}),t.jsxs(ye,{value:te,label:"学校",onChange:e=>re(e.target.value),children:[t.jsx(l,{value:"",children:"すべて"}),Oe.map((e=>t.jsx(l,{value:e,children:e},e)))]})]})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(i,{variant:"outlined",startIcon:t.jsx(se,{}),onClick:handleClearFilters,fullWidth:!0,children:"クリア"})})]})]}),$.length>0&&t.jsxs(n,{sx:{mt:2},children:[t.jsx(j,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"適用中のフィルター:"}),t.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[$.map(((e,n)=>t.jsx(U,{label:`${e.type}: ${e.label}`,onDelete:()=>(e=>{const t=new URLSearchParams(Me.search);"検索"===e.type?(t.delete("search"),v("")):"国籍"===e.type?(t.delete("nationality"),X("")):"カテゴリ"===e.type?(t.delete("category"),ee("")):"学校"===e.type&&(t.delete("school"),re("")),Re({search:t.toString()})})(e),color:"primary",variant:"outlined"},n))),t.jsx(i,{size:"small",startIcon:t.jsx(se,{}),onClick:handleClearFilters,children:"すべてクリア"})]})]}),t.jsx(n,{sx:{mt:2},children:t.jsxs(j,{variant:"body2",color:"text.secondary",children:[c.toLocaleString(),"人の建築家",$.length>0&&" (絞り込み結果)"]})})]}),o?"list"===w?t.jsx(H,{sx:{p:2},children:[...Array(Ie)].map(((e,i)=>t.jsxs(n,{sx:{mb:2},children:[t.jsx(N,{variant:"text",height:40}),t.jsx(N,{variant:"text",height:20,width:"60%"})]},i)))}):t.jsx(D,{container:!0,spacing:2,children:[...Array(Ie)].map(((e,n)=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(N,{variant:"rectangular",height:300})},n)))}):M?t.jsxs(H,{elevation:1,sx:{p:6,textAlign:"center"},children:[t.jsx(ke,{sx:{fontSize:64,color:"error.main",mb:2}}),t.jsx(j,{variant:"h6",gutterBottom:!0,color:"error.main",children:"データベースサービスが利用できません"}),t.jsx(j,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"現在、建築家データベースに接続できません。"}),t.jsx(j,{variant:"body2",color:"text.secondary",children:G||"データベースサーバーが起動していない可能性があります。しばらく待ってから再度お試しください。"})]}):0===e.length?t.jsxs(H,{elevation:1,sx:{p:6,textAlign:"center"},children:[t.jsx(be,{sx:{fontSize:64,color:"text.secondary",mb:2}}),t.jsx(j,{variant:"h6",gutterBottom:!0,children:"建築家が見つかりませんでした"}),t.jsx(j,{variant:"body2",color:"text.secondary",children:"検索条件を変更してもう一度お試しください"})]}):"list"===w?t.jsx(H,{sx:{p:2},children:t.jsx(O,{children:e.map(((i,a)=>t.jsxs(Kt.Fragment,{children:[t.jsx(E,{alignItems:"flex-start",component:Ht,to:`/architects/${i.id||i.ZAT_ID||i.Z_PK}`,sx:{textDecoration:"none",color:"inherit","&:hover":{backgroundColor:"action.hover"}},children:t.jsx(d,{primary:t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(j,{variant:"h6",component:"span",children:getArchitectDisplayName(i)}),i.awards||i.ZAT_AWARDS&&t.jsx(U,{label:"受賞",size:"small",color:"warning",variant:"outlined",icon:t.jsx(we,{})})]}),secondary:t.jsx(n,{sx:{mt:1},children:t.jsxs(D,{container:!0,spacing:2,children:[t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(Pe,{sx:{mr:.5,color:"text.secondary",fontSize:16}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:getArchitectYears(i)})]})}),t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(Te,{sx:{mr:.5,color:"text.secondary",fontSize:16}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:i.nationality||i.ZAT_NATIONALITY||"不明"})]})}),t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(je,{sx:{mr:.5,color:"text.secondary",fontSize:16}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:i.category||i.ZAT_CATEGORY||"不明"})]})}),t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(Le,{sx:{mr:.5,color:"text.secondary",fontSize:16}}),t.jsx(j,{variant:"body2",color:"text.secondary",noWrap:!0,children:i.school||i.ZAT_SCHOOL||"不明"})]})})]})})})}),a<e.length-1&&t.jsx(C,{component:"li"})]},i.id||i.ZAT_ID||i.Z_PK||a)))})}):t.jsx(D,{container:!0,spacing:3,children:e.map(((e,i)=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,lg:3,children:t.jsx(z,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:8}},elevation:2,children:t.jsx(J,{component:Ht,to:`/architects/${e.id||e.ZAT_ID||e.Z_PK}`,sx:{height:"100%",display:"flex",flexDirection:"column"},children:t.jsxs(B,{sx:{flexGrow:1,width:"100%"},children:[t.jsx(j,{variant:"h6",component:"div",gutterBottom:!0,sx:{fontWeight:600,lineHeight:1.3,minHeight:"2.6em",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:getArchitectDisplayName(e)}),t.jsxs(n,{sx:{mb:2},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t.jsx(Te,{sx:{fontSize:16,color:"text.secondary"}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:e.nationality||e.ZAT_NATIONALITY||"不明"})]}),t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t.jsx(Pe,{sx:{fontSize:16,color:"text.secondary"}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:getArchitectYears(e)})]}),(e.category||e.ZAT_CATEGORY)&&t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t.jsx(je,{sx:{fontSize:16,color:"text.secondary"}}),t.jsx(j,{variant:"body2",color:"text.secondary",children:e.category||e.ZAT_CATEGORY})]}),(e.school||e.ZAT_SCHOOL)&&t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t.jsx(Le,{sx:{fontSize:16,color:"text.secondary"}}),t.jsx(j,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.school||e.ZAT_SCHOOL})]}),(e.office||e.ZAT_OFFICE)&&t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[t.jsx($e,{sx:{fontSize:16,color:"text.secondary"}}),t.jsx(j,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.office||e.ZAT_OFFICE})]})]}),t.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:"auto"},children:[getArchitectTags(e).slice(0,3).map(((e,n)=>t.jsx(U,{label:e,size:"small",variant:"outlined",sx:{fontSize:"0.75rem",height:24,pointerEvents:"none"}},n))),getArchitectTags(e).length>3&&t.jsx(U,{label:"+"+(getArchitectTags(e).length-3),size:"small",variant:"outlined",sx:{fontSize:"0.75rem",height:24,pointerEvents:"none",color:"text.secondary"}}),(e.awards||e.ZAT_AWARDS)&&t.jsx(U,{label:"受賞",size:"small",color:"warning",variant:"outlined",icon:t.jsx(we,{sx:{fontSize:"0.75rem"}}),sx:{fontSize:"0.75rem",height:24,pointerEvents:"none"}})]})]})})})},e.id||e.ZAT_ID||e.Z_PK||i)))}),Ne>1&&!o&&t.jsx(n,{sx:{display:"flex",justifyContent:"center",mt:4},children:t.jsx(Se,{count:Ne,page:h,onChange:(e,t)=>{p(t);const n=new URLSearchParams(Me.search);n.set("page",t.toString()),Re({search:n.toString()}),window.scrollTo(0,0)},color:"primary",size:"large",showFirstButton:!0,showLastButton:!0})})]}),T&&t.jsx(D,{item:!0,xs:12,lg:3,children:t.jsxs(H,{sx:{p:2,position:"sticky",top:20},children:[t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsxs(j,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:[t.jsx(Ae,{sx:{mr:1}}),"建築家サジェスト"]}),t.jsx(m,{size:"small",onClick:()=>L(!1),children:t.jsx(A,{})})]}),o?t.jsxs(n,{children:[t.jsx(N,{variant:"text",height:30}),t.jsx(N,{variant:"text",height:30}),t.jsx(N,{variant:"text",height:30})]}):De&&t.jsxs(Z,{spacing:3,children:[t.jsxs(n,{children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[t.jsx(Te,{sx:{mr:1,color:"primary.main"}}),"国籍別"]}),t.jsx(O,{dense:!0,children:De.topNationalities.map(((e,n)=>t.jsx(E,{button:!0,onClick:()=>handleQuickFilter("nationality",e.name),children:t.jsx(d,{primary:e.name,secondary:`${e.count}人`})},n)))})]}),t.jsx(C,{}),t.jsxs(n,{children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[t.jsx(je,{sx:{mr:1,color:"secondary.main"}}),"カテゴリ別"]}),t.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:De.topCategories.map(((e,n)=>t.jsx(U,{label:`${e.name} (${e.count})`,size:"small",onClick:()=>handleQuickFilter("category",e.name)},n)))})]}),t.jsx(C,{}),t.jsxs(n,{children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[t.jsx(Le,{sx:{mr:1,color:"warning.main"}}),"主要大学"]}),t.jsx(O,{dense:!0,children:De.topSchools.map(((e,n)=>t.jsx(E,{button:!0,onClick:()=>handleQuickFilter("school",e.name),children:t.jsx(d,{primary:e.name,secondary:`${e.count}人`})},n)))})]}),t.jsx(C,{}),t.jsxs(n,{children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center"},children:[t.jsx(q,{sx:{mr:1,color:"success.main"}}),"生年代別"]}),t.jsx(O,{dense:!0,children:De.recentDecades.map(((e,n)=>t.jsx(E,{children:t.jsx(d,{primary:e.decade,secondary:`${e.count}人`})},n)))})]})]})]})})]})]})},Fn=Ut.memo((({architectures:e,compact:i=!1})=>e&&0!==e.length?t.jsx(D,{container:!0,spacing:i?2:3,children:e.map((e=>t.jsx(D,{item:!0,xs:12,sm:6,md:i?6:4,children:t.jsx(z,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:t.jsx(J,{component:Ht,to:`/architecture/${e.id}`,sx:{flexGrow:1},children:t.jsxs(B,{children:[t.jsx(j,{gutterBottom:!0,variant:"h6",component:"h2",children:e.name}),e.completedYear>0&&t.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:1},children:[t.jsx(Ie,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[e.completedYear,"年"]})]}),(e.city||e.location)&&t.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:1},children:[t.jsx(ae,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[e.city?e.city:"",e.city&&e.location?" / ":"",e.location?e.location:""]})]}),e.tag&&t.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:e.tag.split(",").filter((e=>""!==e.trim()&&!e.includes("の追加建築"))).map(((e,n)=>t.jsx(U,{label:e.trim(),size:"small",color:"secondary",variant:"outlined",sx:{height:"20px",fontSize:"0.65rem"}},n)))})]})})})},e.id)))}):t.jsx(j,{variant:"body2",color:"text.secondary",children:"登録されている作品はありません。"})));Fn.displayName="ArchitectureList";const WikipediaIcon=()=>t.jsx(n,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:t.jsx(j,{variant:"caption",component:"span",sx:{fontFamily:"serif",fontWeight:"bold",fontSize:"16px"},children:"W"})}),ArchitectSinglePage=()=>{const{id:e}=qt(),[a,o]=Ut.useState(null),[s,l]=Ut.useState(!0),[c,u]=Ut.useState(null),[d,h]=Ut.useState([]),p=Yt();Ut.useEffect((()=>{e&&(async()=>{l(!0);try{const n=await getArchitectById(parseInt(e||"0"));if(!n)return u("建築家情報が見つかりませんでした。"),void l(!1);o(n);const i=[];if(n.teacher1){const e={name:n.teacher1,id:null};try{e.id=await findArchitectIdByName(n.teacher1)}catch(t){console.error("教師情報の取得に失敗:",t)}i.push(e)}if(n.teacher2){const e={name:n.teacher2,id:null};try{e.id=await findArchitectIdByName(n.teacher2)}catch(t){console.error("教師情報の取得に失敗:",t)}i.push(e)}if(n.teacher3){const e={name:n.teacher3,id:null};try{e.id=await findArchitectIdByName(n.teacher3)}catch(t){console.error("教師情報の取得に失敗:",t)}i.push(e)}h(i)}catch(t){console.error("建築家データ取得エラー:",t),u("建築家情報の読み込み中にエラーが発生しました。")}finally{l(!1)}})()}),[e]);const findArchitectIdByName=async e=>null,handleTagClick=(e,t)=>{if(!t)return;let n="";switch(e){case"nationality":n=`nationality=${encodeURIComponent(t)}`;break;case"born":n=`birthyear_from=${encodeURIComponent(t)}&birthyear_to=${encodeURIComponent(t)}`;break;case"died":n=`deathyear=${encodeURIComponent(t)}`;break;case"category":n=`category=${encodeURIComponent(t)}`;break;default:return}p(`/architects?${n}`)};if(s)return t.jsx(R,{maxWidth:"lg",sx:{py:4},children:t.jsx(n,{sx:{display:"flex",justifyContent:"center",py:8},children:t.jsx(G,{})})});if(c||!a)return t.jsx(R,{maxWidth:"lg",sx:{py:4},children:t.jsxs(H,{sx:{p:3},children:[t.jsx(j,{variant:"h5",color:"error",gutterBottom:!0,children:"エラー"}),t.jsx(j,{paragraph:!0,children:c||"建築家情報が見つかりませんでした。"}),t.jsx(i,{variant:"outlined",startIcon:t.jsx(Ce,{}),onClick:()=>p(-1),children:"戻る"})]})});const m=new Set;a.works&&a.works.forEach((e=>{if(e.tag){e.tag.split(",").forEach((e=>{const t=e.trim();t&&!t.includes("の追加建築")&&m.add(t)}))}}));const g=[];if(a.nationality&&g.push(`nationality:${a.nationality}`),a.birthYear>0){const e=10*Math.floor(a.birthYear/10);g.push(`born:${e}s`)}return a.deathYear>0&&g.push(`died:${a.deathYear}`),a.category&&g.push(`category:${a.category}`),a.school&&g.push(`school:${a.school}`),t.jsxs(R,{maxWidth:"lg",sx:{py:4},children:[t.jsx(i,{variant:"outlined",component:Ht,to:"/architects",startIcon:t.jsx(Ce,{}),sx:{mb:3},children:"建築家一覧に戻る"}),t.jsxs(H,{sx:{p:3,mb:4},children:[t.jsx(j,{variant:"h4",component:"h1",gutterBottom:!0,children:a.name||"不明"}),t.jsxs(n,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:3},children:[a.nationality&&t.jsx(U,{icon:t.jsx(Te,{}),label:`nationality:${a.nationality}`,variant:"outlined",onClick:()=>handleTagClick("nationality",a.nationality),clickable:!0}),a.birthYear>0&&t.jsx(U,{icon:t.jsx(Pe,{}),label:`born:${10*Math.floor(a.birthYear/10)}s`,variant:"outlined",onClick:()=>handleTagClick("born",10*Math.floor(a.birthYear/10)),clickable:!0}),a.deathYear>0&&t.jsx(U,{icon:t.jsx(Me,{}),label:`died:${a.deathYear}`,variant:"outlined",onClick:()=>handleTagClick("died",a.deathYear),clickable:!0}),a.category&&t.jsx(U,{icon:t.jsx(je,{}),label:`category:${a.category}`,variant:"outlined",onClick:()=>handleTagClick("category",a.category),clickable:!0}),a.office&&t.jsx(U,{icon:t.jsx(Re,{}),label:a.office,variant:"outlined"})]}),t.jsx(C,{sx:{my:3}}),t.jsxs(n,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[a.website&&t.jsx(f,{title:"公式ホームページ",children:t.jsx(i,{href:a.website.startsWith("http")?a.website:`http://${a.website}`,target:"_blank",rel:"noopener noreferrer",startIcon:t.jsx(De,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4caf50",color:"#ffffff","&:hover":{backgroundColor:"#388e3c"}},children:"ホームページ"})}),t.jsx(f,{title:"Google検索",children:t.jsx(i,{href:(v=a.name,b=a.nationality,`https://www.google.com/search?q=${encodeURIComponent(`${v} ${b||""} 建築家`)}`),target:"_blank",rel:"noopener noreferrer",startIcon:t.jsx(W,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"検索"})}),t.jsx(f,{title:"Wikipediaで検索",children:t.jsx(i,{href:(e=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(e)}`)(a.name),target:"_blank",rel:"noopener noreferrer",startIcon:t.jsx(WikipediaIcon,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),t.jsx(Ne,{component:H,variant:"outlined",sx:{mb:4},children:t.jsx(ze,{children:t.jsxs(Be,{children:[a.nationality&&t.jsxs(Fe,{children:[t.jsx(Ze,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:t.jsx(j,{variant:"subtitle2",children:"国籍"})}),t.jsx(Ze,{children:a.nationality})]}),(a.birthYear>0||a.deathYear>0)&&t.jsxs(Fe,{children:[t.jsx(Ze,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:t.jsx(j,{variant:"subtitle2",children:"生年 - 没年"})}),t.jsxs(Ze,{children:[a.birthYear>0?`${a.birthYear}年`:"不明",a.deathYear>0?` - ${a.deathYear}年`:""]})]}),a.office&&t.jsxs(Fe,{children:[t.jsx(Ze,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:t.jsx(j,{variant:"subtitle2",children:"事務所"})}),t.jsx(Ze,{children:a.office})]}),a.prefecture&&t.jsxs(Fe,{children:[t.jsx(Ze,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:t.jsx(j,{variant:"subtitle2",children:"拠点"})}),t.jsx(Ze,{children:a.prefecture})]}),a.nameEn&&t.jsxs(Fe,{children:[t.jsx(Ze,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:t.jsx(j,{variant:"subtitle2",children:"英語表記"})}),t.jsx(Ze,{children:a.nameEn})]}),(a.school||a.faculty||a.schoolAbroad)&&t.jsxs(Fe,{children:[t.jsx(Ze,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:t.jsx(j,{variant:"subtitle2",children:"教育背景"})}),t.jsx(Ze,{children:t.jsxs(n,{sx:{display:"flex",alignItems:"center"},children:[t.jsx(Le,{sx:{mr:1,fontSize:"1rem",color:"text.secondary"}}),t.jsx(j,{variant:"body2",children:(()=>{if(!a)return null;const e=[];if(a.school){let t=a.school;a.faculty&&(t+=` ${a.faculty}`),e.push(t)}return a.schoolAbroad&&e.push(a.schoolAbroad),e.length>0?e.join("、"):null})()})]})})]}),(a.teacher1||a.teacher2||a.teacher3)&&t.jsxs(Fe,{children:[t.jsx(Ze,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:t.jsx(j,{variant:"subtitle2",children:"師事した建築家"})}),t.jsx(Ze,{children:t.jsx(n,{sx:{display:"flex",flexDirection:"column",gap:1},children:d&&0!==d.length?d.map(((e,n)=>t.jsxs("span",{children:[n>0&&"、",e.id?t.jsx(Ue,{component:Ht,to:`/architects/${e.id}`,color:"inherit",underline:"hover",children:e.name}):e.name]},n))):null})})]}),a.category&&t.jsxs(Fe,{children:[t.jsx(Ze,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:t.jsx(j,{variant:"subtitle2",children:"カテゴリー"})}),t.jsx(Ze,{children:a.category})]})]})})}),m.size>0&&t.jsxs(n,{sx:{mb:4},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"受賞歴・選定"}),t.jsx(n,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:Array.from(m).map(((e,n)=>t.jsx(U,{icon:t.jsx(we,{}),label:String(e),onClick:()=>handleTagClick("category",e),clickable:!0,color:"secondary",variant:"outlined",size:"small"},n)))})]}),a.bio&&t.jsxs(n,{sx:{mb:4},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"経歴"}),t.jsx(j,{variant:"body1",sx:{whiteSpace:"pre-line"},children:a.bio})]}),a.works&&a.works.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs(n,{sx:{mb:4},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"作品マップ"}),a.works.some((e=>e.latitude&&e.longitude))?t.jsx(n,{sx:{height:"400px",width:"100%",mb:3,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:t.jsx(Map$1,{markers:a.works.filter((e=>e.latitude&&e.longitude)),zoom:5,center:[a.works[0].latitude||35.6762,a.works[0].longitude||139.6503]})}):t.jsx(j,{variant:"body2",color:"text.secondary",children:"位置情報が登録されている作品がありません。"})]}),t.jsxs(n,{sx:{mb:4},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"代表作品"}),t.jsx(Fn,{architectures:a.works})]})]})]})]});var v,b},MapPage=()=>{const[e,a]=Ut.useState(!0),[o,s]=Ut.useState([]),[l,c]=Ut.useState([]),[u,h]=Ut.useState({yearFrom:"",yearTo:""}),[p,f]=Ut.useState(!1),[m,g]=Ut.useState(null),[v,b]=Ut.useState(!1);Ut.useEffect((()=>{fetchWorks()}),[]);const fetchWorks=async()=>{a(!0);try{const e=(await getAllArchitectures$1(1,1e3)).results.filter((e=>e.latitude&&e.longitude)).map((e=>({id:e.id,name:e.title,architectName:e.architect,completedYear:e.year||0,city:e.prefecture,location:e.address||"",latitude:e.latitude,longitude:e.longitude})));if(c(e),u.yearFrom||u.yearTo){let t=e;u.yearFrom&&(t=t.filter((e=>e.completedYear>=parseInt(u.yearFrom)))),u.yearTo&&(t=t.filter((e=>e.completedYear<=parseInt(u.yearTo)))),s(t)}else{const t=(e=>{if(!e||0===e.length)return{from:0,to:0};const t=e.filter((e=>e.completedYear>0));if(0===t.length)return{from:0,to:0};const n=t.map((e=>e.completedYear)).sort(((e,t)=>e-t)),i=n[0],a=n[n.length-1],o=Math.min(100,Math.floor((a-i)/2)),s=n[Math.floor(Math.random()*(n.length-Math.floor(n.length/4)))];return{from:s,to:Math.min(s+o,a)}})(e);h({yearFrom:t.from.toString(),yearTo:t.to.toString()});const n=e.filter((e=>e.completedYear>=t.from&&e.completedYear<=t.to));s(n)}}catch(e){console.error("Error fetching works:",e)}finally{a(!1)}},handleFilterChange=e=>{const{name:t,value:n}=e.target;h({...u,[t]:n})};return t.jsxs(R,{maxWidth:"lg",sx:{py:4},children:[t.jsx(j,{variant:"h4",component:"h1",gutterBottom:!0,children:"建築地図"}),t.jsxs(H,{sx:{p:3,mb:4},children:[t.jsx(i,{startIcon:t.jsx(ve,{}),onClick:()=>f(!p),sx:{mb:2},children:p?"フィルターを閉じる":"フィルターを表示"}),p&&t.jsx(n,{sx:{mb:2},children:t.jsxs(D,{container:!0,spacing:2,children:[t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(K,{fullWidth:!0,label:"年代（から）",name:"yearFrom",type:"number",value:u.yearFrom,onChange:handleFilterChange})}),t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(K,{fullWidth:!0,label:"年代（まで）",name:"yearTo",type:"number",value:u.yearTo,onChange:handleFilterChange})}),t.jsx(D,{item:!0,xs:12,md:4,children:t.jsxs(n,{sx:{display:"flex",gap:1,height:"100%"},children:[t.jsx(i,{variant:"contained",color:"primary",onClick:()=>{a(!0);let e=l;u.yearFrom&&(e=e.filter((e=>e.completedYear>=parseInt(u.yearFrom)))),u.yearTo&&(e=e.filter((e=>e.completedYear<=parseInt(u.yearTo)))),s(e),a(!1)},sx:{flexGrow:1},children:"フィルター適用"}),t.jsx(i,{variant:"outlined",onClick:()=>{h({yearFrom:"",yearTo:""}),s(l)},sx:{flexGrow:1},children:"クリア"})]})})]})}),t.jsxs(n,{sx:{display:"flex",alignItems:"center",mb:2},children:[t.jsx($,{sx:{mr:1}}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:["マップ上に表示された作品: ",o.length,"件 ",u.yearFrom&&u.yearTo&&`(${u.yearFrom}年〜${u.yearTo}年)`]})]})]}),e?t.jsx(n,{sx:{display:"flex",justifyContent:"center",py:4},children:t.jsx(G,{})}):t.jsxs(n,{sx:{height:600,bgcolor:"grey.200",position:"relative",borderRadius:1},children:[t.jsx(Map$1,{markers:o,height:"600px",zoom:5,center:[35.6762,139.6503]}),t.jsxs(n,{sx:{position:"absolute",top:16,right:16,width:320,maxHeight:568,overflow:"auto",bgcolor:"background.paper",borderRadius:1,boxShadow:3,p:2,zIndex:1e3},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"作品リスト"}),0===o.length?t.jsx(j,{variant:"body2",children:"条件に一致する作品はありません"}):t.jsx(O,{dense:!0,children:o.map((e=>t.jsxs(Kt.Fragment,{children:[t.jsx(E,{onClick:()=>(e=>{g(e),b(!0)})(e),sx:{cursor:"pointer",bgcolor:m&&m.id===e.id?"action.selected":"transparent","&:hover":{bgcolor:"action.hover"}},children:t.jsx(d,{primary:e.name,secondary:t.jsxs(t.Fragment,{children:[e.architectName&&t.jsxs("span",{children:[e.architectName,t.jsx("br",{})]}),e.completedYear>0&&`${e.completedYear}年 | `,e.city||""]})})}),t.jsx(C,{component:"li"})]},e.id)))})]})]}),t.jsx(S,{anchor:"right",open:v,onClose:()=>b(!1),children:m&&t.jsxs(n,{sx:{width:350,p:3},children:[t.jsx(j,{variant:"h5",gutterBottom:!0,children:m.name}),t.jsxs(n,{sx:{mb:3},children:[m.architectName&&t.jsx(j,{variant:"subtitle1",color:"text.secondary",children:m.architectName}),t.jsxs(j,{variant:"body2",children:[m.completedYear>0&&`${m.completedYear}年`,m.city&&` | ${m.city}`]}),m.location&&t.jsx(j,{variant:"body2",sx:{mt:1},children:m.location})]}),t.jsx(n,{sx:{mb:3,height:200},children:t.jsx(Map$1,{singleMarker:m,height:"200px",zoom:15,center:[m.latitude,m.longitude]})}),t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[t.jsx(i,{variant:"outlined",onClick:()=>b(!1),children:"閉じる"}),t.jsx(i,{variant:"contained",component:Ht,to:`/architecture/${m.id}`,children:"詳細を見る"})]})]})})]})},Card=({children:e,className:n=""})=>t.jsx("div",{className:`rounded-lg border bg-white shadow-sm ${n}`,children:e}),CardHeader=({children:e,className:n=""})=>t.jsx("div",{className:`p-6 pb-0 ${n}`,children:e}),CardTitle=({children:e,className:n=""})=>t.jsx("h3",{className:`text-lg font-medium leading-none tracking-tight ${n}`,children:e}),CardContent=({children:e,className:n=""})=>t.jsx("div",{className:`p-6 pt-0 ${n}`,children:e}),Zn=Ut.createContext(void 0),Tabs=({defaultValue:e,value:n,onValueChange:i,children:a,className:o=""})=>{const[s,l]=Ut.useState(e||""),c=void 0!==n?n:s;return t.jsx(Zn.Provider,{value:{value:c,onValueChange:e=>{void 0===n&&l(e),i?.(e)}},children:t.jsx("div",{className:o,children:a})})},TabsList=({children:e,className:n=""})=>t.jsx("div",{className:`flex space-x-1 rounded-lg bg-gray-100 p-1 ${n}`,children:e}),TabsTrigger=({value:e,children:n,className:i=""})=>{const a=Ut.useContext(Zn);if(!a)throw new Error("TabsTrigger must be used within a Tabs component");const{value:o,onValueChange:s}=a,l=o===e;return t.jsx("button",{className:`\n        px-3 py-2 text-sm font-medium transition-all\n        ${l?"bg-white text-black shadow-sm":"text-gray-600 hover:text-black hover:bg-white/50"}\n        rounded-md\n        ${i}\n      `,onClick:()=>s(e),type:"button",children:n})},TabsContent=({value:e,children:n,className:i=""})=>{const a=Ut.useContext(Zn);if(!a)throw new Error("TabsContent must be used within a Tabs component");const{value:o}=a;return o!==e?null:t.jsx("div",{className:`mt-6 ${i}`,children:n})},Badge=({children:e,variant:n="default",className:i="",onClick:a})=>{const o=a?"cursor-pointer":"";return t.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium transition-colors ${{default:"bg-blue-100 text-blue-800 hover:bg-blue-200",secondary:"bg-gray-100 text-gray-800 hover:bg-gray-200",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50",destructive:"bg-red-100 text-red-800 hover:bg-red-200"}[n]} ${o} ${i}`,onClick:a,children:e})};var Un,Kn={},Wn={};Un=Wn,Object.defineProperty(Un,Symbol.toStringTag,{value:"Module"}),Un.isUnsafeProperty=function(e){return"__proto__"===e};var Hn={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}}(Hn);var Gn={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toKey=function(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}}(Gn);var Yn={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toPath=function(e){const t=[],n=e.length;if(0===n)return t;let i=0,a="",o="",s=!1;for(46===e.charCodeAt(0)&&(t.push(""),i++);i<n;){const l=e[i];o?"\\"===l&&i+1<n?(i++,a+=e[i]):l===o?o="":a+=l:s?'"'===l||"'"===l?o=l:"]"===l?(s=!1,t.push(a),a=""):a+=l:"["===l?(s=!0,a&&(t.push(a),a="")):"."===l?a&&(t.push(a),a=""):a+=l,i++}return a&&t.push(a),t}}(Yn),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wn,n=Hn,i=Gn,a=Yn;e.get=function get(e,o,s){if(null==e)return s;switch(typeof o){case"string":{if(t.isUnsafeProperty(o))return s;const i=e[o];return void 0===i?n.isDeepKey(o)?get(e,a.toPath(o),s):s:i}case"number":case"symbol":{"number"==typeof o&&(o=i.toKey(o));const t=e[o];return void 0===t?s:t}default:{if(Array.isArray(o))return function(e,n,i){if(0===n.length)return i;let a=e;for(let o=0;o<n.length;o++){if(null==a)return i;if(t.isUnsafeProperty(n[o]))return i;a=a[n[o]]}if(void 0===a)return i;return a}(e,o,s);if(o=Object.is(o?.valueOf(),-0)?"-0":String(o),t.isUnsafeProperty(o))return s;const n=e[o];return void 0===n?s:n}}}}(Kn);const qn=Zt(Kn.get);var mathSign=e=>0===e?0:e>0?1:-1,isNan=e=>"number"==typeof e&&e!=+e,isPercent=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,isNumber=e=>("number"==typeof e||e instanceof Number)&&!isNan(e),isNumOrStr=e=>isNumber(e)||"string"==typeof e,Vn=0,uniqueId=e=>{var t=++Vn;return"".concat(e||"").concat(t)},getPercentValue=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!isNumber(e)&&"string"!=typeof e)return i;if(isPercent(e)){if(null==t)return i;var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return isNan(n)&&(n=i),a&&null!=t&&n>t&&(n=t),n},hasDuplicate=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},i=0;i<t;i++){if(n[e[i]])return!0;n[e[i]]=!0}return!1},interpolateNumber$1=(e,t)=>isNumber(e)&&isNumber(t)?n=>e+n*(t-e):()=>t;function interpolate$1(e,t,n){return isNumber(e)&&isNumber(t)?e+n*(t-e):t}function findEntryInArray(e,t,n){if(e&&e.length)return e.find((e=>e&&("function"==typeof t?t(e):qn(e,t))===n))}var isNullish=e=>null==e,upperFirst=e=>isNullish(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Xn=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Jn=["points","pathLength"],Qn={svg:["viewBox","children"],polygon:Jn,polyline:Jn},ei=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],adaptEventHandlers=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if(Ut.isValidElement(e)&&(n=e.props),"object"!=typeof n&&"function"!=typeof n)return null;var i={};return Object.keys(n).forEach((e=>{ei.includes(e)&&(i[e]=t=>n[e](n,t))})),i},adaptEventsOfChild=(e,t,n)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var i=null;return Object.keys(e).forEach((a=>{var o=e[a];ei.includes(a)&&"function"==typeof o&&(i||(i={}),i[a]=((e,t,n)=>i=>(e(t,n,i),null))(o,t,n))})),i},getDisplayName=e=>"string"==typeof e?e:e?e.displayName||e.name||"Component":"",ti=null,ri=null,toArray$1=e=>{if(e===ti&&Array.isArray(ri))return ri;var t=[];return Ut.Children.forEach(e,(e=>{isNullish(e)||(Ke.isFragment(e)?t=t.concat(toArray$1(e.props.children)):t.push(e))})),ri=t,ti=e,t};function findAllByType(e,t){var n=[],i=[];return i=Array.isArray(t)?t.map((e=>getDisplayName(e))):[getDisplayName(t)],toArray$1(e).forEach((e=>{var t=qn(e,"type.displayName")||qn(e,"type.name");-1!==i.indexOf(t)&&n.push(e)})),n}var isClipDot=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),filterProps=(e,t,n)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var i=e;if(Ut.isValidElement(e)&&(i=e.props),"object"!=typeof i&&"function"!=typeof i)return null;var a={};return Object.keys(i).forEach((e=>{var o;((e,t,n,i)=>{var a,o=null!==(a=i&&(null==Qn?void 0:Qn[i]))&&void 0!==a?a:[];return t.startsWith("data-")||"function"!=typeof e&&(i&&o.includes(t)||Xn.includes(t))||n&&ei.includes(t)})(null===(o=i)||void 0===o?void 0:o[e],e,t,n)&&(a[e]=i[e])})),a},ni=["children","width","height","viewBox","className","style","title","desc"];function _extends$y(){return _extends$y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$y.apply(null,arguments)}var ii=Ut.forwardRef(((e,t)=>{var{children:n,width:i,height:a,viewBox:o,className:s,style:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ni),h=o||{width:i,height:a,x:0,y:0},p=We("recharts-surface",s);return Ut.createElement("svg",_extends$y({},filterProps(d,!0,"svg"),{className:p,width:i,height:a,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),Ut.createElement("title",null,c),Ut.createElement("desc",null,u),n)})),ai=["children","className"];function _extends$x(){return _extends$x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$x.apply(null,arguments)}var oi=Ut.forwardRef(((e,t)=>{var{children:n,className:i}=e,a=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ai),o=We("recharts-layer",i);return Ut.createElement("g",_extends$x({className:o},filterProps(a,!0),{ref:t}),n)})),si=Ut.createContext(null);function constant$1(e){return function(){return e}}const li=Math.cos,ci=Math.sin,ui=Math.sqrt,di=Math.PI,hi=2*di,pi=Math.PI,fi=2*pi,mi=1e-6,gi=fi-mi;function append(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class Path{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?append:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append;const n=10**t;return function(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,a,o){this._append`C${+e},${+t},${+n},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,t,n,i,a){if(e=+e,t=+t,n=+n,i=+i,(a=+a)<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=n-e,c=i-t,u=o-e,d=s-t,h=u*u+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>mi)if(Math.abs(d*l-c*u)>mi&&a){let p=n-o,f=i-s,m=l*l+c*c,g=p*p+f*f,v=Math.sqrt(m),b=Math.sqrt(h),_=a*Math.tan((pi-Math.acos((m+h-g)/(2*v*b)))/2),j=_/b,w=_/v;Math.abs(j-1)>mi&&this._append`L${e+j*u},${t+j*d}`,this._append`A${a},${a},0,0,${+(d*p>u*f)},${this._x1=e+w*l},${this._y1=t+w*c}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,i,a,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),l=n*Math.sin(i),c=e+s,u=t+l,d=1^o,h=o?i-a:a-i;null===this._x1?this._append`M${c},${u}`:(Math.abs(this._x1-c)>mi||Math.abs(this._y1-u)>mi)&&this._append`L${c},${u}`,n&&(h<0&&(h=h%fi+fi),h>gi?this._append`A${n},${n},0,1,${d},${e-s},${t-l}A${n},${n},0,1,${d},${this._x1=c},${this._y1=u}`:h>mi&&this._append`A${n},${n},0,${+(h>=pi)},${d},${this._x1=e+n*Math.cos(a)},${this._y1=t+n*Math.sin(a)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function withPath(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Path(t)}function array(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}function curveLinear(e){return new Linear(e)}function x(e){return e[0]}function y(e){return e[1]}function shapeLine(e,t){var n=constant$1(!0),i=null,a=curveLinear,o=null,s=withPath(line);function line(l){var c,u,d,h=(l=array(l)).length,p=!1;for(null==i&&(o=a(d=s())),c=0;c<=h;++c)!(c<h&&n(u=l[c],c,l))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(u,c,l),+t(u,c,l));if(d)return o=null,d+""||null}return e="function"==typeof e?e:void 0===e?x:constant$1(e),t="function"==typeof t?t:void 0===t?y:constant$1(t),line.x=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(+t),line):e},line.y=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(+e),line):t},line.defined=function(e){return arguments.length?(n="function"==typeof e?e:constant$1(!!e),line):n},line.curve=function(e){return arguments.length?(a=e,null!=i&&(o=a(i)),line):a},line.context=function(e){return arguments.length?(null==e?i=o=null:o=a(i=e),line):i},line}function shapeArea(e,t,n){var i=null,a=constant$1(!0),o=null,s=curveLinear,l=null,c=withPath(area);function area(u){var d,h,p,f,m,g=(u=array(u)).length,v=!1,b=new Array(g),_=new Array(g);for(null==o&&(l=s(m=c())),d=0;d<=g;++d){if(!(d<g&&a(f=u[d],d,u))===v)if(v=!v)h=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=d-1;p>=h;--p)l.point(b[p],_[p]);l.lineEnd(),l.areaEnd()}v&&(b[d]=+e(f,d,u),_[d]=+t(f,d,u),l.point(i?+i(f,d,u):b[d],n?+n(f,d,u):_[d]))}if(m)return l=null,m+""||null}function arealine(){return shapeLine().defined(a).curve(s).context(o)}return e="function"==typeof e?e:void 0===e?x:constant$1(+e),t="function"==typeof t?t:constant$1(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?y:constant$1(+n),area.x=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(+t),i=null,area):e},area.x0=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(+t),area):e},area.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:constant$1(+e),area):i},area.y=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(+e),n=null,area):t},area.y0=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(+e),area):t},area.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:constant$1(+e),area):n},area.lineX0=area.lineY0=function(){return arealine().x(e).y(t)},area.lineY1=function(){return arealine().x(e).y(n)},area.lineX1=function(){return arealine().x(i).y(t)},area.defined=function(e){return arguments.length?(a="function"==typeof e?e:constant$1(!!e),area):a},area.curve=function(e){return arguments.length?(s=e,null!=o&&(l=s(o)),area):s},area.context=function(e){return arguments.length?(null==e?o=l=null:l=s(o=e),area):o},area}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};class Bump{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}const yi={draw(e,t){const n=ui(t/di);e.moveTo(n,0),e.arc(0,0,n,0,hi)}},xi={draw(e,t){const n=ui(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},vi=ui(1/3),bi=2*vi,_i={draw(e,t){const n=ui(t/bi),i=n*vi;e.moveTo(0,-n),e.lineTo(i,0),e.lineTo(0,n),e.lineTo(-i,0),e.closePath()}},ji={draw(e,t){const n=ui(t),i=-n/2;e.rect(i,i,n,n)}},wi=ci(di/10)/ci(7*di/10),Si=ci(hi/10)*wi,Ai=-li(hi/10)*wi,Ci={draw(e,t){const n=ui(.8908130915292852*t),i=Si*n,a=Ai*n;e.moveTo(0,-n),e.lineTo(i,a);for(let o=1;o<5;++o){const t=hi*o/5,s=li(t),l=ci(t);e.lineTo(l*n,-s*n),e.lineTo(s*i-l*a,l*i+s*a)}e.closePath()}},Oi=ui(3),Ei={draw(e,t){const n=-ui(t/(3*Oi));e.moveTo(0,2*n),e.lineTo(-Oi*n,-n),e.lineTo(Oi*n,-n),e.closePath()}},ki=-.5,Pi=ui(3)/2,Ti=1/ui(12),Li=3*(Ti/2+1),$i={draw(e,t){const n=ui(t/Li),i=n/2,a=n*Ti,o=i,s=n*Ti+n,l=-o,c=s;e.moveTo(i,a),e.lineTo(o,s),e.lineTo(l,c),e.lineTo(ki*i-Pi*a,Pi*i+ki*a),e.lineTo(ki*o-Pi*s,Pi*o+ki*s),e.lineTo(ki*l-Pi*c,Pi*l+ki*c),e.lineTo(ki*i+Pi*a,ki*a-Pi*i),e.lineTo(ki*o+Pi*s,ki*s-Pi*o),e.lineTo(ki*l+Pi*c,ki*c-Pi*l),e.closePath()}};function noop$6(){}function point$2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Basis(e){this._context=e}function BasisClosed(e){this._context=e}function BasisOpen(e){this._context=e}function LinearClosed(e){this._context=e}function sign(e){return e<0?-1:1}function slope3(e,t,n){var i=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(i||a<0&&-0),s=(n-e._y1)/(a||i<0&&-0),l=(o*a+s*i)/(i+a);return(sign(o)+sign(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(l))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function point$1(e,t,n){var i=e._x0,a=e._y0,o=e._x1,s=e._y1,l=(o-i)/3;e._context.bezierCurveTo(i+l,a+l*t,o-l,s-l*n,o,s)}function MonotoneX(e){this._context=e}function MonotoneY(e){this._context=new ReflectContext(e)}function ReflectContext(e){this._context=e}function Natural(e){this._context=e}function controlPoints(e){var t,n,i=e.length-1,a=new Array(i),o=new Array(i),s=new Array(i);for(a[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<i-1;++t)a[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(a[i-1]=2,o[i-1]=7,s[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)n=a[t]/o[t-1],o[t]-=n,s[t]-=n*s[t-1];for(a[i-1]=s[i-1]/o[i-1],t=i-2;t>=0;--t)a[t]=(s[t]-a[t+1])/o[t];for(o[i-1]=(e[i]+a[i-1])/2,t=0;t<i-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function Step(e,t){this._context=e,this._t=t}function stackOffsetNone(e,t){if((a=e.length)>1)for(var n,i,a,o=1,s=e[t[0]],l=s.length;o<a;++o)for(i=s,s=e[t[o]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function stackOrderNone(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},BasisClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:point$2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:point$2(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},LinearClosed.prototype={areaStart:noop$6,areaEnd:noop$6,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,n=slope3(this,e,t)),n);break;default:point$1(this,this._t0,n=slope3(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)},ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,a,o){this._context.bezierCurveTo(t,e,i,n,o,a)}},Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var i=controlPoints(e),a=controlPoints(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],a[0][o],i[1][o],a[1][o],e[s],t[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Ii=["type","size","sizeType"];function _extends$w(){return _extends$w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$w.apply(null,arguments)}function ownKeys$H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$H(Object(n),!0).forEach((function(t){_defineProperty$L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mi={symbolCircle:yi,symbolCross:xi,symbolDiamond:_i,symbolSquare:ji,symbolStar:Ci,symbolTriangle:Ei,symbolWye:$i},Ri=Math.PI/180,Symbols=e=>{var t,n,{type:i="circle",size:a=64,sizeType:o="area"}=e,s=_objectSpread$H(_objectSpread$H({},function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Ii)),{},{type:i,size:a,sizeType:o}),{className:l,cx:c,cy:u}=s,d=filterProps(s,!0);return c===+c&&u===+u&&a===+a?Ut.createElement("path",_extends$w({},d,{className:We("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(u,")"),d:(t=(e=>{var t="symbol".concat(upperFirst(e));return Mi[t]||yi})(i),n=function(e,t){let n=null,i=withPath(symbol);function symbol(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return e="function"==typeof e?e:constant$1(e||yi),t="function"==typeof t?t:constant$1(void 0===t?64:+t),symbol.type=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(t),symbol):e},symbol.size=function(e){return arguments.length?(t="function"==typeof e?e:constant$1(+e),symbol):t},symbol.context=function(e){return arguments.length?(n=null==e?null:e,symbol):n},symbol}().type(t).size(((e,t,n)=>{if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var i=18*Ri;return 1.25*e*e*(Math.tan(i)-Math.tan(2*i)*Math.tan(i)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(a,o,i)),n())})):null};function _extends$v(){return _extends$v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$v.apply(null,arguments)}function ownKeys$G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _defineProperty$K(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Symbols.registerSymbol=(e,t)=>{Mi["symbol".concat(upperFirst(e))]=t};var Di=32;class DefaultLegendContent extends Ut.PureComponent{renderIcon(e,t){var{inactiveColor:n}=this.props,i=16,a=Di/6,o=Di/3,s=e.inactive?n:e.color,l=null!=t?t:e.type;if("none"===l)return null;if("plainline"===l)return Ut.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:Di,y2:i,className:"recharts-legend-icon"});if("line"===l)return Ut.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(i,"h").concat(o,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,"\n            H").concat(Di,"M").concat(2*o,",").concat(i,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if("rect"===l)return Ut.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(Di,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(Ut.isValidElement(e.legendIcon)){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$G(Object(n),!0).forEach((function(t){_defineProperty$K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete c.legendIcon,Ut.cloneElement(e.legendIcon,c)}return Ut.createElement(Symbols,{fill:s,cx:i,cy:i,size:Di,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:t,layout:n,formatter:i,inactiveColor:a,iconType:o}=this.props,s={x:0,y:0,width:Di,height:Di},l={display:"horizontal"===n?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map(((e,n)=>{var u=e.formatter||i,d=We({"recharts-legend-item":!0,["legend-item-".concat(n)]:!0,inactive:e.inactive});if("none"===e.type)return null;var h=e.inactive?a:e.color,p=u?u(e.value,e,n):e.value;return Ut.createElement("li",_extends$v({className:d,style:l,key:"legend-item-".concat(n)},adaptEventsOfChild(this.props,e,n)),Ut.createElement(ii,{width:t,height:t,viewBox:s,style:c,"aria-label":"".concat(p," legend icon")},this.renderIcon(e,o)),Ut.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},p))}))}render(){var{payload:e,layout:t,align:n}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===t?n:"left"};return Ut.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}_defineProperty$K(DefaultLegendContent,"displayName","Legend"),_defineProperty$K(DefaultLegendContent,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Ni={},zi={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.uniqBy=function(e,t){const n=new Map;for(let i=0;i<e.length;i++){const a=e[i],o=t(a);n.has(o)||n.set(o,a)}return Array.from(n.values())}}(zi);var Bi={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.identity=function(e){return e}}(Bi);var Fi={},Zi={},Ui={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}}(Ui),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ui;e.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&t.isLength(e.length)}}(Zi);var Ki={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObjectLike=function(e){return"object"==typeof e&&null!==e}}(Ki),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zi,n=Ki;e.isArrayLikeObject=function(e){return n.isObjectLike(e)&&t.isArrayLike(e)}}(Fi);var Wi={},Hi={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kn;e.property=function(e){return function(n){return t.get(n,e)}}}(Hi);var Gi={},Yi={},qi={},Vi={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}}(Vi);var Xi={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}}(Xi);var Ji,Qi,ea={};function requireIsMatchWith(){return Ji||(Ji=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=Vi,i=Xi,a=ea;function isMatchWithInternal(e,t,o,s){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,n,a){if(null==t)return!0;if(Array.isArray(t))return isArrayMatch(e,t,n,a);if(t instanceof Map)return function(e,t,n,i){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[a,o]of t.entries()){if(!1===n(e.get(a),o,a,e,t,i))return!1}return!0}(e,t,n,a);if(t instanceof Set)return isSetMatch(e,t,n,a);const o=Object.keys(t);if(null==e)return 0===o.length;if(0===o.length)return!0;if(a&&a.has(t))return a.get(t)===e;a&&a.set(t,e);try{for(let s=0;s<o.length;s++){const l=o[s];if(!i.isPrimitive(e)&&!(l in e))return!1;if(void 0===t[l]&&void 0!==e[l])return!1;if(null===t[l]&&null!==e[l])return!1;if(!n(e[l],t[l],l,e,t,a))return!1}return!0}finally{a&&a.delete(t)}}(e,t,o,s);case"function":return Object.keys(t).length>0?isMatchWithInternal(e,{...t},o,s):a.eq(e,t);default:return n.isObject(e)?"string"!=typeof t||""===t:a.eq(e,t)}}function isArrayMatch(e,t,n,i){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const a=new Set;for(let o=0;o<t.length;o++){const s=t[o];let l=!1;for(let c=0;c<e.length;c++){if(a.has(c))continue;let u=!1;if(n(e[c],s,o,e,t,i)&&(u=!0),u){a.add(c),l=!0;break}}if(!l)return!1}return!0}function isSetMatch(e,t,n,i){return 0===t.size||e instanceof Set&&isArrayMatch([...e],[...t],n,i)}e.isMatchWith=function(e,n,i){return"function"!=typeof i?t.isMatch(e,n):isMatchWithInternal(e,n,(function doesMatch(e,t,n,a,o,s){const l=i(e,t,n,a,o,s);return void 0!==l?Boolean(l):isMatchWithInternal(e,t,doesMatch,s)}),new Map)},e.isSetMatch=isSetMatch}(qi)),qi}function requireIsMatch(){return Qi||(Qi=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatchWith();e.isMatch=function(e,n){return t.isMatchWith(e,n,(()=>{}))}}(Yi)),Yi}!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}(ea);var ta={},ra={},na={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}}(na);var ia={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}}(ia);var aa={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.argumentsTag="[object Arguments]",e.arrayBufferTag="[object ArrayBuffer]",e.arrayTag="[object Array]",e.bigInt64ArrayTag="[object BigInt64Array]",e.bigUint64ArrayTag="[object BigUint64Array]",e.booleanTag="[object Boolean]",e.dataViewTag="[object DataView]",e.dateTag="[object Date]",e.errorTag="[object Error]",e.float32ArrayTag="[object Float32Array]",e.float64ArrayTag="[object Float64Array]",e.functionTag="[object Function]",e.int16ArrayTag="[object Int16Array]",e.int32ArrayTag="[object Int32Array]",e.int8ArrayTag="[object Int8Array]",e.mapTag="[object Map]",e.numberTag="[object Number]",e.objectTag="[object Object]",e.regexpTag="[object RegExp]",e.setTag="[object Set]",e.stringTag="[object String]",e.symbolTag="[object Symbol]",e.uint16ArrayTag="[object Uint16Array]",e.uint32ArrayTag="[object Uint32Array]",e.uint8ArrayTag="[object Uint8Array]",e.uint8ClampedArrayTag="[object Uint8ClampedArray]"}(aa);var oa={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}}(oa),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=na,n=ia,i=aa,a=Xi,o=oa;function cloneDeepWithImpl(e,t,s,l=new Map,c=void 0){const u=c?.(e,t,s,l);if(null!=u)return u;if(a.isPrimitive(e))return e;if(l.has(e))return l.get(e);if(Array.isArray(e)){const t=new Array(e.length);l.set(e,t);for(let n=0;n<e.length;n++)t[n]=cloneDeepWithImpl(e[n],n,s,l,c);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;l.set(e,t);for(const[n,i]of e)t.set(n,cloneDeepWithImpl(i,n,s,l,c));return t}if(e instanceof Set){const t=new Set;l.set(e,t);for(const n of e)t.add(cloneDeepWithImpl(n,void 0,s,l,c));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);l.set(e,t);for(let n=0;n<e.length;n++)t[n]=cloneDeepWithImpl(e[n],n,s,l,c);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return l.set(e,t),copyProperties(t,e,s,l,c),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return l.set(e,t),copyProperties(t,e,s,l,c),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return l.set(e,t),copyProperties(t,e,s,l,c),t}if(e instanceof Error){const t=new e.constructor;return l.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,copyProperties(t,e,s,l,c),t}if("object"==typeof e&&function(e){switch(n.getTag(e)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return l.set(e,t),copyProperties(t,e,s,l,c),t}return e}function copyProperties(e,n,i=e,a,o){const s=[...Object.keys(n),...t.getSymbols(n)];for(let t=0;t<s.length;t++){const l=s[t],c=Object.getOwnPropertyDescriptor(e,l);(null==c||c.writable)&&(e[l]=cloneDeepWithImpl(n[l],l,i,a,o))}}e.cloneDeepWith=function(e,t){return cloneDeepWithImpl(e,void 0,e,new Map,t)},e.cloneDeepWithImpl=cloneDeepWithImpl,e.copyProperties=copyProperties}(ra),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ra;e.cloneDeep=function(e){return t.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}}(ta),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=ta;e.matches=function(e){return e=n.cloneDeep(e),n=>t.isMatch(n,e)}}(Gi);var sa={},la={},ca={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ra,n=aa;e.cloneDeepWith=function(e,i){return t.cloneDeepWith(e,((a,o,s,l)=>{const c=i?.(a,o,s,l);if(null!=c)return c;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case n.numberTag:case n.stringTag:case n.booleanTag:{const n=new e.constructor(e?.valueOf());return t.copyProperties(n,e),n}case n.argumentsTag:{const n={};return t.copyProperties(n,e),n.length=e.length,n[Symbol.iterator]=e[Symbol.iterator],n}default:return}}))}}(ca),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ca;e.cloneDeep=function(e){return t.cloneDeepWith(e)}}(la);var ua={},da={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;e.isIndex=function(e,n=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<n;case"symbol":return!1;case"string":return t.test(e)}}}(da);var ha={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ia;e.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===t.getTag(e)}}(ha),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hn,n=da,i=ha,a=Yn;e.has=function(e,o){let s;if(s=Array.isArray(o)?o:"string"==typeof o&&t.isDeepKey(o)&&null==e?.[o]?a.toPath(o):[o],0===s.length)return!1;let l=e;for(let t=0;t<s.length;t++){const e=s[t];if(null==l||!Object.hasOwn(l,e)){if(!((Array.isArray(l)||i.isArguments(l))&&n.isIndex(e)&&e<l.length))return!1}l=l[e]}return!0}}(ua),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=Gn,i=la,a=Kn,o=ua;e.matchesProperty=function(e,s){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=n.toKey(e)}return s=i.cloneDeep(s),function(n){const i=a.get(n,e);return void 0===i?o.has(n,e):void 0===s?void 0===i:t.isMatch(i,s)}}}(sa),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bi,n=Hi,i=Gi,a=sa;e.iteratee=function(e){if(null==e)return t.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?a.matchesProperty(e[0],e[1]):i.matches(e);case"string":case"symbol":case"number":return n.property(e)}}}(Wi),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zi,n=Bi,i=Fi,a=Wi;e.uniqBy=function(e,o=n.identity){return i.isArrayLikeObject(e)?t.uniqBy(Array.from(e),a.iteratee(o)):[]}}(Ni);const pa=Zt(Ni.uniqBy);function getUniqPayload(e,t,n){return!0===t?pa(e,n):"function"==typeof t?pa(e,t):e}var fa={exports:{}},ma={},ga={exports:{}},ya={},xa=Ut;var va="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ba=xa.useState,_a=xa.useEffect,ja=xa.useLayoutEffect,wa=xa.useDebugValue;function checkIfSnapshotChanged(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!va(e,n)}catch(i){return!0}}var Sa="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=ba({inst:{value:n,getSnapshot:t}}),a=i[0].inst,o=i[1];return ja((function(){a.value=n,a.getSnapshot=t,checkIfSnapshotChanged(a)&&o({inst:a})}),[e,n,t]),_a((function(){return checkIfSnapshotChanged(a)&&o({inst:a}),e((function(){checkIfSnapshotChanged(a)&&o({inst:a})}))}),[e]),wa(n),n};ya.useSyncExternalStore=void 0!==xa.useSyncExternalStore?xa.useSyncExternalStore:Sa,ga.exports=ya;var Aa=ga.exports,Ca=Ut,Oa=Aa;var Ea="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ka=Oa.useSyncExternalStore,Pa=Ca.useRef,Ta=Ca.useEffect,La=Ca.useMemo,$a=Ca.useDebugValue;ma.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var o=Pa(null);if(null===o.current){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=La((function(){function memoizedSelector(t){if(!l){if(l=!0,e=t,t=i(t),void 0!==a&&s.hasValue){var n=s.value;if(a(n,t))return o=n}return o=t}if(n=o,Ea(e,t))return n;var c=i(t);return void 0!==a&&a(n,c)?(e=t,n):(e=t,o=c)}var e,o,l=!1,c=void 0===n?null:n;return[function(){return memoizedSelector(t())},null===c?void 0:function(){return memoizedSelector(c())}]}),[t,n,i,a]);var l=ka(e,o[0],o[1]);return Ta((function(){s.hasValue=!0,s.value=l}),[l]),$a(l),l},fa.exports=ma;var Ia=fa.exports,Ma=Ut.createContext(null),noopDispatch=e=>e,useAppDispatch=()=>{var e=Ut.useContext(Ma);return e?e.store.dispatch:noopDispatch},noop$5=()=>{},addNestedSubNoop=()=>noop$5,refEquality=(e,t)=>e===t;function useAppSelector(e){var t=Ut.useContext(Ma);return Ia.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:addNestedSubNoop,t?t.store.getState:noop$5,t?t.store.getState:noop$5,t?e:noop$5,refEquality)}var ensureIsArray=e=>Array.isArray(e)?e:[e];function getDependencies(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}var Ra="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function weakMapMemoize(e,t={}){let n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:i}=t;let a,o=0;function memoized(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const i=e.get(n);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=i}else{let e=t.p;null===e&&(t.p=e=new Map);const i=e.get(n);void 0===i?(t={s:0,v:void 0,o:null,p:null},e.set(n,t)):t=i}}const l=t;let c;if(1===t.s)c=t.v;else if(c=e.apply(null,arguments),o++,i){const e=a?.deref?.()??a;null!=e&&i(e,c)&&(c=e,0!==o&&o--);a="object"==typeof c&&null!==c||"function"==typeof c?new Ra(c):c}return l.s=1,l.v=c,c}return memoized.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},memoized.resetResultsCount()},memoized.resultsCount=()=>o,memoized.resetResultsCount=()=>{o=0},memoized}function createSelectorCreator(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,createSelector2=(...e)=>{let t,i=0,a=0,o={},s=e.pop();"object"==typeof s&&(o=s,s=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);const l={...n,...o},{memoize:c,memoizeOptions:u=[],argsMemoize:d=weakMapMemoize,argsMemoizeOptions:h=[]}=l,p=ensureIsArray(u),f=ensureIsArray(h),m=getDependencies(e),g=c((function(){return i++,s.apply(null,arguments)}),...p),v=d((function(){a++;const e=function(e,t){const n=[],{length:i}=e;for(let a=0;a<i;a++)n.push(e[a].apply(null,t));return n}(m,arguments);return t=g.apply(null,e),t}),...f);return Object.assign(v,{resultFunc:s,memoizedResultFunc:g,dependencies:m,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>t,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:c,argsMemoize:d})};return Object.assign(createSelector2,{withTypes:()=>createSelector2}),createSelector2}var Da=createSelectorCreator(weakMapMemoize),Na=Object.assign(((e,t=Da)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,i)=>(e[n[i]]=t,e)),{})))}),{withTypes:()=>Na}),za={},Ba={},Fa={};!function(e){function getPriority(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});e.compareValues=(e,t,n)=>{if(e!==t){const i=getPriority(e),a=getPriority(t);if(i===a&&0===i){if(e<t)return"desc"===n?1:-1;if(e>t)return"desc"===n?-1:1}return"desc"===n?a-i:i-a}return 0}}(Fa);var Za={},Ua={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}}(Ua),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ua,n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.isKey=function(e,a){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!t.isSymbol(e))||("string"==typeof e&&(i.test(e)||!n.test(e))||null!=a&&Object.hasOwn(a,e)))}}(Za),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fa,n=Za,i=Yn;e.orderBy=function(e,a,o,s){if(null==e)return[];o=s?void 0:o,Array.isArray(e)||(e=Object.values(e)),Array.isArray(a)||(a=null==a?[null]:[a]),0===a.length&&(a=[null]),Array.isArray(o)||(o=null==o?[]:[o]),o=o.map((e=>String(e)));const getValueByNestedPath=(e,t)=>{let n=e;for(let i=0;i<t.length&&null!=n;++i)n=n[t[i]];return n},l=a.map((e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||n.isKey(e)?e:{key:e,path:i.toPath(e)}))),c=e.map((e=>({original:e,criteria:l.map((t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:getValueByNestedPath(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?getValueByNestedPath(t,e):"object"==typeof t?t[e]:t)(t,e)))})));return c.slice().sort(((e,n)=>{for(let i=0;i<l.length;i++){const a=t.compareValues(e.criteria[i],n.criteria[i],o[i]);if(0!==a)return a}return 0})).map((e=>e.original))}}(Ba);var Ka={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.flatten=function(e,t=1){const n=[],i=Math.floor(t),recursive=(e,t)=>{for(let a=0;a<e.length;a++){const o=e[a];Array.isArray(o)&&t<i?recursive(o,t+1):n.push(o)}};return recursive(e,0),n}}(Ka);var Wa={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=da,n=Zi,i=Vi,a=ea;e.isIterateeCall=function(e,o,s){return!!i.isObject(s)&&(!!("number"==typeof o&&n.isArrayLike(s)&&t.isIndex(o)&&o<s.length||"string"==typeof o&&o in s)&&a.eq(s[o],e))}}(Wa),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ba,n=Ka,i=Wa;e.sortBy=function(e,...a){const o=a.length;return o>1&&i.isIterateeCall(e,a[0],a[1])?a=[]:o>2&&i.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),t.orderBy(e,n.flatten(a),["asc"])}}(za);const Ha=Zt(za.sortBy);var selectLegendSettings=e=>e.legend.settings,Ga=Da([e=>e.legend.payload,selectLegendSettings],((e,t)=>{var{itemSorter:n}=t,i=e.flat(1);return n?Ha(i,n):i}));function useElementOffset(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=Ut.useState({height:0,left:0,top:0,width:0}),i=Ut.useCallback((e=>{if(null!=e){var i=e.getBoundingClientRect(),a={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(a.height-t.height)>1||Math.abs(a.left-t.left)>1||Math.abs(a.top-t.top)>1||Math.abs(a.width-t.width)>1)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}}),[t.width,t.height,t.top,t.left,...e]);return[t,i]}function formatProdErrorMessage$1(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ya=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),randomString=()=>Math.random().toString(36).substring(7).split("").join("."),qa={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`};function isPlainObject$5(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function createStore(e,t,n){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(formatProdErrorMessage$1(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(formatProdErrorMessage$1(1));return n(createStore)(e,t)}let i=e,a=t,o=new Map,s=o,l=0,c=!1;function ensureCanMutateNextListeners(){s===o&&(s=new Map,o.forEach(((e,t)=>{s.set(t,e)})))}function getState(){if(c)throw new Error(formatProdErrorMessage$1(3));return a}function subscribe(e){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(4));if(c)throw new Error(formatProdErrorMessage$1(5));let t=!0;ensureCanMutateNextListeners();const n=l++;return s.set(n,e),function(){if(t){if(c)throw new Error(formatProdErrorMessage$1(6));t=!1,ensureCanMutateNextListeners(),s.delete(n),o=null}}}function dispatch(e){if(!isPlainObject$5(e))throw new Error(formatProdErrorMessage$1(7));if(void 0===e.type)throw new Error(formatProdErrorMessage$1(8));if("string"!=typeof e.type)throw new Error(formatProdErrorMessage$1(17));if(c)throw new Error(formatProdErrorMessage$1(9));try{c=!0,a=i(a,e)}finally{c=!1}return(o=s).forEach((e=>{e()})),e}dispatch({type:qa.INIT});return{dispatch:dispatch,subscribe:subscribe,getState:getState,replaceReducer:function(e){if("function"!=typeof e)throw new Error(formatProdErrorMessage$1(10));i=e,dispatch({type:qa.REPLACE})},[Ya]:function(){const e=subscribe;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(formatProdErrorMessage$1(11));function observeState(){const e=t;e.next&&e.next(getState())}observeState();return{unsubscribe:e(observeState)}},[Ya](){return this}}}}}function combineReducers(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const i=t[o];"function"==typeof e[i]&&(n[i]=e[i])}const i=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if(void 0===n(void 0,{type:qa.INIT}))throw new Error(formatProdErrorMessage$1(12));if(void 0===n(void 0,{type:qa.PROBE_UNKNOWN_ACTION()}))throw new Error(formatProdErrorMessage$1(13))}))}(n)}catch(Hp){a=Hp}return function(e={},t){if(a)throw a;let o=!1;const s={};for(let a=0;a<i.length;a++){const l=i[a],c=n[l],u=e[l],d=c(u,t);if(void 0===d)throw t&&t.type,new Error(formatProdErrorMessage$1(14));s[l]=d,o=o||d!==u}return o=o||i.length!==Object.keys(e).length,o?s:e}}function compose$1(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}function isAction(e){return isPlainObject$5(e)&&"type"in e&&"string"==typeof e.type}var Va=Symbol.for("immer-nothing"),Xa=Symbol.for("immer-draftable"),Ja=Symbol.for("immer-state");function die(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qa=Object.getPrototypeOf;function isDraft(e){return!!e&&!!e[Ja]}function isDraftable(e){return!!e&&(isPlainObject$4(e)||Array.isArray(e)||!!e[Xa]||!!e.constructor?.[Xa]||isMap(e)||isSet(e))}var eo=Object.prototype.constructor.toString();function isPlainObject$4(e){if(!e||"object"!=typeof e)return!1;const t=Qa(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===eo}function each(e,t){0===getArchtype(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,i)=>t(i,n,e)))}function getArchtype(e){const t=e[Ja];return t?t.type_:Array.isArray(e)?1:isMap(e)?2:isSet(e)?3:0}function has(e,t){return 2===getArchtype(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function set(e,t,n){const i=getArchtype(e);2===i?e.set(t,n):3===i?e.add(n):e[t]=n}function isMap(e){return e instanceof Map}function isSet(e){return e instanceof Set}function latest(e){return e.copy_||e.base_}function shallowCopy(e,t){if(isMap(e))return new Map(e);if(isSet(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=isPlainObject$4(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Ja];let n=Reflect.ownKeys(t);for(let i=0;i<n.length;i++){const a=n[i],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Qa(e),t)}{const t=Qa(e);if(null!==t&&n)return{...e};const i=Object.create(t);return Object.assign(i,e)}}function freeze(e,t=!1){return isFrozen(e)||isDraft(e)||!isDraftable(e)||(getArchtype(e)>1&&(e.set=e.add=e.clear=e.delete=dontMutateFrozenCollections),Object.freeze(e),t&&Object.entries(e).forEach((([e,t])=>freeze(t,!0)))),e}function dontMutateFrozenCollections(){die(2)}function isFrozen(e){return Object.isFrozen(e)}var to,ro={};function getPlugin(e){const t=ro[e];return t||die(0),t}function getCurrentScope(){return to}function usePatchesInScope(e,t){t&&(getPlugin("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function revokeScope(e){leaveScope(e),e.drafts_.forEach(revokeDraft),e.drafts_=null}function leaveScope(e){e===to&&(to=e.parent_)}function enterScope(e){return to={drafts_:[],parent_:to,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function revokeDraft(e){const t=e[Ja];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function processResult(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Ja].modified_&&(revokeScope(t),die(4)),isDraftable(e)&&(e=finalize(t,e),t.parent_||maybeFreeze(t,e)),t.patches_&&getPlugin("Patches").generateReplacementPatches_(n[Ja].base_,e,t.patches_,t.inversePatches_)):e=finalize(t,n,[]),revokeScope(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Va?e:void 0}function finalize(e,t,n){if(isFrozen(t))return t;const i=t[Ja];if(!i)return each(t,((a,o)=>finalizeProperty(e,i,t,a,o,n))),t;if(i.scope_!==e)return t;if(!i.modified_)return maybeFreeze(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const t=i.copy_;let a=t,o=!1;3===i.type_&&(a=new Set(t),t.clear(),o=!0),each(a,((a,s)=>finalizeProperty(e,i,t,a,s,n,o))),maybeFreeze(e,t,!1),n&&e.patches_&&getPlugin("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function finalizeProperty(e,t,n,i,a,o,s){if(isDraft(a)){const s=finalize(e,a,o&&t&&3!==t.type_&&!has(t.assigned_,i)?o.concat(i):void 0);if(set(n,i,s),!isDraft(s))return;e.canAutoFreeze_=!1}else s&&n.add(a);if(isDraftable(a)&&!isFrozen(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;finalize(e,a),t&&t.scope_.parent_||"symbol"==typeof i||!Object.prototype.propertyIsEnumerable.call(n,i)||maybeFreeze(e,a)}}function maybeFreeze(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze(t,n)}var no={get(e,t){if(t===Ja)return e;const n=latest(e);if(!has(n,t))return function(e,t,n){const i=getDescriptorFromProto(t,n);return i?"value"in i?i.value:i.get?.call(e.draft_):void 0}(e,n,t);const i=n[t];return e.finalized_||!isDraftable(i)?i:i===peek(e.base_,t)?(prepareCopy(e),e.copy_[t]=createProxy(i,e)):i},has:(e,t)=>t in latest(e),ownKeys:e=>Reflect.ownKeys(latest(e)),set(e,t,n){const i=getDescriptorFromProto(latest(e),t);if(i?.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const i=peek(latest(e),t),a=i?.[Ja];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,i)&&(void 0!==n||has(e.base_,t)))return!0;prepareCopy(e),markChanged(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==peek(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,prepareCopy(e),markChanged(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=latest(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:i.enumerable,value:n[t]}:i},defineProperty(){die(11)},getPrototypeOf:e=>Qa(e.base_),setPrototypeOf(){die(12)}},io={};function peek(e,t){const n=e[Ja];return(n?latest(n):e)[t]}function getDescriptorFromProto(e,t){if(!(t in e))return;let n=Qa(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Qa(n)}}function markChanged(e){e.modified_||(e.modified_=!0,e.parent_&&markChanged(e.parent_))}function prepareCopy(e){e.copy_||(e.copy_=shallowCopy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}each(no,((e,t)=>{io[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),io.deleteProperty=function(e,t){return io.set.call(this,e,t,void 0)},io.set=function(e,t,n){return no.set.call(this,e[0],t,n,e[0])};function createProxy(e,t){const n=isMap(e)?getPlugin("MapSet").proxyMap_(e,t):isSet(e)?getPlugin("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,o=no;n&&(a=[i],o=io);const{revoke:s,proxy:l}=Proxy.revocable(a,o);return i.draft_=l,i.revoke_=s,l}(e,t);return(t?t.scope_:getCurrentScope()).drafts_.push(n),n}function current(e){return isDraft(e)||die(10),currentImpl(e)}function currentImpl(e){if(!isDraftable(e)||isFrozen(e))return e;const t=e[Ja];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=shallowCopy(e,t.scope_.immer_.useStrictShallowCopy_)}else n=shallowCopy(e,!0);return each(n,((e,t)=>{set(n,e,currentImpl(t))})),t&&(t.finalized_=!1),n}var ao=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const i=this;return function(e=n,...a){return i.produce(e,(e=>t.call(this,e,...a)))}}let i;if("function"!=typeof t&&die(6),void 0!==n&&"function"!=typeof n&&die(7),isDraftable(e)){const a=enterScope(this),o=createProxy(e,void 0);let s=!0;try{i=t(o),s=!1}finally{s?revokeScope(a):leaveScope(a)}return usePatchesInScope(a,n),processResult(i,a)}if(!e||"object"!=typeof e){if(i=t(e),void 0===i&&(i=e),i===Va&&(i=void 0),this.autoFreeze_&&freeze(i,!0),n){const t=[],a=[];getPlugin("Patches").generateReplacementPatches_(e,i,t,a),n(t,a)}return i}die(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,i;return[this.produce(e,t,((e,t)=>{n=e,i=t})),n,i]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){isDraftable(e)||die(8),isDraft(e)&&(e=current(e));const t=enterScope(this),n=createProxy(e,void 0);return n[Ja].isManual_=!0,leaveScope(t),n}finishDraft(e,t){const n=e&&e[Ja];n&&n.isManual_||die(9);const{scope_:i}=n;return usePatchesInScope(i,t),processResult(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));const i=getPlugin("Patches").applyPatches_;return isDraft(e)?i(e,t):this.produce(e,(e=>i(e,t)))}},oo=ao.produce;function createThunkMiddleware(e){return({dispatch:t,getState:n})=>i=>a=>"function"==typeof a?a(t,n,e):i(a)}ao.produceWithPatches.bind(ao),ao.setAutoFreeze.bind(ao),ao.setUseStrictShallowCopy.bind(ao),ao.applyPatches.bind(ao),ao.createDraft.bind(ao),ao.finishDraft.bind(ao);var so=createThunkMiddleware(),lo=createThunkMiddleware,co="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?compose$1:compose$1.apply(null,arguments)};function createAction(e,t){function actionCreator(...n){if(t){let i=t(...n);if(!i)throw new Error(formatProdErrorMessage(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return actionCreator.toString=()=>`${e}`,actionCreator.type=e,actionCreator.match=t=>isAction(t)&&t.type===e,actionCreator}var uo=class _Tuple extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_Tuple.prototype)}static get[Symbol.species](){return _Tuple}concat(...e){return super.concat.apply(this,e)}prepend(...e){return 1===e.length&&Array.isArray(e[0])?new _Tuple(...e[0].concat(this)):new _Tuple(...e.concat(this))}};function freezeDraftable(e){return isDraftable(e)?oo(e,(()=>{})):e}function getOrInsertComputed(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var createQueueWithTimer=e=>t=>{setTimeout(t,e)},buildGetDefaultEnhancers=e=>function(t){const{autoBatch:n=!0}=t??{};let i=new uo(e);return n&&i.push(((e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let a=!0,o=!1,s=!1;const l=new Set,c="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):"callback"===e.type?e.queueNotification:createQueueWithTimer(e.timeout),notifyListeners=()=>{s=!1,o&&(o=!1,l.forEach((e=>e())))};return Object.assign({},i,{subscribe(e){const t=i.subscribe((()=>a&&e()));return l.add(e),()=>{t(),l.delete(e)}},dispatch(e){try{return a=!e?.meta?.RTK_autoBatch,o=!a,o&&(s||(s=!0,c(notifyListeners))),i.dispatch(e)}finally{a=!0}}})})("object"==typeof n?n:void 0)),i};function configureStore(e){const getDefaultMiddleware=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new uo;return t&&(function(e){return"boolean"==typeof e}(t)?o.push(so):o.push(lo(t.extraArgument))),o},{reducer:t,middleware:n,devTools:i=!0,preloadedState:a,enhancers:o}=e||{};let s,l;if("function"==typeof t)s=t;else{if(!isPlainObject$5(t))throw new Error(formatProdErrorMessage(1));s=combineReducers(t)}l="function"==typeof n?n(getDefaultMiddleware):getDefaultMiddleware();let c=compose$1;i&&(c=co({trace:!1,..."object"==typeof i&&i}));const u=function(...e){return t=>(n,i)=>{const a=t(n,i);let dispatch=()=>{throw new Error(formatProdErrorMessage$1(15))};const o={getState:a.getState,dispatch:(e,...t)=>dispatch(e,...t)},s=e.map((e=>e(o)));return dispatch=compose$1(...s)(a.dispatch),{...a,dispatch:dispatch}}}(...l),d=buildGetDefaultEnhancers(u);return createStore(s,a,c(..."function"==typeof o?o(d):d()))}function executeReducerBuilderCallback(e){const t={},n=[];let i;const a={addCase(e,n){const i="string"==typeof e?e:e.type;if(!i)throw new Error(formatProdErrorMessage(28));if(i in t)throw new Error(formatProdErrorMessage(29));return t[i]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(i=e,a)};return e(a),[t,n,i]}var nanoid=(e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ho=Symbol.for("rtk-slice-createasyncthunk");function getType(e,t){return`${e}/${t}`}function buildCreateSlice({creators:e}={}){const t=e?.asyncThunk?.[ho];return function(e){const{name:n,reducerPath:i=n}=e;if(!n)throw new Error(formatProdErrorMessage(11));const a=("function"==typeof e.reducers?e.reducers(function(){function asyncThunk(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return asyncThunk.withTypes=()=>asyncThunk,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:asyncThunk}}()):e.reducers)||{},o=Object.keys(a),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},l={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(formatProdErrorMessage(12));if(n in s.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return s.sliceCaseReducersByType[n]=t,l},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),l),exposeAction:(e,t)=>(s.actionCreators[e]=t,l),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,l)};function buildReducer(){const[t={},n=[],i]="function"==typeof e.extraReducers?executeReducerBuilderCallback(e.extraReducers):[e.extraReducers],a={...t,...s.sliceCaseReducersByType};return function(e,t){let n,[i,a,o]=executeReducerBuilderCallback(t);if(function(e){return"function"==typeof e}(e))n=()=>freezeDraftable(e());else{const t=freezeDraftable(e);n=()=>t}function reducer(e=n(),t){let s=[i[t.type],...a.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return 0===s.filter((e=>!!e)).length&&(s=[o]),s.reduce(((e,n)=>{if(n){if(isDraft(e)){const i=n(e,t);return void 0===i?e:i}if(isDraftable(e))return oo(e,(e=>n(e,t)));{const i=n(e,t);if(void 0===i){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}}return e}),e)}return reducer.getInitialState=n,reducer}(e.initialState,(e=>{for(let t in a)e.addCase(t,a[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);i&&e.addDefaultCase(i)}))}o.forEach((i=>{const o=a[i],s={reducerName:i,type:getType(n,i),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},i,a){let o,s;if("reducer"in i){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(i))throw new Error(formatProdErrorMessage(17));o=i.reducer,s=i.prepare}else o=i;a.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?createAction(e,s):createAction(e))}(s,o,l):function({type:e,reducerName:t},n,i,a){if(!a)throw new Error(formatProdErrorMessage(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:u,options:d}=n,h=a(e,o,d);i.exposeAction(t,h),s&&i.addCase(h.fulfilled,s);l&&i.addCase(h.pending,l);c&&i.addCase(h.rejected,c);u&&i.addMatcher(h.settled,u);i.exposeCaseReducer(t,{fulfilled:s||noop$4,pending:l||noop$4,rejected:c||noop$4,settled:u||noop$4})}(s,o,l,t)}));const selectSelf=e=>e,c=new Map,u=new WeakMap;let d;function reducer(e,t){return d||(d=buildReducer()),d(e,t)}function getInitialState(){return d||(d=buildReducer()),d.getInitialState()}function makeSelectorProps(t,n=!1){function selectSlice(e){let i=e[t];return void 0===i&&n&&(i=getOrInsertComputed(u,selectSlice,getInitialState)),i}function getSelectors(t=selectSelf){const i=getOrInsertComputed(c,n,(()=>new WeakMap));return getOrInsertComputed(i,t,(()=>{const i={};for(const[a,o]of Object.entries(e.selectors??{}))i[a]=wrapSelector(o,t,(()=>getOrInsertComputed(u,t,getInitialState)),n);return i}))}return{reducerPath:t,getSelectors:getSelectors,get selectors(){return getSelectors(selectSlice)},selectSlice:selectSlice}}const h={name:n,reducer:reducer,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:getInitialState,...makeSelectorProps(i),injectInto(e,{reducerPath:t,...n}={}){const a=t??i;return e.inject({reducerPath:a,reducer:reducer},n),{...h,...makeSelectorProps(a,!0)}}};return h}}function wrapSelector(e,t,n,i){function wrapper(a,...o){let s=t(a);return void 0===s&&i&&(s=n()),e(s,...o)}return wrapper.unwrapped=e,wrapper}var po=buildCreateSlice();function noop$4(){}var fo="listener",mo="completed",go="cancelled",yo=`task-${go}`,xo=`task-${mo}`,vo=`${fo}-${go}`,bo=`${fo}-${mo}`,_o=class{constructor(e){this.code=e,this.message=`task ${go} (reason: ${e})`}name="TaskAbortError";message},assertFunction=(e,t)=>{if("function"!=typeof e)throw new TypeError(formatProdErrorMessage(32))},noop2=()=>{},catchRejection=(e,t=noop2)=>(e.catch(t),e),addAbortSignalListener=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),abortControllerWithReason=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},validateActive=e=>{if(e.aborted){const{reason:t}=e;throw new _o(t)}};function raceWithSignal(e,t){let n=noop2;return new Promise(((i,a)=>{const notifyRejection=()=>a(new _o(e.reason));e.aborted?notifyRejection():(n=addAbortSignalListener(e,notifyRejection),t.finally((()=>n())).then(i,a))})).finally((()=>{n=noop2}))}var createPause=e=>t=>catchRejection(raceWithSignal(e,t).then((t=>(validateActive(e),t)))),createDelay=e=>{const t=createPause(e);return e=>t(new Promise((t=>setTimeout(t,e))))},{assign:jo}=Object,wo={},So="listenerMiddleware",createFork=(e,t)=>(n,i)=>{assertFunction(n);const a=new AbortController;var o;o=a,addAbortSignalListener(e,(()=>abortControllerWithReason(o,e.reason)));const s=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof _o?"cancelled":"rejected",error:n}}finally{t?.()}})((async()=>{validateActive(e),validateActive(a.signal);const t=await n({pause:createPause(a.signal),delay:createDelay(a.signal),signal:a.signal});return validateActive(a.signal),t}),(()=>abortControllerWithReason(a,xo)));return i?.autoJoin&&t.push(s.catch(noop2)),{result:createPause(e)(s),cancel(){abortControllerWithReason(a,yo)}}},createTakePattern=(e,t)=>(n,i)=>catchRejection((async(n,i)=>{validateActive(t);let unsubscribe=()=>{};const a=[new Promise(((t,i)=>{let a=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});unsubscribe=()=>{a(),i()}}))];null!=i&&a.push(new Promise((e=>setTimeout(e,i,null))));try{const e=await raceWithSignal(t,Promise.race(a));return validateActive(t),e}finally{unsubscribe()}})(n,i)),getListenerEntryPropsFrom=e=>{let{type:t,actionCreator:n,matcher:i,predicate:a,effect:o}=e;if(t)a=createAction(t).match;else if(n)t=n.type,a=n.match;else if(i)a=i;else if(!a)throw new Error(formatProdErrorMessage(21));return assertFunction(o),{predicate:a,type:t,effect:o}},Ao=jo((e=>{const{type:t,predicate:n,effect:i}=getListenerEntryPropsFrom(e);return{id:nanoid(),effect:i,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}}),{withTypes:()=>Ao}),findListenerEntry=(e,t)=>{const{type:n,effect:i,predicate:a}=getListenerEntryPropsFrom(t);return Array.from(e.values()).find((e=>("string"==typeof n?e.type===n:e.predicate===a)&&e.effect===i))},cancelActiveListeners=e=>{e.pending.forEach((e=>{abortControllerWithReason(e,vo)}))},safelyNotifyError=(e,t,n)=>{try{e(t,n)}catch(i){setTimeout((()=>{throw i}),0)}},Co=jo(createAction(`${So}/add`),{withTypes:()=>Co}),Oo=createAction(`${So}/removeAll`),Eo=jo(createAction(`${So}/remove`),{withTypes:()=>Eo}),defaultErrorHandler=(...e)=>{console.error(`${So}/error`,...e)},createListenerMiddleware=(e={})=>{const t=new Map,{extra:n,onError:i=defaultErrorHandler}=e;assertFunction(i);const startListening=e=>(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),t?.cancelActive&&cancelActiveListeners(e)}))(findListenerEntry(t,e)??Ao(e));jo(startListening,{withTypes:()=>startListening});const stopListening=e=>{const n=findListenerEntry(t,e);return n&&(n.unsubscribe(),e.cancelActive&&cancelActiveListeners(n)),!!n};jo(stopListening,{withTypes:()=>stopListening});const notifyListener=async(e,a,o,s)=>{const l=new AbortController,c=createTakePattern(startListening,l.signal),u=[];try{e.pending.add(l),await Promise.resolve(e.effect(a,jo({},o,{getOriginalState:s,condition:(e,t)=>c(e,t).then(Boolean),take:c,delay:createDelay(l.signal),pause:createPause(l.signal),extra:n,signal:l.signal,fork:createFork(l.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach(((e,t,n)=>{e!==l&&(abortControllerWithReason(e,vo),n.delete(e))}))},cancel:()=>{abortControllerWithReason(l,vo),e.pending.delete(l)},throwIfCancelled:()=>{validateActive(l.signal)}})))}catch(d){d instanceof _o||safelyNotifyError(i,d,{raisedBy:"effect"})}finally{await Promise.all(u),abortControllerWithReason(l,bo),e.pending.delete(l)}},a=(e=>()=>{e.forEach(cancelActiveListeners),e.clear()})(t);return{middleware:e=>n=>o=>{if(!isAction(o))return n(o);if(Co.match(o))return startListening(o.payload);if(Oo.match(o))return void a();if(Eo.match(o))return stopListening(o.payload);let s=e.getState();const getOriginalState=()=>{if(s===wo)throw new Error(formatProdErrorMessage(23));return s};let l;try{if(l=n(o),t.size>0){const n=e.getState(),a=Array.from(t.values());for(const t of a){let a=!1;try{a=t.predicate(o,n,s)}catch(c){a=!1,safelyNotifyError(i,c,{raisedBy:"predicate"})}a&&notifyListener(t,o,e,getOriginalState)}}}finally{s=wo}return l},startListening:startListening,stopListening:stopListening,clearListeners:a}};function formatProdErrorMessage(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ko=po({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:Po,setLayout:To,setChartSize:Lo,setScale:$o}=ko.actions,Io=ko.reducer;function ownKeys$F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$F(Object(n),!0).forEach((function(t){_defineProperty$J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$J(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mo=Math.PI/180,radianToDegree=e=>180*e/Math.PI,polarToCartesian=(e,t,n,i)=>({x:e+Math.cos(-Mo*i)*n,y:t+Math.sin(-Mo*i)*n}),getMaxRadius=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},getAngleOfPoint=(e,t)=>{var{x:n,y:i}=e,{cx:a,cy:o}=t,s=((e,t)=>{var{x:n,y:i}=e,{x:a,y:o}=t;return Math.sqrt((n-a)**2+(i-o)**2)})({x:n,y:i},{x:a,y:o});if(s<=0)return{radius:s,angle:0};var l=(n-a)/s,c=Math.acos(l);return i>o&&(c=2*Math.PI-c),{radius:s,angle:radianToDegree(c),angleInRadian:c}},reverseFormatAngleOfSector=(e,t)=>{var{startAngle:n,endAngle:i}=t,a=Math.floor(n/360),o=Math.floor(i/360);return e+360*Math.min(a,o)},inRangeOfSector=(e,t)=>{var{x:n,y:i}=e,{radius:a,angle:o}=getAngleOfPoint({x:n,y:i},t),{innerRadius:s,outerRadius:l}=t;if(a<s||a>l)return null;if(0===a)return null;var c,{startAngle:u,endAngle:d}=(e=>{var{startAngle:t,endAngle:n}=e,i=Math.floor(t/360),a=Math.floor(n/360),o=Math.min(i,a);return{startAngle:t-360*o,endAngle:n-360*o}})(t),h=o;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;c=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;c=h>=d&&h<=u}return c?_objectSpread$F(_objectSpread$F({},t),{},{radius:a,angle:reverseFormatAngleOfSector(h,t)}):null},getTickClassName=e=>Ut.isValidElement(e)||"function"==typeof e||"boolean"==typeof e||null==e?"":e.className;function ownKeys$E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$E(Object(n),!0).forEach((function(t){_defineProperty$I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getValueByDataKey(e,t,n){return isNullish(e)||isNullish(t)?n:isNumOrStr(t)?qn(e,t,n):"function"==typeof t?t(e):n}var isCategoricalAxis=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,getCoordinatesOfGrid=(e,t,n,i)=>{if(i)return e.map((e=>e.coordinate));var a,o,s=e.map((e=>(e.coordinate===t&&(a=!0),e.coordinate===n&&(o=!0),e.coordinate)));return a||s.push(t),o||s.push(n),s},getTicksOfAxis=(e,t,n)=>{if(!e)return null;var{duplicateDomain:i,type:a,range:o,scale:s,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:p,axisType:f}=e;if(!s)return null;var m="scaleBand"===l&&s.bandwidth?s.bandwidth()/2:2,g="category"===a&&s.bandwidth?s.bandwidth()/m:0;return g="angleAxis"===f&&o&&o.length>=2?2*mathSign(o[0]-o[1])*g:g,h||p?(h||p||[]).map(((e,t)=>{var n=i?i.indexOf(e):e;return{coordinate:s(n)+g,value:e,offset:g,index:t}})).filter((e=>!isNan(e.coordinate))):c&&u?u.map(((e,t)=>({coordinate:s(e)+g,value:e,index:t,offset:g}))):s.ticks&&null!=d?s.ticks(d).map(((e,t)=>({coordinate:s(e)+g,value:e,offset:g,index:t}))):s.domain().map(((e,t)=>({coordinate:s(e)+g,value:i?i[e]:e,index:t,offset:g})))},Ro=1e-4,Do={sign:e=>{var t=e.length;if(!(t<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,o=0,s=0;s<t;++s){var l=isNan(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=a,e[s][n][1]=a+l,a=e[s][n][1]):(e[s][n][0]=o,e[s][n][1]=o+l,o=e[s][n][1])}},expand:function(e,t){if((i=e.length)>0){for(var n,i,a,o=0,s=e[0].length;o<s;++o){for(a=n=0;n<i;++n)a+=e[n][o][1]||0;if(a)for(n=0;n<i;++n)e[n][o][1]/=a}stackOffsetNone(e,t)}},none:stackOffsetNone,silhouette:function(e,t){if((n=e.length)>0){for(var n,i=0,a=e[t[0]],o=a.length;i<o;++i){for(var s=0,l=0;s<n;++s)l+=e[s][i][1]||0;a[i][1]+=a[i][0]=-l/2}stackOffsetNone(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(i=(n=e[t[0]]).length)>0){for(var n,i,a,o=0,s=1;s<i;++s){for(var l=0,c=0,u=0;l<a;++l){for(var d=e[t[l]],h=d[s][1]||0,p=(h-(d[s-1][1]||0))/2,f=0;f<l;++f){var m=e[t[f]];p+=(m[s][1]||0)-(m[s-1][1]||0)}c+=h,u+=p*h}n[s-1][1]+=n[s-1][0]=o,c&&(o-=u/c)}n[s-1][1]+=n[s-1][0]=o,stackOffsetNone(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,o=0;o<t;++o){var s=isNan(e[o][n][1])?e[o][n][0]:e[o][n][1];s>=0?(e[o][n][0]=a,e[o][n][1]=a+s,a=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},getStackedData=(e,t,n)=>{var i=Do[n],a=function(){var e=constant$1([]),t=stackOrderNone,n=stackOffsetNone,i=stackValue;function stack(a){var o,s,l=Array.from(e.apply(this,arguments),stackSeries),c=l.length,u=-1;for(const e of a)for(o=0,++u;o<c;++o)(l[o][u]=[0,+i(e,l[o].key,u,a)]).data=e;for(o=0,s=array(t(l));o<c;++o)l[s[o]].index=o;return n(l,s),l}return stack.keys=function(t){return arguments.length?(e="function"==typeof t?t:constant$1(Array.from(t)),stack):e},stack.value=function(e){return arguments.length?(i="function"==typeof e?e:constant$1(+e),stack):i},stack.order=function(e){return arguments.length?(t=null==e?stackOrderNone:"function"==typeof e?e:constant$1(Array.from(e)),stack):t},stack.offset=function(e){return arguments.length?(n=null==e?stackOffsetNone:e,stack):n},stack}().keys(t).value(((e,t)=>+getValueByDataKey(e,t,0))).order(stackOrderNone).offset(i);return a(e)};function getNormalizedStackId(e){return null==e?void 0:String(e)}function getCateCoordinateOfLine(e){var{axis:t,ticks:n,bandSize:i,entry:a,index:o,dataKey:s}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!isNullish(a[t.dataKey])){var l=findEntryInArray(n,"value",a[t.dataKey]);if(l)return l.coordinate+i/2}return n[o]?n[o].coordinate+i/2:null}var c=getValueByDataKey(a,isNullish(s)?t.dataKey:s);return isNullish(c)?null:t.scale(c)}var getCateCoordinateOfBar=e=>{var{axis:t,ticks:n,offset:i,bandSize:a,entry:o,index:s}=e;if("category"===t.type)return n[s]?n[s].coordinate+i:null;var l=getValueByDataKey(o,t.dataKey,t.scale.domain()[s]);return isNullish(l)?null:t.scale(l)-a/2+i},getDomainOfStackGroups=(e,t,n)=>{var i;if(null!=e)return i=Object.keys(e).reduce(((i,a)=>{var o=e[a],{stackedData:s}=o,l=s.reduce(((e,i)=>{var a,o,s=(a=i.slice(t,n+1),o=a.flat(2).filter(isNumber),[Math.min(...o),Math.max(...o)]);return[Math.min(e[0],s[0]),Math.max(e[1],s[1])]}),[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]}),[1/0,-1/0]),[i[0]===1/0?0:i[0],i[1]===-1/0?0:i[1]]},No=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,zo=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,getBandSizeOfAxis=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&t&&t.length>=2){for(var a=Ha(t,(e=>e.coordinate)),o=1/0,s=1,l=a.length;s<l;s++){var c=a[s],u=a[s-1];o=Math.min((c.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function getTooltipEntry(e){var{tooltipEntrySettings:t,dataKey:n,payload:i,value:a,name:o}=e;return _objectSpread$E(_objectSpread$E({},t),{},{dataKey:n,payload:i,value:a,name:o})}function getTooltipNameProp(e,t){return e?String(e):"string"==typeof t?t:void 0}var selectChartWidth=e=>e.layout.width,selectChartHeight=e=>e.layout.height,selectContainerScale=e=>e.layout.scale,selectMargin=e=>e.layout.margin,Bo=Da((e=>e.cartesianAxis.xAxis),(e=>Object.values(e))),Fo=Da((e=>e.cartesianAxis.yAxis),(e=>Object.values(e))),Zo="data-recharts-item-index",Uo="data-recharts-item-data-key";function ownKeys$D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$D(Object(n),!0).forEach((function(t){_defineProperty$H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$H(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ko=Da([selectChartWidth,selectChartHeight,selectMargin,e=>e.brush.height,Bo,Fo,selectLegendSettings,e=>e.legend.size],((e,t,n,i,a,o,s,l)=>{var c=o.reduce(((e,t)=>{var{orientation:n}=t;if(!t.mirror&&!t.hide){var i="number"==typeof t.width?t.width:60;return _objectSpread$D(_objectSpread$D({},e),{},{[n]:e[n]+i})}return e}),{left:n.left||0,right:n.right||0}),u=a.reduce(((e,t)=>{var{orientation:n}=t;return t.mirror||t.hide?e:_objectSpread$D(_objectSpread$D({},e),{},{[n]:qn(e,"".concat(n))+t.height})}),{top:n.top||0,bottom:n.bottom||0}),d=_objectSpread$D(_objectSpread$D({},u),c),h=d.bottom;d.bottom+=i,d=((e,t,n)=>{if(t&&n){var{width:i,height:a}=n,{align:o,verticalAlign:s,layout:l}=t;if(("vertical"===l||"horizontal"===l&&"middle"===s)&&"center"!==o&&isNumber(e[o]))return _objectSpread$E(_objectSpread$E({},e),{},{[o]:e[o]+(i||0)});if(("horizontal"===l||"vertical"===l&&"center"===o)&&"middle"!==s&&isNumber(e[s]))return _objectSpread$E(_objectSpread$E({},e),{},{[s]:e[s]+(a||0)})}return e})(d,s,l);var p=e-d.left-d.right,f=t-d.top-d.bottom;return _objectSpread$D(_objectSpread$D({brushBottom:h},d),{},{width:Math.max(p,0),height:Math.max(f,0)})})),Wo=Da(Ko,(e=>({x:e.left,y:e.top,width:e.width,height:e.height}))),Ho=Da(selectChartWidth,selectChartHeight,((e,t)=>({x:0,y:0,width:e,height:t}))),Go=Ut.createContext(null),useIsPanorama=()=>null!=Ut.useContext(Go),selectBrushSettings=e=>e.brush,Yo=Da([selectBrushSettings,Ko,selectMargin],((e,t,n)=>({height:e.height,x:isNumber(e.x)?e.x:t.left,y:isNumber(e.y)?e.y:t.top+t.height+t.brushBottom-((null==n?void 0:n.bottom)||0),width:isNumber(e.width)?e.width:t.width}))),useViewBox=()=>{var e,t=useIsPanorama(),n=useAppSelector(Wo),i=useAppSelector(Yo),a=null===(e=useAppSelector(selectBrushSettings))||void 0===e?void 0:e.padding;return t&&i&&a?{width:i.width-a.left-a.right,height:i.height-a.top-a.bottom,x:a.left,y:a.top}:n},qo={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},useOffsetInternal=()=>{var e;return null!==(e=useAppSelector(Ko))&&void 0!==e?e:qo},useChartWidth=()=>useAppSelector(selectChartWidth),useChartHeight=()=>useAppSelector(selectChartHeight),Vo={top:0,right:0,bottom:0,left:0},selectChartLayout=e=>e.layout.layoutType,useChartLayout=()=>useAppSelector(selectChartLayout),Xo=po({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=current(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:Jo,setLegendSettings:Qo,addLegendPayload:es,removeLegendPayload:ts}=Xo.actions,rs=Xo.reducer,ns=["contextPayload"];function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$u.apply(null,arguments)}function ownKeys$C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$C(Object(n),!0).forEach((function(t){_defineProperty$G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function defaultUniqBy$1(e){return e.value}function LegendContent(e){var{contextPayload:t}=e,n=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ns),i=getUniqPayload(t,e.payloadUniqBy,defaultUniqBy$1),a=_objectSpread$C(_objectSpread$C({},n),{},{payload:i});return Ut.isValidElement(e.content)?Ut.cloneElement(e.content,a):"function"==typeof e.content?Ut.createElement(e.content,a):Ut.createElement(DefaultLegendContent,a)}function LegendSettingsDispatcher(e){var t=useAppDispatch();return Ut.useEffect((()=>{t(Qo(e))}),[t,e]),null}function LegendSizeDispatcher(e){var t=useAppDispatch();return Ut.useEffect((()=>(t(Jo(e)),()=>{t(Jo({width:0,height:0}))})),[t,e]),null}function LegendWrapper(e){var t,n=useAppSelector(Ga),i=Ut.useContext(si),a=null!==(t=useAppSelector((e=>e.layout.margin)))&&void 0!==t?t:Vo,{width:o,height:s,wrapperStyle:l,portal:c}=e,[u,d]=useElementOffset([n]),h=useChartWidth(),p=useChartHeight(),f=h-(a.left||0)-(a.right||0),m=Legend.getWidthOrHeight(e.layout,s,o,f),g=c?l:_objectSpread$C(_objectSpread$C({position:"absolute",width:(null==m?void 0:m.width)||o||"auto",height:(null==m?void 0:m.height)||s||"auto"},function(e,t,n,i,a,o){var s,l,{layout:c,align:u,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(s="center"===u&&"vertical"===c?{left:((i||0)-o.width)/2}:"right"===u?{right:n&&n.right||0}:{left:n&&n.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(l="middle"===d?{top:((a||0)-o.height)/2}:"bottom"===d?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),_objectSpread$C(_objectSpread$C({},s),l)}(l,e,a,h,p,u)),l),v=null!=c?c:i;if(null==v)return null;var b=Ut.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:d},Ut.createElement(LegendSettingsDispatcher,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),Ut.createElement(LegendSizeDispatcher,{width:u.width,height:u.height}),Ut.createElement(LegendContent,_extends$u({},e,m,{margin:a,chartWidth:h,chartHeight:p,contextPayload:n})));return Ft.createPortal(b,v)}class Legend extends Ut.PureComponent{static getWidthOrHeight(e,t,n,i){return"vertical"===e&&isNumber(t)?{height:t}:"horizontal"===e?{width:n||i}:null}render(){return Ut.createElement(LegendWrapper,this.props)}}function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$t.apply(null,arguments)}function ownKeys$B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$B(Object(n),!0).forEach((function(t){_defineProperty$F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function defaultFormatter(e){return Array.isArray(e)&&isNumOrStr(e[0])&&isNumOrStr(e[1])?e.join(" ~ "):e}_defineProperty$G(Legend,"displayName","Legend"),_defineProperty$G(Legend,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});var DefaultTooltipContent=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:i={},labelStyle:a={},payload:o,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:p=!1}=e,f=_objectSpread$B({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),m=_objectSpread$B({margin:0},a),g=!isNullish(d),v=g?d:"",b=We("recharts-default-tooltip",c),_=We("recharts-tooltip-label",u);g&&h&&null!=o&&(v=h(d,o));var j=p?{role:"status","aria-live":"assertive"}:{};return Ut.createElement("div",_extends$t({className:b,style:f},j),Ut.createElement("p",{className:_,style:m},Ut.isValidElement(v)?v:"".concat(v)),(()=>{if(o&&o.length){var e=(l?Ha(o,l):o).map(((e,n)=>{if("none"===e.type)return null;var a=e.formatter||s||defaultFormatter,{value:l,name:c}=e,u=l,d=c;if(a){var h=a(l,c,e,n,o);if(Array.isArray(h))[u,d]=h;else{if(null==h)return null;u=h}}var p=_objectSpread$B({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},i);return Ut.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:p},isNumOrStr(d)?Ut.createElement("span",{className:"recharts-tooltip-item-name"},d):null,isNumOrStr(d)?Ut.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,Ut.createElement("span",{className:"recharts-tooltip-item-value"},u),Ut.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return Ut.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},is="recharts-tooltip-wrapper",as={visibility:"hidden"};function getTooltipCSSClassName(e){var{coordinate:t,translateX:n,translateY:i}=e;return We(is,{["".concat(is,"-right")]:isNumber(n)&&t&&isNumber(t.x)&&n>=t.x,["".concat(is,"-left")]:isNumber(n)&&t&&isNumber(t.x)&&n<t.x,["".concat(is,"-bottom")]:isNumber(i)&&t&&isNumber(t.y)&&i>=t.y,["".concat(is,"-top")]:isNumber(i)&&t&&isNumber(t.y)&&i<t.y})}function getTooltipTranslateXY(e){var{allowEscapeViewBox:t,coordinate:n,key:i,offsetTopLeft:a,position:o,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(o&&isNumber(o[i]))return o[i];var d=n[i]-l-(a>0?a:0),h=n[i]+a;if(t[i])return s[i]?d:h;var p=c[i];return null==p?0:s[i]?d<p?Math.max(h,p):Math.max(d,p):null==u?0:h+l>p+u?Math.max(d,p):Math.max(h,p)}function ownKeys$A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$A(Object(n),!0).forEach((function(t){_defineProperty$E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$E(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class TooltipBoundingBox extends Ut.PureComponent{constructor(){super(...arguments),_defineProperty$E(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_defineProperty$E(this,"handleKeyDown",(e=>{var t,n,i,a;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(i=null===(a=this.props.coordinate)||void 0===a?void 0:a.y)&&void 0!==i?i:0}})}))}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:i,children:a,coordinate:o,hasPayload:s,isAnimationActive:l,offset:c,position:u,reverseDirection:d,useTranslate3d:h,viewBox:p,wrapperStyle:f,lastBoundingBox:m,innerRef:g,hasPortalFromProps:v}=this.props,{cssClasses:b,cssProperties:_}=function(e){var t,n,i,{allowEscapeViewBox:a,coordinate:o,offsetTopLeft:s,position:l,reverseDirection:c,tooltipBox:u,useTranslate3d:d,viewBox:h}=e;return t=u.height>0&&u.width>0&&o?function(e){var{translateX:t,translateY:n,useTranslate3d:i}=e;return{transform:i?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=getTooltipTranslateXY({allowEscapeViewBox:a,coordinate:o,key:"x",offsetTopLeft:s,position:l,reverseDirection:c,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),translateY:i=getTooltipTranslateXY({allowEscapeViewBox:a,coordinate:o,key:"y",offsetTopLeft:s,position:l,reverseDirection:c,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),useTranslate3d:d}):as,{cssProperties:t,cssClasses:getTooltipCSSClassName({translateX:n,translateY:i,coordinate:o})}}({allowEscapeViewBox:t,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:d,tooltipBox:{height:m.height,width:m.width},useTranslate3d:h,viewBox:p}),j=v?{}:_objectSpread$A(_objectSpread$A({transition:l&&e?"transform ".concat(n,"ms ").concat(i):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&s?"visible":"hidden",position:"absolute",top:0,left:0}),w=_objectSpread$A(_objectSpread$A({},j),{},{visibility:!this.state.dismissed&&e&&s?"visible":"hidden"},f);return Ut.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:w,ref:g},a)}}var os=!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout),useAccessibilityLayer=()=>useAppSelector((e=>e.rootProps.accessibilityLayer));function isWellBehavedNumber(e){return Number.isFinite(e)}function isPositiveNumber(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$s.apply(null,arguments)}function ownKeys$z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$z(Object(n),!0).forEach((function(t){_defineProperty$D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ss={curveBasisClosed:function(e){return new BasisClosed(e)},curveBasisOpen:function(e){return new BasisOpen(e)},curveBasis:function(e){return new Basis(e)},curveBumpX:function(e){return new Bump(e,!0)},curveBumpY:function(e){return new Bump(e,!1)},curveLinearClosed:function(e){return new LinearClosed(e)},curveLinear:curveLinear,curveMonotoneX:function(e){return new MonotoneX(e)},curveMonotoneY:function(e){return new MonotoneY(e)},curveNatural:function(e){return new Natural(e)},curveStep:function(e){return new Step(e,.5)},curveStepAfter:function(e){return new Step(e,1)},curveStepBefore:function(e){return new Step(e,0)}},defined=e=>isWellBehavedNumber(e.x)&&isWellBehavedNumber(e.y),getX=e=>e.x,getY=e=>e.y,getPath$1=e=>{var t,{type:n="linear",points:i=[],baseLine:a,layout:o,connectNulls:s=!1}=e,l=((e,t)=>{if("function"==typeof e)return e;var n="curve".concat(upperFirst(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?ss[n]||curveLinear:ss["".concat(n).concat("vertical"===t?"Y":"X")]})(n,o),c=s?i.filter(defined):i;if(Array.isArray(a)){var u=s?a.filter((e=>defined(e))):a,d=c.map(((e,t)=>_objectSpread$z(_objectSpread$z({},e),{},{base:u[t]})));return(t="vertical"===o?shapeArea().y(getY).x1(getX).x0((e=>e.base.x)):shapeArea().x(getX).y1(getY).y0((e=>e.base.y))).defined(defined).curve(l),t(d)}return(t="vertical"===o&&isNumber(a)?shapeArea().y(getY).x1(getX).x0(a):isNumber(a)?shapeArea().x(getX).y1(getY).y0(a):shapeLine().x(getX).y(getY)).defined(defined).curve(l),t(c)},Curve=e=>{var{className:t,points:n,path:i,pathRef:a}=e;if(!(n&&n.length||i))return null;var o=n&&n.length?getPath$1(e):i;return Ut.createElement("path",_extends$s({},filterProps(e,!1),adaptEventHandlers(e),{className:We("recharts-curve",t),d:null===o?void 0:o,ref:a}))},ls=["x","y","top","left","width","height","className"];function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$r.apply(null,arguments)}function ownKeys$y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _defineProperty$C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var getPath=(e,t,n,i,a,o)=>"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(t,"h").concat(n),Cross=e=>{var{x:t=0,y:n=0,top:i=0,left:a=0,width:o=0,height:s=0,className:l}=e,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$y(Object(n),!0).forEach((function(t){_defineProperty$C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:t,y:n,top:i,left:a,width:o,height:s},function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ls));return isNumber(t)&&isNumber(n)&&isNumber(o)&&isNumber(s)&&isNumber(i)&&isNumber(a)?Ut.createElement("path",_extends$r({},filterProps(c,!0),{className:We("recharts-cross",l),d:getPath(t,n,o,s,i,a)})):null};function ownKeys$x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _defineProperty$B(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function resolveDefaultProps(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$x(Object(n),!0).forEach((function(t){_defineProperty$B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),i=t;return Object.keys(t).reduce(((e,t)=>(void 0===e[t]&&void 0!==i[t]&&(e[t]=i[t]),e)),n)}var cs={},us={},ds={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPlainObject=function(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}}(ds),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ds,n=na,i=ia,a=aa,o=ea;function isEqualWithImpl(e,t,n,i,a,o,s){const l=s(e,t,n,i,a,o);if(void 0!==l)return l;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return areObjectsEqual(e,t,o,s)}return areObjectsEqual(e,t,o,s)}function areObjectsEqual(e,s,l,c){if(Object.is(e,s))return!0;let u=i.getTag(e),d=i.getTag(s);if(u===a.argumentsTag&&(u=a.objectTag),d===a.argumentsTag&&(d=a.objectTag),u!==d)return!1;switch(u){case a.stringTag:return e.toString()===s.toString();case a.numberTag:{const t=e.valueOf(),n=s.valueOf();return o.eq(t,n)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(e.valueOf(),s.valueOf());case a.regexpTag:return e.source===s.source&&e.flags===s.flags;case a.functionTag:return e===s}const h=(l=l??new Map).get(e),p=l.get(s);if(null!=h&&null!=p)return h===s;l.set(e,s),l.set(s,e);try{switch(u){case a.mapTag:if(e.size!==s.size)return!1;for(const[t,n]of e.entries())if(!s.has(t)||!isEqualWithImpl(n,s.get(t),t,e,s,l,c))return!1;return!0;case a.setTag:{if(e.size!==s.size)return!1;const t=Array.from(e.values()),n=Array.from(s.values());for(let i=0;i<t.length;i++){const a=t[i],o=n.findIndex((t=>isEqualWithImpl(a,t,void 0,e,s,l,c)));if(-1===o)return!1;n.splice(o,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:if("undefined"!=typeof Buffer&&Buffer.isBuffer(e)!==Buffer.isBuffer(s))return!1;if(e.length!==s.length)return!1;for(let t=0;t<e.length;t++)if(!isEqualWithImpl(e[t],s[t],t,e,s,l,c))return!1;return!0;case a.arrayBufferTag:return e.byteLength===s.byteLength&&areObjectsEqual(new Uint8Array(e),new Uint8Array(s),l,c);case a.dataViewTag:return e.byteLength===s.byteLength&&e.byteOffset===s.byteOffset&&areObjectsEqual(new Uint8Array(e),new Uint8Array(s),l,c);case a.errorTag:return e.name===s.name&&e.message===s.message;case a.objectTag:{if(!(areObjectsEqual(e.constructor,s.constructor,l,c)||t.isPlainObject(e)&&t.isPlainObject(s)))return!1;const i=[...Object.keys(e),...n.getSymbols(e)],a=[...Object.keys(s),...n.getSymbols(s)];if(i.length!==a.length)return!1;for(let t=0;t<i.length;t++){const n=i[t],a=e[n];if(!Object.hasOwn(s,n))return!1;if(!isEqualWithImpl(a,s[n],n,e,s,l,c))return!1}return!0}default:return!1}}finally{l.delete(e),l.delete(s)}}e.isEqualWith=function(e,t,n){return isEqualWithImpl(e,t,void 0,void 0,void 0,void 0,n)}}(us);var hs={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.noop=function(){}}(hs),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=us,n=hs;e.isEqual=function(e,i){return t.isEqualWith(e,i,n.noop)}}(cs);const ps=Zt(cs.isEqual);var fs=1e-4,cubicBezierFactor=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],evaluatePolynomial=(e,t)=>e.map(((e,n)=>e*t**n)).reduce(((e,t)=>e+t)),cubicBezier=(e,t)=>n=>{var i=cubicBezierFactor(e,t);return evaluatePolynomial(i,n)},configBezier=function(){for(var e,t,n,i,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];if(1===o.length)switch(o[0]){case"linear":[e,n,t,i]=[0,0,1,1];break;case"ease":[e,n,t,i]=[.25,.1,.25,1];break;case"ease-in":[e,n,t,i]=[.42,0,1,1];break;case"ease-out":[e,n,t,i]=[.42,0,.58,1];break;case"ease-in-out":[e,n,t,i]=[0,0,.58,1];break;default:var l=o[0].split("(");"cubic-bezier"===l[0]&&4===l[1].split(")")[0].split(",").length&&([e,n,t,i]=l[1].split(")")[0].split(",").map((e=>parseFloat(e))))}else 4===o.length&&([e,n,t,i]=o);var c,u,d=cubicBezier(e,t),h=cubicBezier(n,i),p=(c=e,u=t,e=>{var t=[...cubicBezierFactor(c,u).map(((e,t)=>e*t)).slice(1),0];return evaluatePolynomial(t,e)}),bezier=e=>{for(var t,n=e>1?1:e,i=n,a=0;a<8;++a){var o=d(i)-n,s=p(i);if(Math.abs(o-n)<fs||s<fs)return h(i);i=(t=i-o/s)>1?1:t<0?0:t}return h(i)};return bezier.isStepper=!1,bezier},configEasing=e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:i=17}=e,stepper=(e,a,o)=>{var s=o+(-(e-a)*t-o*n)*i/1e3,l=o*i/1e3+e;return Math.abs(l-a)<fs&&Math.abs(s)<fs?[a,0]:[l,s]};return stepper.isStepper=!0,stepper.dt=i,stepper}();default:if("cubic-bezier"===e.split("(")[0])return configBezier(e)}return"function"==typeof e?e:null};function ownKeys$w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$w(Object(n),!0).forEach((function(t){_defineProperty$A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mapObject=(e,t)=>Object.keys(t).reduce(((n,i)=>_objectSpread$w(_objectSpread$w({},n),{},{[i]:e(i,t[i])})),{});function ownKeys$v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$v(Object(n),!0).forEach((function(t){_defineProperty$z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var alpha=(e,t,n)=>e+(t-e)*n,needContinue=e=>{var{from:t,to:n}=e;return t!==n},calStepperVals=(e,t,n)=>{var i=mapObject(((t,n)=>{if(needContinue(n)){var[i,a]=e(n.from,n.to,n.velocity);return _objectSpread$v(_objectSpread$v({},n),{},{from:i,velocity:a})}return n}),t);return n<1?mapObject(((e,t)=>needContinue(t)?_objectSpread$v(_objectSpread$v({},t),{},{velocity:alpha(t.velocity,i[e].velocity,n),from:alpha(t.from,i[e].from,n)}):t),t):calStepperVals(e,i,n-1)};function createStepperUpdate(e,t,n,i,a,o){var s,l=i.reduce(((n,i)=>_objectSpread$v(_objectSpread$v({},n),{},{[i]:{from:e[i],velocity:0,to:t[i]}})),{}),c=null,stepperUpdate=i=>{s||(s=i);var u=(i-s)/n.dt;l=calStepperVals(n,l,u),a(_objectSpread$v(_objectSpread$v(_objectSpread$v({},e),t),mapObject(((e,t)=>t.from),l))),s=i,Object.values(l).filter(needContinue).length&&(c=o.setTimeout(stepperUpdate))};return()=>(c=o.setTimeout(stepperUpdate),()=>{c()})}const configUpdate=(e,t,n,i,a,o)=>{var s,l,c=(s=e,l=t,[Object.keys(s),Object.keys(l)].reduce(((e,t)=>e.filter((e=>t.includes(e))))));return!0===n.isStepper?createStepperUpdate(e,t,n,c,a,o):function(e,t,n,i,a,o,s){var l,c=null,u=a.reduce(((n,i)=>_objectSpread$v(_objectSpread$v({},n),{},{[i]:[e[i],t[i]]})),{}),timingUpdate=a=>{l||(l=a);var d=(a-l)/i,h=mapObject(((e,t)=>alpha(...t,n(d))),u);if(o(_objectSpread$v(_objectSpread$v(_objectSpread$v({},e),t),h)),d<1)c=s.setTimeout(timingUpdate);else{var p=mapObject(((e,t)=>alpha(...t,n(1))),u);o(_objectSpread$v(_objectSpread$v(_objectSpread$v({},e),t),p))}};return()=>(c=s.setTimeout(timingUpdate),()=>{c()})}(e,t,n,i,c,a,o)};class RequestAnimationFrameTimeoutController{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),i=null,executeCallback=a=>{a-n>=t?e(a):"function"==typeof requestAnimationFrame&&(i=requestAnimationFrame(executeCallback))};return i=requestAnimationFrame(executeCallback),()=>{cancelAnimationFrame(i)}}}var ms=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$q.apply(null,arguments)}function ownKeys$u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$u(Object(n),!0).forEach((function(t){_defineProperty$y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function createDefaultAnimationManager(){return e=new RequestAnimationFrameTimeoutController,t=()=>null,n=!1,i=null,a=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var s=o,[l,...c]=s;return"number"==typeof l?void(i=e.setTimeout(a.bind(null,c),l)):(a(l),void(i=e.setTimeout(a.bind(null,c))))}"object"==typeof o&&t(o),"function"==typeof o&&o()}},{stop:()=>{n=!0},start:e=>{n=!1,i&&(i(),i=null),a(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e};var e,t,n,i,a}class AnimateImpl extends Ut.PureComponent{constructor(e,t){super(e,t),_defineProperty$y(this,"mounted",!1),_defineProperty$y(this,"manager",null),_defineProperty$y(this,"stopJSAnimation",null),_defineProperty$y(this,"unSubscribe",null);var{isActive:n,attributeName:i,from:a,to:o,children:s,duration:l,animationManager:c}=this.props;if(this.manager=c,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||l<=0)return this.state={style:{}},void("function"==typeof s&&(this.state={style:o}));if(a){if("function"==typeof s)return void(this.state={style:a});this.state={style:i?{[i]:a}:a}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:t}=this.props;this.mounted=!0,e&&t&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:t,canBegin:n,attributeName:i,shouldReAnimate:a,to:o,from:s}=this.props,{style:l}=this.state;if(n)if(t){if(!(ps(e.to,o)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||a?s:e.to;if(this.state&&l){var d={style:i?{[i]:u}:u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(d)}this.runAnimation(_objectSpread$u(_objectSpread$u({},this.props),{},{from:u,begin:0}))}}else{var h={style:i?{[i]:o}:o};this.state&&l&&(i&&l[i]!==o||!i&&l!==o)&&this.setState(h)}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:t,to:n,duration:i,easing:a,begin:o,onAnimationEnd:s,onAnimationStart:l}=e,c=configUpdate(t,n,configEasing(a),i,this.changeStyle,this.manager.getTimeoutController());this.manager.start([l,o,()=>{this.stopJSAnimation=c()},i,s])}runAnimation(e){var{begin:t,duration:n,attributeName:i,to:a,easing:o,onAnimationStart:s,onAnimationEnd:l,children:c}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),"function"!=typeof o&&"function"!=typeof c&&"spring"!==o){var u=i?{[i]:a}:a,d=((e,t,n)=>e.map((e=>{return"".concat((i=e,i.replace(/([A-Z])/g,(e=>"-".concat(e.toLowerCase()))))," ").concat(t,"ms ").concat(n);var i})).join(","))(Object.keys(u),n,o);this.manager.start([s,t,_objectSpread$u(_objectSpread$u({},u),{},{transition:d}),n,l])}else this.runJSAnimation(e)}render(){var e=this.props,{children:t,begin:n,duration:i,attributeName:a,easing:o,isActive:s,from:l,to:c,canBegin:u,onAnimationEnd:d,shouldReAnimate:h,onAnimationReStart:p,animationManager:f}=e,m=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ms),g=Ut.Children.count(t),v=this.state.style;if("function"==typeof t)return t(v);if(!s||0===g||i<=0)return t;var cloneContainer=e=>{var{style:t={},className:n}=e.props;return Ut.cloneElement(e,_objectSpread$u(_objectSpread$u({},m),{},{style:_objectSpread$u(_objectSpread$u({},t),v),className:n}))};return 1===g?cloneContainer(Ut.Children.only(t)):Ut.createElement("div",null,Ut.Children.map(t,(e=>cloneContainer(e))))}}_defineProperty$y(AnimateImpl,"displayName","Animate"),_defineProperty$y(AnimateImpl,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var gs=Ut.createContext(null);function Animate(e){var t,n,i=Ut.useContext(gs);return Ut.createElement(AnimateImpl,_extends$q({},e,{animationManager:null!==(t=null!==(n=e.animationManager)&&void 0!==n?n:i)&&void 0!==t?t:createDefaultAnimationManager()}))}function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$p.apply(null,arguments)}var getRectanglePath=(e,t,n,i,a)=>{var o,s=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],h=0;h<4;h++)d[h]=a[h]>s?s:a[h];o="M".concat(e,",").concat(t+l*d[0]),d[0]>0&&(o+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+c*d[0],",").concat(t)),o+="L ".concat(e+n-c*d[1],",").concat(t),d[1]>0&&(o+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,",\n        ").concat(e+n,",").concat(t+l*d[1])),o+="L ".concat(e+n,",").concat(t+i-l*d[2]),d[2]>0&&(o+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,",\n        ").concat(e+n-c*d[2],",").concat(t+i)),o+="L ".concat(e+c*d[3],",").concat(t+i),d[3]>0&&(o+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,",\n        ").concat(e,",").concat(t+i-l*d[3])),o+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);o="M ".concat(e,",").concat(t+l*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+c*p,",").concat(t,"\n            L ").concat(e+n-c*p,",").concat(t,"\n            A ").concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+n,",").concat(t+l*p,"\n            L ").concat(e+n,",").concat(t+i-l*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(u,",").concat(e+n-c*p,",").concat(t+i,"\n            L ").concat(e+c*p,",").concat(t+i,"\n            A ").concat(p,",").concat(p,",0,0,").concat(u,",").concat(e,",").concat(t+i-l*p," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return o},ys={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=e=>{var t=resolveDefaultProps(e,ys),n=Ut.useRef(null),[i,a]=Ut.useState(-1);Ut.useEffect((()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}}),[]);var{x:o,y:s,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:f,isAnimationActive:m,isUpdateAnimationActive:g}=t;if(o!==+o||s!==+s||l!==+l||c!==+c||0===l||0===c)return null;var v=We("recharts-rectangle",d);return g?Ut.createElement(Animate,{canBegin:i>0,from:{width:l,height:c,x:o,y:s},to:{width:l,height:c,x:o,y:s},duration:p,animationEasing:h,isActive:g},(e=>{var{width:a,height:o,x:s,y:l}=e;return Ut.createElement(Animate,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,isActive:m,easing:h},Ut.createElement("path",_extends$p({},filterProps(t,!0),{className:v,d:getRectanglePath(s,l,a,o,u),ref:n})))})):Ut.createElement("path",_extends$p({},filterProps(t,!0),{className:v,d:getRectanglePath(o,s,l,c,u)}))};function getRadialCursorPoints(e){var{cx:t,cy:n,radius:i,startAngle:a,endAngle:o}=e;return{points:[polarToCartesian(t,n,i,a),polarToCartesian(t,n,i,o)],cx:t,cy:n,radius:i,startAngle:a,endAngle:o}}function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$o.apply(null,arguments)}var getTangentCircle=e=>{var{cx:t,cy:n,radius:i,angle:a,sign:o,isExternal:s,cornerRadius:l,cornerIsExternal:c}=e,u=l*(s?1:-1)+i,d=Math.asin(l/u)/Mo,h=c?a:a+o*d,p=c?a-o*d:a;return{center:polarToCartesian(t,n,u,h),circleTangency:polarToCartesian(t,n,i,h),lineTangency:polarToCartesian(t,n,u*Math.cos(d*Mo),p),theta:d}},getSectorPath=e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:a,startAngle:o,endAngle:s}=e,l=((e,t)=>mathSign(t-e)*Math.min(Math.abs(t-e),359.999))(o,s),c=o+l,u=polarToCartesian(t,n,a,o),d=polarToCartesian(t,n,a,c),h="M ".concat(u.x,",").concat(u.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(l)>180),",").concat(+(o>c),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(i>0){var p=polarToCartesian(t,n,i,o),f=polarToCartesian(t,n,i,c);h+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(i,",").concat(i,",0,\n            ").concat(+(Math.abs(l)>180),",").concat(+(o<=c),",\n            ").concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(t,",").concat(n," Z");return h},xs={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=e=>{var t=resolveDefaultProps(e,xs),{cx:n,cy:i,innerRadius:a,outerRadius:o,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(o<a||u===d)return null;var p,f=We("recharts-sector",h),m=o-a,g=getPercentValue(s,m,0,!0);return p=g>0&&Math.abs(u-d)<360?(e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=mathSign(u-c),{circleTangency:h,lineTangency:p,theta:f}=getTangentCircle({cx:t,cy:n,radius:a,angle:c,sign:d,cornerRadius:o,cornerIsExternal:l}),{circleTangency:m,lineTangency:g,theta:v}=getTangentCircle({cx:t,cy:n,radius:a,angle:u,sign:-d,cornerRadius:o,cornerIsExternal:l}),b=l?Math.abs(c-u):Math.abs(c-u)-f-v;if(b<0)return s?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):getSectorPath({cx:t,cy:n,innerRadius:i,outerRadius:a,startAngle:c,endAngle:u});var _="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(b>180),",").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,"\n  ");if(i>0){var{circleTangency:j,lineTangency:w,theta:S}=getTangentCircle({cx:t,cy:n,radius:i,angle:c,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),{circleTangency:A,lineTangency:C,theta:O}=getTangentCircle({cx:t,cy:n,radius:i,angle:u,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),E=l?Math.abs(c-u):Math.abs(c-u)-S-O;if(E<0&&0===o)return"".concat(_,"L").concat(t,",").concat(n,"Z");_+="L".concat(C.x,",").concat(C.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"\n      A").concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,"Z")}else _+="L".concat(t,",").concat(n,"Z");return _})({cx:n,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):getSectorPath({cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:d}),Ut.createElement("path",_extends$o({},filterProps(t,!0),{className:f,d:p}))};function getCursorPoints(e,t,n){var i,a,o,s;if("horizontal"===e)o=i=t.x,a=n.top,s=n.top+n.height;else if("vertical"===e)s=a=t.y,i=n.left,o=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return getRadialCursorPoints(t);var{cx:l,cy:c,innerRadius:u,outerRadius:d,angle:h}=t,p=polarToCartesian(l,c,u,h),f=polarToCartesian(l,c,d,h);i=p.x,a=p.y,o=f.x,s=f.y}return[{x:i,y:a},{x:o,y:s}]}var vs={},bs={},_s={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ua;e.toNumber=function(e){return t.isSymbol(e)?NaN:Number(e)}}(_s),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_s;e.toFinite=function(e){if(!e)return 0===e?e:0;if((e=t.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e==e?e:0}}(bs),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wa,n=bs;e.range=function(e,i,a){a&&"number"!=typeof a&&t.isIterateeCall(e,i,a)&&(i=a=void 0),e=n.toFinite(e),void 0===i?(i=e,e=0):i=n.toFinite(i),a=void 0===a?e<i?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((i-e)/(a||1)),0),s=new Array(o);for(let t=0;t<o;t++)s[t]=e,e+=a;return s}}(vs);const js=Zt(vs.range);function ascending(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,n,i;function left(e,i,a=0,o=e.length){if(a<o){if(0!==t(i,i))return o;do{const t=a+o>>>1;n(e[t],i)<0?a=t+1:o=t}while(a<o)}return a}return 2!==e.length?(t=ascending,n=(t,n)=>ascending(e(t),n),i=(t,n)=>e(t)-n):(t=e===ascending||e===descending?e:zero$1,n=e,i=e),{left:left,center:function(e,t,n=0,a=e.length){const o=left(e,t,n,a-1);return o>n&&i(e[o-1],t)>-i(e[o],t)?o-1:o},right:function(e,i,a=0,o=e.length){if(a<o){if(0!==t(i,i))return o;do{const t=a+o>>>1;n(e[t],i)<=0?a=t+1:o=t}while(a<o)}return a}}}function zero$1(){return 0}function number$2(e){return null===e?NaN:+e}const ws=bisector(ascending).right;bisector(number$2).center;class InternMap extends Map{constructor(e,t=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(intern_get(this,e))}has(e){return super.has(intern_get(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){const i=t(n);e.has(i)&&(n=e.get(i),e.delete(i));return n}(this,e))}}function intern_get({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function keyof(e){return null!==e&&"object"==typeof e?e.valueOf():e}function ascendingDefined(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const Ss=Math.sqrt(50),As=Math.sqrt(10),Cs=Math.sqrt(2);function tickSpec(e,t,n){const i=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(i)),o=i/Math.pow(10,a),s=o>=Ss?10:o>=As?5:o>=Cs?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?tickSpec(e,t,2*n):[l,c,u]}function ticks(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const i=t<e,[a,o,s]=i?tickSpec(t,e,n):tickSpec(e,t,n);if(!(o>=a))return[];const l=o-a+1,c=new Array(l);if(i)if(s<0)for(let u=0;u<l;++u)c[u]=(o-u)/-s;else for(let u=0;u<l;++u)c[u]=(o-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(a+u)/-s;else for(let u=0;u<l;++u)c[u]=(a+u)*s;return c}function tickIncrement(e,t,n){return tickSpec(e=+e,t=+t,n=+n)[2]}function tickStep(e,t,n){n=+n;const i=(t=+t)<(e=+e),a=i?tickIncrement(t,e,n):tickIncrement(e,t,n);return(i?-1:1)*(a<0?1/-a:a)}function max(e,t){let n;for(const i of e)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);return n}function min(e,t){let n;for(const i of e)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);return n}function quickselect(e,t,n=0,i=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(a=void 0===a?ascendingDefined:function(e=ascending){if(e===ascending)return ascendingDefined;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||0===i?i:(0===e(n,n))-(0===e(t,t))}}(a);i>n;){if(i-n>600){const o=i-n+1,s=t-n+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);quickselect(e,t,Math.max(n,Math.floor(t-s*c/o+u)),Math.min(i,Math.floor(t+(o-s)*c/o+u)),a)}const o=e[t];let s=n,l=i;for(swap(e,n,t),a(e[i],o)>0&&swap(e,n,i);s<l;){for(swap(e,s,l),++s,--l;a(e[s],o)<0;)++s;for(;a(e[l],o)>0;)--l}0===a(e[n],o)?swap(e,n,l):(++l,swap(e,l,i)),l<=t&&(n=l+1),t<=l&&(i=l-1)}return e}function swap(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function quantileSorted(e,t,n=number$2){if((i=e.length)&&!isNaN(t=+t)){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,a=(i-1)*t,o=Math.floor(a),s=+n(e[o],o,e);return s+(+n(e[o+1],o+1,e)-s)*(a-o)}}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const Os=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],n=[],i=Os;function scale(a){let o=e.get(a);if(void 0===o){if(i!==Os)return i;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return scale.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const i of n)e.has(i)||e.set(i,t.push(i)-1);return scale},scale.range=function(e){return arguments.length?(n=Array.from(e),scale):n.slice()},scale.unknown=function(e){return arguments.length?(i=e,scale):i},scale.copy=function(){return ordinal(t,n).unknown(i)},initRange.apply(scale,arguments),scale}function band(){var e,t,n=ordinal().unknown(void 0),i=n.domain,a=n.range,o=0,s=1,l=!1,c=0,u=0,d=.5;function rescale(){var n=i().length,h=s<o,p=h?s:o,f=h?o:s;e=(f-p)/Math.max(1,n-c+2*u),l&&(e=Math.floor(e)),p+=(f-p-e*(n-c))*d,t=e*(1-c),l&&(p=Math.round(p),t=Math.round(t));var m=function(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var i=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++i<a;)o[i]=e+i*n;return o}(n).map((function(t){return p+e*t}));return a(h?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(i(e),rescale()):i()},n.range=function(e){return arguments.length?([o,s]=e,o=+o,s=+s,rescale()):[o,s]},n.rangeRound=function(e){return[o,s]=e,o=+o,s=+s,l=!0,rescale()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(l=!!e,rescale()):l},n.padding=function(e){return arguments.length?(c=Math.min(1,u=+e),rescale()):c},n.paddingInner=function(e){return arguments.length?(c=Math.min(1,e),rescale()):c},n.paddingOuter=function(e){return arguments.length?(u=+e,rescale()):u},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),rescale()):d},n.copy=function(){return band(i(),[o,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},initRange.apply(rescale(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Color(){}var Es=.7,ks=1/Es,Ps="\\s*([+-]?\\d+)\\s*",Ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ls="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$s=/^#([0-9a-f]{3,8})$/,Is=new RegExp(`^rgb\\(${Ps},${Ps},${Ps}\\)$`),Ms=new RegExp(`^rgb\\(${Ls},${Ls},${Ls}\\)$`),Rs=new RegExp(`^rgba\\(${Ps},${Ps},${Ps},${Ts}\\)$`),Ds=new RegExp(`^rgba\\(${Ls},${Ls},${Ls},${Ts}\\)$`),Ns=new RegExp(`^hsl\\(${Ts},${Ls},${Ls}\\)$`),zs=new RegExp(`^hsla\\(${Ts},${Ls},${Ls},${Ts}\\)$`),Bs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$s.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?rgbn(t):3===n?new Rgb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?rgba(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Is.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=Ms.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Rs.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=Ds.exec(e))?rgba(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Ns.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=zs.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):Bs.hasOwnProperty(e)?rgbn(Bs[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba(e,t,n,i){return i<=0&&(e=t=n=NaN),new Rgb(e,t,n,i)}function rgb$1(e,t,n,i){return 1===arguments.length?((a=e)instanceof Color||(a=color(a)),a?new Rgb((a=a.rgb()).r,a.g,a.b,a.opacity):new Rgb):new Rgb(e,t,n,null==i?1:i);var a}function Rgb(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${1===e?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===e?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return((e=clampi(e))<16?"0":"")+e.toString(16)}function hsla(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,i)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,l=o-a,c=(o+a)/2;return l?(s=t===o?(n-i)/l+6*(n<i):n===o?(i-t)/l+2:(t-n)/l+4,l/=c<.5?o+a:2-o-a,s*=60):l=c>0&&c<1?0:s,new Hsl(s,l,c,e.opacity)}function Hsl(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function clamph(e){return(e=(e||0)%360)<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}define(Color,color,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,rgb$1,extend(Color,{brighter(e){return e=null==e?ks:Math.pow(ks,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Es:Math.pow(Es,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:function(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,(function(e,t,n,i){return 1===arguments.length?hslConvert(e):new Hsl(e,t,n,null==i?1:i)}),extend(Color,{brighter(e){return e=null==e?ks:Math.pow(ks,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Es:Math.pow(Es,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,a=2*n-i;return new Rgb(hsl2rgb(e>=240?e-240:e+120,a,i),hsl2rgb(e,a,i),hsl2rgb(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${1===e?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===e?")":`, ${e})`}`}}));const constant=e=>()=>e;function gamma(e){return 1==(e=+e)?nogamma:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):constant(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):constant(isNaN(e)?t:e)}const Fs=function rgbGamma(e){var t=gamma(e);function rgb(e,n){var i=t((e=rgb$1(e)).r,(n=rgb$1(n)).r),a=t(e.g,n.g),o=t(e.b,n.b),s=nogamma(e.opacity,n.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=o(t),e.opacity=s(t),e+""}}return rgb.gamma=rgbGamma,rgb}(1);function numberArray(e,t){t||(t=[]);var n,i=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(n=0;n<i;++n)a[n]=e[n]*(1-o)+t[n]*o;return a}}function genericArray(e,t){var n,i=t?t.length:0,a=e?Math.min(i,e.length):0,o=new Array(a),s=new Array(i);for(n=0;n<a;++n)o[n]=interpolate(e[n],t[n]);for(;n<i;++n)s[n]=t[n];return function(e){for(n=0;n<a;++n)s[n]=o[n](e);return s}}function date$1(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function interpolateNumber(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function object(e,t){var n,i={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?i[n]=interpolate(e[n],t[n]):a[n]=t[n];return function(e){for(n in i)a[n]=i[n](e);return a}}var Zs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Us=new RegExp(Zs.source,"g");function string(e,t){var n,i,a,o=Zs.lastIndex=Us.lastIndex=0,s=-1,l=[],c=[];for(e+="",t+="";(n=Zs.exec(e))&&(i=Us.exec(t));)(a=i.index)>o&&(a=t.slice(o,a),l[s]?l[s]+=a:l[++s]=a),(n=n[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:interpolateNumber(n,i)})),o=Us.lastIndex;return o<t.length&&(a=t.slice(o),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,i=0;i<t;++i)l[(n=c[i]).i]=n.x(e);return l.join("")})}function interpolate(e,t){var n,i=typeof t;return null==t||"boolean"===i?constant(t):("number"===i?interpolateNumber:"string"===i?(n=color(t))?(t=n,Fs):string:t instanceof color?Fs:t instanceof Date?date$1:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?numberArray:Array.isArray(t)?genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function piecewise(e,t){void 0===t&&(t=e,e=interpolate);for(var n=0,i=t.length-1,a=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(a,a=t[++n]);return function(e){var t=Math.max(0,Math.min(i-1,Math.floor(e*=i)));return o[t](e-t)}}function number$1(e){return+e}var Ks=[0,1];function identity$3(e){return e}function normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function bimap(e,t,n){var i=e[0],a=e[1],o=t[0],s=t[1];return a<i?(i=normalize(a,i),o=n(s,o)):(i=normalize(i,a),o=n(o,s)),function(e){return o(i(e))}}function polymap(e,t,n){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)a[s]=normalize(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(t){var n=ws(e,t,1,i)-1;return o[n](a[n](t))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e,t,n,i,a,o,s=Ks,l=Ks,c=interpolate,u=identity$3;function rescale(){var e=Math.min(s.length,l.length);return u!==identity$3&&(u=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(s[0],s[e-1])),i=e>2?polymap:bimap,a=o=null,scale}function scale(t){return null==t||isNaN(t=+t)?n:(a||(a=i(s.map(e),l,c)))(e(u(t)))}return scale.invert=function(n){return u(t((o||(o=i(l,s.map(e),interpolateNumber)))(n)))},scale.domain=function(e){return arguments.length?(s=Array.from(e,number$1),rescale()):s.slice()},scale.range=function(e){return arguments.length?(l=Array.from(e),rescale()):l.slice()},scale.rangeRound=function(e){return l=Array.from(e),c=interpolateRound,rescale()},scale.clamp=function(e){return arguments.length?(u=!!e||identity$3,rescale()):u!==identity$3},scale.interpolate=function(e){return arguments.length?(c=e,rescale()):c},scale.unknown=function(e){return arguments.length?(n=e,scale):n},function(n,i){return e=n,t=i,rescale()}}function continuous(){return transformer$2()(identity$3,identity$3)}function formatDecimalParts(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function exponent(e){return(e=formatDecimalParts(Math.abs(e)))?e[1]:NaN}var Ws,Hs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=Hs.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function FormatSpecifier(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function formatRounded(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var i=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Gs={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(100*e,t),r:formatRounded,s:function(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var i=n[0],a=n[1],o=a-(Ws=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+formatDecimalParts(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$2(e){return e}var Ys,qs,Vs,Xs=Array.prototype.map,Js=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?identity$2:(t=Xs.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var a=e.length,o=[],s=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),o.push(e.substring(a-=l,a+l)),!((c+=l+1)>i));)l=t[s=(s+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?identity$2:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Xs.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"−":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function newFormat(e){var t=(e=formatSpecifier(e)).fill,n=e.align,h=e.sign,p=e.symbol,f=e.zero,m=e.width,g=e.comma,v=e.precision,b=e.trim,_=e.type;"n"===_?(g=!0,_="g"):Gs[_]||(void 0===v&&(v=12),b=!0,_="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var j="$"===p?a:"#"===p&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",w="$"===p?o:/[%p]/.test(_)?c:"",S=Gs[_],A=/[defgprs%]/.test(_);function format(e){var a,o,c,p=j,C=w;if("c"===_)C=S(e)+C,e="";else{var O=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:S(Math.abs(e),v),b&&(e=function(e){e:for(var t,n=e.length,i=1,a=-1;i<n;++i)switch(e[i]){case".":a=t=i;break;case"0":0===a&&(a=i),t=i;break;default:if(!+e[i])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),O&&0==+e&&"+"!==h&&(O=!1),p=(O?"("===h?h:u:"-"===h||"("===h?"":h)+p,C=("s"===_?Js[8+Ws/3]:"")+C+(O&&"("===h?")":""),A)for(a=-1,o=e.length;++a<o;)if(48>(c=e.charCodeAt(a))||c>57){C=(46===c?s+e.slice(a+1):e.slice(a))+C,e=e.slice(0,a);break}}g&&!f&&(e=i(e,1/0));var E=p.length+e.length+C.length,k=E<m?new Array(m-E+1).join(t):"";switch(g&&f&&(e=i(k+e,k.length?m-C.length:1/0),k=""),n){case"<":e=p+e+C+k;break;case"=":e=p+k+e+C;break;case"^":e=k.slice(0,E=k.length>>1)+p+e+C+k.slice(E);break;default:e=k+p+e+C}return l(e)}return v=void 0===v?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),format.toString=function(){return e+""},format}return{format:newFormat,formatPrefix:function(e,t){var n=newFormat(((e=formatSpecifier(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3))),a=Math.pow(10,-i),o=Js[8+i/3];return function(e){return n(a*e)+o}}}}function tickFormat(e,t,n,i){var a,o=tickStep(e,t,n);switch((i=formatSpecifier(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))-exponent(Math.abs(e)))}(o,s))||(i.precision=a),Vs(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=a-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(a=function(e){return Math.max(0,-exponent(Math.abs(e)))}(o))||(i.precision=a-2*("%"===i.type))}return qs(i)}function linearish(e){var t=e.domain;return e.ticks=function(e){var n=t();return ticks(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var i=t();return tickFormat(i[0],i[i.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var i,a,o=t(),s=0,l=o.length-1,c=o[s],u=o[l],d=10;for(u<c&&(a=c,c=u,u=a,a=s,s=l,l=a);d-- >0;){if((a=tickIncrement(c,u,n))===i)return o[s]=c,o[l]=u,t(o);if(a>0)c=Math.floor(c/a)*a,u=Math.ceil(u/a)*a;else{if(!(a<0))break;c=Math.ceil(c*a)/a,u=Math.floor(u*a)/a}i=a}return e},e}function nice(e,t){var n,i=0,a=(e=e.slice()).length-1,o=e[i],s=e[a];return s<o&&(n=i,i=a,a=n,n=o,o=s,s=n),e[i]=t.floor(o),e[a]=t.ceil(s),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function reflect(e){return(t,n)=>-e(-t,n)}function loggish(e){const t=e(transformLog,transformExp),n=t.domain;let i,a,o=10;function rescale(){return i=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),a=function(e){return 10===e?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(i=reflect(i),a=reflect(a),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(e){return arguments.length?(o=+e,rescale()):o},t.domain=function(e){return arguments.length?(n(e),rescale()):n()},t.ticks=e=>{const t=n();let s=t[0],l=t[t.length-1];const c=l<s;c&&([s,l]=[l,s]);let u,d,h=i(s),p=i(l);const f=null==e?10:+e;let m=[];if(!(o%1)&&p-h<f){if(h=Math.floor(h),p=Math.ceil(p),s>0){for(;h<=p;++h)for(u=1;u<o;++u)if(d=h<0?u/a(-h):u*a(h),!(d<s)){if(d>l)break;m.push(d)}}else for(;h<=p;++h)for(u=o-1;u>=1;--u)if(d=h>0?u/a(-h):u*a(h),!(d<s)){if(d>l)break;m.push(d)}2*m.length<f&&(m=ticks(s,l,f))}else m=ticks(h,p,Math.min(p-h,f)).map(a);return c?m.reverse():m},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=formatSpecifier(n)).precision||(n.trim=!0),n=qs(n)),e===1/0)return n;const s=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/a(Math.round(i(e)));return t*o<o-.5&&(t*=o),t<=s?n(e):""}},t.nice=()=>n(nice(n(),{floor:e=>a(Math.floor(i(e))),ceil:e=>a(Math.ceil(i(e)))})),t}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,n=e(transformSymlog(t),transformSymexp(t));return n.constant=function(n){return arguments.length?e(transformSymlog(t=+n),transformSymexp(t)):t},linearish(n)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$3,identity$3),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(identity$3,identity$3):.5===n?e(transformSqrt,transformSquare):e(transformPow(n),transformPow(1/n)):n},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function square(e){return Math.sign(e)*e*e}Ys=formatLocale$1({thousands:",",grouping:[3],currency:["$",""]}),qs=Ys.format,Vs=Ys.formatPrefix;const Qs=new Date,el=new Date;function timeInterval(e,t,n,i){function interval(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return interval.floor=t=>(e(t=new Date(+t)),t),interval.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),interval.round=e=>{const t=interval(e),n=interval.ceil(e);return e-t<n-e?t:n},interval.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),interval.range=(n,i,a)=>{const o=[];if(n=interval.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return o;let s;do{o.push(s=new Date(+n)),t(n,a),e(n)}while(s<n&&n<i);return o},interval.filter=n=>timeInterval((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,i)=>{if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!n(e););else for(;--i>=0;)for(;t(e,1),!n(e););})),n&&(interval.count=(t,i)=>(Qs.setTime(+t),el.setTime(+i),e(Qs),e(el),Math.floor(n(Qs,el))),interval.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?interval.filter(i?t=>i(t)%e==0:t=>interval.count(0,t)%e==0):interval:null)),interval}const tl=timeInterval((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));tl.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?timeInterval((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):tl:null),tl.range;const rl=1e3,nl=6e4,il=36e5,al=864e5,ol=6048e5,sl=2592e6,ll=31536e6,cl=timeInterval((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*rl)}),((e,t)=>(t-e)/rl),(e=>e.getUTCSeconds()));cl.range;const ul=timeInterval((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rl)}),((e,t)=>{e.setTime(+e+t*nl)}),((e,t)=>(t-e)/nl),(e=>e.getMinutes()));ul.range;const dl=timeInterval((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*nl)}),((e,t)=>(t-e)/nl),(e=>e.getUTCMinutes()));dl.range;const hl=timeInterval((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*rl-e.getMinutes()*nl)}),((e,t)=>{e.setTime(+e+t*il)}),((e,t)=>(t-e)/il),(e=>e.getHours()));hl.range;const pl=timeInterval((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*il)}),((e,t)=>(t-e)/il),(e=>e.getUTCHours()));pl.range;const fl=timeInterval((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nl)/al),(e=>e.getDate()-1));fl.range;const ml=timeInterval((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/al),(e=>e.getUTCDate()-1));ml.range;const gl=timeInterval((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/al),(e=>Math.floor(e/al)));function timeWeekday(e){return timeInterval((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nl)/ol))}gl.range;const yl=timeWeekday(0),xl=timeWeekday(1),vl=timeWeekday(2),bl=timeWeekday(3),_l=timeWeekday(4),jl=timeWeekday(5),wl=timeWeekday(6);function utcWeekday(e){return timeInterval((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/ol))}yl.range,xl.range,vl.range,bl.range,_l.range,jl.range,wl.range;const Sl=utcWeekday(0),Al=utcWeekday(1),Cl=utcWeekday(2),Ol=utcWeekday(3),El=utcWeekday(4),kl=utcWeekday(5),Pl=utcWeekday(6);Sl.range,Al.range,Cl.range,Ol.range,El.range,kl.range,Pl.range;const Tl=timeInterval((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()));Tl.range;const Ll=timeInterval((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()));Ll.range;const $l=timeInterval((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear()));$l.every=e=>isFinite(e=Math.floor(e))&&e>0?timeInterval((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null,$l.range;const Il=timeInterval((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));function ticker(e,t,n,i,a,o){const s=[[cl,1,rl],[cl,5,5e3],[cl,15,15e3],[cl,30,3e4],[o,1,nl],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,il],[a,3,108e5],[a,6,216e5],[a,12,432e5],[i,1,al],[i,2,1728e5],[n,1,ol],[t,1,sl],[t,3,7776e6],[e,1,ll]];function tickInterval(t,n,i){const a=Math.abs(n-t)/i,o=bisector((([,,e])=>e)).right(s,a);if(o===s.length)return e.every(tickStep(t/ll,n/ll,i));if(0===o)return tl.every(Math.max(tickStep(t,n,i),1));const[l,c]=s[a/s[o-1][2]<s[o][2]/a?o-1:o];return l.every(c)}return[function(e,t,n){const i=t<e;i&&([e,t]=[t,e]);const a=n&&"function"==typeof n.range?n:tickInterval(e,t,n),o=a?a.range(e,+t+1):[];return i?o.reverse():o},tickInterval]}Il.every=e=>isFinite(e=Math.floor(e))&&e>0?timeInterval((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null,Il.range;const[Ml,Rl]=ticker(Il,Ll,Sl,gl,pl,dl),[Dl,Nl]=ticker($l,Tl,yl,fl,hl,ul);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var zl,Bl,Fl,Zl={"-":"",_:" ",0:"0"},Ul=/^\s*\d+/,Kl=/^%/,Wl=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var i=e<0?"-":"",a=(i?-e:e)+"",o=a.length;return i+(o<n?new Array(n-o+1).join(t)+a:a)}function requote(e){return e.replace(Wl,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function parseWeekdayNumberSunday(e,t,n){var i=Ul.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var i=Ul.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function parseWeekNumberSunday(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function parseWeekNumberISO(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function parseWeekNumberMonday(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function parseFullYear(e,t,n){var i=Ul.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function parseYear(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function parseZone(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function parseQuarter(e,t,n){var i=Ul.exec(t.slice(n,n+1));return i?(e.q=3*i[0]-3,n+i[0].length):-1}function parseMonthNumber(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function parseDayOfMonth(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function parseDayOfYear(e,t,n){var i=Ul.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function parseHour24(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function parseMinutes(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function parseSeconds(e,t,n){var i=Ul.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function parseMilliseconds(e,t,n){var i=Ul.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function parseMicroseconds(e,t,n){var i=Ul.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function parseLiteralPercent(e,t,n){var i=Kl.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function parseUnixTimestamp(e,t,n){var i=Ul.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var i=Ul.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+fl.count($l(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return 0===t?7:t}function formatWeekNumberSunday(e,t){return pad(yl.count($l(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||0===t?_l(e):_l.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(_l.count($l(e),e)+(4===$l(e).getDay()),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(xl.count($l(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return pad((e=dISO(e)).getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var n=e.getDay();return pad((e=n>=4||0===n?_l(e):_l.ceil(e)).getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+ml.count(Il(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return 0===t?7:t}function formatUTCWeekNumberSunday(e,t){return pad(Sl.count(Il(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||0===t?El(e):El.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(El.count(Il(e),e)+(4===Il(e).getUTCDay()),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(Al.count(Il(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return pad((e=UTCdISO(e)).getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var n=e.getUTCDay();return pad((e=n>=4||0===n?El(e):El.ceil(e)).getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}function date(e){return new Date(e)}function number(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,i,a,o,s,l,c,u){var d=continuous(),h=d.invert,p=d.domain,f=u(".%L"),m=u(":%S"),g=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),_=u("%b %d"),j=u("%B"),w=u("%Y");function tickFormat(e){return(c(e)<e?f:l(e)<e?m:s(e)<e?g:o(e)<e?v:i(e)<e?a(e)<e?b:_:n(e)<e?j:w)(e)}return d.invert=function(e){return new Date(h(e))},d.domain=function(e){return arguments.length?p(Array.from(e,number)):p().map(date)},d.ticks=function(t){var n=p();return e(n[0],n[n.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?tickFormat:u(t)},d.nice=function(e){var n=p();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?p(nice(n,e)):d},d.copy=function(){return copy$1(d,calendar(e,t,n,i,a,o,s,l,c,u))},d}function transformer$1(){var e,t,n,i,a,o=0,s=1,l=identity$3,c=!1;function scale(t){return null==t||isNaN(t=+t)?a:l(0===n?.5:(t=(i(t)-e)*n,c?Math.max(0,Math.min(1,t)):t))}function range(e){return function(t){var n,i;return arguments.length?([n,i]=t,l=e(n,i),scale):[l(0),l(1)]}}return scale.domain=function(a){return arguments.length?([o,s]=a,e=i(o=+o),t=i(s=+s),n=e===t?0:1/(t-e),scale):[o,s]},scale.clamp=function(e){return arguments.length?(c=!!e,scale):c},scale.interpolator=function(e){return arguments.length?(l=e,scale):l},scale.range=range(interpolate),scale.rangeRound=range(interpolateRound),scale.unknown=function(e){return arguments.length?(a=e,scale):a},function(a){return i=a,e=a(o),t=a(s),n=e===t?0:1/(t-e),scale}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function transformer(){var e,t,n,i,a,o,s,l=0,c=.5,u=1,d=1,h=identity$3,p=!1;function scale(e){return isNaN(e=+e)?s:(e=.5+((e=+o(e))-t)*(d*e<d*t?i:a),h(p?Math.max(0,Math.min(1,e)):e))}function range(e){return function(t){var n,i,a;return arguments.length?([n,i,a]=t,h=piecewise(e,[n,i,a]),scale):[h(0),h(.5),h(1)]}}return scale.domain=function(s){return arguments.length?([l,c,u]=s,e=o(l=+l),t=o(c=+c),n=o(u=+u),i=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),d=t<e?-1:1,scale):[l,c,u]},scale.clamp=function(e){return arguments.length?(p=!!e,scale):p},scale.interpolator=function(e){return arguments.length?(h=e,scale):h},scale.range=range(interpolate),scale.rangeRound=range(interpolateRound),scale.unknown=function(e){return arguments.length?(s=e,scale):s},function(s){return o=s,e=s(l),t=s(c),n=s(u),i=e===t?0:.5/(t-e),a=t===n?0:.5/(n-t),d=t<e?-1:1,scale}}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}!function(e){zl=function(e){var t=e.dateTime,n=e.date,i=e.time,a=e.periods,o=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=formatRe(a),d=formatLookup(a),h=formatRe(o),p=formatLookup(o),f=formatRe(s),m=formatLookup(s),g=formatRe(l),v=formatLookup(l),b=formatRe(c),_=formatLookup(c),j={a:function(e){return s[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return l[e.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},w={a:function(e){return s[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return l[e.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},S={a:function(e,t,n){var i=f.exec(t.slice(n));return i?(e.w=m.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(e,t,n){var i=h.exec(t.slice(n));return i?(e.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(e,t,n){var i=b.exec(t.slice(n));return i?(e.m=_.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(e,t,n){var i=g.exec(t.slice(n));return i?(e.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(e,n,i){return parseSpecifier(e,t,n,i)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(e,t,n){var i=u.exec(t.slice(n));return i?(e.p=d.get(i[0].toLowerCase()),n+i[0].length):-1},q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(e,t,i){return parseSpecifier(e,n,t,i)},X:function(e,t,n){return parseSpecifier(e,i,t,n)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function newFormat(e,t){return function(n){var i,a,o,s=[],l=-1,c=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++l<u;)37===e.charCodeAt(l)&&(s.push(e.slice(c,l)),null!=(a=Zl[i=e.charAt(++l)])?i=e.charAt(++l):a="e"===i?" ":"0",(o=t[i])&&(i=o(n,a)),s.push(i),c=l+1);return s.push(e.slice(c,l)),s.join("")}}function newParse(e,t){return function(n){var i,a,o=newDate(1900,void 0,1);if(parseSpecifier(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(a=(i=utcDate(newDate(o.y,0,1))).getUTCDay(),i=a>4||0===a?Al.ceil(i):Al(i),i=ml.offset(i,7*(o.V-1)),o.y=i.getUTCFullYear(),o.m=i.getUTCMonth(),o.d=i.getUTCDate()+(o.w+6)%7):(a=(i=localDate(newDate(o.y,0,1))).getDay(),i=a>4||0===a?xl.ceil(i):xl(i),i=fl.offset(i,7*(o.V-1)),o.y=i.getFullYear(),o.m=i.getMonth(),o.d=i.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?utcDate(newDate(o.y,0,1)).getUTCDay():localDate(newDate(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,utcDate(o)):localDate(o)}}function parseSpecifier(e,t,n,i){for(var a,o,s=0,l=t.length,c=n.length;s<l;){if(i>=c)return-1;if(37===(a=t.charCodeAt(s++))){if(a=t.charAt(s++),!(o=S[a in Zl?t.charAt(s++):a])||(i=o(e,n,i))<0)return-1}else if(a!=n.charCodeAt(i++))return-1}return i}return j.x=newFormat(n,j),j.X=newFormat(i,j),j.c=newFormat(t,j),w.x=newFormat(n,w),w.X=newFormat(i,w),w.c=newFormat(t,w),{format:function(e){var t=newFormat(e+="",j);return t.toString=function(){return e},t},parse:function(e){var t=newParse(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=newFormat(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=newParse(e+="",!0);return t.toString=function(){return e},t}}}(e),Bl=zl.format,zl.parse,Fl=zl.utcFormat,zl.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const Hl=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:function diverging(){var e=linearish(transformer()(identity$3));return e.copy=function(){return copy(e,diverging())},initInterpolator.apply(e,arguments)},scaleDivergingLog:function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)},scaleDivergingPow:divergingPow,scaleDivergingSqrt:function(){return divergingPow.apply(null,arguments).exponent(.5)},scaleDivergingSymlog:function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)},scaleIdentity:function identity$1(e){var t;function scale(e){return null==e||isNaN(e=+e)?t:e}return scale.invert=scale,scale.domain=scale.range=function(t){return arguments.length?(e=Array.from(t,number$1),scale):e.slice()},scale.unknown=function(e){return arguments.length?(t=e,scale):t},scale.copy=function(){return identity$1(e).unknown(t)},e=arguments.length?Array.from(e,number$1):[0,1],linearish(scale)},scaleImplicit:Os,scaleLinear:function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)},scaleLog:function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e},scaleOrdinal:ordinal,scalePoint:function(){return pointish(band.apply(null,arguments).paddingInner(1))},scalePow:pow,scaleQuantile:function quantile(){var e,t=[],n=[],i=[];function rescale(){var e=0,a=Math.max(1,n.length);for(i=new Array(a-1);++e<a;)i[e-1]=quantileSorted(t,e/a);return scale}function scale(t){return null==t||isNaN(t=+t)?e:n[ws(i,t)]}return scale.invertExtent=function(e){var a=n.indexOf(e);return a<0?[NaN,NaN]:[a>0?i[a-1]:t[0],a<i.length?i[a]:t[t.length-1]]},scale.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(ascending),rescale()},scale.range=function(e){return arguments.length?(n=Array.from(e),rescale()):n.slice()},scale.unknown=function(t){return arguments.length?(e=t,scale):e},scale.quantiles=function(){return i.slice()},scale.copy=function(){return quantile().domain(t).range(n).unknown(e)},initRange.apply(scale,arguments)},scaleQuantize:function quantize(){var e,t=0,n=1,i=1,a=[.5],o=[0,1];function scale(t){return null!=t&&t<=t?o[ws(a,t,0,i)]:e}function rescale(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*n-(e-i)*t)/(i+1);return scale}return scale.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,rescale()):[t,n]},scale.range=function(e){return arguments.length?(i=(o=Array.from(e)).length-1,rescale()):o.slice()},scale.invertExtent=function(e){var s=o.indexOf(e);return s<0?[NaN,NaN]:s<1?[t,a[0]]:s>=i?[a[i-1],n]:[a[s-1],a[s]]},scale.unknown=function(t){return arguments.length?(e=t,scale):scale},scale.thresholds=function(){return a.slice()},scale.copy=function(){return quantize().domain([t,n]).range(o).unknown(e)},initRange.apply(linearish(scale),arguments)},scaleRadial:function radial(){var e,t=continuous(),n=[0,1],i=!1;function scale(n){var a=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(a)?e:i?Math.round(a):a}return scale.invert=function(e){return t.invert(square(e))},scale.domain=function(e){return arguments.length?(t.domain(e),scale):t.domain()},scale.range=function(e){return arguments.length?(t.range((n=Array.from(e,number$1)).map(square)),scale):n.slice()},scale.rangeRound=function(e){return scale.range(e).round(!0)},scale.round=function(e){return arguments.length?(i=!!e,scale):i},scale.clamp=function(e){return arguments.length?(t.clamp(e),scale):t.clamp()},scale.unknown=function(t){return arguments.length?(e=t,scale):e},scale.copy=function(){return radial(t.domain(),n).round(i).clamp(t.clamp()).unknown(e)},initRange.apply(scale,arguments),linearish(scale)},scaleSequential:function sequential(){var e=linearish(transformer$1()(identity$3));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)},scaleSequentialLog:function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)},scaleSequentialPow:sequentialPow,scaleSequentialQuantile:function sequentialQuantile(){var e=[],t=identity$3;function scale(n){if(null!=n&&!isNaN(n=+n))return t((ws(e,n,1)-1)/(e.length-1))}return scale.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(ascending),scale},scale.interpolator=function(e){return arguments.length?(t=e,scale):t},scale.range=function(){return e.map(((n,i)=>t(i/(e.length-1))))},scale.quantiles=function(t){return Array.from({length:t+1},((n,i)=>function(e,t){if((n=(e=Float64Array.from(function*(e){for(let t of e)null!=t&&(t=+t)>=t&&(yield t)}(e))).length)&&!isNaN(t=+t)){if(t<=0||n<2)return min(e);if(t>=1)return max(e);var n,i=(n-1)*t,a=Math.floor(i),o=max(quickselect(e,a).subarray(0,a+1));return o+(min(e.subarray(a+1))-o)*(i-a)}}(e,i/t)))},scale.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(scale,arguments)},scaleSequentialSqrt:function(){return sequentialPow.apply(null,arguments).exponent(.5)},scaleSequentialSymlog:function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)},scaleSqrt:function(){return pow.apply(null,arguments).exponent(.5)},scaleSymlog:function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)},scaleThreshold:function threshold(){var e,t=[.5],n=[0,1],i=1;function scale(a){return null!=a&&a<=a?n[ws(t,a,0,i)]:e}return scale.domain=function(e){return arguments.length?(t=Array.from(e),i=Math.min(t.length,n.length-1),scale):t.slice()},scale.range=function(e){return arguments.length?(n=Array.from(e),i=Math.min(t.length,n.length-1),scale):n.slice()},scale.invertExtent=function(e){var i=n.indexOf(e);return[t[i-1],t[i]]},scale.unknown=function(t){return arguments.length?(e=t,scale):e},scale.copy=function(){return threshold().domain(t).range(n).unknown(e)},initRange.apply(scale,arguments)},scaleTime:function(){return initRange.apply(calendar(Dl,Nl,$l,Tl,yl,fl,hl,ul,cl,Bl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},scaleUtc:function(){return initRange.apply(calendar(Ml,Rl,Il,Ll,Sl,ml,pl,dl,cl,Fl).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},tickFormat:tickFormat},Symbol.toStringTag,{value:"Module"}));var selectChartDataWithIndexes=e=>e.chartData,Gl=Da([selectChartDataWithIndexes],(e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}})),selectChartDataWithIndexesIfNotInPanorama=(e,t,n,i)=>i?Gl(e):selectChartDataWithIndexes(e);function isWellFormedNumberDomain(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(isWellBehavedNumber(t)&&isWellBehavedNumber(n))return!0}return!1}function extendDomain(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}var Yl,ql=1e9,Vl=!0,Xl="[DecimalError] ",Jl=Xl+"Invalid argument: ",Ql=Xl+"Exponent out of range: ",ec=Math.floor,tc=Math.pow,rc=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,nc=1e7,ic=9007199254740991,ac=ec(1286742750677284.5),oc={};function add(e,t){var n,i,a,o,s,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Vl?round(t,h):t;if(c=e.d,u=t.d,s=e.e,a=t.e,c=c.slice(),o=s-a){for(o<0?(i=c,o=-o,l=u.length):(i=u,a=s,l=c.length),o>(l=(s=Math.ceil(h/7))>l?s+1:l+1)&&(o=l,i.length=1),i.reverse();o--;)i.push(0);i.reverse()}for((l=c.length)-(o=u.length)<0&&(o=l,i=u,u=c,c=i),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/nc|0,c[o]%=nc;for(n&&(c.unshift(n),++a),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=a,Vl?round(t,h):t}function checkInt32(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Jl+e)}function digitsToString(e){var t,n,i,a=e.length-1,o="",s=e[0];if(a>0){for(o+=s,t=1;t<a;t++)(n=7-(i=e[t]+"").length)&&(o+=getZeroString(n)),o+=i;(n=7-(i=(s=e[t])+"").length)&&(o+=getZeroString(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return o+s}oc.absoluteValue=oc.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},oc.comparedTo=oc.cmp=function(e){var t,n,i,a,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(i=o.d.length)<(a=e.d.length)?i:a;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return i===a?0:i>a^o.s<0?1:-1},oc.decimalPlaces=oc.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},oc.dividedBy=oc.div=function(e){return sc(this,new this.constructor(e))},oc.dividedToIntegerBy=oc.idiv=function(e){var t=this.constructor;return round(sc(this,new t(e),0,1),t.precision)},oc.equals=oc.eq=function(e){return!this.cmp(e)},oc.exponent=function(){return getBase10Exponent(this)},oc.greaterThan=oc.gt=function(e){return this.cmp(e)>0},oc.greaterThanOrEqualTo=oc.gte=function(e){return this.cmp(e)>=0},oc.isInteger=oc.isint=function(){return this.e>this.d.length-2},oc.isNegative=oc.isneg=function(){return this.s<0},oc.isPositive=oc.ispos=function(){return this.s>0},oc.isZero=function(){return 0===this.s},oc.lessThan=oc.lt=function(e){return this.cmp(e)<0},oc.lessThanOrEqualTo=oc.lte=function(e){return this.cmp(e)<1},oc.logarithm=oc.log=function(e){var t,n=this,i=n.constructor,a=i.precision,o=a+5;if(void 0===e)e=new i(10);else if((e=new i(e)).s<1||e.eq(Yl))throw Error(Xl+"NaN");if(n.s<1)throw Error(Xl+(n.s?"NaN":"-Infinity"));return n.eq(Yl)?new i(0):(Vl=!1,t=sc(ln(n,o),ln(e,o),o),Vl=!0,round(t,a))},oc.minus=oc.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?subtract(t,e):add(t,(e.s=-e.s,e))},oc.modulo=oc.mod=function(e){var t,n=this,i=n.constructor,a=i.precision;if(!(e=new i(e)).s)throw Error(Xl+"NaN");return n.s?(Vl=!1,t=sc(n,e,0,1).times(e),Vl=!0,n.minus(t)):round(new i(n),a)},oc.naturalExponential=oc.exp=function(){return exp(this)},oc.naturalLogarithm=oc.ln=function(){return ln(this)},oc.negated=oc.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},oc.plus=oc.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?add(t,e):subtract(t,(e.s=-e.s,e))},oc.precision=oc.sd=function(e){var t,n,i,a=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Jl+e);if(t=getBase10Exponent(a)+1,n=7*(i=a.d.length-1)+1,i=a.d[i]){for(;i%10==0;i/=10)n--;for(i=a.d[0];i>=10;i/=10)n++}return e&&t>n?t:n},oc.squareRoot=oc.sqrt=function(){var e,t,n,i,a,o,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Xl+"NaN")}for(e=getBase10Exponent(l),Vl=!1,0==(a=Math.sqrt(+l))||a==1/0?(((t=digitsToString(l.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ec((e+1)/2)-(e<0||e%2),i=new c(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):i=new c(a.toString()),a=s=(n=c.precision)+3;;)if(i=(o=i).plus(sc(l,o,s+2)).times(.5),digitsToString(o.d).slice(0,s)===(t=digitsToString(i.d)).slice(0,s)){if(t=t.slice(s-3,s+1),a==s&&"4999"==t){if(round(o,n+1,0),o.times(o).eq(l)){i=o;break}}else if("9999"!=t)break;s+=4}return Vl=!0,round(i,n)},oc.times=oc.mul=function(e){var t,n,i,a,o,s,l,c,u,d=this,h=d.constructor,p=d.d,f=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,(c=p.length)<(u=f.length)&&(o=p,p=f,f=o,s=c,c=u,u=s),o=[],i=s=c+u;i--;)o.push(0);for(i=u;--i>=0;){for(t=0,a=c+i;a>i;)l=o[a]+f[i]*p[a-i-1]+t,o[a--]=l%nc|0,t=l/nc|0;o[a]=(o[a]+t)%nc|0}for(;!o[--s];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,Vl?round(e,h.precision):e},oc.toDecimalPlaces=oc.todp=function(e,t){var n=this,i=n.constructor;return n=new i(n),void 0===e?n:(checkInt32(e,0,ql),void 0===t?t=i.rounding:checkInt32(t,0,8),round(n,e+getBase10Exponent(n)+1,t))},oc.toExponential=function(e,t){var n,i=this,a=i.constructor;return void 0===e?n=toString(i,!0):(checkInt32(e,0,ql),void 0===t?t=a.rounding:checkInt32(t,0,8),n=toString(i=round(new a(i),e+1,t),!0,e+1)),n},oc.toFixed=function(e,t){var n,i,a=this,o=a.constructor;return void 0===e?toString(a):(checkInt32(e,0,ql),void 0===t?t=o.rounding:checkInt32(t,0,8),n=toString((i=round(new o(a),e+getBase10Exponent(a)+1,t)).abs(),!1,e+getBase10Exponent(i)+1),a.isneg()&&!a.isZero()?"-"+n:n)},oc.toInteger=oc.toint=function(){var e=this,t=e.constructor;return round(new t(e),getBase10Exponent(e)+1,t.rounding)},oc.toNumber=function(){return+this},oc.toPower=oc.pow=function(e){var t,n,i,a,o,s,l=this,c=l.constructor,u=+(e=new c(e));if(!e.s)return new c(Yl);if(!(l=new c(l)).s){if(e.s<1)throw Error(Xl+"Infinity");return l}if(l.eq(Yl))return l;if(i=c.precision,e.eq(Yl))return round(l,i);if(s=(t=e.e)>=(n=e.d.length-1),o=l.s,s){if((n=u<0?-u:u)<=ic){for(a=new c(Yl),t=Math.ceil(i/7+4),Vl=!1;n%2&&truncate((a=a.times(l)).d,t),0!==(n=ec(n/2));)truncate((l=l.times(l)).d,t);return Vl=!0,e.s<0?new c(Yl).div(a):round(a,i)}}else if(o<0)throw Error(Xl+"NaN");return o=o<0&&1&e.d[Math.max(t,n)]?-1:1,l.s=1,Vl=!1,a=e.times(ln(l,i+12)),Vl=!0,(a=exp(a)).s=o,a},oc.toPrecision=function(e,t){var n,i,a=this,o=a.constructor;return void 0===e?i=toString(a,(n=getBase10Exponent(a))<=o.toExpNeg||n>=o.toExpPos):(checkInt32(e,1,ql),void 0===t?t=o.rounding:checkInt32(t,0,8),i=toString(a=round(new o(a),e,t),e<=(n=getBase10Exponent(a))||n<=o.toExpNeg,e)),i},oc.toSignificantDigits=oc.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(checkInt32(e,1,ql),void 0===t?t=n.rounding:checkInt32(t,0,8)),round(new n(this),e,t)},oc.toString=oc.valueOf=oc.val=oc.toJSON=oc[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=getBase10Exponent(e),n=e.constructor;return toString(e,t<=n.toExpNeg||t>=n.toExpPos)};var sc=function(){function multiplyInteger(e,t){var n,i=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+i,e[a]=n%nc|0,i=n/nc|0;return i&&e.unshift(i),e}function compare(e,t,n,i){var a,o;if(n!=i)o=n>i?1:-1;else for(a=o=0;a<n;a++)if(e[a]!=t[a]){o=e[a]>t[a]?1:-1;break}return o}function subtract(e,t,n){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*nc+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(e,t,n,i){var a,o,s,l,c,u,d,h,p,f,m,g,v,b,_,j,w,S,A=e.constructor,C=e.s==t.s?1:-1,O=e.d,E=t.d;if(!e.s)return new A(e);if(!t.s)throw Error(Xl+"Division by zero");for(o=e.e-t.e,w=E.length,_=O.length,h=(d=new A(C)).d=[],s=0;E[s]==(O[s]||0);)++s;if(E[s]>(O[s]||0)&&--o,(g=null==n?n=A.precision:i?n+(getBase10Exponent(e)-getBase10Exponent(t))+1:n)<0)return new A(0);if(g=g/7+2|0,s=0,1==w)for(l=0,E=E[0],g++;(s<_||l)&&g--;s++)v=l*nc+(O[s]||0),h[s]=v/E|0,l=v%E|0;else{for((l=nc/(E[0]+1)|0)>1&&(E=multiplyInteger(E,l),O=multiplyInteger(O,l),w=E.length,_=O.length),b=w,f=(p=O.slice(0,w)).length;f<w;)p[f++]=0;(S=E.slice()).unshift(0),j=E[0],E[1]>=nc/2&&++j;do{l=0,(a=compare(E,p,w,f))<0?(m=p[0],w!=f&&(m=m*nc+(p[1]||0)),(l=m/j|0)>1?(l>=nc&&(l=nc-1),1==(a=compare(c=multiplyInteger(E,l),p,u=c.length,f=p.length))&&(l--,subtract(c,w<u?S:E,u))):(0==l&&(a=l=1),c=E.slice()),(u=c.length)<f&&c.unshift(0),subtract(p,c,f),-1==a&&(a=compare(E,p,w,f=p.length))<1&&(l++,subtract(p,w<f?S:E,f)),f=p.length):0===a&&(l++,p=[0]),h[s++]=l,a&&p[0]?p[f++]=O[b]||0:(p=[O[b]],f=1)}while((b++<_||void 0!==p[0])&&g--)}return h[0]||h.shift(),d.e=o,round(d,i?n+getBase10Exponent(d)+1:n)}}();function exp(e,t){var n,i,a,o,s,l=0,c=0,u=e.constructor,d=u.precision;if(getBase10Exponent(e)>16)throw Error(Ql+getBase10Exponent(e));if(!e.s)return new u(Yl);for(Vl=!1,s=d,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(s+=Math.log(tc(2,c))/Math.LN10*2+5|0,n=i=a=new u(Yl),u.precision=s;;){if(i=round(i.times(e),s),n=n.times(++l),digitsToString((o=a.plus(sc(i,n,s))).d).slice(0,s)===digitsToString(a.d).slice(0,s)){for(;c--;)a=round(a.times(a),s);return u.precision=d,null==t?(Vl=!0,round(a,d)):a}a=o}}function getBase10Exponent(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function getLn10(e,t,n){if(t>e.LN10.sd())throw Vl=!0,n&&(e.precision=n),Error(Xl+"LN10 precision limit exceeded");return round(new e(e.LN10),t)}function getZeroString(e){for(var t="";e--;)t+="0";return t}function ln(e,t){var n,i,a,o,s,l,c,u,d,h=1,p=e,f=p.d,m=p.constructor,g=m.precision;if(p.s<1)throw Error(Xl+(p.s?"NaN":"-Infinity"));if(p.eq(Yl))return new m(0);if(null==t?(Vl=!1,u=g):u=t,p.eq(10))return null==t&&(Vl=!0),getLn10(m,u);if(u+=10,m.precision=u,i=(n=digitsToString(f)).charAt(0),o=getBase10Exponent(p),!(Math.abs(o)<15e14))return c=getLn10(m,u+2,g).times(o+""),p=ln(new m(i+"."+n.slice(1)),u-10).plus(c),m.precision=g,null==t?(Vl=!0,round(p,g)):p;for(;i<7&&1!=i||1==i&&n.charAt(1)>3;)i=(n=digitsToString((p=p.times(e)).d)).charAt(0),h++;for(o=getBase10Exponent(p),i>1?(p=new m("0."+n),o++):p=new m(i+"."+n.slice(1)),l=s=p=sc(p.minus(Yl),p.plus(Yl),u),d=round(p.times(p),u),a=3;;){if(s=round(s.times(d),u),digitsToString((c=l.plus(sc(s,new m(a),u))).d).slice(0,u)===digitsToString(l.d).slice(0,u))return l=l.times(2),0!==o&&(l=l.plus(getLn10(m,u+2,g).times(o+""))),l=sc(l,new m(h),u),m.precision=g,null==t?(Vl=!0,round(l,g)):l;l=c,a+=2}}function parseDecimal(e,t){var n,i,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(n<0&&(n=i),n+=+t.slice(i+1),t=t.substring(0,i)):n<0&&(n=t.length),i=0;48===t.charCodeAt(i);)++i;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(i,a)){if(a-=i,n=n-i-1,e.e=ec(n/7),e.d=[],i=(n+1)%7,n<0&&(i+=7),i<a){for(i&&e.d.push(+t.slice(0,i)),a-=7;i<a;)e.d.push(+t.slice(i,i+=7));i=7-(t=t.slice(i)).length}else i-=a;for(;i--;)t+="0";if(e.d.push(+t),Vl&&(e.e>ac||e.e<-ac))throw Error(Ql+n)}else e.s=0,e.e=0,e.d=[0];return e}function round(e,t,n){var i,a,o,s,l,c,u,d,h=e.d;for(s=1,o=h[0];o>=10;o/=10)s++;if((i=t-s)<0)i+=7,a=t,u=h[d=0];else{if((d=Math.ceil((i+1)/7))>=(o=h.length))return e;for(u=o=h[d],s=1;o>=10;o/=10)s++;a=(i%=7)-7+s}if(void 0!==n&&(l=u/(o=tc(10,s-a-1))%10|0,c=t<0||void 0!==h[d+1]||u%o,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(i>0?a>0?u/tc(10,s-a):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(o=getBase10Exponent(e),h.length=1,t=t-o-1,h[0]=tc(10,(7-t%7)%7),e.e=ec(-t/7)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(0==i?(h.length=d,o=1,d--):(h.length=d+1,o=tc(10,7-i),h[d]=a>0?(u/tc(10,s-a)%tc(10,a)|0)*o:0),c)for(;;){if(0==d){(h[0]+=o)==nc&&(h[0]=1,++e.e);break}if(h[d]+=o,h[d]!=nc)break;h[d--]=0,o=1}for(i=h.length;0===h[--i];)h.pop();if(Vl&&(e.e>ac||e.e<-ac))throw Error(Ql+getBase10Exponent(e));return e}function subtract(e,t){var n,i,a,o,s,l,c,u,d,h,p=e.constructor,f=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Vl?round(t,f):t;if(c=e.d,h=t.d,i=t.e,u=e.e,c=c.slice(),s=u-i){for((d=s<0)?(n=c,s=-s,l=h.length):(n=h,i=u,l=c.length),s>(a=Math.max(Math.ceil(f/7),l)+2)&&(s=a,n.length=1),n.reverse(),a=s;a--;)n.push(0);n.reverse()}else{for((d=(a=c.length)<(l=h.length))&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}s=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>s;){if(c[--a]<h[a]){for(o=a;o&&0===c[--o];)c[o]=nc-1;--c[o],c[a]+=nc}c[a]-=h[a]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--i;return c[0]?(t.d=c,t.e=i,Vl?round(t,f):t):new p(0)}function toString(e,t,n){var i,a=getBase10Exponent(e),o=digitsToString(e.d),s=o.length;return t?(n&&(i=n-s)>0?o=o.charAt(0)+"."+o.slice(1)+getZeroString(i):s>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(a<0?"e":"e+")+a):a<0?(o="0."+getZeroString(-a-1)+o,n&&(i=n-s)>0&&(o+=getZeroString(i))):a>=s?(o+=getZeroString(a+1-s),n&&(i=n-a-1)>0&&(o=o+"."+getZeroString(i))):((i=a+1)<s&&(o=o.slice(0,i)+"."+o.slice(i)),n&&(i=n-s)>0&&(a+1===s&&(o+="."),o+=getZeroString(i))),e.s<0?"-"+o:o}function truncate(e,t){if(e.length>t)return e.length=t,!0}function config(e){if(!e||"object"!=typeof e)throw Error(Xl+"Object expected");var t,n,i,a=["precision",1,ql,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(i=e[n=a[t]])){if(!(ec(i)===i&&i>=a[t+1]&&i<=a[t+2]))throw Error(Jl+n+": "+i);this[n]=i}if(void 0!==(i=e[n="LN10"])){if(i!=Math.LN10)throw Error(Jl+n+": "+i);this[n]=new this(i)}return this}var lc=function clone(e){var t,n,i;function Decimal(e){var t=this;if(!(t instanceof Decimal))return new Decimal(e);if(t.constructor=Decimal,e instanceof Decimal)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(Jl+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):parseDecimal(t,e.toString())}if("string"!=typeof e)throw Error(Jl+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!rc.test(e))throw Error(Jl+e);parseDecimal(t,e)}if(Decimal.prototype=oc,Decimal.ROUND_UP=0,Decimal.ROUND_DOWN=1,Decimal.ROUND_CEIL=2,Decimal.ROUND_FLOOR=3,Decimal.ROUND_HALF_UP=4,Decimal.ROUND_HALF_DOWN=5,Decimal.ROUND_HALF_EVEN=6,Decimal.ROUND_HALF_CEIL=7,Decimal.ROUND_HALF_FLOOR=8,Decimal.clone=clone,Decimal.config=Decimal.set=config,void 0===e&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<i.length;)e.hasOwnProperty(n=i[t++])||(e[n]=this[n]);return Decimal.config(e),Decimal}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});Yl=new lc(1);const cc=lc;var identity=e=>e,uc={},isPlaceHolder=e=>e===uc,curry0=e=>function _curried(){return 0===arguments.length||1===arguments.length&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?_curried:e(...arguments)},curryN=(e,t)=>1===e?t:curry0((function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=i.filter((e=>e!==uc)).length;return o>=e?t(...i):curryN(e-o,curry0((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var o=i.map((e=>isPlaceHolder(e)?n.shift():e));return t(...o,...n)})))})),curry=e=>curryN(e.length,e),range=(e,t)=>{for(var n=[],i=e;i<t;++i)n[i-e]=i;return n},dc=curry(((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map((e=>t[e])).map(e))),reverse=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),memoize=e=>{var t=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t&&a.every(((e,n)=>{var i;return e===(null===(i=t)||void 0===i?void 0:i[n])}))?n:(t=a,n=e(...a))}};function getDigitCount(e){return 0===e?1:Math.floor(new cc(e).abs().log(10).toNumber())+1}function rangeStep(e,t,n){for(var i=new cc(e),a=0,o=[];i.lt(t)&&a<1e5;)o.push(i.toNumber()),i=i.add(n),a++;return o}curry(((e,t,n)=>{var i=+e;return i+n*(+t-i)})),curry(((e,t,n)=>{var i=t-+e;return(n-e)/(i=i||1/0)})),curry(((e,t,n)=>{var i=t-+e;return i=i||1/0,Math.max(0,Math.min(1,(n-e)/i))}));var getValidInterval=e=>{var[t,n]=e,[i,a]=[t,n];return t>n&&([i,a]=[n,t]),[i,a]},getFormatStep=(e,t,n)=>{if(e.lte(0))return new cc(0);var i=getDigitCount(e.toNumber()),a=new cc(10).pow(i),o=e.div(a),s=1!==i?.05:.1,l=new cc(Math.ceil(o.div(s).toNumber())).add(n).mul(s).mul(a);return new cc(t?l.toNumber():Math.ceil(l.toNumber()))},getTickOfSingleValue=(e,t,n)=>{var i=new cc(1),a=new cc(e);if(!a.isint()&&n){var o=Math.abs(e);o<1?(i=new cc(10).pow(getDigitCount(e)-1),a=new cc(Math.floor(a.div(i).toNumber())).mul(i)):o>1&&(a=new cc(Math.floor(e)))}else 0===e?a=new cc(Math.floor((t-1)/2)):n||(a=new cc(Math.floor(e)));var s=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return identity;var i=t.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(((e,t)=>t(e)),a(...arguments))}}(dc((e=>a.add(new cc(e-s).mul(i)).toNumber())),range)(0,t)},_calculateStep=function(e,t,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new cc(0),tickMin:new cc(0),tickMax:new cc(0)};var o,s=getFormatStep(new cc(t).sub(e).div(n-1),i,a);o=e<=0&&t>=0?new cc(0):(o=new cc(e).add(t).div(2)).sub(new cc(o).mod(s));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new cc(t).sub(o).div(s).toNumber()),u=l+c+1;return u>n?_calculateStep(e,t,n,i,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:s,tickMin:o.sub(new cc(l).mul(s)),tickMax:o.add(new cc(c).mul(s))})};var hc=memoize((function(e){var[t,n]=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(i,2),[s,l]=getValidInterval([t,n]);if(s===-1/0||l===1/0){var c=l===1/0?[s,...range(0,i-1).map((()=>1/0))]:[...range(0,i-1).map((()=>-1/0)),l];return t>n?reverse(c):c}if(s===l)return getTickOfSingleValue(s,i,a);var{step:u,tickMin:d,tickMax:h}=_calculateStep(s,l,o,a,0),p=rangeStep(d,h.add(new cc(.1).mul(u)),u);return t>n?reverse(p):p})),pc=memoize((function(e,t){var[n,i]=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[o,s]=getValidInterval([n,i]);if(o===-1/0||s===1/0)return[n,i];if(o===s)return[o];var l=Math.max(t,2),c=getFormatStep(new cc(s).sub(o).div(l-1),a,0),u=[...rangeStep(new cc(o),new cc(s),c),s];return!1===a&&(u=u.map((e=>Math.round(e)))),n>i?reverse(u):u})),selectRootMaxBarSize=e=>e.rootProps.maxBarSize,selectBarCategoryGap=e=>e.rootProps.barCategoryGap,selectStackOffsetType=e=>e.rootProps.stackOffset,selectChartName=e=>e.options.chartName,selectSyncId=e=>e.rootProps.syncId,selectSyncMethod=e=>e.rootProps.syncMethod,selectEventEmitter=e=>e.options.eventEmitter,fc={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},mc={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},combineAxisRangeWithReverse=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t},gc={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:fc.angleAxisId,includeHidden:!1,name:void 0,reversed:fc.reversed,scale:fc.scale,tick:fc.tick,tickCount:void 0,ticks:void 0,type:fc.type,unit:void 0},yc={allowDataOverflow:mc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mc.scale,tick:mc.tick,tickCount:mc.tickCount,ticks:void 0,type:mc.type,unit:void 0},xc={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:fc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fc.scale,tick:fc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},vc={allowDataOverflow:mc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mc.scale,tick:mc.tick,tickCount:mc.tickCount,ticks:void 0,type:"category",unit:void 0},selectAngleAxis=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?xc:gc,selectRadiusAxis=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?vc:yc,selectPolarOptions=e=>e.polarOptions,bc=Da([selectChartWidth,selectChartHeight,Ko],getMaxRadius),_c=Da([selectPolarOptions,bc],((e,t)=>{if(null!=e)return getPercentValue(e.innerRadius,t,0)})),jc=Da([selectPolarOptions,bc],((e,t)=>{if(null!=e)return getPercentValue(e.outerRadius,t,.8*t)})),wc=Da([selectPolarOptions],(e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]})),Sc=Da([selectAngleAxis,wc],combineAxisRangeWithReverse),Ac=Da([bc,_c,jc],((e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]})),Cc=Da([selectRadiusAxis,Ac],combineAxisRangeWithReverse),Oc=Da([selectChartLayout,selectPolarOptions,_c,jc,selectChartWidth,selectChartHeight],((e,t,n,i,a,o)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=i){var{cx:s,cy:l,startAngle:c,endAngle:u}=t;return{cx:getPercentValue(s,a,a/2),cy:getPercentValue(l,o,o/2),innerRadius:n,outerRadius:i,startAngle:c,endAngle:u,clockWise:!1}}})),pickAxisType=(e,t)=>t,pickAxisId=(e,t,n)=>n;function ownKeys$t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$t(Object(n),!0).forEach((function(t){_defineProperty$x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$x(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ec=[0,"auto"],kc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},selectXAxisSettings=(e,t)=>{var n=e.cartesianAxis.xAxis[t];return null==n?kc:n},Pc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Ec,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},selectYAxisSettings=(e,t)=>{var n=e.cartesianAxis.yAxis[t];return null==n?Pc:n},Tc={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},selectZAxisSettings=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?Tc:n},selectBaseAxis=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);case"zAxis":return selectZAxisSettings(e,n);case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectAxisSettings=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectHasBar=e=>e.graphicalItems.countOfBars>0;function itemAxisPredicate(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var selectUnfilteredCartesianItems=e=>e.graphicalItems.cartesianItems,Lc=Da([pickAxisType,pickAxisId],itemAxisPredicate),combineGraphicalItemsSettings=(e,t,n)=>e.filter(n).filter((e=>!0===(null==t?void 0:t.includeHidden)||!e.hide)),$c=Da([selectUnfilteredCartesianItems,selectBaseAxis,Lc],combineGraphicalItemsSettings),filterGraphicalNotStackedItems=e=>e.filter((e=>void 0===e.stackId)),Ic=Da([$c],filterGraphicalNotStackedItems),combineGraphicalItemsData=e=>e.map((e=>e.data)).filter(Boolean).flat(1),Mc=Da([$c],combineGraphicalItemsData),combineDisplayedData=(e,t)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:a}=t;return e.length>0?e:n.slice(i,a+1)},Rc=Da([Mc,selectChartDataWithIndexesIfNotInPanorama],combineDisplayedData),combineAppliedValues=(e,t,n)=>null!=(null==t?void 0:t.dataKey)?e.map((e=>({value:getValueByDataKey(e,t.dataKey)}))):n.length>0?n.map((e=>e.dataKey)).flatMap((t=>e.map((e=>({value:getValueByDataKey(e,t)}))))):e.map((e=>({value:e}))),Dc=Da([Rc,selectBaseAxis,$c],combineAppliedValues);function isErrorBarRelevantForAxisType(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function onlyAllowNumbers(e){return e.filter((e=>isNumOrStr(e)||e instanceof Date)).map(Number).filter((e=>!1===isNan(e)))}function getErrorDomainByDataKey(e,t,n){return!n||"number"!=typeof t||isNan(t)?[]:n.length?onlyAllowNumbers(n.flatMap((n=>{var i,a,o=getValueByDataKey(e,n.dataKey);if(Array.isArray(o)?[i,a]=o:i=a=o,isWellBehavedNumber(i)&&isWellBehavedNumber(a))return[t-i,t+a]}))):[]}var combineStackGroups=(e,t,n)=>{var i=t.reduce(((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e)),{});return Object.fromEntries(Object.entries(i).map((t=>{var[i,a]=t,o=a.map((e=>e.dataKey));return[i,{stackedData:getStackedData(e,o,n),graphicalItems:a}]})))},Nc=Da([Rc,$c,selectStackOffsetType],combineStackGroups),combineDomainOfStackGroups=(e,t,n)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if("zAxis"!==n){var o=getDomainOfStackGroups(e,i,a);if(null==o||0!==o[0]||0!==o[1])return o}},zc=Da([Nc,selectChartDataWithIndexes,pickAxisType],combineDomainOfStackGroups),combineAppliedNumericalValuesIncludingErrorValues=(e,t,n,i)=>n.length>0?e.flatMap((e=>n.flatMap((n=>{var a,o,s=null===(a=n.errorBars)||void 0===a?void 0:a.filter((e=>isErrorBarRelevantForAxisType(i,e))),l=getValueByDataKey(e,null!==(o=t.dataKey)&&void 0!==o?o:n.dataKey);return{value:l,errorDomain:getErrorDomainByDataKey(e,l,s)}})))).filter(Boolean):null!=(null==t?void 0:t.dataKey)?e.map((e=>({value:getValueByDataKey(e,t.dataKey),errorDomain:[]}))):e.map((e=>({value:e,errorDomain:[]}))),Bc=Da(Rc,selectBaseAxis,Ic,pickAxisType,combineAppliedNumericalValuesIncludingErrorValues);function onlyAllowNumbersAndStringsAndDates(e){var{value:t}=e;if(isNumOrStr(t)||t instanceof Date)return t}var getDomainDefinition=e=>{var t;if(null==e||!("domain"in e))return Ec;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var n=onlyAllowNumbers(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:Ec},mergeDomains=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);if(0!==i.length){var a=i.flat();return[Math.min(...a),Math.max(...a)]}},selectReferenceDots=e=>e.referenceElements.dots,filterReferenceElements=(e,t,n)=>e.filter((e=>"extendDomain"===e.ifOverflow)).filter((e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n)),Fc=Da([selectReferenceDots,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceAreas=e=>e.referenceElements.areas,Zc=Da([selectReferenceAreas,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceLines=e=>e.referenceElements.lines,Uc=Da([selectReferenceLines,pickAxisType,pickAxisId],filterReferenceElements),combineDotsDomain=(e,t)=>{var n=onlyAllowNumbers(e.map((e=>"xAxis"===t?e.x:e.y)));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},Kc=Da(Fc,pickAxisType,combineDotsDomain),combineAreasDomain=(e,t)=>{var n=onlyAllowNumbers(e.flatMap((e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2])));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},Wc=Da([Zc,pickAxisType],combineAreasDomain),combineLinesDomain=(e,t)=>{var n=onlyAllowNumbers(e.map((e=>"xAxis"===t?e.x:e.y)));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},Hc=Da(Uc,pickAxisType,combineLinesDomain),Gc=Da(Kc,Hc,Wc,((e,t,n)=>mergeDomains(e,n,t))),Yc=Da([selectBaseAxis],getDomainDefinition),combineNumericalDomain=(e,t,n,i,a)=>{var o=function(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var n,i,[a,o]=e;if(isWellBehavedNumber(a))n=a;else if("function"==typeof a)return;if(isWellBehavedNumber(o))i=o;else if("function"==typeof o)return;var s=[n,i];if(isWellFormedNumberDomain(s))return s}}(t,e.allowDataOverflow);return null!=o?o:function(e,t,n){if(n||null!=t){if("function"==typeof e&&null!=t)try{var i=e(t,n);if(isWellFormedNumberDomain(i))return extendDomain(i,t,n)}catch(f){}if(Array.isArray(e)&&2===e.length){var a,o,[s,l]=e;if("auto"===s)null!=t&&(a=Math.min(...t));else if(isNumber(s))a=s;else if("function"==typeof s)try{null!=t&&(a=s(null==t?void 0:t[0]))}catch(m){}else if("string"==typeof s&&No.test(s)){var c=No.exec(s);if(null==c||null==t)a=void 0;else{var u=+c[1];a=t[0]-u}}else a=null==t?void 0:t[0];if("auto"===l)null!=t&&(o=Math.max(...t));else if(isNumber(l))o=l;else if("function"==typeof l)try{null!=t&&(o=l(null==t?void 0:t[1]))}catch(g){}else if("string"==typeof l&&zo.test(l)){var d=zo.exec(l);if(null==d||null==t)o=void 0;else{var h=+d[1];o=t[1]+h}}else o=null==t?void 0:t[1];var p=[a,o];if(isWellFormedNumberDomain(p))return null==t?p:extendDomain(p,t,n)}}}(t,mergeDomains(n,a,(e=>{var t=onlyAllowNumbers(e.flatMap((e=>[e.value,e.errorDomain])).flat(1));if(0!==t.length)return[Math.min(...t),Math.max(...t)]})(i)),e.allowDataOverflow)},qc=Da([selectBaseAxis,Yc,zc,Bc,Gc],combineNumericalDomain),Vc=[0,1],combineAxisDomain=(e,t,n,i,a,o,s)=>{if(null!=e&&null!=n&&0!==n.length){var{dataKey:l,type:c}=e,u=isCategoricalAxis(t,o);return u&&null==l?js(0,n.length):"category"===c?((e,t,n)=>{var i=e.map(onlyAllowNumbersAndStringsAndDates).filter((e=>null!=e));return n&&(null==t.dataKey||t.allowDuplicatedCategory&&hasDuplicate(i))?js(0,e.length):t.allowDuplicatedCategory?i:Array.from(new Set(i))})(i,e,u):"expand"===a?Vc:s}},Xc=Da([selectBaseAxis,selectChartLayout,Rc,Dc,selectStackOffsetType,pickAxisType,qc],combineAxisDomain),combineRealScaleType=(e,t,n,i,a)=>{if(null!=e){var{scale:o,type:s}=e;if("auto"===o)return"radial"===t&&"radiusAxis"===a?"band":"radial"===t&&"angleAxis"===a?"linear":"category"===s&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":"category"===s?"band":"linear";if("string"==typeof o){var l="scale".concat(upperFirst(o));return l in Hl?l:"point"}}},Jc=Da([selectBaseAxis,selectChartLayout,selectHasBar,selectChartName,pickAxisType],combineRealScaleType);function combineScaleFunction(e,t,n,i){if(null!=n&&null!=i){if("function"==typeof e.scale)return e.scale.copy().domain(n).range(i);var a=function(e){if(null!=e){if(e in Hl)return Hl[e]();var t="scale".concat(upperFirst(e));return t in Hl?Hl[t]():void 0}}(t);if(null!=a){var o=a.domain(n).range(i);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,i=e.range(),a=Math.min(i[0],i[1])-Ro,o=Math.max(i[0],i[1])+Ro,s=e(t[0]),l=e(t[n-1]);(s<a||s>o||l<a||l>o)&&e.domain([t[0],t[n-1]])}})(o),o}}}var combineNiceTicks=(e,t,n)=>{var i=getDomainDefinition(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(i)&&("auto"===i[0]||"auto"===i[1])&&isWellFormedNumberDomain(e)?hc(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&isWellFormedNumberDomain(e)?pc(e,t.tickCount,t.allowDecimals):void 0},Qc=Da([Xc,selectAxisSettings,Jc],combineNiceTicks),combineAxisDomainWithNiceTicks=(e,t,n,i)=>{if("angleAxis"!==i&&"number"===(null==e?void 0:e.type)&&isWellFormedNumberDomain(t)&&Array.isArray(n)&&n.length>0){var a=t[0],o=n[0],s=t[1],l=n[n.length-1];return[Math.min(a,o),Math.max(s,l)]}return t},eu=Da([selectBaseAxis,Xc,Qc,pickAxisType],combineAxisDomainWithNiceTicks),tu=Da(Dc,selectBaseAxis,((e,t)=>{if(t&&"number"===t.type){var n=1/0,i=Array.from(onlyAllowNumbers(e.map((e=>e.value)))).sort(((e,t)=>e-t));if(i.length<2)return 1/0;var a=i[i.length-1]-i[0];if(0===a)return 1/0;for(var o=0;o<i.length-1;o++){var s=i[o+1]-i[o];n=Math.min(n,s)}return n/a}})),ru=Da(tu,selectChartLayout,selectBarCategoryGap,Ko,((e,t,n,i)=>i),((e,t,n,i,a)=>{if(!isWellBehavedNumber(e))return 0;var o="vertical"===t?i.height:i.width;if("gap"===a)return e*o/2;if("no-gap"===a){var s=getPercentValue(n,e*o),l=e*o/2;return l-s-(l-s)/o*s}return 0})),nu=Da(selectXAxisSettings,((e,t)=>{var n=selectXAxisSettings(e,t);return null==n||"string"!=typeof n.padding?0:ru(e,"xAxis",t,n.padding)}),((e,t)=>{var n,i;if(null==e)return{left:0,right:0};var{padding:a}=e;return"string"==typeof a?{left:t,right:t}:{left:(null!==(n=a.left)&&void 0!==n?n:0)+t,right:(null!==(i=a.right)&&void 0!==i?i:0)+t}})),iu=Da(selectYAxisSettings,((e,t)=>{var n=selectYAxisSettings(e,t);return null==n||"string"!=typeof n.padding?0:ru(e,"yAxis",t,n.padding)}),((e,t)=>{var n,i;if(null==e)return{top:0,bottom:0};var{padding:a}=e;return"string"==typeof a?{top:t,bottom:t}:{top:(null!==(n=a.top)&&void 0!==n?n:0)+t,bottom:(null!==(i=a.bottom)&&void 0!==i?i:0)+t}})),au=Da([Ko,nu,Yo,selectBrushSettings,(e,t,n)=>n],((e,t,n,i,a)=>{var{padding:o}=i;return a?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]})),ou=Da([Ko,selectChartLayout,iu,Yo,selectBrushSettings,(e,t,n)=>n],((e,t,n,i,a,o)=>{var{padding:s}=a;return o?[i.height-s.bottom,s.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]})),selectAxisRange=(e,t,n,i)=>{var a;switch(t){case"xAxis":return au(e,n,i);case"yAxis":return ou(e,n,i);case"zAxis":return null===(a=selectZAxisSettings(e,n))||void 0===a?void 0:a.range;case"angleAxis":return wc(e);case"radiusAxis":return Ac(e,n);default:return}},su=Da([selectBaseAxis,selectAxisRange],combineAxisRangeWithReverse),lu=Da([selectBaseAxis,Jc,eu,su],combineScaleFunction);function compareIds(e,t){return e.id<t.id?-1:e.id>t.id?1:0}Da($c,pickAxisType,((e,t)=>e.flatMap((e=>{var t;return null!==(t=e.errorBars)&&void 0!==t?t:[]})).filter((e=>isErrorBarRelevantForAxisType(t,e)))));var pickAxisOrientation=(e,t)=>t,pickMirror=(e,t,n)=>n,cu=Da(Bo,pickAxisOrientation,pickMirror,((e,t,n)=>e.filter((e=>e.orientation===t)).filter((e=>e.mirror===n)).sort(compareIds))),uu=Da(Fo,pickAxisOrientation,pickMirror,((e,t,n)=>e.filter((e=>e.orientation===t)).filter((e=>e.mirror===n)).sort(compareIds))),getXAxisSize=(e,t)=>({width:e.width,height:t.height}),du=Da(Ko,selectXAxisSettings,getXAxisSize),hu=Da(selectChartHeight,Ko,cu,pickAxisOrientation,pickMirror,((e,t,n,i,a)=>{var o,s={};return n.forEach((n=>{var l=getXAxisSize(t,n);null==o&&(o=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,i,e));var c="top"===i&&!a||"bottom"===i&&a;s[n.id]=o-Number(c)*l.height,o+=(c?-1:1)*l.height})),s})),pu=Da(selectChartWidth,Ko,uu,pickAxisOrientation,pickMirror,((e,t,n,i,a)=>{var o,s={};return n.forEach((n=>{var l=((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))(t,n);null==o&&(o=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,i,e));var c="left"===i&&!a||"right"===i&&a;s[n.id]=o-Number(c)*l.width,o+=(c?-1:1)*l.width})),s})),fu=Da(Ko,selectYAxisSettings,((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))),selectCartesianAxisSize=(e,t,n)=>{switch(t){case"xAxis":return du(e,n).width;case"yAxis":return fu(e,n).height;default:return}},combineDuplicateDomain=(e,t,n,i)=>{if(null!=n){var{allowDuplicatedCategory:a,type:o,dataKey:s}=n,l=isCategoricalAxis(e,i),c=t.map((e=>e.value));return s&&l&&"category"===o&&a&&hasDuplicate(c)?c:void 0}},mu=Da([selectChartLayout,Dc,selectBaseAxis,pickAxisType],combineDuplicateDomain),combineCategoricalDomain=(e,t,n,i)=>{if(null!=n&&null!=n.dataKey){var{type:a,scale:o}=n;return!isCategoricalAxis(e,i)||"number"!==a&&"auto"===o?void 0:t.map((e=>e.value))}},gu=Da([selectChartLayout,Dc,selectAxisSettings,pickAxisType],combineCategoricalDomain),yu=Da([selectChartLayout,(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Jc,lu,mu,gu,selectAxisRange,Qc,pickAxisType],((e,t,n,i,a,o,s,l,c)=>{if(null==t)return null;var u=isCategoricalAxis(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:o,duplicateDomain:a,isCategorical:u,niceTicks:l,range:s,realScaleType:n,scale:i}})),combineAxisTicks=(e,t,n,i,a,o,s,l,c)=>{if(null!=t&&null!=i){var u=isCategoricalAxis(e,c),{type:d,ticks:h,tickCount:p}=t,f="scaleBand"===n&&"function"==typeof i.bandwidth?i.bandwidth()/2:2,m="category"===d&&i.bandwidth?i.bandwidth()/f:0;m="angleAxis"===c&&null!=o&&o.length>=2?2*mathSign(o[0]-o[1])*m:m;var g=h||a;return g?g.map(((e,t)=>{var n=s?s.indexOf(e):e;return{index:t,coordinate:i(n)+m,value:e,offset:m}})).filter((e=>!isNan(e.coordinate))):u&&l?l.map(((e,t)=>({coordinate:i(e)+m,value:e,index:t,offset:m}))):i.ticks?i.ticks(p).map((e=>({coordinate:i(e)+m,value:e,offset:m}))):i.domain().map(((e,t)=>({coordinate:i(e)+m,value:s?s[e]:e,index:t,offset:m})))}},xu=Da([selectChartLayout,selectAxisSettings,Jc,lu,Qc,selectAxisRange,mu,gu,pickAxisType],combineAxisTicks),combineGraphicalItemTicks=(e,t,n,i,a,o,s)=>{if(null!=t&&null!=n&&null!=i&&i[0]!==i[1]){var l=isCategoricalAxis(e,s),{tickCount:c}=t,u=0;return u="angleAxis"===s&&(null==i?void 0:i.length)>=2?2*mathSign(i[0]-i[1])*u:u,l&&o?o.map(((e,t)=>({coordinate:n(e)+u,value:e,index:t,offset:u}))):n.ticks?n.ticks(c).map((e=>({coordinate:n(e)+u,value:e,offset:u}))):n.domain().map(((e,t)=>({coordinate:n(e)+u,value:a?a[e]:e,index:t,offset:u})))}},vu=Da([selectChartLayout,selectAxisSettings,lu,selectAxisRange,mu,gu,pickAxisType],combineGraphicalItemTicks),bu=Da(selectBaseAxis,lu,((e,t)=>{if(null!=e&&null!=t)return _objectSpread$t(_objectSpread$t({},e),{},{scale:t})})),_u=Da([selectBaseAxis,Jc,Xc,su],combineScaleFunction);Da(((e,t,n)=>selectZAxisSettings(e,n)),_u,((e,t)=>{if(null!=e&&null!=t)return _objectSpread$t(_objectSpread$t({},e),{},{scale:t})}));var ju=Da([selectChartLayout,Bo,Fo],((e,t,n)=>{switch(e){case"horizontal":return t.some((e=>e.reversed))?"right-to-left":"left-to-right";case"vertical":return n.some((e=>e.reversed))?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),selectDefaultTooltipEventType=e=>e.options.defaultTooltipEventType,selectValidateTooltipEventTypes=e=>e.options.validateTooltipEventTypes;function combineTooltipEventType(e,t,n){if(null==e)return t;var i=e?"axis":"item";return null==n?t:n.includes(i)?i:t}function selectTooltipEventType$1(e,t){return combineTooltipEventType(t,selectDefaultTooltipEventType(e),selectValidateTooltipEventTypes(e))}var combineActiveLabel=(e,t)=>{var n,i=Number(t);if(!isNan(i)&&null!=t)return i>=0?null==e||null===(n=e[i])||void 0===n?void 0:n.value:void 0},wu={active:!1,index:null,dataKey:void 0,coordinate:void 0},Su=po({name:"tooltip",initialState:{itemInteraction:{click:wu,hover:wu},axisInteraction:{click:wu,hover:wu},keyboardInteraction:wu,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=current(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Au,removeTooltipEntrySettings:Cu,setTooltipSettingsState:Ou,setActiveMouseOverItemIndex:Eu,mouseLeaveItem:ku,mouseLeaveChart:Pu,setActiveClickItemIndex:Tu,setMouseOverAxisIndex:Lu,setMouseClickAxisIndex:$u,setSyncInteraction:Iu,setKeyboardInteraction:Mu}=Su.actions,Ru=Su.reducer;function ownKeys$s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$s(Object(n),!0).forEach((function(t){_defineProperty$w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var combineTooltipInteractionState=(e,t,n,i)=>{if(null==t)return wu;var a=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==a)return wu;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var o=!0===e.settings.active;if(null!=a.index){if(o)return _objectSpread$s(_objectSpread$s({},a),{},{active:!0})}else if(null!=i)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return _objectSpread$s(_objectSpread$s({},wu),{},{coordinate:a.coordinate})},combineActiveTooltipIndex=(e,t)=>{var n=null==e?void 0:e.index;if(null==n)return null;var i=Number(n);if(!isWellBehavedNumber(i))return n;var a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(0,Math.min(i,a)))},combineCoordinateForDefaultIndex=(e,t,n,i,a,o,s,l)=>{if(null!=o&&null!=l){var c=s[0],u=null==c?void 0:l(c.positions,o);if(null!=u)return u;var d=null==a?void 0:a[Number(o)];if(d)return"horizontal"===n?{x:d.coordinate,y:(i.top+t)/2}:{x:(i.left+e)/2,y:d.coordinate}}},combineTooltipPayloadConfigurations=(e,t,n,i)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(a="hover"===n?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=i?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter((e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===a}));var a},selectTooltipPayloadSearcher=e=>e.options.tooltipPayloadSearcher,selectTooltipState=e=>e.tooltip;function ownKeys$r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$r(Object(n),!0).forEach((function(t){_defineProperty$v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var combineTooltipPayload=(e,t,n,i,a,o,s)=>{if(null!=t&&null!=o){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=n;return e.reduce(((e,n)=>{var h,p,f,m,g,v,{dataDefinedOnItem:b,settings:_}=n,j=function(e,t){return null!=e?e:t}(b,l),w=(p=j,f=u,m=d,Array.isArray(p)&&p&&f+m!==0?p.slice(f,m+1):p),S=null!==(h=null==_?void 0:_.dataKey)&&void 0!==h?h:null==i?void 0:i.dataKey,A=null==_?void 0:_.nameKey;(g=null!=i&&i.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&"axis"===s?findEntryInArray(w,i.dataKey,a):o(w,t,c,A),Array.isArray(g))?g.forEach((t=>{var n=_objectSpread$r(_objectSpread$r({},_),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(getTooltipEntry({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:getValueByDataKey(t.payload,t.dataKey),name:t.name}))})):e.push(getTooltipEntry({tooltipEntrySettings:_,dataKey:S,payload:g,value:getValueByDataKey(g,S),name:null!==(v=getValueByDataKey(g,A))&&void 0!==v?v:null==_?void 0:_.name}));return e}),[])}},selectTooltipAxisType=e=>{var t=selectChartLayout(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},selectTooltipAxisId=e=>e.tooltip.settings.axisId,selectTooltipAxis=e=>{var t=selectTooltipAxisType(e),n=selectTooltipAxisId(e);return selectAxisSettings(e,t,n)},Du=Da([selectTooltipAxis,selectChartLayout,selectHasBar,selectChartName,selectTooltipAxisType],combineRealScaleType),Nu=Da([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],((e,t)=>[...e,...t])),zu=Da([selectTooltipAxisType,selectTooltipAxisId],itemAxisPredicate),Bu=Da([Nu,selectTooltipAxis,zu],combineGraphicalItemsSettings),Fu=Da([Bu],combineGraphicalItemsData),Zu=Da([Fu,selectChartDataWithIndexes],combineDisplayedData),Uu=Da([Zu,selectTooltipAxis,Bu],combineAppliedValues),Ku=Da([selectTooltipAxis],getDomainDefinition),Wu=Da([Zu,Bu,selectStackOffsetType],combineStackGroups),Hu=Da([Wu,selectChartDataWithIndexes,selectTooltipAxisType],combineDomainOfStackGroups),Gu=Da([Bu],filterGraphicalNotStackedItems),Yu=Da([Zu,selectTooltipAxis,Gu,selectTooltipAxisType],combineAppliedNumericalValuesIncludingErrorValues),qu=Da([selectReferenceDots,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),Vu=Da([qu,selectTooltipAxisType],combineDotsDomain),Xu=Da([selectReferenceAreas,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),Ju=Da([Xu,selectTooltipAxisType],combineAreasDomain),Qu=Da([selectReferenceLines,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),ed=Da([Qu,selectTooltipAxisType],combineLinesDomain),td=Da([Vu,ed,Ju],mergeDomains),rd=Da([selectTooltipAxis,Ku,Hu,Yu,td],combineNumericalDomain),nd=Da([selectTooltipAxis,selectChartLayout,Zu,Uu,selectStackOffsetType,selectTooltipAxisType,rd],combineAxisDomain),id=Da([nd,selectTooltipAxis,Du],combineNiceTicks),ad=Da([selectTooltipAxis,nd,id,selectTooltipAxisType],combineAxisDomainWithNiceTicks),selectTooltipAxisRange=e=>{var t=selectTooltipAxisType(e),n=selectTooltipAxisId(e);return selectAxisRange(e,t,n,!1)},od=Da([selectTooltipAxis,selectTooltipAxisRange],combineAxisRangeWithReverse),sd=Da([selectTooltipAxis,Du,ad,od],combineScaleFunction),ld=Da([selectChartLayout,Uu,selectTooltipAxis,selectTooltipAxisType],combineDuplicateDomain),cd=Da([selectChartLayout,Uu,selectTooltipAxis,selectTooltipAxisType],combineCategoricalDomain),ud=Da([selectChartLayout,selectTooltipAxis,Du,sd,selectTooltipAxisRange,ld,cd,selectTooltipAxisType],((e,t,n,i,a,o,s,l)=>{if(t){var{type:c}=t,u=isCategoricalAxis(e,l);if(i){var d="scaleBand"===n&&i.bandwidth?i.bandwidth()/2:2,h="category"===c&&i.bandwidth?i.bandwidth()/d:0;return h="angleAxis"===l&&null!=a&&(null==a?void 0:a.length)>=2?2*mathSign(a[0]-a[1])*h:h,u&&s?s.map(((e,t)=>({coordinate:i(e)+h,value:e,index:t,offset:h}))):i.domain().map(((e,t)=>({coordinate:i(e)+h,value:o?o[e]:e,index:t,offset:h})))}}})),dd=Da([selectDefaultTooltipEventType,selectValidateTooltipEventTypes,e=>e.tooltip.settings],((e,t,n)=>combineTooltipEventType(n.shared,e,t))),selectTooltipTrigger=e=>e.tooltip.settings.trigger,selectDefaultIndex=e=>e.tooltip.settings.defaultIndex,hd=Da([selectTooltipState,dd,selectTooltipTrigger,selectDefaultIndex],combineTooltipInteractionState),pd=Da([hd,Zu],combineActiveTooltipIndex),fd=Da([ud,pd],combineActiveLabel),md=Da([hd],(e=>{if(e)return e.dataKey})),gd=Da([selectTooltipState,dd,selectTooltipTrigger,selectDefaultIndex],combineTooltipPayloadConfigurations),yd=Da([selectChartWidth,selectChartHeight,selectChartLayout,Ko,ud,selectDefaultIndex,gd,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),xd=Da([hd,yd],((e,t)=>null!=e&&e.coordinate?e.coordinate:t)),vd=Da([hd],(e=>e.active)),bd=Da([gd,pd,selectChartDataWithIndexes,selectTooltipAxis,fd,selectTooltipPayloadSearcher,dd],combineTooltipPayload),_d=Da([bd],(e=>{if(null!=e){var t=e.map((e=>e.payload)).filter((e=>null!=e));return Array.from(new Set(t))}}));function ownKeys$q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$q(Object(n),!0).forEach((function(t){_defineProperty$u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var useTooltipAxisBandSize=()=>{var e=useAppSelector(selectTooltipAxis),t=useAppSelector(ud),n=useAppSelector(sd);return getBandSizeOfAxis(_objectSpread$q(_objectSpread$q({},e),{},{scale:n}),t)},useChartName=()=>useAppSelector(selectChartName),pickTooltipEventType=(e,t)=>t,pickTrigger=(e,t,n)=>n,pickDefaultIndex=(e,t,n,i)=>i,jd=Da(ud,(e=>Ha(e,(e=>e.coordinate)))),wd=Da([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipInteractionState),Sd=Da([wd,Zu],combineActiveTooltipIndex),Ad=Da([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipPayloadConfigurations),Cd=Da([selectChartWidth,selectChartHeight,selectChartLayout,Ko,ud,pickDefaultIndex,Ad,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),Od=Da([wd,Cd],((e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t})),Ed=Da(ud,Sd,combineActiveLabel),kd=Da([Ad,Sd,selectChartDataWithIndexes,selectTooltipAxis,Ed,selectTooltipPayloadSearcher,pickTooltipEventType],combineTooltipPayload),Pd=Da([wd],(e=>({isActive:e.active,activeIndex:e.index})));function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$n.apply(null,arguments)}function ownKeys$p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$p(Object(n),!0).forEach((function(t){_defineProperty$t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$t(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CursorInternal(e){var t,n,{coordinate:i,payload:a,index:o,offset:s,tooltipAxisBandSize:l,layout:c,cursor:u,tooltipEventType:d,chartName:h}=e,p=i,f=a,m=o;if(!u||!p||"ScatterChart"!==h&&"axis"!==d)return null;if("ScatterChart"===h)t=p,n=Cross;else if("BarChart"===h)t=function(e,t,n,i){var a=i/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-a:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-a,width:"horizontal"===e?i:n.width-1,height:"horizontal"===e?n.height-1:i}}(c,p,s,l),n=Rectangle;else if("radial"===c){var{cx:g,cy:v,radius:b,startAngle:_,endAngle:j}=getRadialCursorPoints(p);t={cx:g,cy:v,startAngle:_,endAngle:j,innerRadius:b,outerRadius:b},n=Sector}else t={points:getCursorPoints(c,p,s)},n=Curve;var w="object"==typeof u&&"className"in u?u.className:void 0,S=_objectSpread$p(_objectSpread$p(_objectSpread$p(_objectSpread$p({stroke:"#ccc",pointerEvents:"none"},s),t),filterProps(u,!1)),{},{payload:f,payloadIndex:m,className:We("recharts-tooltip-cursor",w)});return Ut.isValidElement(u)?Ut.cloneElement(u,S):Ut.createElement(n,S)}function Cursor(e){var t=useTooltipAxisBandSize(),n=useOffsetInternal(),i=useChartLayout(),a=useChartName();return Ut.createElement(CursorInternal,_extends$n({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:i,tooltipAxisBandSize:t,chartName:a}))}var Td=Ut.createContext(null),Ld={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function Events(){}function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function addListener(e,t,i,a,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new EE(i,a||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function clearEvent(e,t){0==--e._eventsCount?e._events=new Events:delete e._events[t]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(n=!1)),EventEmitter.prototype.eventNames=function(){var e,i,a=[];if(0===this._eventsCount)return a;for(i in e=this._events)t.call(e,i)&&a.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},EventEmitter.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,o=i.length,s=new Array(o);a<o;a++)s[a]=i[a].fn;return s},EventEmitter.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},EventEmitter.prototype.emit=function(e,t,i,a,o,s){var l=n?n+e:e;if(!this._events[l])return!1;var c,u,d=this._events[l],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,a),!0;case 5:return d.fn.call(d.context,t,i,a,o),!0;case 6:return d.fn.call(d.context,t,i,a,o,s),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];d.fn.apply(d.context,c)}else{var p,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),h){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,i);break;case 4:d[u].fn.call(d[u].context,t,i,a);break;default:if(!c)for(p=1,c=new Array(h-1);p<h;p++)c[p-1]=arguments[p];d[u].fn.apply(d[u].context,c)}}return!0},EventEmitter.prototype.on=function(e,t,n){return addListener(this,e,t,n,!1)},EventEmitter.prototype.once=function(e,t,n){return addListener(this,e,t,n,!0)},EventEmitter.prototype.removeListener=function(e,t,i,a){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return clearEvent(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||a&&!s.once||i&&s.context!==i||clearEvent(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||a&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:clearEvent(this,o)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&clearEvent(this,t)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=n,EventEmitter.EventEmitter=EventEmitter,e.exports=EventEmitter}(Ld);var $d=new(Zt(Ld.exports)),Id="recharts.syncEvent.tooltip",Md="recharts.syncEvent.brush";function arrayTooltipSearcher(e,t){if(t){var n=Number.parseInt(t,10);if(!isNan(n))return null==e?void 0:e[n]}}var Rd=po({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Dd=Rd.reducer,{createEventEmitter:Nd}=Rd.actions;function selectSynchronisedTooltipState(e){return e.tooltip.syncInteraction}var zd=po({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:i}=t.payload;null!=n&&(e.dataStartIndex=n),null!=i&&(e.dataEndIndex=i)}}}),{setChartData:Bd,setDataStartEndIndexes:Fd,setComputedData:Zd}=zd.actions,Ud=zd.reducer,noop$2=()=>{};function useSynchronisedEventsFromOtherCharts(){var e=useAppDispatch();Ut.useEffect((()=>{e(Nd())}),[e]),function(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),n=useAppDispatch(),i=useAppSelector(selectSyncMethod),a=useAppSelector(ud),o=useChartLayout(),s=useViewBox(),l=useAppSelector((e=>e.rootProps.className));Ut.useEffect((()=>{if(null==e)return noop$2;var listener=(l,c,u)=>{if(t!==u&&e===l)if("index"!==i){if(null!=a){var d;if("function"==typeof i){var h={activeTooltipIndex:null==c.payload.index?void 0:Number(c.payload.index),isTooltipActive:c.payload.active,activeIndex:null==c.payload.index?void 0:Number(c.payload.index),activeLabel:c.payload.label,activeDataKey:c.payload.dataKey,activeCoordinate:c.payload.coordinate},p=i(a,h);d=a[p]}else"value"===i&&(d=a.find((e=>String(e.value)===c.payload.label)));var{coordinate:f}=c.payload;if(null!=d&&!1!==c.payload.active&&null!=f&&null!=s){var{x:m,y:g}=f,v=Math.min(m,s.x+s.width),b=Math.min(g,s.y+s.height),_={x:"horizontal"===o?d.coordinate:v,y:"horizontal"===o?b:d.coordinate},j=Iu({active:c.payload.active,coordinate:_,dataKey:c.payload.dataKey,index:String(d.index),label:c.payload.label});n(j)}else n(Iu({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}))}}else n(c)};return $d.on(Id,listener),()=>{$d.off(Id,listener)}}),[l,n,t,e,i,a,o,s])}(),function(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),n=useAppDispatch();Ut.useEffect((()=>{if(null==e)return noop$2;var listener=(i,a,o)=>{t!==o&&e===i&&n(Fd(a))};return $d.on(Md,listener),()=>{$d.off(Md,listener)}}),[n,t,e])}()}function useTooltipChartSynchronisation(e,t,n,i,a,o){var s=useAppSelector((n=>((e,t,n)=>{if(null!=t){var i=selectTooltipState(e);return"axis"===t?"hover"===n?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:"hover"===n?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}})(n,e,t))),l=useAppSelector(selectEventEmitter),c=useAppSelector(selectSyncId),u=useAppSelector(selectSyncMethod),d=useAppSelector(selectSynchronisedTooltipState),h=null==d?void 0:d.active;Ut.useEffect((()=>{if(!h&&null!=c&&null!=l){var e=Iu({active:o,coordinate:n,dataKey:s,index:a,label:"number"==typeof i?String(i):i});$d.emit(Id,c,e,l)}}),[h,n,s,a,i,l,c,u,o])}function ownKeys$o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$o(Object(n),!0).forEach((function(t){_defineProperty$s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function defaultUniqBy(e){return e.dataKey}var Kd=[],Wd={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!os,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tooltip(e){var t=resolveDefaultProps(e,Wd),{active:n,allowEscapeViewBox:i,animationDuration:a,animationEasing:o,content:s,filterNull:l,isAnimationActive:c,offset:u,payloadUniqBy:d,position:h,reverseDirection:p,useTranslate3d:f,wrapperStyle:m,cursor:g,shared:v,trigger:b,defaultIndex:_,portal:j,axisId:w}=t,S=useAppDispatch(),A="number"==typeof _?String(_):_;Ut.useEffect((()=>{S(Ou({shared:v,trigger:b,axisId:w,active:n,defaultIndex:A}))}),[S,v,b,w,n,A]);var C=useViewBox(),O=useAccessibilityLayer(),E=function(e){return useAppSelector((t=>selectTooltipEventType$1(t,e)))}(v),{activeIndex:k,isActive:P}=useAppSelector((e=>Pd(e,E,b,A))),T=useAppSelector((e=>kd(e,E,b,A))),L=useAppSelector((e=>Ed(e,E,b,A))),$=useAppSelector((e=>Od(e,E,b,A))),I=T,M=Ut.useContext(Td),R=null!=n?n:P,[D,N]=useElementOffset([I,R]),z="axis"===E?L:void 0;useTooltipChartSynchronisation(E,b,$,z,k,R);var B=null!=j?j:M;if(null==B)return null;var F=null!=I?I:Kd;R||(F=Kd),l&&F.length&&(F=getUniqPayload(I.filter((e=>null!=e.value&&(!0!==e.hide||t.includeHidden))),d,defaultUniqBy));var Z=F.length>0,U=Ut.createElement(TooltipBoundingBox,{allowEscapeViewBox:i,animationDuration:a,animationEasing:o,isAnimationActive:c,active:R,coordinate:$,hasPayload:Z,offset:u,position:h,reverseDirection:p,useTranslate3d:f,viewBox:C,wrapperStyle:m,lastBoundingBox:D,innerRef:N,hasPortalFromProps:Boolean(j)},function(e,t){return Ut.isValidElement(e)?Ut.cloneElement(e,t):"function"==typeof e?Ut.createElement(e,t):Ut.createElement(DefaultTooltipContent,t)}(s,_objectSpread$o(_objectSpread$o({},t),{},{payload:F,label:z,active:R,coordinate:$,accessibilityLayer:O})));return Ut.createElement(Ut.Fragment,null,Ft.createPortal(U,B),R&&Ut.createElement(Cursor,{cursor:g,tooltipEventType:E,coordinate:$,payload:I,index:k}))}var Hd={},Gd={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.debounce=function(e,t=0,n={}){"object"!=typeof n&&(n={});let i,a=null,o=null,s=null,l=0,c=null;const{leading:u=!1,trailing:d=!0,maxWait:h}=n,p="maxWait"in n,f=p?Math.max(Number(h)||0,t):0,invoke=t=>(null!==a&&(i=e.apply(o,a)),a=o=null,l=t,i),handleTrailing=e=>(c=null,d&&null!==a?invoke(e):i),checkCanInvoke=e=>{if(null===s)return!0;const n=e-s;return n>=t||n<0||p&&e-l>=f},handleTimeout=()=>{const e=Date.now();if(checkCanInvoke(e))return handleTrailing(e);c=setTimeout(handleTimeout,(e=>{const n=t-(null===s?0:e-s),i=f-(e-l);return p?Math.min(n,i):n})(e))},debouncedFunction=function(...e){const n=Date.now(),d=checkCanInvoke(n);if(a=e,o=this,s=n,d){if(null===c)return(e=>(l=e,c=setTimeout(handleTimeout,t),u&&null!==a?invoke(e):i))(n);if(p)return clearTimeout(c),c=setTimeout(handleTimeout,t),invoke(n)}return null===c&&(c=setTimeout(handleTimeout,t)),i};return debouncedFunction.cancel=()=>{null!==c&&clearTimeout(c),l=0,s=a=o=c=null},debouncedFunction.flush=()=>null===c?i:handleTrailing(Date.now()),debouncedFunction}}(Gd),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gd;e.throttle=function(e,n=0,i={}){const{leading:a=!0,trailing:o=!0}=i;return t.debounce(e,n,{leading:a,maxWait:n,trailing:o})}}(Hd);const Yd=Zt(Hd.throttle);var warn=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function ownKeys$n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$n(Object(n),!0).forEach((function(t){_defineProperty$r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$r(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qd=Ut.forwardRef(((e,t)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:a="100%",height:o="100%",minWidth:s=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:p,onResize:f,style:m={}}=e,g=Ut.useRef(null),v=Ut.useRef();v.current=f,Ut.useImperativeHandle(t,(()=>g.current));var[b,_]=Ut.useState({containerWidth:i.width,containerHeight:i.height}),j=Ut.useCallback(((e,t)=>{_((n=>{var i=Math.round(e),a=Math.round(t);return n.containerWidth===i&&n.containerHeight===a?n:{containerWidth:i,containerHeight:a}}))}),[]);Ut.useEffect((()=>{var callback=e=>{var t,{width:n,height:i}=e[0].contentRect;j(n,i),null===(t=v.current)||void 0===t||t.call(v,n,i)};d>0&&(callback=Yd(callback,d,{trailing:!0,leading:!1}));var e=new ResizeObserver(callback),{width:t,height:n}=g.current.getBoundingClientRect();return j(t,n),e.observe(g.current),()=>{e.disconnect()}}),[j,d]);var w=Ut.useMemo((()=>{var{containerWidth:e,containerHeight:t}=b;if(e<0||t<0)return null;warn(isPercent(a)||isPercent(o),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,o),warn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var i=isPercent(a)?e:a,d=isPercent(o)?t:o;return n&&n>0&&(i?d=i/n:d&&(i=d*n),c&&d>c&&(d=c)),warn(i>0||d>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",i,d,a,o,s,l,n),Ut.Children.map(u,(e=>Ut.cloneElement(e,{width:i,height:d,style:_objectSpread$n({width:i,height:d},e.props.style)})))}),[n,u,o,c,l,s,b,a]);return Ut.createElement("div",{id:h?"".concat(h):void 0,className:We("recharts-responsive-container",p),style:_objectSpread$n(_objectSpread$n({},m),{},{width:a,height:o,minWidth:s,minHeight:l,maxHeight:c}),ref:g},Ut.createElement("div",{style:{width:0,height:0,overflow:"visible"}},w))})),Cell=e=>null;function ownKeys$m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$m(Object(n),!0).forEach((function(t){_defineProperty$q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Cell.displayName="Cell";var Vd={widthCache:{},cacheCount:0},Xd={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Jd="recharts_measurement_span";var getStringSize=function(e){if(null==e||os)return{width:0,height:0};var t,n=(t=_objectSpread$m({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),Object.keys(t).forEach((e=>{t[e]||delete t[e]})),t),i=JSON.stringify({text:e,copyStyle:n});if(Vd.widthCache[i])return Vd.widthCache[i];try{var a=document.getElementById(Jd);a||((a=document.createElement("span")).setAttribute("id",Jd),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=_objectSpread$m(_objectSpread$m({},Xd),n);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return Vd.widthCache[i]=l,++Vd.cacheCount>2e3&&(Vd.cacheCount=0,Vd.widthCache={}),l}catch(c){return{width:0,height:0}}},Qd=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eh=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,th=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,rh=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nh={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},ih=Object.keys(nh),ah="NaN";class DecimalCSS{static parse(e){var t,[,n,i]=null!==(t=rh.exec(e))&&void 0!==t?t:[];return new DecimalCSS(parseFloat(n),null!=i?i:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,isNan(e)&&(this.unit=""),""===t||th.test(t)||(this.num=NaN,this.unit=""),ih.includes(t)&&(this.num=function(e,t){return e*nh[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return isNan(this.num)}}function calculateArithmetic(e){if(e.includes(ah))return ah;for(var t=e;t.includes("*")||t.includes("/");){var n,[,i,a,o]=null!==(n=Qd.exec(t))&&void 0!==n?n:[],s=DecimalCSS.parse(null!=i?i:""),l=DecimalCSS.parse(null!=o?o:""),c="*"===a?s.multiply(l):s.divide(l);if(c.isNaN())return ah;t=t.replace(Qd,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,h,p]=null!==(u=eh.exec(t))&&void 0!==u?u:[],f=DecimalCSS.parse(null!=d?d:""),m=DecimalCSS.parse(null!=p?p:""),g="+"===h?f.add(m):f.subtract(m);if(g.isNaN())return ah;t=t.replace(eh,g.toString())}return t}var oh=/\(([^()]*)\)/;function evaluateExpression(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=oh.exec(n));){var[,i]=t;n=n.replace(oh,calculateArithmetic(i))}return n}(t),t=calculateArithmetic(t)}function reduceCSSCalc(e){var t=function(e){try{return evaluateExpression(e)}catch(t){return ah}}(e.slice(5,-1));return t===ah?"":t}var sh=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],lh=["dx","dy","angle","className","breakAll"];function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$m.apply(null,arguments)}function _objectWithoutProperties$m(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ch=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=e=>{var{children:t,breakAll:n,style:i}=e;try{var a=[];return isNullish(t)||(a=n?t.toString().split(""):t.toString().split(ch)),{wordsWithComputedWidth:a.map((e=>({word:e,width:getStringSize(e,i).width}))),spaceWidth:n?0:getStringSize(" ",i).width}}catch(o){return null}},getWordsWithoutCalculate=e=>[{words:isNullish(e)?[]:e.toString().split(ch)}],getWordsByLines=e=>{var{width:t,scaleToFit:n,children:i,style:a,breakAll:o,maxLines:s}=e;if((t||n)&&!os){var l=calculateWordWidths({breakAll:o,children:i,style:a});if(!l)return getWordsWithoutCalculate(i);var{wordsWithComputedWidth:c,spaceWidth:u}=l;return((e,t,n,i,a)=>{var{maxLines:o,children:s,style:l,breakAll:c}=e,u=isNumber(o),d=s,calculate=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{var{word:o,width:s}=t,l=e[e.length-1];if(l&&(null==i||a||l.width+s+n<Number(i)))l.words.push(o),l.width+=s+n;else{var c={words:[o],width:s};e.push(c)}return e}),[])},h=calculate(t),findLongestLine=e=>e.reduce(((e,t)=>e.width>t.width?e:t));if(!u||a)return h;if(!(h.length>o||findLongestLine(h).width>Number(i)))return h;for(var p,checkOverflow=e=>{var t=d.slice(0,e),n=calculateWordWidths({breakAll:c,style:l,children:t+"…"}).wordsWithComputedWidth,a=calculate(n);return[a.length>o||findLongestLine(a).width>Number(i),a]},f=0,m=d.length-1,g=0;f<=m&&g<=d.length-1;){var v=Math.floor((f+m)/2),b=v-1,[_,j]=checkOverflow(b),[w]=checkOverflow(v);if(_||w||(f=v+1),_&&w&&(m=v-1),!_&&w){p=j;break}g++}return p||h})({breakAll:o,children:i,maxLines:s,style:a},c,u,t,n)}return getWordsWithoutCalculate(i)},uh="#808080",dh=Ut.forwardRef(((e,t)=>{var{x:n=0,y:i=0,lineHeight:a="1em",capHeight:o="0.71em",scaleToFit:s=!1,textAnchor:l="start",verticalAnchor:c="end",fill:u=uh}=e,d=_objectWithoutProperties$m(e,sh),h=Ut.useMemo((()=>getWordsByLines({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:s,style:d.style,width:d.width})),[d.breakAll,d.children,d.maxLines,s,d.style,d.width]),{dx:p,dy:f,angle:m,className:g,breakAll:v}=d,b=_objectWithoutProperties$m(d,lh);if(!isNumOrStr(n)||!isNumOrStr(i))return null;var _,j=n+(isNumber(p)?p:0),w=i+(isNumber(f)?f:0);switch(c){case"start":_=reduceCSSCalc("calc(".concat(o,")"));break;case"middle":_=reduceCSSCalc("calc(".concat((h.length-1)/2," * -").concat(a," + (").concat(o," / 2))"));break;default:_=reduceCSSCalc("calc(".concat(h.length-1," * -").concat(a,")"))}var S=[];if(s){var A=h[0].width,{width:C}=d;S.push("scale(".concat(isNumber(C)?C/A:1,")"))}return m&&S.push("rotate(".concat(m,", ").concat(j,", ").concat(w,")")),S.length&&(b.transform=S.join(" ")),Ut.createElement("text",_extends$m({},filterProps(b,!0),{ref:t,x:j,y:w,className:We("recharts-text",g),textAnchor:l,fill:u.includes("url")?uh:u}),h.map(((e,t)=>{var n=e.words.join(v?"":" ");return Ut.createElement("tspan",{x:j,dy:0===t?_:a,key:"".concat(n,"-").concat(t)},n)})))}));dh.displayName="Text";var hh=["offset"],ph=["labelRef"];function _objectWithoutProperties$l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ownKeys$l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$l(Object(n),!0).forEach((function(t){_defineProperty$p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$l.apply(null,arguments)}var isLabelContentAFunction=e=>null!=e&&"function"==typeof e,renderRadialLabel=(e,t,n)=>{var i,a,{position:o,viewBox:s,offset:l,className:c}=e,{cx:u,cy:d,innerRadius:h,outerRadius:p,startAngle:f,endAngle:m,clockWise:g}=s,v=(h+p)/2,b=((e,t)=>mathSign(t-e)*Math.min(Math.abs(t-e),360))(f,m),_=b>=0?1:-1;"insideStart"===o?(i=f+_*l,a=g):"insideEnd"===o?(i=m-_*l,a=!g):"end"===o&&(i=m+_*l,a=g),a=b<=0?a:!a;var j=polarToCartesian(u,d,v,i),w=polarToCartesian(u,d,v,i+359*(a?1:-1)),S="M".concat(j.x,",").concat(j.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(a?0:1,",\n    ").concat(w.x,",").concat(w.y),A=isNullish(e.id)?uniqueId("recharts-radial-line-"):e.id;return Ut.createElement("text",_extends$l({},n,{dominantBaseline:"central",className:We("recharts-radial-bar-label",c)}),Ut.createElement("defs",null,Ut.createElement("path",{id:A,d:S})),Ut.createElement("textPath",{xlinkHref:"#".concat(A)},t))};function Label(e){var t,{offset:n=5}=e,i=_objectSpread$l({offset:n},_objectWithoutProperties$l(e,hh)),{viewBox:a,position:o,value:s,children:l,content:c,className:u="",textBreakAll:d,labelRef:h}=i,p=useViewBox(),f=a||p;if(!f||isNullish(s)&&isNullish(l)&&!Ut.isValidElement(c)&&"function"!=typeof c)return null;if(Ut.isValidElement(c)){var{labelRef:m}=i,g=_objectWithoutProperties$l(i,ph);return Ut.cloneElement(c,g)}if("function"==typeof c){if(t=Ut.createElement(c,i),Ut.isValidElement(t))return t}else t=(e=>{var{value:t,formatter:n}=e,i=isNullish(e.children)?t:e.children;return"function"==typeof n?n(i):i})(i);var v=(e=>"cx"in e&&isNumber(e.cx))(f),b=filterProps(i,!0);if(v&&("insideStart"===o||"insideEnd"===o||"end"===o))return renderRadialLabel(i,t,b);var _=v?(e=>{var{viewBox:t,offset:n,position:i}=e,{cx:a,cy:o,innerRadius:s,outerRadius:l,startAngle:c,endAngle:u}=t,d=(c+u)/2;if("outside"===i){var{x:h,y:p}=polarToCartesian(a,o,l+n,d);return{x:h,y:p,textAnchor:h>=a?"start":"end",verticalAnchor:"middle"}}if("center"===i)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===i)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===i)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var f=(s+l)/2,{x:m,y:g}=polarToCartesian(a,o,f,d);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}})(i):((e,t)=>{var{parentViewBox:n,offset:i,position:a}=e,{x:o,y:s,width:l,height:c}=t,u=c>=0?1:-1,d=u*i,h=u>0?"end":"start",p=u>0?"start":"end",f=l>=0?1:-1,m=f*i,g=f>0?"end":"start",v=f>0?"start":"end";if("top"===a)return _objectSpread$l(_objectSpread$l({},{x:o+l/2,y:s-u*i,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===a)return _objectSpread$l(_objectSpread$l({},{x:o+l/2,y:s+c+d,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(s+c),0),width:l}:{});if("left"===a){var b={x:o-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return _objectSpread$l(_objectSpread$l({},b),n?{width:Math.max(b.x-n.x,0),height:c}:{})}if("right"===a){var _={x:o+l+m,y:s+c/2,textAnchor:v,verticalAnchor:"middle"};return _objectSpread$l(_objectSpread$l({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:c}:{})}var j=n?{width:l,height:c}:{};return"insideLeft"===a?_objectSpread$l({x:o+m,y:s+c/2,textAnchor:v,verticalAnchor:"middle"},j):"insideRight"===a?_objectSpread$l({x:o+l-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},j):"insideTop"===a?_objectSpread$l({x:o+l/2,y:s+d,textAnchor:"middle",verticalAnchor:p},j):"insideBottom"===a?_objectSpread$l({x:o+l/2,y:s+c-d,textAnchor:"middle",verticalAnchor:h},j):"insideTopLeft"===a?_objectSpread$l({x:o+m,y:s+d,textAnchor:v,verticalAnchor:p},j):"insideTopRight"===a?_objectSpread$l({x:o+l-m,y:s+d,textAnchor:g,verticalAnchor:p},j):"insideBottomLeft"===a?_objectSpread$l({x:o+m,y:s+c-d,textAnchor:v,verticalAnchor:h},j):"insideBottomRight"===a?_objectSpread$l({x:o+l-m,y:s+c-d,textAnchor:g,verticalAnchor:h},j):a&&"object"==typeof a&&(isNumber(a.x)||isPercent(a.x))&&(isNumber(a.y)||isPercent(a.y))?_objectSpread$l({x:o+getPercentValue(a.x,l),y:s+getPercentValue(a.y,c),textAnchor:"end",verticalAnchor:"end"},j):_objectSpread$l({x:o+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},j)})(i,f);return Ut.createElement(dh,_extends$l({ref:h,className:We("recharts-label",u)},b,_,{breakAll:d}),t)}Label.displayName="Label";var parseViewBox=e=>{var{cx:t,cy:n,angle:i,startAngle:a,endAngle:o,r:s,radius:l,innerRadius:c,outerRadius:u,x:d,y:h,top:p,left:f,width:m,height:g,clockWise:v,labelViewBox:b}=e;if(b)return b;if(isNumber(m)&&isNumber(g)){if(isNumber(d)&&isNumber(h))return{x:d,y:h,width:m,height:g};if(isNumber(p)&&isNumber(f))return{x:p,y:f,width:m,height:g}}return isNumber(d)&&isNumber(h)?{x:d,y:h,width:0,height:0}:isNumber(t)&&isNumber(n)?{cx:t,cy:n,startAngle:a||i||0,endAngle:o||i||0,innerRadius:c||0,outerRadius:u||l||s||0,clockWise:v}:e.viewBox?e.viewBox:void 0};Label.parseViewBox=parseViewBox,Label.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var{children:i,labelRef:a}=e,o=parseViewBox(e),s=findAllByType(i,Label).map(((e,n)=>Ut.cloneElement(e,{viewBox:t||o,key:"label-".concat(n)})));if(!n)return s;var l=((e,t,n)=>{if(!e)return null;var i={viewBox:t,labelRef:n};return!0===e?Ut.createElement(Label,_extends$l({key:"label-implicit"},i)):isNumOrStr(e)?Ut.createElement(Label,_extends$l({key:"label-implicit",value:e},i)):Ut.isValidElement(e)?e.type===Label?Ut.cloneElement(e,_objectSpread$l({key:"label-implicit"},i)):Ut.createElement(Label,_extends$l({key:"label-implicit",content:e},i)):isLabelContentAFunction(e)?Ut.createElement(Label,_extends$l({key:"label-implicit",content:e},i)):e&&"object"==typeof e?Ut.createElement(Label,_extends$l({},e,{key:"label-implicit"},i)):null})(e.label,t||o,a);return[l,...s]};var fh={},mh={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.last=function(e){return e[e.length-1]}}(mh);var gh={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}}(gh),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mh,n=gh,i=Zi;e.last=function(e){if(i.isArrayLike(e))return t.last(n.toArray(e))}}(fh);const yh=Zt(fh.last);var xh=["valueAccessor"],vh=["data","dataKey","clockWise","id","textBreakAll"];function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$k.apply(null,arguments)}function ownKeys$k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$k(Object(n),!0).forEach((function(t){_defineProperty$o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutProperties$k(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var defaultAccessor=e=>Array.isArray(e.value)?yh(e.value):e.value;function LabelList(e){var{valueAccessor:t=defaultAccessor}=e,n=_objectWithoutProperties$k(e,xh),{data:i,dataKey:a,clockWise:o,id:s,textBreakAll:l}=n,c=_objectWithoutProperties$k(n,vh);return i&&i.length?Ut.createElement(oi,{className:"recharts-label-list"},i.map(((e,n)=>{var i=isNullish(a)?t(e,n):getValueByDataKey(e&&e.payload,a),u=isNullish(s)?{}:{id:"".concat(s,"-").concat(n)};return Ut.createElement(Label,_extends$k({},filterProps(e,!0),c,u,{parentViewBox:e.parentViewBox,value:i,textBreakAll:l,viewBox:Label.parseViewBox(isNullish(o)?e:_objectSpread$k(_objectSpread$k({},e),{},{clockWise:o})),key:"label-".concat(n),index:n}))}))):null}LabelList.displayName="LabelList",LabelList.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var{children:i}=e,a=findAllByType(i,LabelList).map(((e,n)=>Ut.cloneElement(e,{data:t,key:"labelList-".concat(n)})));return n?[function(e,t){return e?!0===e?Ut.createElement(LabelList,{key:"labelList-implicit",data:t}):Ut.isValidElement(e)||isLabelContentAFunction(e)?Ut.createElement(LabelList,{key:"labelList-implicit",data:t,content:e}):"object"==typeof e?Ut.createElement(LabelList,_extends$k({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t),...a]:a};var bh=["points","className","baseLinePoints","connectNulls"];function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$j.apply(null,arguments)}var isValidatePoint=e=>e&&e.x===+e.x&&e.y===+e.y,getSinglePolygonPath=(e,t)=>{var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach((e=>{isValidatePoint(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])})),isValidatePoint(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t}(e);t&&(n=[n.reduce(((e,t)=>[...e,...t]),[])]);var i=n.map((e=>e.reduce(((e,t,n)=>"".concat(e).concat(0===n?"M":"L").concat(t.x,",").concat(t.y)),""))).join("");return 1===n.length?"".concat(i,"Z"):i},Polygon=e=>{var{points:t,className:n,baseLinePoints:i,connectNulls:a}=e,o=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,bh);if(!t||!t.length)return null;var s=We("recharts-polygon",n);if(i&&i.length){var l=o.stroke&&"none"!==o.stroke,c=((e,t,n)=>{var i=getSinglePolygonPath(e,n);return"".concat("Z"===i.slice(-1)?i.slice(0,-1):i,"L").concat(getSinglePolygonPath(t.reverse(),n).slice(1))})(t,i,a);return Ut.createElement("g",{className:s},Ut.createElement("path",_extends$j({},filterProps(o,!0),{fill:"Z"===c.slice(-1)?o.fill:"none",stroke:"none",d:c})),l?Ut.createElement("path",_extends$j({},filterProps(o,!0),{fill:"none",d:getSinglePolygonPath(t,a)})):null,l?Ut.createElement("path",_extends$j({},filterProps(o,!0),{fill:"none",d:getSinglePolygonPath(i,a)})):null)}var u=getSinglePolygonPath(t,a);return Ut.createElement("path",_extends$j({},filterProps(o,!0),{fill:"Z"===u.slice(-1)?o.fill:"none",className:s,d:u}))};function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$i.apply(null,arguments)}var Dot=e=>{var{cx:t,cy:n,r:i,className:a}=e,o=We("recharts-dot",a);return t===+t&&n===+n&&i===+i?Ut.createElement("circle",_extends$i({},filterProps(e,!1),adaptEventHandlers(e),{className:o,cx:t,cy:n,r:i})):null},selectUnfilteredPolarItems=e=>e.graphicalItems.polarItems,_h=Da([pickAxisType,pickAxisId],itemAxisPredicate),jh=Da([selectUnfilteredPolarItems,selectBaseAxis,_h],combineGraphicalItemsSettings),wh=Da([jh],combineGraphicalItemsData),Sh=Da([wh,Gl],combineDisplayedData),Ah=Da([Sh,selectBaseAxis,jh],combineAppliedValues),Ch=Da([Sh,selectBaseAxis,jh],((e,t,n)=>n.length>0?e.flatMap((e=>n.flatMap((n=>{var i;return{value:getValueByDataKey(e,null!==(i=t.dataKey)&&void 0!==i?i:n.dataKey),errorDomain:[]}})))).filter(Boolean):null!=(null==t?void 0:t.dataKey)?e.map((e=>({value:getValueByDataKey(e,t.dataKey),errorDomain:[]}))):e.map((e=>({value:e,errorDomain:[]}))))),unsupportedInPolarChart=()=>{},Oh=Da([selectBaseAxis,Yc,unsupportedInPolarChart,Ch,unsupportedInPolarChart],combineNumericalDomain),Eh=Da([selectBaseAxis,selectChartLayout,Sh,Ah,selectStackOffsetType,pickAxisType,Oh],combineAxisDomain),kh=Da([Eh,selectBaseAxis,Jc],combineNiceTicks),Ph=Da([selectBaseAxis,Eh,kh,pickAxisType],combineAxisDomainWithNiceTicks),selectPolarAxis=(e,t,n)=>{switch(t){case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectPolarAxisRangeWithReversed=(e,t,n)=>{switch(t){case"angleAxis":return Sc(e,n);case"radiusAxis":return Cc(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Th=Da([selectPolarAxis,Jc,Ph,selectPolarAxisRangeWithReversed],combineScaleFunction),Lh=Da([selectChartLayout,Ah,selectAxisSettings,pickAxisType],combineCategoricalDomain),$h=Da([selectChartLayout,selectPolarAxis,Jc,Th,kh,selectPolarAxisRangeWithReversed,mu,Lh,pickAxisType],combineAxisTicks);Da([selectChartLayout,selectPolarAxis,Th,selectPolarAxisRangeWithReversed,mu,Lh,pickAxisType],combineGraphicalItemTicks);var Ih=Da([(e,t)=>$h(e,"angleAxis",t,!1)],(e=>{if(e)return e.map((e=>e.coordinate))})),Mh=Da([(e,t)=>$h(e,"radiusAxis",t,!1)],(e=>{if(e)return e.map((e=>e.coordinate))})),Rh=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$h.apply(null,arguments)}function ownKeys$j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$j(Object(n),!0).forEach((function(t){_defineProperty$n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var getPolygonPath=(e,t,n,i)=>{var a="";return i.forEach(((i,o)=>{var s=polarToCartesian(t,n,e,i);a+=o?"L ".concat(s.x,",").concat(s.y):"M ".concat(s.x,",").concat(s.y)})),a+="Z"},PolarAngles=e=>{var{cx:t,cy:n,innerRadius:i,outerRadius:a,polarAngles:o,radialLines:s}=e;if(!o||!o.length||!s)return null;var l=_objectSpread$j({stroke:"#ccc"},filterProps(e,!1));return Ut.createElement("g",{className:"recharts-polar-grid-angle"},o.map((e=>{var o=polarToCartesian(t,n,i,e),s=polarToCartesian(t,n,a,e);return Ut.createElement("line",_extends$h({},l,{key:"line-".concat(e),x1:o.x,y1:o.y,x2:s.x,y2:s.y}))})))},ConcentricCircle=e=>{var{cx:t,cy:n,radius:i,index:a}=e,o=_objectSpread$j(_objectSpread$j({stroke:"#ccc"},filterProps(e,!1)),{},{fill:"none"});return Ut.createElement("circle",_extends$h({},o,{className:We("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:n,r:i}))},ConcentricPolygon=e=>{var{radius:t,index:n}=e,i=_objectSpread$j(_objectSpread$j({stroke:"#ccc"},filterProps(e,!1)),{},{fill:"none"});return Ut.createElement("path",_extends$h({},i,{className:We("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:getPolygonPath(t,e.cx,e.cy,e.polarAngles)}))},ConcentricGridPath=e=>{var{polarRadius:t,gridType:n}=e;return t&&t.length?Ut.createElement("g",{className:"recharts-polar-grid-concentric"},t.map(((t,i)=>{var a=i;return"circle"===n?Ut.createElement(ConcentricCircle,_extends$h({key:a},e,{radius:t,index:i})):Ut.createElement(ConcentricPolygon,_extends$h({key:a},e,{radius:t,index:i}))}))):null},PolarGrid=e=>{var t,n,i,a,o,s,l,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:h=0,radiusAxisId:p=0,cx:f,cy:m,innerRadius:g,outerRadius:v}=e,b=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Rh),_=useAppSelector(Oc),j=_objectSpread$j({cx:null!==(t=null!==(n=null==_?void 0:_.cx)&&void 0!==n?n:f)&&void 0!==t?t:0,cy:null!==(i=null!==(a=null==_?void 0:_.cy)&&void 0!==a?a:m)&&void 0!==i?i:0,innerRadius:null!==(o=null!==(s=null==_?void 0:_.innerRadius)&&void 0!==s?s:g)&&void 0!==o?o:0,outerRadius:null!==(l=null!==(c=null==_?void 0:_.outerRadius)&&void 0!==c?c:v)&&void 0!==l?l:0},b),{polarAngles:w,polarRadius:S,cx:A,cy:C,innerRadius:O,outerRadius:E}=j,k=useAppSelector((e=>Ih(e,h))),P=useAppSelector((e=>Mh(e,p))),T=Array.isArray(w)?w:k,L=Array.isArray(S)?S:P;return E<=0||null==T||null==L?null:Ut.createElement("g",{className:"recharts-polar-grid"},Ut.createElement(PolarAngles,_extends$h({cx:A,cy:C,innerRadius:O,outerRadius:E,gridType:u,radialLines:d},j,{polarAngles:T,polarRadius:L})),Ut.createElement(ConcentricGridPath,_extends$h({cx:A,cy:C,innerRadius:O,outerRadius:E,gridType:u,radialLines:d},j,{polarAngles:T,polarRadius:L})))};PolarGrid.displayName="PolarGrid";var Dh={},Nh={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.maxBy=function(e,t){if(0===e.length)return;let n=e[0],i=t(n);for(let a=1;a<e.length;a++){const o=e[a],s=t(o);s>i&&(i=s,n=o)}return n}}(Nh),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nh,n=Bi,i=Wi;e.maxBy=function(e,a){if(null!=e)return t.maxBy(Array.from(e),i.iteratee(a??n.identity))}}(Dh);const zh=Zt(Dh.maxBy);var Bh={},Fh={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.minBy=function(e,t){if(0===e.length)return;let n=e[0],i=t(n);for(let a=1;a<e.length;a++){const o=e[a],s=t(o);s<i&&(i=s,n=o)}return n}}(Fh),function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fh,n=Bi,i=Wi;e.minBy=function(e,a){if(null!=e)return t.minBy(Array.from(e),i.iteratee(a??n.identity))}}(Bh);const Zh=Zt(Bh.minBy);var Uh=po({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Kh,removeRadiusAxis:Wh,addAngleAxis:Hh,removeAngleAxis:Gh}=Uh.actions,Yh=Uh.reducer,qh=["cx","cy","angle","axisLine"],Vh=["angle","tickFormatter","stroke","tick"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$g.apply(null,arguments)}function ownKeys$i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$i(Object(n),!0).forEach((function(t){_defineProperty$m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutProperties$h(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Xh="radiusAxis";function SetRadiusAxisSettings(e){var t=useAppDispatch();return Ut.useEffect((()=>(t(Kh(e)),()=>{t(Wh(e))}))),null}var renderTicks=(e,t)=>{var{angle:n,tickFormatter:i,stroke:a,tick:o}=e,s=_objectWithoutProperties$h(e,Vh),l=(e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle"}return t})(e.orientation),c=filterProps(s,!1),u=filterProps(o,!1),d=t.map(((t,s)=>{var d=((e,t,n,i)=>{var{coordinate:a}=e;return polarToCartesian(n,i,a,t)})(t,e.angle,e.cx,e.cy),h=_objectSpread$i(_objectSpread$i(_objectSpread$i(_objectSpread$i({textAnchor:l,transform:"rotate(".concat(90-n,", ").concat(d.x,", ").concat(d.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:s},d),{},{payload:t});return Ut.createElement(oi,_extends$g({className:We("recharts-polar-radius-axis-tick",getTickClassName(o)),key:"tick-".concat(t.coordinate)},adaptEventsOfChild(e,t,s)),((e,t,n)=>Ut.isValidElement(e)?Ut.cloneElement(e,t):"function"==typeof e?e(t):Ut.createElement(dh,_extends$g({},t,{className:"recharts-polar-radius-axis-tick-value"}),n))(o,h,i?i(t.value,s):t.value))}));return Ut.createElement(oi,{className:"recharts-polar-radius-axis-ticks"},d)},PolarRadiusAxisWrapper=e=>{var{radiusAxisId:t}=e,n=useAppSelector(Oc),i=useAppSelector((e=>Th(e,"radiusAxis",t))),a=useAppSelector((e=>$h(e,"radiusAxis",t,!1)));if(null==n||!a||!a.length)return null;var o=_objectSpread$i(_objectSpread$i(_objectSpread$i({},e),{},{scale:i},n),{},{radius:n.outerRadius}),{tick:s,axisLine:l}=o;return Ut.createElement(oi,{className:We("recharts-polar-radius-axis",Xh,o.className)},l&&((e,t)=>{var{cx:n,cy:i,angle:a,axisLine:o}=e,s=_objectWithoutProperties$h(e,qh),l=t.reduce(((e,t)=>[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]),[1/0,-1/0]),c=polarToCartesian(n,i,l[0],a),u=polarToCartesian(n,i,l[1],a),d=_objectSpread$i(_objectSpread$i(_objectSpread$i({},filterProps(s,!1)),{},{fill:"none"},filterProps(o,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return Ut.createElement("line",_extends$g({className:"recharts-polar-radius-axis-line"},d))})(o,a),s&&renderTicks(o,a),Label.renderCallByParent(o,((e,t,n,i)=>{var a=zh(i,(e=>e.coordinate||0));return{cx:t,cy:n,startAngle:e,endAngle:e,innerRadius:Zh(i,(e=>e.coordinate||0)).coordinate||0,outerRadius:a.coordinate||0}})(o.angle,o.cx,o.cy,a)))};class PolarRadiusAxis extends Ut.PureComponent{render(){return Ut.createElement(Ut.Fragment,null,Ut.createElement(SetRadiusAxisSettings,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),Ut.createElement(PolarRadiusAxisWrapper,this.props))}}_defineProperty$m(PolarRadiusAxis,"displayName","PolarRadiusAxis"),_defineProperty$m(PolarRadiusAxis,"axisType",Xh),_defineProperty$m(PolarRadiusAxis,"defaultProps",mc);var Jh=["children"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$f.apply(null,arguments)}function ownKeys$h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$h(Object(n),!0).forEach((function(t){_defineProperty$l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qh=Math.PI/180,ep=1e-5,tp="angleAxis";function SetAngleAxisSettings(e){var t=useAppDispatch(),n=Ut.useMemo((()=>{var{children:t}=e;return function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Jh)}),[e]),i=useAppSelector((e=>selectAngleAxis(e,n.id))),a=n===i;return Ut.useEffect((()=>(t(Hh(n)),()=>{t(Gh(n))})),[t,n]),a?e.children:null}var AxisLine=e=>{var{cx:t,cy:n,radius:i,axisLineType:a,axisLine:o,ticks:s}=e;if(!o)return null;var l=_objectSpread$h(_objectSpread$h({},filterProps(e,!1)),{},{fill:"none"},filterProps(o,!1));if("circle"===a)return Ut.createElement(Dot,_extends$f({className:"recharts-polar-angle-axis-line"},l,{cx:t,cy:n,r:i}));var c=s.map((e=>polarToCartesian(t,n,i,e.coordinate)));return Ut.createElement(Polygon,_extends$f({className:"recharts-polar-angle-axis-line"},l,{points:c}))},TickItemText=e=>{var{tick:t,tickProps:n,value:i}=e;return t?Ut.isValidElement(t)?Ut.cloneElement(t,n):"function"==typeof t?t(n):Ut.createElement(dh,_extends$f({},n,{className:"recharts-polar-angle-axis-tick-value"}),i):null},Ticks=e=>{var{tick:t,tickLine:n,tickFormatter:i,stroke:a,ticks:o}=e,s=filterProps(e,!1),l=filterProps(t,!1),c=_objectSpread$h(_objectSpread$h({},s),{},{fill:"none"},filterProps(n,!1)),u=o.map(((o,u)=>{var d=((e,t)=>{var{cx:n,cy:i,radius:a,orientation:o,tickSize:s}=t,l=s||8,c=polarToCartesian(n,i,a,e.coordinate),u=polarToCartesian(n,i,a+("inner"===o?-1:1)*l,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}})(o,e),h=((e,t)=>{var n=Math.cos(-e.coordinate*Qh);return n>ep?"outer"===t?"start":"end":n<-ep?"outer"===t?"end":"start":"middle"})(o,e.orientation),p=_objectSpread$h(_objectSpread$h(_objectSpread$h({textAnchor:h},s),{},{stroke:"none",fill:a},l),{},{index:u,payload:o,x:d.x2,y:d.y2});return Ut.createElement(oi,_extends$f({className:We("recharts-polar-angle-axis-tick",getTickClassName(t)),key:"tick-".concat(o.coordinate)},adaptEventsOfChild(e,o,u)),n&&Ut.createElement("line",_extends$f({className:"recharts-polar-angle-axis-tick-line"},c,d)),Ut.createElement(TickItemText,{tick:t,tickProps:p,value:i?i(o.value,u):o.value}))}));return Ut.createElement(oi,{className:"recharts-polar-angle-axis-ticks"},u)},PolarAngleAxisWrapper=e=>{var{angleAxisId:t}=e,n=useAppSelector(Oc),i=useAppSelector((e=>Th(e,"angleAxis",t))),a=useIsPanorama(),o=useAppSelector((e=>$h(e,"angleAxis",t,a)));if(null==n||!o||!o.length)return null;var s=_objectSpread$h(_objectSpread$h(_objectSpread$h({},e),{},{scale:i},n),{},{radius:n.outerRadius});return Ut.createElement(oi,{className:We("recharts-polar-angle-axis",tp,s.className)},Ut.createElement(AxisLine,_extends$f({},s,{ticks:o})),Ut.createElement(Ticks,_extends$f({},s,{ticks:o})))};class PolarAngleAxis extends Ut.PureComponent{render(){return this.props.radius<=0?null:Ut.createElement(SetAngleAxisSettings,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},Ut.createElement(PolarAngleAxisWrapper,this.props))}}function ownKeys$g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$g(Object(n),!0).forEach((function(t){_defineProperty$k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_defineProperty$l(PolarAngleAxis,"displayName","PolarAngleAxis"),_defineProperty$l(PolarAngleAxis,"axisType",tp),_defineProperty$l(PolarAngleAxis,"defaultProps",fc);var pickPieSettings=(e,t)=>t,rp=[],pickCells$1=(e,t,n)=>0===(null==n?void 0:n.length)?rp:n,np=Da([Gl,pickPieSettings,pickCells$1],((e,t,n)=>{var i,{chartData:a}=e;if((i=null!=(null==t?void 0:t.data)&&t.data.length>0?t.data:a)&&i.length||null==n||(i=n.map((e=>_objectSpread$g(_objectSpread$g({},t.presentationProps),e.props)))),null!=i)return i})),ip=Da([np,pickPieSettings,pickCells$1],((e,t,n)=>{if(null!=e)return e.map(((e,i)=>{var a,o,s=getValueByDataKey(e,t.nameKey,t.name);return o=null!=n&&null!==(a=n[i])&&void 0!==a&&null!==(a=a.props)&&void 0!==a&&a.fill?n[i].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:getTooltipNameProp(s,t.dataKey),color:o,payload:e,type:t.legendType}}))})),ap=Da([selectUnfilteredPolarItems,pickPieSettings],((e,t)=>{if(e.some((e=>"pie"===e.type&&t.dataKey===e.dataKey&&t.data===e.data)))return t})),op=Da([np,ap,pickCells$1,Ko],((e,t,n,i)=>{if(null!=t&&null!=e)return function(e){var t,n,i,{pieSettings:a,displayedData:o,cells:s,offset:l}=e,{cornerRadius:c,startAngle:u,endAngle:d,dataKey:h,nameKey:p,tooltipType:f}=a,m=Math.abs(a.minAngle),g=parseDeltaAngle(u,d),v=Math.abs(g),b=o.length<=1?0:null!==(t=a.paddingAngle)&&void 0!==t?t:0,_=o.filter((e=>0!==getValueByDataKey(e,h,0))).length,j=v-_*m-(v>=360?_:_-1)*b,w=o.reduce(((e,t)=>{var n=getValueByDataKey(t,h,0);return e+(isNumber(n)?n:0)}),0);w>0&&(n=o.map(((e,t)=>{var n,o=getValueByDataKey(e,h,0),d=getValueByDataKey(e,p,t),v=parseCoordinateOfPie(a,l,e),_=(isNumber(o)?o:0)/w,S=_objectSpread$d(_objectSpread$d({},e),s&&s[t]&&s[t].props),A=(n=t?i.endAngle+mathSign(g)*b*(0!==o?1:0):u)+mathSign(g)*((0!==o?m:0)+_*j),C=(n+A)/2,O=(v.innerRadius+v.outerRadius)/2,E=[{name:d,value:o,payload:S,dataKey:h,type:f}],k=polarToCartesian(v.cx,v.cy,O,C);return i=_objectSpread$d(_objectSpread$d(_objectSpread$d(_objectSpread$d({},a.presentationProps),{},{percent:_,cornerRadius:c,name:d,tooltipPayload:E,midAngle:C,middleRadius:O,tooltipPosition:k},S),v),{},{value:getValueByDataKey(e,h),startAngle:n,endAngle:A,payload:S,paddingAngle:mathSign(g)*b})})));return n}({offset:i,pieSettings:t,displayedData:e,cells:n})})),sp=po({name:"graphicalItems",initialState:{countOfBars:0,cartesianItems:[],polarItems:[]},reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:i}=t.payload,a=current(e).cartesianItems.indexOf(n);a>-1&&(e.cartesianItems[a]=i)},removeCartesianGraphicalItem(e,t){var n=current(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=current(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addBar:lp,removeBar:cp,addCartesianGraphicalItem:up,replaceCartesianGraphicalItem:dp,removeCartesianGraphicalItem:hp,addPolarGraphicalItem:pp,removePolarGraphicalItem:fp}=sp.actions,mp=sp.reducer;function ownKeys$f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$f(Object(n),!0).forEach((function(t){_defineProperty$j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SetCartesianGraphicalItem(e){var t=useAppDispatch(),n=Ut.useRef(null);return Ut.useEffect((()=>{var i=_objectSpread$f(_objectSpread$f({},e),{},{stackId:getNormalizedStackId(e.stackId)});null===n.current?t(up(i)):n.current!==i&&t(dp({prev:n.current,next:i})),n.current=i}),[t,e]),Ut.useEffect((()=>()=>{n.current&&(t(hp(n.current)),n.current=null)}),[t]),null}function SetPolarGraphicalItem(e){var t=useAppDispatch();return Ut.useEffect((()=>(t(pp(e)),()=>{t(fp(e))})),[t,e]),null}var gp={};!function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e.isPlainObject=function(e){if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];if(null==t)return!1;return!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}}(gp);const yp=Zt(gp.isPlainObject);function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$e.apply(null,arguments)}var getTrapezoidPath=(e,t,n,i,a)=>{var o,s=n-i;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-s/2,",").concat(t+a),o+="L ".concat(e+n-s/2-i,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z")},xp={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=e=>{var t=resolveDefaultProps(e,xp),n=Ut.useRef(),[i,a]=Ut.useState(-1);Ut.useEffect((()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&a(e)}catch(t){}}),[]);var{x:o,y:s,upperWidth:l,lowerWidth:c,height:u,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:f,isUpdateAnimationActive:m}=t;if(o!==+o||s!==+s||l!==+l||c!==+c||u!==+u||0===l&&0===c||0===u)return null;var g=We("recharts-trapezoid",d);return m?Ut.createElement(Animate,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:u,x:o,y:s},to:{upperWidth:l,lowerWidth:c,height:u,x:o,y:s},duration:p,animationEasing:h,isActive:m},(e=>{var{upperWidth:a,lowerWidth:o,height:s,x:l,y:c}=e;return Ut.createElement(Animate,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:f,duration:p,easing:h},Ut.createElement("path",_extends$e({},filterProps(t,!0),{className:g,d:getTrapezoidPath(l,c,a,o,s),ref:n})))})):Ut.createElement("g",null,Ut.createElement("path",_extends$e({},filterProps(t,!0),{className:g,d:getTrapezoidPath(o,s,l,c,u)})))},vp=["option","shapeType","propTransformer","activeClassName","isActive"];function ownKeys$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$e(Object(n),!0).forEach((function(t){_defineProperty$i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function defaultPropTransformer(e,t){return _objectSpread$e(_objectSpread$e({},t),e)}function ShapeSelector(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return Ut.createElement(Rectangle,n);case"trapezoid":return Ut.createElement(Trapezoid,n);case"sector":return Ut.createElement(Sector,n);case"symbols":if(function(e){return"symbols"===e}(t))return Ut.createElement(Symbols,n);break;default:return null}}function Shape(e){var t,{option:n,shapeType:i,propTransformer:a=defaultPropTransformer,activeClassName:o="recharts-active-shape",isActive:s}=e,l=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,vp);if(Ut.isValidElement(n))t=Ut.cloneElement(n,_objectSpread$e(_objectSpread$e({},l),function(e){return Ut.isValidElement(e)?e.props:e}(n)));else if("function"==typeof n)t=n(l);else if(yp(n)&&"boolean"!=typeof n){var c=a(n,l);t=Ut.createElement(ShapeSelector,{shapeType:i,elementProps:c})}else{var u=l;t=Ut.createElement(ShapeSelector,{shapeType:i,elementProps:u})}return s?Ut.createElement(oi,{className:o},t):t}var useMouseEnterItemDispatch=(e,t)=>{var n=useAppDispatch();return(i,a)=>o=>{null==e||e(i,a,o),n(Eu({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition}))}},useMouseLeaveItemDispatch=e=>{var t=useAppDispatch();return(n,i)=>a=>{null==e||e(n,i,a),t(ku())}},useMouseClickItemDispatch=(e,t)=>{var n=useAppDispatch();return(i,a)=>o=>{null==e||e(i,a,o),n(Tu({activeIndex:String(a),activeDataKey:t,activeCoordinate:i.tooltipPosition}))}};function SetTooltipEntrySettings(e){var{fn:t,args:n}=e,i=useAppDispatch(),a=useIsPanorama();return Ut.useEffect((()=>{if(!a){var e=t(n);return i(Au(e)),()=>{i(Cu(e))}}}),[t,n,i,a]),null}var noop$1=()=>{};function SetLegendPayload(e){var{legendPayload:t}=e,n=useAppDispatch(),i=useIsPanorama();return Ut.useEffect((()=>i?noop$1:(n(es(t)),()=>{n(ts(t))})),[n,i,t]),null}function SetPolarLegendPayload(e){var{legendPayload:t}=e,n=useAppDispatch(),i=useAppSelector(selectChartLayout);return Ut.useEffect((()=>"centric"!==i&&"radial"!==i?noop$1:(n(es(t)),()=>{n(ts(t))})),[n,i,t]),null}function useAnimationId(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=Ut.useRef(uniqueId(t)),i=Ut.useRef(e);return i.current!==e&&(n.current=uniqueId(t),i.current=e),n.current}var bp=["onMouseEnter","onClick","onMouseLeave"];function ownKeys$d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$d(Object(n),!0).forEach((function(t){_defineProperty$h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$d.apply(null,arguments)}function SetPiePayloadLegend(e){var t=Ut.useMemo((()=>filterProps(e,!1)),[e]),n=Ut.useMemo((()=>findAllByType(e.children,Cell)),[e.children]),i=Ut.useMemo((()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:t})),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,t]),a=useAppSelector((e=>ip(e,i,n)));return Ut.createElement(SetPolarLegendPayload,{legendPayload:a})}function getTooltipEntrySettings$4(e){var{dataKey:t,nameKey:n,sectors:i,stroke:a,strokeWidth:o,fill:s,name:l,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:null==i?void 0:i.map((e=>e.tooltipPayload)),positions:null==i?void 0:i.map((e=>e.tooltipPosition)),settings:{stroke:a,strokeWidth:o,fill:s,dataKey:t,nameKey:n,name:getTooltipNameProp(l,t),hide:c,type:u,color:s,unit:""}}}var getTextAnchor=(e,t)=>e>t?"start":e<t?"end":"middle",parseCoordinateOfPie=(e,t,n)=>{var{top:i,left:a,width:o,height:s}=t,l=getMaxRadius(o,s),c=a+getPercentValue(e.cx,o,o/2),u=i+getPercentValue(e.cy,s,s/2),d=getPercentValue(e.innerRadius,l,0),h=((e,t,n)=>"function"==typeof t?t(e):getPercentValue(t,n,.8*n))(n,e.outerRadius,l);return{cx:c,cy:u,innerRadius:d,outerRadius:h,maxRadius:e.maxRadius||Math.sqrt(o*o+s*s)/2}},parseDeltaAngle=(e,t)=>mathSign(t-e)*Math.min(Math.abs(t-e),360);function PieLabels(e){var{sectors:t,props:n,showLabels:i}=e,{label:a,labelLine:o,dataKey:s}=n;if(!i||!a||!t)return null;var l=filterProps(n,!1),c=filterProps(a,!1),u=filterProps(o,!1),d="object"==typeof a&&"offsetRadius"in a&&a.offsetRadius||20,h=t.map(((e,t)=>{var n=(e.startAngle+e.endAngle)/2,i=polarToCartesian(e.cx,e.cy,e.outerRadius+d,n),h=_objectSpread$d(_objectSpread$d(_objectSpread$d(_objectSpread$d({},l),e),{},{stroke:"none"},c),{},{index:t,textAnchor:getTextAnchor(i.x,e.cx)},i),p=_objectSpread$d(_objectSpread$d(_objectSpread$d(_objectSpread$d({},l),e),{},{fill:"none",stroke:e.fill},u),{},{index:t,points:[polarToCartesian(e.cx,e.cy,e.outerRadius,n),i],key:"line"});return Ut.createElement(oi,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},o&&((e,t)=>{if(Ut.isValidElement(e))return Ut.cloneElement(e,t);if("function"==typeof e)return e(t);var n=We("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return Ut.createElement(Curve,_extends$d({},t,{type:"linear",className:n}))})(o,p),((e,t,n)=>{if(Ut.isValidElement(e))return Ut.cloneElement(e,t);var i=n;if("function"==typeof e&&(i=e(t),Ut.isValidElement(i)))return i;var a=We("recharts-pie-label-text","boolean"!=typeof e&&"function"!=typeof e?e.className:"");return Ut.createElement(dh,_extends$d({},t,{alignmentBaseline:"middle",className:a}),i)})(a,h,getValueByDataKey(e,s)))}));return Ut.createElement(oi,{className:"recharts-pie-labels"},h)}function PieSectors(e){var{sectors:t,activeShape:n,inactiveShape:i,allOtherPieProps:a,showLabels:o}=e,s=useAppSelector(pd),{onMouseEnter:l,onClick:c,onMouseLeave:u}=a,d=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(a,bp),h=useMouseEnterItemDispatch(l,a.dataKey),p=useMouseLeaveItemDispatch(u),f=useMouseClickItemDispatch(c,a.dataKey);return null==t?null:Ut.createElement(Ut.Fragment,null,t.map(((e,o)=>{if(0===(null==e?void 0:e.startAngle)&&0===(null==e?void 0:e.endAngle)&&1!==t.length)return null;var l=n&&String(o)===s,c=l?n:s?i:null,u=_objectSpread$d(_objectSpread$d({},e),{},{stroke:e.stroke,tabIndex:-1,[Zo]:o,[Uo]:a.dataKey});return Ut.createElement(oi,_extends$d({tabIndex:-1,className:"recharts-pie-sector"},adaptEventsOfChild(d,e,o),{onMouseEnter:h(e,o),onMouseLeave:p(e,o),onClick:f(e,o),key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(o)}),Ut.createElement(Shape,_extends$d({option:c,isActive:l,shapeType:"sector"},u)))})),Ut.createElement(PieLabels,{sectors:t,props:a,showLabels:o}))}function SectorsWithAnimation(e){var{props:t,previousSectorsRef:n}=e,{sectors:i,isAnimationActive:a,animationBegin:o,animationDuration:s,animationEasing:l,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:h}=t,p=useAnimationId(t,"recharts-pie-"),f=n.current,[m,g]=Ut.useState(!0),v=Ut.useCallback((()=>{"function"==typeof h&&h(),g(!1)}),[h]),b=Ut.useCallback((()=>{"function"==typeof d&&d(),g(!0)}),[d]);return Ut.createElement(Animate,{begin:o,duration:s,isActive:a,easing:l,from:{t:0},to:{t:1},onAnimationStart:b,onAnimationEnd:v,key:p},(e=>{var{t:a}=e,o=[],s=(i&&i[0]).startAngle;return i.forEach(((e,t)=>{var n=f&&f[t],i=t>0?qn(e,"paddingAngle",0):0;if(n){var l=interpolateNumber$1(n.endAngle-n.startAngle,e.endAngle-e.startAngle),c=_objectSpread$d(_objectSpread$d({},e),{},{startAngle:s+i,endAngle:s+l(a)+i});o.push(c),s=c.endAngle}else{var{endAngle:u,startAngle:d}=e,h=interpolateNumber$1(0,u-d)(a),p=_objectSpread$d(_objectSpread$d({},e),{},{startAngle:s+i,endAngle:s+h+i});o.push(p),s=p.endAngle}})),n.current=o,Ut.createElement(oi,null,Ut.createElement(PieSectors,{sectors:o,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!m}))}))}function RenderSectors(e){var{sectors:t,isAnimationActive:n,activeShape:i,inactiveShape:a}=e,o=Ut.useRef(null),s=o.current;return n&&t&&t.length&&(!s||s!==t)?Ut.createElement(SectorsWithAnimation,{props:e,previousSectorsRef:o}):Ut.createElement(PieSectors,{sectors:t,activeShape:i,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function PieWithTouchMove(e){var{hide:t,className:n,rootTabIndex:i}=e,a=We("recharts-pie",n);return t?null:Ut.createElement(oi,{tabIndex:i,className:a},Ut.createElement(RenderSectors,e))}var _p={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!os,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function PieImpl(e){var t=resolveDefaultProps(e,_p),n=Ut.useMemo((()=>findAllByType(e.children,Cell)),[e.children]),i=filterProps(t,!1),a=Ut.useMemo((()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:i})),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,i]),o=useAppSelector((e=>op(e,a,n)));return Ut.createElement(Ut.Fragment,null,Ut.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings$4,args:_objectSpread$d(_objectSpread$d({},t),{},{sectors:o})}),Ut.createElement(PieWithTouchMove,_extends$d({},t,{sectors:o})))}class Pie extends Ut.PureComponent{constructor(){super(...arguments),_defineProperty$h(this,"id",uniqueId("recharts-pie-"))}render(){return Ut.createElement(Ut.Fragment,null,Ut.createElement(SetPolarGraphicalItem,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),Ut.createElement(SetPiePayloadLegend,this.props),Ut.createElement(PieImpl,this.props),this.props.children)}}_defineProperty$h(Pie,"displayName","Pie"),_defineProperty$h(Pie,"defaultProps",_p);var jp=Da([Ko],(e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}})),wp=Da([jp,selectChartWidth,selectChartHeight],((e,t,n)=>{if(e&&null!=t&&null!=n)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}})),usePlotArea=()=>useAppSelector(wp);function ownKeys$c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$c(Object(n),!0).forEach((function(t){_defineProperty$g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ActivePoints(e){var{points:t,mainColor:n,activeDot:i,itemDataKey:a}=e,o=useAppSelector(pd),s=useAppSelector(_d);if(null==t||null==s)return null;var l=t.find((e=>s.includes(e.payload)));return isNullish(l)?null:(e=>{var{point:t,childIndex:n,mainColor:i,activeDot:a,dataKey:o}=e;if(!1===a||null==t.x||null==t.y)return null;var s,l=_objectSpread$c(_objectSpread$c({index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:null!=i?i:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},filterProps(a,!1)),adaptEventHandlers(a));return s=Ut.isValidElement(a)?Ut.cloneElement(a,l):"function"==typeof a?a(l):Ut.createElement(Dot,l),Ut.createElement(oi,{className:"recharts-active-dot"},s)})({point:l,childIndex:Number(o),mainColor:n,dataKey:a,activeDot:i})}var PolarGraphicalItemContext=e=>Ut.createElement(SetPolarGraphicalItem,e);function ownKeys$b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$b(Object(n),!0).forEach((function(t){_defineProperty$f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var selectRadiusAxisScale=(e,t)=>Th(e,"radiusAxis",t),Sp=Da([selectRadiusAxisScale],(e=>{if(null!=e)return{scale:e}})),Ap=Da([selectRadiusAxis,selectRadiusAxisScale],((e,t)=>{if(null!=e&&null!=t)return _objectSpread$b(_objectSpread$b({},e),{},{scale:t})})),selectAngleAxisForRadar=(e,t,n)=>selectAngleAxis(e,n),selectPolarAxisScaleForRadar=(e,t,n)=>Th(e,"angleAxis",n),Cp=Da([selectAngleAxisForRadar,selectPolarAxisScaleForRadar],((e,t)=>{if(null!=e&&null!=t)return _objectSpread$b(_objectSpread$b({},e),{},{scale:t})})),Op=Da([selectAngleAxisForRadar,selectPolarAxisScaleForRadar,Oc],((e,t,n)=>{if(null!=n&&null!=t)return{scale:t,type:e.type,dataKey:e.dataKey,cx:n.cx,cy:n.cy}})),Ep=Da([selectChartLayout,Ap,(e,t,n,i)=>$h(e,"radiusAxis",t,i),Cp,(e,t,n,i)=>$h(e,"angleAxis",n,i)],((e,t,n,i,a)=>isCategoricalAxis(e,"radiusAxis")?getBandSizeOfAxis(t,n,!1):getBandSizeOfAxis(i,a,!1))),kp=Da([selectUnfilteredPolarItems,(e,t,n,i,a)=>a],((e,t)=>{if(e.some((e=>"radar"===e.type&&t===e.dataKey)))return t})),Pp=Da([Sp,Op,Gl,kp,Ep],((e,t,n,i,a)=>{var{chartData:o,dataStartIndex:s,dataEndIndex:l}=n;if(null!=e&&null!=t&&null!=o&&null!=a&&null!=i)return function(e){var{radiusAxis:t,angleAxis:n,displayedData:i,dataKey:a,bandSize:o}=e,{cx:s,cy:l}=n,c=!1,u=[],d="number"!==n.type&&null!=o?o:0;i.forEach(((e,i)=>{var o=getValueByDataKey(e,n.dataKey,i),h=getValueByDataKey(e,a),p=n.scale(o)+d,f=Array.isArray(h)?yh(h):h,m=isNullish(f)?void 0:t.scale(f);Array.isArray(h)&&h.length>=2&&(c=!0),u.push(_objectSpread$a(_objectSpread$a({},polarToCartesian(s,l,m,p)),{},{name:o,value:h,cx:s,cy:l,radius:m,angle:p,payload:e}))}));var h=[];c&&u.forEach((e=>{if(Array.isArray(e.value)){var n=e.value[0],i=isNullish(n)?void 0:t.scale(n);h.push(_objectSpread$a(_objectSpread$a({},e),{},{radius:i},polarToCartesian(s,l,i,e.angle)))}else h.push(e)}));return{points:u,isRange:c,baseLinePoints:h}}({radiusAxis:e,angleAxis:t,displayedData:o.slice(s,l+1),dataKey:i,bandSize:a})}));function ownKeys$a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$a(Object(n),!0).forEach((function(t){_defineProperty$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$c.apply(null,arguments)}function getLegendItemColor$1(e,t){return e&&"none"!==e?e:t}var computeLegendPayloadFromRadarSectors=e=>{var{dataKey:t,name:n,stroke:i,fill:a,legendType:o,hide:s}=e;return[{inactive:s,dataKey:t,type:o,color:getLegendItemColor$1(i,a),value:getTooltipNameProp(n,t),payload:e}]};function getTooltipEntrySettings$3(e){var{dataKey:t,stroke:n,strokeWidth:i,fill:a,name:o,hide:s,tooltipType:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,nameKey:void 0,dataKey:t,name:getTooltipNameProp(o,t),hide:s,type:l,color:getLegendItemColor$1(n,a),unit:""}}}function Dots$2(e){var{points:t,props:n}=e,{dot:i,dataKey:a}=n;if(!i)return null;var o=filterProps(n,!1),s=filterProps(i,!0),l=t.map(((e,t)=>{var n=_objectSpread$a(_objectSpread$a(_objectSpread$a({key:"dot-".concat(t),r:3},o),s),{},{dataKey:a,cx:e.x,cy:e.y,index:t,payload:e});return function(e,t){return Ut.isValidElement(e)?Ut.cloneElement(e,t):"function"==typeof e?e(t):Ut.createElement(Dot,_extends$c({},t,{className:We("recharts-radar-dot","boolean"!=typeof e?e.className:"")}))}(i,n)}));return Ut.createElement(oi,{className:"recharts-radar-dots"},l)}function StaticPolygon(e){var{points:t,props:n,showLabels:i}=e;if(null==t)return null;var a,{shape:o,isRange:s,baseLinePoints:l,connectNulls:c}=n;return a=Ut.isValidElement(o)?Ut.cloneElement(o,_objectSpread$a(_objectSpread$a({},n),{},{points:t})):"function"==typeof o?o(_objectSpread$a(_objectSpread$a({},n),{},{points:t})):Ut.createElement(Polygon,_extends$c({},filterProps(n,!0),{onMouseEnter:e=>{var{onMouseEnter:t}=n;t&&t(n,e)},onMouseLeave:e=>{var{onMouseLeave:t}=n;t&&t(n,e)},points:t,baseLinePoints:s?l:null,connectNulls:c})),Ut.createElement(oi,{className:"recharts-radar-polygon"},a,Ut.createElement(Dots$2,{props:n,points:t}),i&&LabelList.renderCallByParent(n,t))}function PolygonWithAnimation(e){var{props:t,previousPointsRef:n}=e,{points:i,isAnimationActive:a,animationBegin:o,animationDuration:s,animationEasing:l,onAnimationEnd:c,onAnimationStart:u}=t,d=n.current,h=useAnimationId(t,"recharts-radar-"),[p,f]=Ut.useState(!0),m=Ut.useCallback((()=>{"function"==typeof c&&c(),f(!1)}),[c]),g=Ut.useCallback((()=>{"function"==typeof u&&u(),f(!0)}),[u]);return Ut.createElement(Animate,{begin:o,duration:s,isActive:a,easing:l,from:{t:0},to:{t:1},key:"radar-".concat(h),onAnimationEnd:m,onAnimationStart:g},(e=>{var{t:a}=e,o=d&&d.length/i.length,s=1===a?i:i.map(((e,t)=>{var n=d&&d[Math.floor(t*o)];if(n){var i=interpolateNumber$1(n.x,e.x),s=interpolateNumber$1(n.y,e.y);return _objectSpread$a(_objectSpread$a({},e),{},{x:i(a),y:s(a)})}var l=interpolateNumber$1(e.cx,e.x),c=interpolateNumber$1(e.cy,e.y);return _objectSpread$a(_objectSpread$a({},e),{},{x:l(a),y:c(a)})}));return a>0&&(n.current=s),Ut.createElement(StaticPolygon,{points:s,props:t,showLabels:!p})}))}function RenderPolygon(e){var{points:t,isAnimationActive:n,isRange:i}=e,a=Ut.useRef(void 0),o=a.current;return!(n&&t&&t.length)||i||o&&o===t?Ut.createElement(StaticPolygon,{points:t,props:e,showLabels:!0}):Ut.createElement(PolygonWithAnimation,{props:e,previousPointsRef:a})}var Tp={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!os,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class RadarWithState extends Ut.PureComponent{render(){var{hide:e,className:t,points:n}=this.props;if(e)return null;var i=We("recharts-radar",t);return Ut.createElement(Ut.Fragment,null,Ut.createElement(oi,{className:i},Ut.createElement(RenderPolygon,this.props)),Ut.createElement(ActivePoints,{points:n,mainColor:getLegendItemColor$1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function RadarImpl(e){var t=useIsPanorama(),n=useAppSelector((n=>Pp(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey)));return Ut.createElement(RadarWithState,_extends$c({},e,{points:null==n?void 0:n.points,baseLinePoints:null==n?void 0:n.baseLinePoints,isRange:null==n?void 0:n.isRange}))}class Radar extends Ut.PureComponent{render(){return Ut.createElement(Ut.Fragment,null,Ut.createElement(PolarGraphicalItemContext,{data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId,stackId:void 0,barSize:void 0,type:"radar"}),Ut.createElement(SetPolarLegendPayload,{legendPayload:computeLegendPayloadFromRadarSectors(this.props)}),Ut.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings$3,args:this.props}),Ut.createElement(RadarImpl,this.props))}}_defineProperty$e(Radar,"displayName","Radar"),_defineProperty$e(Radar,"defaultProps",Tp);var ReportBar=()=>{var e=useAppDispatch();return Ut.useEffect((()=>(e(lp()),()=>{e(cp())}))),null},Lp=["children"];var noop=()=>{},$p=Ut.createContext({addErrorBar:noop,removeErrorBar:noop}),Ip={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Mp=Ut.createContext(Ip);function SetErrorBarContext(e){var{children:t}=e,n=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Lp);return Ut.createElement(Mp.Provider,{value:n},t)}var CartesianGraphicalItemContext=e=>{var{children:t,xAxisId:n,yAxisId:i,zAxisId:a,dataKey:o,data:s,stackId:l,hide:c,type:u,barSize:d}=e,[h,p]=Ut.useState([]),f=Ut.useCallback((e=>{p((t=>[...t,e]))}),[p]),m=Ut.useCallback((e=>{p((t=>t.filter((t=>t!==e))))}),[p]),g=useIsPanorama();return Ut.createElement($p.Provider,{value:{addErrorBar:f,removeErrorBar:m}},Ut.createElement(SetCartesianGraphicalItem,{type:u,data:s,xAxisId:n,yAxisId:i,zAxisId:a,dataKey:o,errorBars:h,stackId:l,hide:c,barSize:d,isPanorama:g}),t)};function ReportErrorBarSettings(e){var{addErrorBar:t,removeErrorBar:n}=Ut.useContext($p);return Ut.useEffect((()=>(t(e),()=>{n(e)})),[t,n,e]),null}var Rp=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function _defineProperty$d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$b.apply(null,arguments)}function ErrorBarImpl(e){var{direction:t,width:n,dataKey:i,isAnimationActive:a,animationBegin:o,animationDuration:s,animationEasing:l}=e,c=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Rp),u=filterProps(c,!1),{data:d,dataPointFormatter:h,xAxisId:p,yAxisId:f,errorBarOffset:m}=Ut.useContext(Mp),g=(e=>{var t=useIsPanorama();return useAppSelector((n=>bu(n,"xAxis",e,t)))})(p),v=(e=>{var t=useIsPanorama();return useAppSelector((n=>bu(n,"yAxis",e,t)))})(f);if(null==(null==g?void 0:g.scale)||null==(null==v?void 0:v.scale)||null==d)return null;if("x"===t&&"number"!==g.type)return null;var b=d.map((e=>{var{x:c,y:d,value:p,errorVal:f}=h(e,i,t);if(!f)return null;var b,_,j=[];if(Array.isArray(f)?[b,_]=f:b=_=f,"x"===t){var{scale:w}=g,S=d+m,A=S+n,C=S-n,O=w(p-b),E=w(p+_);j.push({x1:E,y1:A,x2:E,y2:C}),j.push({x1:O,y1:S,x2:E,y2:S}),j.push({x1:O,y1:A,x2:O,y2:C})}else if("y"===t){var{scale:k}=v,P=c+m,T=P-n,L=P+n,$=k(p-b),I=k(p+_);j.push({x1:T,y1:I,x2:L,y2:I}),j.push({x1:P,y1:$,x2:P,y2:I}),j.push({x1:T,y1:$,x2:L,y2:$})}var M="".concat(c+m,"px ").concat(d+m,"px");return Ut.createElement(oi,_extends$b({className:"recharts-errorBar",key:"bar-".concat(j.map((e=>"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2))))},u),j.map((e=>{var t=a?{transformOrigin:"".concat(e.x1-5,"px")}:void 0;return Ut.createElement(Animate,{from:{transform:"scaleY(0)",transformOrigin:M},to:{transform:"scaleY(1)",transformOrigin:M},begin:o,easing:l,isActive:a,duration:s,key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2),style:{transformOrigin:M}},Ut.createElement("line",_extends$b({},e,{style:t})))})))}));return Ut.createElement(oi,{className:"recharts-errorBars"},b)}var Dp=Ut.createContext(void 0);function SetErrorBarPreferredDirection(e){var{direction:t,children:n}=e;return Ut.createElement(Dp.Provider,{value:t},n)}var Np={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function ErrorBarInternal(e){var t,n,i=(t=e.direction,n=Ut.useContext(Dp),null!=t?t:null!=n?n:"x"),{width:a,isAnimationActive:o,animationBegin:s,animationDuration:l,animationEasing:c}=resolveDefaultProps(e,Np);return Ut.createElement(Ut.Fragment,null,Ut.createElement(ReportErrorBarSettings,{dataKey:e.dataKey,direction:i}),Ut.createElement(ErrorBarImpl,_extends$b({},e,{direction:i,width:a,isAnimationActive:o,animationBegin:s,animationDuration:l,animationEasing:c})))}class ErrorBar extends Ut.Component{render(){return Ut.createElement(ErrorBarInternal,this.props)}}_defineProperty$d(ErrorBar,"defaultProps",Np),_defineProperty$d(ErrorBar,"displayName","ErrorBar");var zp=["x","y"];function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$a.apply(null,arguments)}function ownKeys$9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$9(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$9(Object(n),!0).forEach((function(t){_defineProperty$c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function typeguardBarRectangleProps(e,t){var{x:n,y:i}=e,a=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,zp),o="".concat(n),s=parseInt(o,10),l="".concat(i),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),h="".concat(t.width||a.width),p=parseInt(h,10);return _objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({},t),a),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:p,name:t.name,radius:t.radius})}function BarRectangle(e){return Ut.createElement(Shape,_extends$a({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},e))}var minPointSizeCallback=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(n,i)=>{if(isNumber(e))return e;var a=isNumber(n)||isNullish(n);return a?e(n,i):(a||function(){throw new Error("Invariant failed")}(),t)}};function useNeedsClip(e,t){var n,i,a=useAppSelector((t=>selectXAxisSettings(t,e))),o=useAppSelector((e=>selectYAxisSettings(e,t))),s=null!==(n=null==a?void 0:a.allowDataOverflow)&&void 0!==n?n:kc.allowDataOverflow,l=null!==(i=null==o?void 0:o.allowDataOverflow)&&void 0!==i?i:Pc.allowDataOverflow;return{needClip:s||l,needClipX:s,needClipY:l}}function GraphicalItemClipPath(e){var{xAxisId:t,yAxisId:n,clipPathId:i}=e,a=usePlotArea(),{needClipX:o,needClipY:s,needClip:l}=useNeedsClip(t,n);if(!l)return null;var{x:c,y:u,width:d,height:h}=a;return Ut.createElement("clipPath",{id:"clipPath-".concat(i)},Ut.createElement("rect",{x:o?c:c-d/2,y:s?u:u-h/2,width:o?d:2*d,height:s?h:2*h}))}var Bp=["onMouseEnter","onMouseLeave","onClick"],Fp=["value","background","tooltipPosition"],Zp=["onMouseEnter","onClick","onMouseLeave"];function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$9.apply(null,arguments)}function ownKeys$8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$8(Object(n),!0).forEach((function(t){_defineProperty$b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutProperties$a(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var computeLegendPayloadFromBarData=e=>{var{dataKey:t,name:n,fill:i,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:i,value:getTooltipNameProp(n,t),payload:e}]};function getTooltipEntrySettings$2(e){var{dataKey:t,stroke:n,strokeWidth:i,fill:a,name:o,hide:s,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:getTooltipNameProp(o,t),hide:s,type:e.tooltipType,color:e.fill,unit:l}}}function BarBackground(e){var t=useAppSelector(pd),{data:n,dataKey:i,background:a,allOtherBarProps:o}=e,{onMouseEnter:s,onMouseLeave:l,onClick:c}=o,u=_objectWithoutProperties$a(o,Bp),d=useMouseEnterItemDispatch(s,i),h=useMouseLeaveItemDispatch(l),p=useMouseClickItemDispatch(c,i);if(!a||null==n)return null;var f=filterProps(a,!1);return Ut.createElement(Ut.Fragment,null,n.map(((e,n)=>{var{value:o,background:s,tooltipPosition:l}=e,c=_objectWithoutProperties$a(e,Fp);if(!s)return null;var m=d(e,n),g=h(e,n),v=p(e,n),b=_objectSpread$8(_objectSpread$8(_objectSpread$8(_objectSpread$8(_objectSpread$8({option:a,isActive:String(n)===t},c),{},{fill:"#eee"},s),f),adaptEventsOfChild(u,e,n)),{},{onMouseEnter:m,onMouseLeave:g,onClick:v,dataKey:i,index:n,className:"recharts-bar-background-rectangle"});return Ut.createElement(BarRectangle,_extends$9({key:"background-bar-".concat(n)},b))})))}function BarRectangles(e){var{data:t,props:n,showLabels:i}=e,a=filterProps(n,!1),{shape:o,dataKey:s,activeBar:l}=n,c=useAppSelector(pd),u=useAppSelector(md),{onMouseEnter:d,onClick:h,onMouseLeave:p}=n,f=_objectWithoutProperties$a(n,Zp),m=useMouseEnterItemDispatch(d,s),g=useMouseLeaveItemDispatch(p),v=useMouseClickItemDispatch(h,s);return t?Ut.createElement(Ut.Fragment,null,t.map(((e,t)=>{var n=l&&String(t)===c&&(null==u||s===u),i=n?l:o,d=_objectSpread$8(_objectSpread$8(_objectSpread$8({},a),e),{},{isActive:n,option:i,index:t,dataKey:s});return Ut.createElement(oi,_extends$9({className:"recharts-bar-rectangle"},adaptEventsOfChild(f,e,t),{onMouseEnter:m(e,t),onMouseLeave:g(e,t),onClick:v(e,t),key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(t)}),Ut.createElement(BarRectangle,d))})),i&&LabelList.renderCallByParent(n,t)):null}function RectanglesWithAnimation(e){var{props:t,previousRectanglesRef:n}=e,{data:i,layout:a,isAnimationActive:o,animationBegin:s,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=n.current,p=useAnimationId(t,"recharts-bar-"),[f,m]=Ut.useState(!1),g=Ut.useCallback((()=>{"function"==typeof u&&u(),m(!1)}),[u]),v=Ut.useCallback((()=>{"function"==typeof d&&d(),m(!0)}),[d]);return Ut.createElement(Animate,{begin:s,duration:l,isActive:o,easing:c,from:{t:0},to:{t:1},onAnimationEnd:g,onAnimationStart:v,key:p},(e=>{var{t:o}=e,s=1===o?i:i.map(((e,t)=>{var n=h&&h[t];if(n){var i=interpolateNumber$1(n.x,e.x),s=interpolateNumber$1(n.y,e.y),l=interpolateNumber$1(n.width,e.width),c=interpolateNumber$1(n.height,e.height);return _objectSpread$8(_objectSpread$8({},e),{},{x:i(o),y:s(o),width:l(o),height:c(o)})}if("horizontal"===a){var u=interpolateNumber$1(0,e.height)(o);return _objectSpread$8(_objectSpread$8({},e),{},{y:e.y+e.height-u,height:u})}var d=interpolateNumber$1(0,e.width)(o);return _objectSpread$8(_objectSpread$8({},e),{},{width:d})}));return o>0&&(n.current=s),Ut.createElement(oi,null,Ut.createElement(BarRectangles,{props:t,data:s,showLabels:!f}))}))}function RenderRectangles(e){var{data:t,isAnimationActive:n}=e,i=Ut.useRef(null);return n&&t&&t.length&&(null==i.current||i.current!==t)?Ut.createElement(RectanglesWithAnimation,{previousRectanglesRef:i,props:e}):Ut.createElement(BarRectangles,{props:e,data:t,showLabels:!0})}var errorBarDataPointFormatter$1=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:getValueByDataKey(e,t)}};class BarWithState extends Ut.PureComponent{constructor(){super(...arguments),_defineProperty$b(this,"id",uniqueId("recharts-bar-"))}render(){var{hide:e,data:t,dataKey:n,className:i,xAxisId:a,yAxisId:o,needClip:s,background:l,id:c,layout:u}=this.props;if(e)return null;var d=We("recharts-bar",i),h=isNullish(c)?this.id:c;return Ut.createElement(oi,{className:d},s&&Ut.createElement("defs",null,Ut.createElement(GraphicalItemClipPath,{clipPathId:h,xAxisId:a,yAxisId:o})),Ut.createElement(oi,{className:"recharts-bar-rectangles",clipPath:s?"url(#clipPath-".concat(h,")"):null},Ut.createElement(BarBackground,{data:t,dataKey:n,background:l,allOtherBarProps:this.props}),Ut.createElement(RenderRectangles,this.props)),Ut.createElement(SetErrorBarPreferredDirection,{direction:"horizontal"===u?"y":"x"},this.props.children))}}var Up={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!os,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0};function BarImpl(e){var t,{xAxisId:n,yAxisId:i,hide:a,legendType:o,minPointSize:s,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h}=resolveDefaultProps(e,Up),{needClip:p}=useNeedsClip(n,i),f=useChartLayout(),m=useIsPanorama(),g=Ut.useMemo((()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:s,stackId:getNormalizedStackId(e.stackId)})),[e.barSize,e.dataKey,e.maxBarSize,s,e.stackId]),v=findAllByType(e.children,Cell),b=useAppSelector((e=>Qp(e,n,i,m,g,v)));if("vertical"!==f&&"horizontal"!==f)return null;var _=null==b?void 0:b[0];return t=null==_||null==_.height||null==_.width?0:"vertical"===f?_.height/2:_.width/2,Ut.createElement(SetErrorBarContext,{xAxisId:n,yAxisId:i,data:b,dataPointFormatter:errorBarDataPointFormatter$1,errorBarOffset:t},Ut.createElement(BarWithState,_extends$9({},e,{layout:f,needClip:p,data:b,xAxisId:n,yAxisId:i,hide:a,legendType:o,minPointSize:s,activeBar:l,animationBegin:c,animationDuration:u,animationEasing:d,isAnimationActive:h})))}function computeBarRectangles(e){var{layout:t,barSettings:{dataKey:n,minPointSize:i},pos:a,bandSize:o,xAxis:s,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:h,offset:p,cells:f}=e,m="horizontal"===t?l:s,g=d?m.scale.domain():null,v=(e=>{var{numericAxis:t}=e,n=t.scale.domain();if("number"===t.type){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]})({numericAxis:m});return h.map(((e,h)=>{var m,b,_,j,w,S;d?m=((e,t)=>{if(!t||2!==t.length||!isNumber(t[0])||!isNumber(t[1]))return e;var n=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!isNumber(e[0])||e[0]<n)&&(a[0]=n),(!isNumber(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a})(d[h],g):(m=getValueByDataKey(e,n),Array.isArray(m)||(m=[v,m]));var A=minPointSizeCallback(i,0)(m[1],h);if("horizontal"===t){var C,[O,E]=[l.scale(m[0]),l.scale(m[1])];b=getCateCoordinateOfBar({axis:s,ticks:c,bandSize:o,offset:a.offset,entry:e,index:h}),_=null!==(C=null!=E?E:O)&&void 0!==C?C:void 0,j=a.size;var k=O-E;if(w=isNan(k)?0:k,S={x:b,y:p.top,width:j,height:p.height},Math.abs(A)>0&&Math.abs(w)<Math.abs(A)){var P=mathSign(w||A)*(Math.abs(A)-Math.abs(w));_-=P,w+=P}}else{var[T,L]=[s.scale(m[0]),s.scale(m[1])];if(b=T,_=getCateCoordinateOfBar({axis:l,ticks:u,bandSize:o,offset:a.offset,entry:e,index:h}),j=L-T,w=a.size,S={x:p.left,y:_,width:p.width,height:w},Math.abs(A)>0&&Math.abs(j)<Math.abs(A))j+=mathSign(j||A)*(Math.abs(A)-Math.abs(j))}return _objectSpread$8(_objectSpread$8({},e),{},{x:b,y:_,width:j,height:w,value:d?m:m[1],payload:e,background:S,tooltipPosition:{x:b+j/2,y:_+w/2}},f&&f[h]&&f[h].props)}))}class Bar extends Ut.PureComponent{render(){return Ut.createElement(CartesianGraphicalItemContext,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},Ut.createElement(ReportBar,null),Ut.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromBarData(this.props)}),Ut.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings$2,args:this.props}),Ut.createElement(BarImpl,this.props))}}function ownKeys$7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$7(Object(n),!0).forEach((function(t){_defineProperty$a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_defineProperty$b(Bar,"displayName","Bar"),_defineProperty$b(Bar,"defaultProps",Up);var pickBarSettings=(e,t,n,i,a)=>a,getBarSize=(e,t,n)=>{var i=null!=n?n:e;if(!isNullish(i))return getPercentValue(i,t,0)},Kp=Da([selectChartLayout,selectUnfilteredCartesianItems,(e,t)=>t,(e,t,n)=>n,(e,t,n,i)=>i],((e,t,n,i,a)=>t.filter((t=>"horizontal"===e?t.xAxisId===n:t.yAxisId===i)).filter((e=>e.isPanorama===a)).filter((e=>!1===e.hide)).filter((e=>"bar"===e.type))));function isStacked(e){return null!=e.stackId&&null!=e.dataKey}var Wp=Da([Kp,e=>e.rootProps.barSize,(e,t,n)=>"horizontal"===selectChartLayout(e)?selectCartesianAxisSize(e,"xAxis",t):selectCartesianAxisSize(e,"yAxis",n)],((e,t,n)=>{var i=e.filter(isStacked),a=e.filter((e=>null==e.stackId)),o=i.reduce(((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e)),{});return[...Object.entries(o).map((e=>{var[i,a]=e;return{stackId:i,dataKeys:a.map((e=>e.dataKey)),barSize:getBarSize(t,n,a[0].barSize)}})),...a.map((e=>({stackId:void 0,dataKeys:[e.dataKey].filter((e=>null!=e)),barSize:getBarSize(t,n,e.barSize)})))]})),selectAxisBandSize=(e,t,n,i)=>{var a,o;return"horizontal"===selectChartLayout(e)?(a=bu(e,"xAxis",t,i),o=vu(e,"xAxis",t,i)):(a=bu(e,"yAxis",n,i),o=vu(e,"yAxis",n,i)),getBandSizeOfAxis(a,o)};var Hp,Gp,Yp,qp=Da([Wp,selectRootMaxBarSize,e=>e.rootProps.barGap,selectBarCategoryGap,(e,t,n,i,a)=>{var o,s,l,c,u=selectChartLayout(e),d=selectRootMaxBarSize(e),{maxBarSize:h}=a,p=isNullish(h)?d:h;return"horizontal"===u?(l=bu(e,"xAxis",t,i),c=vu(e,"xAxis",t,i)):(l=bu(e,"yAxis",n,i),c=vu(e,"yAxis",n,i)),null!==(o=null!==(s=getBandSizeOfAxis(l,c,!0))&&void 0!==s?s:p)&&void 0!==o?o:0},selectAxisBandSize,(e,t,n,i,a)=>a.maxBarSize],((e,t,n,i,a,o,s)=>{var l=isNullish(s)?t:s,c=function(e,t,n,i,a){var o=i.length;if(!(o<1)){var s,l=getPercentValue(e,n,0,!0),c=[];if(isWellBehavedNumber(i[0].barSize)){var u=!1,d=n/o,h=i.reduce(((e,t)=>e+(t.barSize||0)),0);(h+=(o-1)*l)>=n&&(h-=(o-1)*l,l=0),h>=n&&d>0&&(u=!0,h=o*(d*=.9));var p={offset:((n-h)/2|0)-l,size:0};s=i.reduce(((e,t)=>{var n,i=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:p.offset+p.size+l,size:u?d:null!==(n=t.barSize)&&void 0!==n?n:0}}];return p=i[i.length-1].position,i}),c)}else{var f=getPercentValue(t,n,0,!0);n-2*f-(o-1)*l<=0&&(l=0);var m=(n-2*f-(o-1)*l)/o;m>1&&(m>>=0);var g=isWellBehavedNumber(a)?Math.min(m,a):m;s=i.reduce(((e,t,n)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:f+(m+l)*n+(m-g)/2,size:g}}]),c)}return s}}(n,i,a!==o?a:o,e,l);return a!==o&&null!=c&&(c=c.map((e=>_objectSpread$7(_objectSpread$7({},e),{},{position:_objectSpread$7(_objectSpread$7({},e.position),{},{offset:e.position.offset-a/2})})))),c})),Vp=Da([qp,pickBarSettings],((e,t)=>{if(null!=e){var n=e.find((e=>e.stackId===t.stackId&&e.dataKeys.includes(t.dataKey)));if(null!=n)return n.position}})),Xp=Da([selectUnfilteredCartesianItems,pickBarSettings],((e,t)=>{if(e.some((e=>"bar"===e.type&&t.dataKey===e.dataKey&&t.stackId===e.stackId&&t.stackId===e.stackId)))return t})),Jp=Da([(e,t,n,i)=>"horizontal"===selectChartLayout(e)?Nc(e,"yAxis",n,i):Nc(e,"xAxis",t,i),pickBarSettings],((e,t)=>{if(e&&null!=(null==t?void 0:t.dataKey)){var{stackId:n}=t;if(null!=n){var i=e[n];if(i){var{stackedData:a}=i;if(a)return a.find((e=>e.key===t.dataKey))}}}})),Qp=Da([Ko,(e,t,n,i)=>bu(e,"xAxis",t,i),(e,t,n,i)=>bu(e,"yAxis",n,i),(e,t,n,i)=>vu(e,"xAxis",t,i),(e,t,n,i)=>vu(e,"yAxis",n,i),Vp,selectChartLayout,selectChartDataWithIndexesIfNotInPanorama,selectAxisBandSize,Jp,Xp,(e,t,n,i,a,o)=>o],((e,t,n,i,a,o,s,l,c,u,d,h)=>{var{chartData:p,dataStartIndex:f,dataEndIndex:m}=l;if(null!=d&&null!=o&&("horizontal"===s||"vertical"===s)&&null!=t&&null!=n&&null!=i&&null!=a&&null!=c){var g,{data:v}=d;if(null!=(g=null!=v&&v.length>0?v:null==p?void 0:p.slice(f,m+1)))return computeBarRectangles({layout:s,barSettings:d,pos:o,bandSize:c,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:a,stackedData:u,displayedData:g,offset:e,cells:h})}})),ChartDataContextProvider=e=>{var{chartData:t}=e,n=useAppDispatch(),i=useIsPanorama();return Ut.useEffect((()=>i?()=>{}:(n(Bd(t)),()=>{n(Bd(void 0))})),[t,n,i]),null},ef={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},tf=po({name:"brush",initialState:ef,reducers:{setBrushSettings:(e,t)=>null==t.payload?ef:t.payload}}),{setBrushSettings:rf}=tf.actions,nf=tf.reducer;class ScaleHelper{static create(e){return new ScaleHelper(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}if(t){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var t=this.range(),n=t[0],i=t[t.length-1];return n<=i?e>=n&&e<=i:e>=i&&e<=n}}Hp=ScaleHelper,Yp=1e-4,(Gp=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(Gp="EPS"))in Hp?Object.defineProperty(Hp,Gp,{value:Yp,enumerable:!0,configurable:!0,writable:!0}):Hp[Gp]=Yp;var af=po({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=current(e).dots.findIndex((e=>e===t.payload));-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=current(e).areas.findIndex((e=>e===t.payload));-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=current(e).lines.findIndex((e=>e===t.payload));-1!==n&&e.lines.splice(n,1)}}}),{addDot:of,removeDot:sf,addArea:lf,removeArea:cf,addLine:uf,removeLine:df}=af.actions,hf=af.reducer,pf=Ut.createContext(void 0),ClipPathProvider=e=>{var{children:t}=e,[n]=Ut.useState("".concat(uniqueId("recharts"),"-clip")),i=usePlotArea();if(null==i)return null;var{x:a,y:o,width:s,height:l}=i;return Ut.createElement(pf.Provider,{value:n},Ut.createElement("defs",null,Ut.createElement("clipPath",{id:n},Ut.createElement("rect",{x:a,y:o,height:l,width:s}))),t)};function shallowEqual(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var i in t)if({}.hasOwnProperty.call(t,i)&&!{}.hasOwnProperty.call(e,i))return!1;return!0}function getEveryNthWithCondition(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var i=[],a=0;a<e.length;a+=t)i.push(e[a]);return i}function getAngledTickWidth(e,t,n){return function(e){var{width:t,height:n}=e,i=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),a=i*Math.PI/180,o=Math.atan(n/t),s=a>o&&a<Math.PI-o?n/Math.sin(a):t/Math.cos(a);return Math.abs(s)}({width:e.width+t.width,height:e.height+t.height},n)}function isVisible(e,t,n,i,a){if(e*t<e*i||e*t>e*a)return!1;var o=n();return e*(t-e*o/2-i)>=0&&e*(t+e*o/2-a)<=0}function ownKeys$6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$6(Object(n),!0).forEach((function(t){_defineProperty$8(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$8(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getTicks(e,t,n){var i,{tick:a,ticks:o,viewBox:s,minTickGap:l,orientation:c,interval:u,tickFormatter:d,unit:h,angle:p}=e;if(!o||!o.length||!a)return[];if(isNumber(u)||os)return null!==(i=function(e,t){return getEveryNthWithCondition(e,t+1)}(o,isNumber(u)?u:0))&&void 0!==i?i:[];var f=[],m="top"===c||"bottom"===c?"width":"height",g=h&&"width"===m?getStringSize(h,{fontSize:t,letterSpacing:n}):{width:0,height:0},getTickSize=(e,i)=>{var a="function"==typeof d?d(e.value,i):e.value;return"width"===m?getAngledTickWidth(getStringSize(a,{fontSize:t,letterSpacing:n}),g,p):getStringSize(a,{fontSize:t,letterSpacing:n})[m]},v=o.length>=2?mathSign(o[1].coordinate-o[0].coordinate):1,b=function(e,t,n){var i="width"===n,{x:a,y:o,width:s,height:l}=e;return 1===t?{start:i?a:o,end:i?a+s:o+l}:{start:i?a+s:o+l,end:i?a:o}}(s,v,m);return"equidistantPreserveStart"===u?function(e,t,n,i,a){for(var o,s=(i||[]).slice(),{start:l,end:c}=t,u=0,d=1,h=l,_loop=function(){var t=null==i?void 0:i[u];if(void 0===t)return{v:getEveryNthWithCondition(i,d)};var o,s=u,getSize=()=>(void 0===o&&(o=n(t,s)),o),p=t.coordinate,f=0===u||isVisible(e,p,getSize,h,c);f||(u=0,h=l,d+=1),f&&(h=p+e*(getSize()/2+a),u+=d)};d<=s.length;)if(o=_loop())return o.v;return[]}(v,b,getTickSize,o,l):(f="preserveStart"===u||"preserveStartEnd"===u?function(e,t,n,i,a,o){var s=(i||[]).slice(),l=s.length,{start:c,end:u}=t;if(o){var d=i[l-1],h=n(d,l-1),p=e*(d.coordinate+e*h/2-u);s[l-1]=d=_objectSpread$6(_objectSpread$6({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),isVisible(e,d.tickCoord,(()=>h),c,u)&&(u=d.tickCoord-e*(h/2+a),s[l-1]=_objectSpread$6(_objectSpread$6({},d),{},{isShow:!0}))}for(var f=o?l-1:l,_loop2=function(t){var i,o=s[t],getSize=()=>(void 0===i&&(i=n(o,t)),i);if(0===t){var l=e*(o.coordinate-e*getSize()/2-c);s[t]=o=_objectSpread$6(_objectSpread$6({},o),{},{tickCoord:l<0?o.coordinate-l*e:o.coordinate})}else s[t]=o=_objectSpread$6(_objectSpread$6({},o),{},{tickCoord:o.coordinate});isVisible(e,o.tickCoord,getSize,c,u)&&(c=o.tickCoord+e*(getSize()/2+a),s[t]=_objectSpread$6(_objectSpread$6({},o),{},{isShow:!0}))},m=0;m<f;m++)_loop2(m);return s}(v,b,getTickSize,o,l,"preserveStartEnd"===u):function(e,t,n,i,a){for(var o=(i||[]).slice(),s=o.length,{start:l}=t,{end:c}=t,_loop=function(t){var i,u=o[t],getSize=()=>(void 0===i&&(i=n(u,t)),i);if(t===s-1){var d=e*(u.coordinate+e*getSize()/2-c);o[t]=u=_objectSpread$6(_objectSpread$6({},u),{},{tickCoord:d>0?u.coordinate-d*e:u.coordinate})}else o[t]=u=_objectSpread$6(_objectSpread$6({},u),{},{tickCoord:u.coordinate});isVisible(e,u.tickCoord,getSize,l,c)&&(c=u.tickCoord-e*(getSize()/2+a),o[t]=_objectSpread$6(_objectSpread$6({},u),{},{isShow:!0}))},u=s-1;u>=0;u--)_loop(u);return o}(v,b,getTickSize,o,l),f.filter((e=>e.isShow)))}var ff=["viewBox"],mf=["viewBox"];function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$8.apply(null,arguments)}function ownKeys$5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$5(Object(n),!0).forEach((function(t){_defineProperty$7(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _objectWithoutProperties$9(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _defineProperty$7(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class CartesianAxis extends Ut.Component{constructor(e){super(e),this.tickRefs=Ut.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,t){var{viewBox:n}=e,i=_objectWithoutProperties$9(e,ff),a=this.props,{viewBox:o}=a,s=_objectWithoutProperties$9(a,mf);return!shallowEqual(n,o)||!shallowEqual(i,s)||!shallowEqual(t,this.state)}getTickLineCoord(e){var t,n,i,a,o,s,{x:l,y:c,width:u,height:d,orientation:h,tickSize:p,mirror:f,tickMargin:m}=this.props,g=f?-1:1,v=e.tickSize||p,b=isNumber(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=n=e.coordinate,s=(i=(a=c+ +!f*d)-g*v)-g*m,o=b;break;case"left":i=a=e.coordinate,o=(t=(n=l+ +!f*u)-g*v)-g*m,s=b;break;case"right":i=a=e.coordinate,o=(t=(n=l+ +f*u)+g*v)+g*m,s=b;break;default:t=n=e.coordinate,s=(i=(a=c+ +f*d)+g*v)+g*m,o=b}return{line:{x1:t,y1:i,x2:n,y2:a},tick:{x:o,y:s}}}getTickTextAnchor(){var e,{orientation:t,mirror:n}=this.props;switch(t){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}getTickVerticalAnchor(){var{orientation:e,mirror:t}=this.props;switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}renderAxisLine(){var{x:e,y:t,width:n,height:i,orientation:a,mirror:o,axisLine:s}=this.props,l=_objectSpread$5(_objectSpread$5(_objectSpread$5({},filterProps(this.props,!1)),filterProps(s,!1)),{},{fill:"none"});if("top"===a||"bottom"===a){var c=+("top"===a&&!o||"bottom"===a&&o);l=_objectSpread$5(_objectSpread$5({},l),{},{x1:e,y1:t+c*i,x2:e+n,y2:t+c*i})}else{var u=+("left"===a&&!o||"right"===a&&o);l=_objectSpread$5(_objectSpread$5({},l),{},{x1:e+u*n,y1:t,x2:e+u*n,y2:t+i})}return Ut.createElement("line",_extends$8({},l,{className:We("recharts-cartesian-axis-line",qn(s,"className"))}))}static renderTickItem(e,t,n){var i,a=We(t.className,"recharts-cartesian-axis-tick-value");if(Ut.isValidElement(e))i=Ut.cloneElement(e,_objectSpread$5(_objectSpread$5({},t),{},{className:a}));else if("function"==typeof e)i=e(_objectSpread$5(_objectSpread$5({},t),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";"boolean"!=typeof e&&(o=We(o,e.className)),i=Ut.createElement(dh,_extends$8({},t,{className:o}),n)}return i}renderTicks(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],{tickLine:i,stroke:a,tick:o,tickFormatter:s,unit:l}=this.props,c=getTicks(_objectSpread$5(_objectSpread$5({},this.props),{},{ticks:n}),e,t),u=this.getTickTextAnchor(),d=this.getTickVerticalAnchor(),h=filterProps(this.props,!1),p=filterProps(o,!1),f=_objectSpread$5(_objectSpread$5({},h),{},{fill:"none"},filterProps(i,!1)),m=c.map(((e,t)=>{var{line:n,tick:m}=this.getTickLineCoord(e),g=_objectSpread$5(_objectSpread$5(_objectSpread$5(_objectSpread$5({textAnchor:u,verticalAnchor:d},h),{},{stroke:"none",fill:a},p),m),{},{index:t,payload:e,visibleTicksCount:c.length,tickFormatter:s});return Ut.createElement(oi,_extends$8({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},adaptEventsOfChild(this.props,e,t)),i&&Ut.createElement("line",_extends$8({},f,n,{className:We("recharts-cartesian-axis-tick-line",qn(i,"className"))})),o&&CartesianAxis.renderTickItem(o,g,"".concat("function"==typeof s?s(e.value,t):e.value).concat(l||"")))}));return m.length>0?Ut.createElement("g",{className:"recharts-cartesian-axis-ticks"},m):null}render(){var{axisLine:e,width:t,height:n,className:i,hide:a}=this.props;if(a)return null;var{ticks:o}=this.props;return null!=t&&t<=0||null!=n&&n<=0?null:Ut.createElement(oi,{className:We("recharts-cartesian-axis",i),ref:e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(t);var n=t[0];if(n){var i=window.getComputedStyle(n).fontSize,a=window.getComputedStyle(n).letterSpacing;i===this.state.fontSize&&a===this.state.letterSpacing||this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),Label.renderCallByParent(this.props))}}_defineProperty$7(CartesianAxis,"displayName","CartesianAxis"),_defineProperty$7(CartesianAxis,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var gf=["x1","y1","x2","y2","key"],yf=["offset"],xf=["xAxisId","yAxisId"],vf=["xAxisId","yAxisId"];function ownKeys$4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$4(Object(n),!0).forEach((function(t){_defineProperty$6(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$6(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$7.apply(null,arguments)}function _objectWithoutProperties$8(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Background=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:n,x:i,y:a,width:o,height:s,ry:l}=e;return Ut.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function renderLineItem(e,t){var n;if(Ut.isValidElement(e))n=Ut.cloneElement(e,t);else if("function"==typeof e)n=e(t);else{var{x1:i,y1:a,x2:o,y2:s,key:l}=t,c=_objectWithoutProperties$8(t,gf),u=filterProps(c,!1),{offset:d}=u,h=_objectWithoutProperties$8(u,yf);n=Ut.createElement("line",_extends$7({},h,{x1:i,y1:a,x2:o,y2:s,fill:"none",key:l}))}return n}function HorizontalGridLines(e){var{x:t,width:n,horizontal:i=!0,horizontalPoints:a}=e;if(!i||!a||!a.length)return null;var{xAxisId:o,yAxisId:s}=e,l=_objectWithoutProperties$8(e,xf),c=a.map(((e,a)=>{var o=_objectSpread$4(_objectSpread$4({},l),{},{x1:t,y1:e,x2:t+n,y2:e,key:"line-".concat(a),index:a});return renderLineItem(i,o)}));return Ut.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function VerticalGridLines(e){var{y:t,height:n,vertical:i=!0,verticalPoints:a}=e;if(!i||!a||!a.length)return null;var{xAxisId:o,yAxisId:s}=e,l=_objectWithoutProperties$8(e,vf),c=a.map(((e,a)=>{var o=_objectSpread$4(_objectSpread$4({},l),{},{x1:e,y1:t,x2:e,y2:t+n,key:"line-".concat(a),index:a});return renderLineItem(i,o)}));return Ut.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function HorizontalStripes(e){var{horizontalFill:t,fillOpacity:n,x:i,y:a,width:o,height:s,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=l.map((e=>Math.round(e+a-a))).sort(((e,t)=>e-t));a!==u[0]&&u.unshift(0);var d=u.map(((e,l)=>{var c=!u[l+1]?a+s-e:u[l+1]-e;if(c<=0)return null;var d=l%t.length;return Ut.createElement("rect",{key:"react-".concat(l),y:e,x:i,height:c,width:o,stroke:"none",fill:t[d],fillOpacity:n,className:"recharts-cartesian-grid-bg"})}));return Ut.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function VerticalStripes(e){var{vertical:t=!0,verticalFill:n,fillOpacity:i,x:a,y:o,width:s,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var u=c.map((e=>Math.round(e+a-a))).sort(((e,t)=>e-t));a!==u[0]&&u.unshift(0);var d=u.map(((e,t)=>{var c=!u[t+1]?a+s-e:u[t+1]-e;if(c<=0)return null;var d=t%n.length;return Ut.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:c,height:l,stroke:"none",fill:n[d],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return Ut.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var defaultVerticalCoordinatesGenerator=(e,t)=>{var{xAxis:n,width:i,height:a,offset:o}=e;return getCoordinatesOfGrid(getTicks(_objectSpread$4(_objectSpread$4(_objectSpread$4({},CartesianAxis.defaultProps),n),{},{ticks:getTicksOfAxis(n),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,t)},defaultHorizontalCoordinatesGenerator=(e,t)=>{var{yAxis:n,width:i,height:a,offset:o}=e;return getCoordinatesOfGrid(getTicks(_objectSpread$4(_objectSpread$4(_objectSpread$4({},CartesianAxis.defaultProps),n),{},{ticks:getTicksOfAxis(n),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,t)},bf={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function CartesianGrid(e){var t=useChartWidth(),n=useChartHeight(),i=useOffsetInternal(),a=_objectSpread$4(_objectSpread$4({},resolveDefaultProps(e,bf)),{},{x:isNumber(e.x)?e.x:i.left,y:isNumber(e.y)?e.y:i.top,width:isNumber(e.width)?e.width:i.width,height:isNumber(e.height)?e.height:i.height}),{xAxisId:o,yAxisId:s,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:p,verticalValues:f}=a,m=useIsPanorama(),g=useAppSelector((e=>yu(e,"xAxis",o,m))),v=useAppSelector((e=>yu(e,"yAxis",s,m)));if(!isNumber(u)||u<=0||!isNumber(d)||d<=0||!isNumber(l)||l!==+l||!isNumber(c)||c!==+c)return null;var b=a.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,_=a.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,{horizontalPoints:j,verticalPoints:w}=a;if(!(j&&j.length||"function"!=typeof _)){var S=p&&p.length,A=_({yAxis:v?_objectSpread$4(_objectSpread$4({},v),{},{ticks:S?p:v.ticks}):void 0,width:t,height:n,offset:i},!!S||h);warn(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(j=A)}if(!(w&&w.length||"function"!=typeof b)){var C=f&&f.length,O=b({xAxis:g?_objectSpread$4(_objectSpread$4({},g),{},{ticks:C?f:g.ticks}):void 0,width:t,height:n,offset:i},!!C||h);warn(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(w=O)}return Ut.createElement("g",{className:"recharts-cartesian-grid"},Ut.createElement(Background,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),Ut.createElement(HorizontalStripes,_extends$7({},a,{horizontalPoints:j})),Ut.createElement(VerticalStripes,_extends$7({},a,{verticalPoints:w})),Ut.createElement(HorizontalGridLines,_extends$7({},a,{offset:i,horizontalPoints:j,xAxis:g,yAxis:v})),Ut.createElement(VerticalGridLines,_extends$7({},a,{offset:i,verticalPoints:w,xAxis:g,yAxis:v})))}CartesianGrid.displayName="CartesianGrid";var selectXAxisWithScale$1=(e,t,n,i)=>bu(e,"xAxis",t,i),selectXAxisTicks$1=(e,t,n,i)=>vu(e,"xAxis",t,i),selectYAxisWithScale$1=(e,t,n,i)=>bu(e,"yAxis",n,i),selectYAxisTicks$1=(e,t,n,i)=>vu(e,"yAxis",n,i),_f=Da([selectChartLayout,selectXAxisWithScale$1,selectYAxisWithScale$1,selectXAxisTicks$1,selectYAxisTicks$1],((e,t,n,i,a)=>isCategoricalAxis(e,"xAxis")?getBandSizeOfAxis(t,i,!1):getBandSizeOfAxis(n,a,!1))),jf=Da([selectUnfilteredCartesianItems,(e,t,n,i,a)=>a],((e,t)=>{if(e.some((e=>"line"===e.type&&t.dataKey===e.dataKey&&t.data===e.data)))return t})),wf=Da([selectChartLayout,selectXAxisWithScale$1,selectYAxisWithScale$1,selectXAxisTicks$1,selectYAxisTicks$1,jf,_f,selectChartDataWithIndexesIfNotInPanorama],((e,t,n,i,a,o,s,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(null!=o&&null!=t&&null!=n&&null!=i&&null!=a&&0!==i.length&&0!==a.length&&null!=s){var h,{dataKey:p,data:f}=o;if(null!=(h=null!=f&&f.length>0?f:null==c?void 0:c.slice(u,d+1)))return function(e){var{layout:t,xAxis:n,yAxis:i,xAxisTicks:a,yAxisTicks:o,dataKey:s,bandSize:l,displayedData:c}=e;return c.map(((e,c)=>{var u=getValueByDataKey(e,s);return"horizontal"===t?{x:getCateCoordinateOfLine({axis:n,ticks:a,bandSize:l,entry:e,index:c}),y:isNullish(u)?null:i.scale(u),value:u,payload:e}:{x:isNullish(u)?null:n.scale(u),y:getCateCoordinateOfLine({axis:i,ticks:o,bandSize:l,entry:e,index:c}),value:u,payload:e}}))}({layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:p,bandSize:s,displayedData:h})}})),Sf=["type","layout","connectNulls","needClip"],Af=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function _objectWithoutProperties$7(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ownKeys$3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(n),!0).forEach((function(t){_defineProperty$5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$5(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$6.apply(null,arguments)}var computeLegendPayloadFromAreaData$1=e=>{var{dataKey:t,name:n,stroke:i,legendType:a,hide:o}=e;return[{inactive:o,dataKey:t,type:a,color:i,value:getTooltipNameProp(n,t),payload:e}]};function getTooltipEntrySettings$1(e){var{dataKey:t,data:n,stroke:i,strokeWidth:a,fill:o,name:s,hide:l,unit:c}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:a,fill:o,dataKey:t,nameKey:void 0,name:getTooltipNameProp(s,t),hide:l,type:e.tooltipType,color:e.stroke,unit:c}}}var generateSimpleStrokeDasharray=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function repeat(e,t){for(var n=e.length%2!=0?[...e,0]:e,i=[],a=0;a<t;++a)i=[...i,...n];return i}function Dots$1(e){var{clipPathId:t,points:n,props:i}=e,{dot:a,dataKey:o,needClip:s}=i;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(n,a))return null;var l=isClipDot(a),c=filterProps(i,!1),u=filterProps(a,!0),d=n.map(((e,t)=>{var i=_objectSpread$3(_objectSpread$3(_objectSpread$3({key:"dot-".concat(t),r:3},c),u),{},{index:t,cx:e.x,cy:e.y,dataKey:o,value:e.value,payload:e.payload,points:n});return function(e,t){var n;if(Ut.isValidElement(e))n=Ut.cloneElement(e,t);else if("function"==typeof e)n=e(t);else{var i=We("recharts-line-dot","boolean"!=typeof e?e.className:"");n=Ut.createElement(Dot,_extends$6({},t,{className:i}))}return n}(a,i)})),h={clipPath:s?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):null};return Ut.createElement(oi,_extends$6({className:"recharts-line-dots",key:"dots"},h),d)}function StaticCurve(e){var{clipPathId:t,pathRef:n,points:i,strokeDasharray:a,props:o,showLabels:s}=e,{type:l,layout:c,connectNulls:u,needClip:d}=o,h=_objectWithoutProperties$7(o,Sf),p=_objectSpread$3(_objectSpread$3({},filterProps(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):null,points:i,type:l,layout:c,connectNulls:u,strokeDasharray:null!=a?a:o.strokeDasharray});return Ut.createElement(Ut.Fragment,null,(null==i?void 0:i.length)>1&&Ut.createElement(Curve,_extends$6({},p,{pathRef:n})),Ut.createElement(Dots$1,{points:i,clipPathId:t,props:o}),s&&LabelList.renderCallByParent(o,i))}function CurveWithAnimation(e){var{clipPathId:t,props:n,pathRef:i,previousPointsRef:a,longestAnimatedLengthRef:o}=e,{points:s,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:p,width:f,height:m,onAnimationEnd:g,onAnimationStart:v}=n,b=a.current,_=useAnimationId(n,"recharts-line-"),[j,w]=Ut.useState(!1),S=Ut.useCallback((()=>{"function"==typeof g&&g(),w(!1)}),[g]),A=Ut.useCallback((()=>{"function"==typeof v&&v(),w(!0)}),[v]),C=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(t){return 0}}(i.current),O=o.current;return Ut.createElement(Animate,{begin:u,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:S,onAnimationStart:A,key:_},(e=>{var c,{t:u}=e,d=interpolateNumber$1(O,C+O),h=Math.min(d(u),C);if(l){var g="".concat(l).split(/[,\s]+/gim).map((e=>parseFloat(e)));c=((e,t,n)=>{var i=n.reduce(((e,t)=>e+t));if(!i)return generateSimpleStrokeDasharray(t,e);for(var a=Math.floor(e/i),o=e%i,s=t-e,l=[],c=0,u=0;c<n.length;u+=n[c],++c)if(u+n[c]>o){l=[...n.slice(0,c),o-u];break}var d=l.length%2==0?[0,s]:[s];return[...repeat(n,a),...l,...d].map((e=>"".concat(e,"px"))).join(", ")})(h,C,g)}else c=generateSimpleStrokeDasharray(C,h);if(b){var v=b.length/s.length,_=1===u?s:s.map(((e,t)=>{var n=Math.floor(t*v);if(b[n]){var i=b[n],a=interpolateNumber$1(i.x,e.x),o=interpolateNumber$1(i.y,e.y);return _objectSpread$3(_objectSpread$3({},e),{},{x:a(u),y:o(u)})}if(p){var s=interpolateNumber$1(2*f,e.x),l=interpolateNumber$1(m/2,e.y);return _objectSpread$3(_objectSpread$3({},e),{},{x:s(u),y:l(u)})}return _objectSpread$3(_objectSpread$3({},e),{},{x:e.x,y:e.y})}));return a.current=_,Ut.createElement(StaticCurve,{props:n,points:_,clipPathId:t,pathRef:i,showLabels:!j,strokeDasharray:c})}return u>0&&C>0&&(a.current=s,o.current=h),Ut.createElement(StaticCurve,{props:n,points:s,clipPathId:t,pathRef:i,showLabels:!j,strokeDasharray:c})}))}function RenderCurve(e){var{clipPathId:t,props:n}=e,{points:i,isAnimationActive:a}=n,o=Ut.useRef(null),s=Ut.useRef(0),l=Ut.useRef(null),c=o.current;return a&&i&&i.length&&c!==i?Ut.createElement(CurveWithAnimation,{props:n,clipPathId:t,previousPointsRef:o,longestAnimatedLengthRef:s,pathRef:l}):Ut.createElement(StaticCurve,{props:n,points:i,clipPathId:t,pathRef:l,showLabels:!0})}var errorBarDataPointFormatter=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:getValueByDataKey(e.payload,t)});class LineWithState extends Ut.Component{constructor(){super(...arguments),_defineProperty$5(this,"id",uniqueId("recharts-line-"))}render(){var e,{hide:t,dot:n,points:i,className:a,xAxisId:o,yAxisId:s,top:l,left:c,width:u,height:d,id:h,needClip:p,layout:f}=this.props;if(t)return null;var m=We("recharts-line",a),g=isNullish(h)?this.id:h,{r:v=3,strokeWidth:b=2}=null!==(e=filterProps(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},_=isClipDot(n),j=2*v+b;return Ut.createElement(Ut.Fragment,null,Ut.createElement(oi,{className:m},p&&Ut.createElement("defs",null,Ut.createElement(GraphicalItemClipPath,{clipPathId:g,xAxisId:o,yAxisId:s}),!_&&Ut.createElement("clipPath",{id:"clipPath-dots-".concat(g)},Ut.createElement("rect",{x:c-j/2,y:l-j/2,width:u+j,height:d+j}))),Ut.createElement(RenderCurve,{props:this.props,clipPathId:g}),Ut.createElement(SetErrorBarPreferredDirection,{direction:"horizontal"===f?"y":"x"},Ut.createElement(SetErrorBarContext,{xAxisId:o,yAxisId:s,data:i,dataPointFormatter:errorBarDataPointFormatter,errorBarOffset:0},this.props.children))),Ut.createElement(ActivePoints,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Cf={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!os,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function LineImpl(e){var t=resolveDefaultProps(e,Cf),{activeDot:n,animateNewValues:i,animationBegin:a,animationDuration:o,animationEasing:s,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:p,xAxisId:f,yAxisId:m}=t,g=_objectWithoutProperties$7(t,Af),{needClip:v}=useNeedsClip(f,m),{height:b,width:_,x:j,y:w}=usePlotArea(),S=useChartLayout(),A=useIsPanorama(),C=Ut.useMemo((()=>({dataKey:e.dataKey,data:e.data})),[e.dataKey,e.data]),O=useAppSelector((e=>wf(e,f,m,A,C)));return"horizontal"!==S&&"vertical"!==S?null:Ut.createElement(LineWithState,_extends$6({},g,{connectNulls:l,dot:c,activeDot:n,animateNewValues:i,animationBegin:a,animationDuration:o,animationEasing:s,isAnimationActive:d,hide:u,label:h,legendType:p,xAxisId:f,yAxisId:m,points:O,layout:S,height:b,width:_,left:j,top:w,needClip:v}))}class Line extends Ut.PureComponent{render(){return Ut.createElement(CartesianGraphicalItemContext,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},Ut.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromAreaData$1(this.props)}),Ut.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings$1,args:this.props}),Ut.createElement(LineImpl,this.props))}}_defineProperty$5(Line,"displayName","Line"),_defineProperty$5(Line,"defaultProps",Cf);var selectXAxisWithScale=(e,t,n,i)=>bu(e,"xAxis",t,i),selectXAxisTicks=(e,t,n,i)=>vu(e,"xAxis",t,i),selectYAxisWithScale=(e,t,n,i)=>bu(e,"yAxis",n,i),selectYAxisTicks=(e,t,n,i)=>vu(e,"yAxis",n,i),Of=Da([selectChartLayout,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks],((e,t,n,i,a)=>isCategoricalAxis(e,"xAxis")?getBandSizeOfAxis(t,i,!1):getBandSizeOfAxis(n,a,!1))),Ef=Da([selectUnfilteredCartesianItems,(e,t,n,i,a)=>a],((e,t)=>{if(e.some((e=>"area"===e.type&&t.dataKey===e.dataKey&&getNormalizedStackId(t.stackId)===e.stackId&&t.data===e.data)))return t})),kf=Da([selectChartLayout,selectXAxisWithScale,selectYAxisWithScale,selectXAxisTicks,selectYAxisTicks,(e,t,n,i,a)=>{var o,s,l=selectChartLayout(e);if(null!=(s=isCategoricalAxis(l,"xAxis")?Nc(e,"yAxis",n,i):Nc(e,"xAxis",t,i))){var{dataKey:c,stackId:u}=a;if(null!=u){var d=null===(o=s[u])||void 0===o?void 0:o.stackedData;return null==d?void 0:d.find((e=>e.key===c))}}},selectChartDataWithIndexesIfNotInPanorama,Of,Ef],((e,t,n,i,a,o,s,l,c)=>{var{chartData:u,dataStartIndex:d,dataEndIndex:h}=s;if(null!=c&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=n&&null!=i&&null!=a&&0!==i.length&&0!==a.length&&null!=l){var p,{data:f}=c;if(null!=(p=f&&f.length>0?f:null==u?void 0:u.slice(d,h+1))){return function(e){var t,{areaSettings:{connectNulls:n,baseValue:i,dataKey:a},stackedData:o,layout:s,chartBaseValue:l,xAxis:c,yAxis:u,displayedData:d,dataStartIndex:h,xAxisTicks:p,yAxisTicks:f,bandSize:m}=e,g=o&&o.length,v=getBaseValue(s,l,i,c,u),b="horizontal"===s,_=!1,j=d.map(((e,t)=>{var i;g?i=o[h+t]:(i=getValueByDataKey(e,a),Array.isArray(i)?_=!0:i=[v,i]);var s=null==i[1]||g&&!n&&null==getValueByDataKey(e,a);return b?{x:getCateCoordinateOfLine({axis:c,ticks:p,bandSize:m,entry:e,index:t}),y:s?null:u.scale(i[1]),value:i,payload:e}:{x:s?null:c.scale(i[1]),y:getCateCoordinateOfLine({axis:u,ticks:f,bandSize:m,entry:e,index:t}),value:i,payload:e}}));t=g||_?j.map((e=>{var t=Array.isArray(e.value)?e.value[0]:null;return b?{x:e.x,y:null!=t&&null!=e.y?u.scale(t):null}:{x:null!=t?c.scale(t):null,y:e.y}})):b?u.scale(v):c.scale(v);return{points:j,baseLine:t,isRange:_}}({layout:e,xAxis:t,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataStartIndex:d,areaSettings:c,stackedData:o,displayedData:p,chartBaseValue:undefined,bandSize:l})}}})),Pf=["layout","type","stroke","connectNulls","isRange"],Tf=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function _objectWithoutProperties$6(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ownKeys$2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(n),!0).forEach((function(t){_defineProperty$4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$4(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$5.apply(null,arguments)}function getLegendItemColor(e,t){return e&&"none"!==e?e:t}var computeLegendPayloadFromAreaData=e=>{var{dataKey:t,name:n,stroke:i,fill:a,legendType:o,hide:s}=e;return[{inactive:s,dataKey:t,type:o,color:getLegendItemColor(i,a),value:getTooltipNameProp(n,t),payload:e}]};function getTooltipEntrySettings(e){var{dataKey:t,data:n,stroke:i,strokeWidth:a,fill:o,name:s,hide:l,unit:c}=e;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:i,strokeWidth:a,fill:o,dataKey:t,nameKey:void 0,name:getTooltipNameProp(s,t),hide:l,type:e.tooltipType,color:getLegendItemColor(i,o),unit:c}}}function Dots(e){var{clipPathId:t,points:n,props:i}=e,{needClip:a,dot:o,dataKey:s}=i;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(n,o))return null;var l=isClipDot(o),c=filterProps(i,!1),u=filterProps(o,!0),d=n.map(((e,t)=>{var i=_objectSpread$2(_objectSpread$2(_objectSpread$2({key:"dot-".concat(t),r:3},c),u),{},{index:t,cx:e.x,cy:e.y,dataKey:s,value:e.value,payload:e.payload,points:n});return((e,t)=>{var n;if(Ut.isValidElement(e))n=Ut.cloneElement(e,t);else if("function"==typeof e)n=e(t);else{var i=We("recharts-area-dot","boolean"!=typeof e?e.className:"");n=Ut.createElement(Dot,_extends$5({},t,{className:i}))}return n})(o,i)})),h={clipPath:a?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return Ut.createElement(oi,_extends$5({className:"recharts-area-dots"},h),d)}function StaticArea(e){var{points:t,baseLine:n,needClip:i,clipPathId:a,props:o,showLabels:s}=e,{layout:l,type:c,stroke:u,connectNulls:d,isRange:h}=o,p=_objectWithoutProperties$6(o,Pf);return Ut.createElement(Ut.Fragment,null,(null==t?void 0:t.length)>1&&Ut.createElement(oi,{clipPath:i?"url(#clipPath-".concat(a,")"):void 0},Ut.createElement(Curve,_extends$5({},filterProps(p,!0),{points:t,connectNulls:d,type:c,baseLine:n,layout:l,stroke:"none",className:"recharts-area-area"})),"none"!==u&&Ut.createElement(Curve,_extends$5({},filterProps(o,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:t})),"none"!==u&&h&&Ut.createElement(Curve,_extends$5({},filterProps(o,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:d,fill:"none",points:n}))),Ut.createElement(Dots,{points:t,props:o,clipPathId:a}),s&&LabelList.renderCallByParent(o,t))}function VerticalRect(e){var{alpha:t,baseLine:n,points:i,strokeWidth:a}=e,o=i[0].y,s=i[i.length-1].y;if(!isWellBehavedNumber(o)||!isWellBehavedNumber(s))return null;var l=t*Math.abs(o-s),c=Math.max(...i.map((e=>e.x||0)));return isNumber(n)?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(...n.map((e=>e.x||0)),c)),isNumber(c)?Ut.createElement("rect",{x:0,y:o<s?o:o-l,width:c+(a?parseInt("".concat(a),10):1),height:Math.floor(l)}):null}function HorizontalRect(e){var{alpha:t,baseLine:n,points:i,strokeWidth:a}=e,o=i[0].x,s=i[i.length-1].x;if(!isWellBehavedNumber(o)||!isWellBehavedNumber(s))return null;var l=t*Math.abs(o-s),c=Math.max(...i.map((e=>e.y||0)));return isNumber(n)?c=Math.max(n,c):n&&Array.isArray(n)&&n.length&&(c=Math.max(...n.map((e=>e.y||0)),c)),isNumber(c)?Ut.createElement("rect",{x:o<s?o:o-l,y:0,width:l,height:Math.floor(c+(a?parseInt("".concat(a),10):1))}):null}function ClipRect(e){var{alpha:t,layout:n,points:i,baseLine:a,strokeWidth:o}=e;return"vertical"===n?Ut.createElement(VerticalRect,{alpha:t,points:i,baseLine:a,strokeWidth:o}):Ut.createElement(HorizontalRect,{alpha:t,points:i,baseLine:a,strokeWidth:o})}function AreaWithAnimation(e){var{needClip:t,clipPathId:n,props:i,previousPointsRef:a,previousBaselineRef:o}=e,{points:s,baseLine:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,onAnimationStart:p,onAnimationEnd:f}=i,m=useAnimationId(i,"recharts-area-"),[g,v]=Ut.useState(!0),b=Ut.useCallback((()=>{"function"==typeof f&&f(),v(!1)}),[f]),_=Ut.useCallback((()=>{"function"==typeof p&&p(),v(!0)}),[p]),j=a.current,w=o.current;return Ut.createElement(Animate,{begin:u,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:b,onAnimationStart:_,key:m},(e=>{var{t:c}=e;if(j){var u,d=j.length/s.length,h=1===c?s:s.map(((e,t)=>{var n=Math.floor(t*d);if(j[n]){var i=j[n];return _objectSpread$2(_objectSpread$2({},e),{},{x:interpolate$1(i.x,e.x,c),y:interpolate$1(i.y,e.y,c)})}return e}));return u=isNumber(l)?interpolate$1(w,l,c):isNullish(l)||isNan(l)?interpolate$1(w,0,c):l.map(((e,t)=>{var n=Math.floor(t*d);if(Array.isArray(w)&&w[n]){var i=w[n];return _objectSpread$2(_objectSpread$2({},e),{},{x:interpolate$1(i.x,e.x,c),y:interpolate$1(i.y,e.y,c)})}return e})),c>0&&(a.current=h,o.current=u),Ut.createElement(StaticArea,{points:h,baseLine:u,needClip:t,clipPathId:n,props:i,showLabels:!g})}return c>0&&(a.current=s,o.current=l),Ut.createElement(oi,null,Ut.createElement("defs",null,Ut.createElement("clipPath",{id:"animationClipPath-".concat(n)},Ut.createElement(ClipRect,{alpha:c,points:s,baseLine:l,layout:i.layout,strokeWidth:i.strokeWidth}))),Ut.createElement(oi,{clipPath:"url(#animationClipPath-".concat(n,")")},Ut.createElement(StaticArea,{points:s,baseLine:l,needClip:t,clipPathId:n,props:i,showLabels:!0})))}))}function RenderArea(e){var{needClip:t,clipPathId:n,props:i}=e,{points:a,baseLine:o,isAnimationActive:s}=i,l=Ut.useRef(null),c=Ut.useRef(),u=l.current,d=c.current;return s&&a&&a.length&&(u!==a||d!==o)?Ut.createElement(AreaWithAnimation,{needClip:t,clipPathId:n,props:i,previousPointsRef:l,previousBaselineRef:c}):Ut.createElement(StaticArea,{points:a,baseLine:o,needClip:t,clipPathId:n,props:i,showLabels:!0})}class AreaWithState extends Ut.PureComponent{constructor(){super(...arguments),_defineProperty$4(this,"id",uniqueId("recharts-area-"))}render(){var e,{hide:t,dot:n,points:i,className:a,top:o,left:s,needClip:l,xAxisId:c,yAxisId:u,width:d,height:h,id:p,baseLine:f}=this.props;if(t)return null;var m=We("recharts-area",a),g=isNullish(p)?this.id:p,{r:v=3,strokeWidth:b=2}=null!==(e=filterProps(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},_=isClipDot(n),j=2*v+b;return Ut.createElement(Ut.Fragment,null,Ut.createElement(oi,{className:m},l&&Ut.createElement("defs",null,Ut.createElement(GraphicalItemClipPath,{clipPathId:g,xAxisId:c,yAxisId:u}),!_&&Ut.createElement("clipPath",{id:"clipPath-dots-".concat(g)},Ut.createElement("rect",{x:s-j/2,y:o-j/2,width:d+j,height:h+j}))),Ut.createElement(RenderArea,{needClip:l,clipPathId:g,props:this.props})),Ut.createElement(ActivePoints,{points:i,mainColor:getLegendItemColor(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(f)&&Ut.createElement(ActivePoints,{points:f,mainColor:getLegendItemColor(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var Lf={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!os,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function AreaImpl(e){var t,n=resolveDefaultProps(e,Lf),{activeDot:i,animationBegin:a,animationDuration:o,animationEasing:s,connectNulls:l,dot:c,fill:u,fillOpacity:d,hide:h,isAnimationActive:p,legendType:f,stroke:m,xAxisId:g,yAxisId:v}=n,b=_objectWithoutProperties$6(n,Tf),_=useChartLayout(),j=useChartName(),{needClip:w}=useNeedsClip(g,v),S=useIsPanorama(),A=Ut.useMemo((()=>({baseValue:e.baseValue,stackId:e.stackId,connectNulls:l,data:e.data,dataKey:e.dataKey})),[e.baseValue,e.stackId,l,e.data,e.dataKey]),{points:C,isRange:O,baseLine:E}=null!==(t=useAppSelector((e=>kf(e,g,v,S,A))))&&void 0!==t?t:{},{height:k,width:P,x:T,y:L}=usePlotArea();return"horizontal"!==_&&"vertical"!==_||"AreaChart"!==j&&"ComposedChart"!==j?null:Ut.createElement(AreaWithState,_extends$5({},b,{activeDot:i,animationBegin:a,animationDuration:o,animationEasing:s,baseLine:E,connectNulls:l,dot:c,fill:u,fillOpacity:d,height:k,hide:h,layout:_,isAnimationActive:p,isRange:O,legendType:f,needClip:w,points:C,stroke:m,width:P,left:T,top:L,xAxisId:g,yAxisId:v}))}var getBaseValue=(e,t,n,i,a)=>{var o=null!=n?n:t;if(isNumber(o))return o;var s="horizontal"===e?a:i,l=s.scale.domain();if("number"===s.type){var c=Math.max(l[0],l[1]),u=Math.min(l[0],l[1]);return"dataMin"===o?u:"dataMax"===o||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return"dataMin"===o?l[0]:"dataMax"===o?l[1]:l[0]};class Area extends Ut.PureComponent{render(){return Ut.createElement(CartesianGraphicalItemContext,{type:"area",data:this.props.data,dataKey:this.props.dataKey,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,stackId:this.props.stackId,hide:this.props.hide,barSize:void 0},Ut.createElement(SetLegendPayload,{legendPayload:computeLegendPayloadFromAreaData(this.props)}),Ut.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings,args:this.props}),Ut.createElement(AreaImpl,this.props))}}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach((function(t){_defineProperty$3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$3(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_defineProperty$4(Area,"displayName","Area"),_defineProperty$4(Area,"defaultProps",Lf);var $f=po({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:i}=t.payload;e.yAxis[n]&&(e.yAxis[n]=_objectSpread$1(_objectSpread$1({},e.yAxis[n]),{},{width:i}))}}}),{addXAxis:If,removeXAxis:Mf,addYAxis:Rf,removeYAxis:Df,addZAxis:Nf,removeZAxis:zf,updateYAxisWidth:Bf}=$f.actions,Ff=$f.reducer,Zf=["children"],Uf=["dangerouslySetInnerHTML","ticks"];function _defineProperty$2(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$4.apply(null,arguments)}function _objectWithoutProperties$5(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function SetXAxisSettings(e){var t=useAppDispatch(),n=Ut.useMemo((()=>{var{children:t}=e;return _objectWithoutProperties$5(e,Zf)}),[e]),i=useAppSelector((e=>selectXAxisSettings(e,n.id))),a=n===i;return Ut.useEffect((()=>(t(If(n)),()=>{t(Mf(n))})),[n,t]),a?e.children:null}var XAxisImpl=e=>{var{xAxisId:t,className:n}=e,i=useAppSelector(Ho),a=useIsPanorama(),o="xAxis",s=useAppSelector((e=>lu(e,o,t,a))),l=useAppSelector((e=>xu(e,o,t,a))),c=useAppSelector((e=>du(e,t))),u=useAppSelector((e=>((e,t)=>{var n=Ko(e),i=selectXAxisSettings(e,t);if(null!=i){var a=hu(e,i.orientation,i.mirror)[t];return null==a?{x:n.left,y:0}:{x:n.left,y:a}}})(e,t)));if(null==c||null==u)return null;var{dangerouslySetInnerHTML:d,ticks:h}=e,p=_objectWithoutProperties$5(e,Uf);return Ut.createElement(CartesianAxis,_extends$4({},p,{scale:s,x:u.x,y:u.y,width:c.width,height:c.height,className:We("recharts-".concat(o," ").concat(o),n),viewBox:i,ticks:l}))},XAxisSettingsDispatcher=e=>{var t,n,i,a,o;return Ut.createElement(SetXAxisSettings,{interval:null!==(t=e.interval)&&void 0!==t?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:null!==(n=e.includeHidden)&&void 0!==n&&n,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(i=e.angle)&&void 0!==i?i:0,minTickGap:null!==(a=e.minTickGap)&&void 0!==a?a:5,tick:null===(o=e.tick)||void 0===o||o,tickFormatter:e.tickFormatter},Ut.createElement(XAxisImpl,e))};class XAxis extends Ut.Component{render(){return Ut.createElement(XAxisSettingsDispatcher,this.props)}}_defineProperty$2(XAxis,"displayName","XAxis"),_defineProperty$2(XAxis,"defaultProps",{allowDataOverflow:kc.allowDataOverflow,allowDecimals:kc.allowDecimals,allowDuplicatedCategory:kc.allowDuplicatedCategory,height:kc.height,hide:!1,mirror:kc.mirror,orientation:kc.orientation,padding:kc.padding,reversed:kc.reversed,scale:kc.scale,tickCount:kc.tickCount,type:kc.type,xAxisId:0});var Kf=["dangerouslySetInnerHTML","ticks"];function _defineProperty$1(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$3.apply(null,arguments)}function SetYAxisSettings(e){var t=useAppDispatch();return Ut.useEffect((()=>(t(Rf(e)),()=>{t(Df(e))})),[e,t]),null}var YAxisImpl=e=>{var t,{yAxisId:n,className:i,width:a,label:o}=e,s=Ut.useRef(null),l=Ut.useRef(null),c=useAppSelector(Ho),u=useIsPanorama(),d=useAppDispatch(),h="yAxis",p=useAppSelector((e=>lu(e,h,n,u))),f=useAppSelector((e=>fu(e,n))),m=useAppSelector((e=>((e,t)=>{var n=Ko(e),i=selectYAxisSettings(e,t);if(null!=i){var a=pu(e,i.orientation,i.mirror)[t];return null==a?{x:0,y:n.top}:{x:a,y:n.top}}})(e,n))),g=useAppSelector((e=>xu(e,h,n,u)));if(Ut.useLayoutEffect((()=>{var e;if("auto"===a&&f&&!isLabelContentAFunction(o)&&!Ut.isValidElement(o)){var t=s.current,i=null==t||null===(e=t.tickRefs)||void 0===e?void 0:e.current,{tickSize:c,tickMargin:u}=t.props,h=(e=>{var{ticks:t,label:n,labelGapWithTick:i=5,tickSize:a=0,tickMargin:o=0}=e,s=0;if(t){t.forEach((e=>{if(e){var t=e.getBoundingClientRect();t.width>s&&(s=t.width)}}));var l=n?n.getBoundingClientRect().width:0,c=s+(a+o)+l+(n?i:0);return Math.round(c)}return 0})({ticks:i,label:l.current,labelGapWithTick:5,tickSize:c,tickMargin:u});Math.round(f.width)!==Math.round(h)&&d(Bf({id:n,width:h}))}}),[s,null==s||null===(t=s.current)||void 0===t||null===(t=t.tickRefs)||void 0===t?void 0:t.current,null==f?void 0:f.width,f,d,o,n,a]),null==f||null==m)return null;var{dangerouslySetInnerHTML:v,ticks:b}=e,_=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Kf);return Ut.createElement(CartesianAxis,_extends$3({},_,{ref:s,labelRef:l,scale:p,x:m.x,y:m.y,width:f.width,height:f.height,className:We("recharts-".concat(h," ").concat(h),i),viewBox:c,ticks:g}))},YAxisSettingsDispatcher=e=>{var t,n,i,a,o;return Ut.createElement(Ut.Fragment,null,Ut.createElement(SetYAxisSettings,{interval:null!==(t=e.interval)&&void 0!==t?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:null!==(n=e.includeHidden)&&void 0!==n&&n,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:null!==(i=e.angle)&&void 0!==i?i:0,minTickGap:null!==(a=e.minTickGap)&&void 0!==a?a:5,tick:null===(o=e.tick)||void 0===o||o,tickFormatter:e.tickFormatter}),Ut.createElement(YAxisImpl,e))},Wf={allowDataOverflow:Pc.allowDataOverflow,allowDecimals:Pc.allowDecimals,allowDuplicatedCategory:Pc.allowDuplicatedCategory,hide:!1,mirror:Pc.mirror,orientation:Pc.orientation,padding:Pc.padding,reversed:Pc.reversed,scale:Pc.scale,tickCount:Pc.tickCount,type:Pc.type,width:Pc.width,yAxisId:0};class YAxis extends Ut.Component{render(){return Ut.createElement(YAxisSettingsDispatcher,this.props)}}_defineProperty$1(YAxis,"displayName","YAxis"),_defineProperty$1(YAxis,"defaultProps",Wf);var Hf=Ut;"function"==typeof Object.is&&Object.is,Hf.useSyncExternalStore,Hf.useRef,Hf.useEffect,Hf.useMemo,Hf.useDebugValue;var Gf={notify(){},get:()=>[]};var Yf=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),qf=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Vf=(()=>Yf||qf?Ut.useLayoutEffect:Ut.useEffect)(),Xf=Symbol.for("react-redux-context"),Jf="undefined"!=typeof globalThis?globalThis:{};function getContext(){if(!Ut.createContext)return{};const e=Jf[Xf]??=new Map;let t=e.get(Ut.createContext);return t||(t=Ut.createContext(null),e.set(Ut.createContext,t)),t}var Qf=getContext();var Provider_default=function(e){const{children:t,context:n,serverState:i,store:a}=e,o=Ut.useMemo((()=>{const e=function(e){let t,n=Gf,i=0,a=!1;function handleChangeWrapper(){o.onStateChange&&o.onStateChange()}function trySubscribe(){i++,t||(t=e.subscribe(handleChangeWrapper),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){var t;t=()=>{let t=e;for(;t;)t.callback(),t=t.next},t()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let i=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){i&&null!==e&&(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function tryUnsubscribe(){i--,t&&0===i&&(t(),t=void 0,n.clear(),n=Gf)}const o={addNestedSub:function(e){trySubscribe();const t=n.subscribe(e);let i=!1;return()=>{i||(i=!0,t(),tryUnsubscribe())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:handleChangeWrapper,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,trySubscribe())},tryUnsubscribe:function(){a&&(a=!1,tryUnsubscribe())},getListeners:()=>n};return o}(a);return{store:a,subscription:e,getServerState:i?()=>i:void 0}}),[a,i]),s=Ut.useMemo((()=>a.getState()),[a]);Vf((()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==a.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,s]);const l=n||Qf;return Ut.createElement(l.Provider,{value:o},t)},em=Da([(e,t)=>t,selectChartLayout,Oc,selectTooltipAxisType,od,ud,jd,Ko],((e,t,n,i,a,o,s,l)=>{if(e&&t&&i&&a&&o){var c=function(e,t,n,i,a){return"horizontal"===n||"vertical"===n?e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height?{x:e,y:t}:null:i?inRangeOfSector({x:e,y:t},i):null}(e.chartX,e.chartY,t,n,l);if(c){var u=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(c,t),d=((e,t,n,i,a)=>{var o,s=-1,l=null!==(o=null==t?void 0:t.length)&&void 0!==o?o:0;if(l<=1||null==e)return 0;if("angleAxis"===i&&null!=a&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<l;c++){var u=c>0?n[c-1].coordinate:n[l-1].coordinate,d=n[c].coordinate,h=c>=l-1?n[0].coordinate:n[c+1].coordinate,p=void 0;if(mathSign(d-u)!==mathSign(h-d)){var f=[];if(mathSign(h-d)===mathSign(a[1]-a[0])){p=h;var m=d+a[1]-a[0];f[0]=Math.min(m,(m+u)/2),f[1]=Math.max(m,(m+u)/2)}else{p=u;var g=h+a[1]-a[0];f[0]=Math.min(d,(g+d)/2),f[1]=Math.max(d,(g+d)/2)}var v=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>v[0]&&e<=v[1]||e>=f[0]&&e<=f[1]){({index:s}=n[c]);break}}else{var b=Math.min(u,h),_=Math.max(u,h);if(e>(b+d)/2&&e<=(_+d)/2){({index:s}=n[c]);break}}}else if(t)for(var j=0;j<l;j++)if(0===j&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j>0&&j<l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j===l-1&&e>(t[j].coordinate+t[j-1].coordinate)/2){({index:s}=t[j]);break}return s})(u,s,o,i,a),h=((e,t,n,i)=>{var a=t.find((e=>e&&e.index===n));if(a){if("horizontal"===e)return{x:a.coordinate,y:i.y};if("vertical"===e)return{x:i.x,y:a.coordinate};if("centric"===e){var o=a.coordinate,{radius:s}=i;return _objectSpread$E(_objectSpread$E(_objectSpread$E({},i),polarToCartesian(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,{angle:c}=i;return _objectSpread$E(_objectSpread$E(_objectSpread$E({},i),polarToCartesian(i.cx,i.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}})(t,o,d,c);return{activeIndex:String(d),activeCoordinate:h}}}})),getChartPointer=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,i=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/i)}},tm=createAction("mouseClick"),rm=createListenerMiddleware();rm.startListening({actionCreator:tm,effect:(e,t)=>{var n=e.payload,i=em(t.getState(),getChartPointer(n));null!=(null==i?void 0:i.activeIndex)&&t.dispatch($u({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var nm=createAction("mouseMove"),im=createListenerMiddleware();function reduxDevtoolsJsonStringifyReplacer(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}im.startListening({actionCreator:nm,effect:(e,t)=>{var n=e.payload,i=t.getState(),a=selectTooltipEventType$1(i,i.tooltip.settings.shared),o=em(i,getChartPointer(n));"axis"===a&&(null!=(null==o?void 0:o.activeIndex)?t.dispatch(Lu({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(Pu()))}});var am={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},om=po({name:"rootProps",initialState:am,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:am.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),sm=om.reducer,{updateOptions:lm}=om.actions,cm=po({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:um}=cm.actions,dm=cm.reducer,hm=createAction("keyDown"),pm=createAction("focus"),fm=createListenerMiddleware();fm.startListening({actionCreator:hm,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:i}=n.tooltip,a=e.payload;if("ArrowRight"===a||"ArrowLeft"===a||"Enter"===a){var o=Number(combineActiveTooltipIndex(i,Zu(n))),s=ud(n);if("Enter"!==a){var l=o+("ArrowRight"===a?1:-1)*("left-to-right"===ju(n)?1:-1);if(!(null==s||l>=s.length||l<0)){var c=Cd(n,"axis","hover",String(l));t.dispatch(Mu({active:!0,activeIndex:l.toString(),activeDataKey:void 0,activeCoordinate:c}))}}else{var u=Cd(n,"axis","hover",String(i.index));t.dispatch(Mu({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}))}}}}}),fm.startListening({actionCreator:pm,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&null==i.index){var a=Cd(n,"axis","hover",String("0"));t.dispatch(Mu({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:a}))}}}});var mm=createAction("externalEvent"),gm=createListenerMiddleware();gm.startListening({actionCreator:mm,effect:(e,t)=>{if(null!=e.payload.handler){var n=t.getState(),i={activeCoordinate:xd(n),activeDataKey:md(n),activeIndex:pd(n),activeLabel:fd(n),activeTooltipIndex:pd(n),isTooltipActive:vd(n)};e.payload.handler(i,e.payload.reactEvent)}}});var ym=Da([selectTooltipState],(e=>e.tooltipItemPayloads)),xm=Da([ym,selectTooltipPayloadSearcher,(e,t,n)=>t,(e,t,n)=>n],((e,t,n,i)=>{var a=e.find((e=>e.settings.dataKey===i));if(null!=a){var{positions:o}=a;if(null!=o)return t(o,n)}})),vm=createAction("touchMove"),bm=createListenerMiddleware();bm.startListening({actionCreator:vm,effect:(e,t)=>{var n=e.payload,i=t.getState(),a=selectTooltipEventType$1(i,i.tooltip.settings.shared);if("axis"===a){var o=em(i,getChartPointer({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));null!=(null==o?void 0:o.activeIndex)&&t.dispatch(Lu({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if("item"===a){var s,l=n.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Zo),d=null!==(s=c.getAttribute(Uo))&&void 0!==s?s:void 0,h=xm(t.getState(),u,d);t.dispatch(Eu({activeDataKey:d,activeIndex:u,activeCoordinate:h}))}}});var _m=combineReducers({brush:nf,cartesianAxis:Ff,chartData:Ud,graphicalItems:mp,layout:Io,legend:rs,options:Dd,polarAxis:Yh,polarOptions:dm,referenceElements:hf,rootProps:sm,tooltip:Ru});function RechartsStoreProvider(e){var{preloadedState:t,children:n,reduxStoreName:i}=e,a=useIsPanorama(),o=Ut.useRef(null);if(a)return n;null==o.current&&(o.current=function(e){return configureStore({reducer:_m,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([rm.middleware,im.middleware,fm.middleware,gm.middleware,bm.middleware]),devTools:{serialize:{replacer:reduxDevtoolsJsonStringifyReplacer},name:"recharts-".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart")}})}(t,i));var s=Ma;return Ut.createElement(Provider_default,{context:s,store:o.current},n)}function ReportMainChartProps(e){var{layout:t,width:n,height:i,margin:a}=e,o=useAppDispatch(),s=useIsPanorama();return Ut.useEffect((()=>{s||(o(To(t)),o(Lo({width:n,height:i})),o(Po(a)))}),[o,s,t,n,i,a]),null}function ReportChartProps(e){var t=useAppDispatch();return Ut.useEffect((()=>{t(lm(e))}),[t,e]),null}var jm=["children"];function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$2.apply(null,arguments)}var wm={width:"100%",height:"100%"},Sm=Ut.forwardRef(((e,t)=>{var n=useChartWidth(),i=useChartHeight(),a=useAccessibilityLayer();if(!isPositiveNumber(n)||!isPositiveNumber(i))return null;var o,s,{children:l,otherAttributes:c,title:u,desc:d}=e;return o="number"==typeof c.tabIndex?c.tabIndex:a?0:void 0,s="string"==typeof c.role?c.role:a?"application":void 0,Ut.createElement(ii,_extends$2({},c,{title:u,desc:d,role:s,tabIndex:o,width:n,height:i,style:wm,ref:t}),l)})),BrushPanoramaSurface=e=>{var{children:t}=e,n=useAppSelector(Yo);if(!n)return null;var{width:i,height:a,y:o,x:s}=n;return Ut.createElement(ii,{width:i,height:a,x:s,y:o},t)},Am=Ut.forwardRef(((e,t)=>{var{children:n}=e,i=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,jm);return useIsPanorama()?Ut.createElement(BrushPanoramaSurface,null,n):Ut.createElement(Sm,_extends$2({ref:t},i),n)}));function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t);if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cm=Ut.forwardRef(((e,t)=>{var{children:n,className:i,height:a,onClick:o,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:p,onTouchEnd:f,onTouchMove:m,onTouchStart:g,style:v,width:b}=e,_=useAppDispatch(),[j,w]=Ut.useState(null),[S,A]=Ut.useState(null);useSynchronisedEventsFromOtherCharts();var C=function(){var e=useAppDispatch(),[t,n]=Ut.useState(null),i=useAppSelector(selectContainerScale);return Ut.useEffect((()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;isWellBehavedNumber(n)&&n!==i&&e($o(n))}}),[t,e,i]),n}(),O=Ut.useCallback((e=>{C(e),"function"==typeof t&&t(e),w(e),A(e)}),[C,t,w,A]),E=Ut.useCallback((e=>{_(tm(e)),_(mm({handler:o,reactEvent:e}))}),[_,o]),k=Ut.useCallback((e=>{_(nm(e)),_(mm({handler:u,reactEvent:e}))}),[_,u]),P=Ut.useCallback((e=>{_(Pu()),_(mm({handler:d,reactEvent:e}))}),[_,d]),T=Ut.useCallback((e=>{_(nm(e)),_(mm({handler:h,reactEvent:e}))}),[_,h]),L=Ut.useCallback((()=>{_(pm())}),[_]),$=Ut.useCallback((e=>{_(hm(e.key))}),[_]),I=Ut.useCallback((e=>{_(mm({handler:s,reactEvent:e}))}),[_,s]),M=Ut.useCallback((e=>{_(mm({handler:l,reactEvent:e}))}),[_,l]),R=Ut.useCallback((e=>{_(mm({handler:c,reactEvent:e}))}),[_,c]),D=Ut.useCallback((e=>{_(mm({handler:p,reactEvent:e}))}),[_,p]),N=Ut.useCallback((e=>{_(mm({handler:g,reactEvent:e}))}),[_,g]),z=Ut.useCallback((e=>{_(vm(e)),_(mm({handler:m,reactEvent:e}))}),[_,m]),B=Ut.useCallback((e=>{_(mm({handler:f,reactEvent:e}))}),[_,f]);return Ut.createElement(Td.Provider,{value:j},Ut.createElement(si.Provider,{value:S},Ut.createElement("div",{className:We("recharts-wrapper",i),style:_objectSpread({position:"relative",cursor:"default",width:b,height:a},v),onClick:E,onContextMenu:I,onDoubleClick:M,onFocus:L,onKeyDown:$,onMouseDown:R,onMouseEnter:k,onMouseLeave:P,onMouseMove:T,onMouseUp:D,onTouchEnd:B,onTouchMove:z,onTouchStart:N,ref:O},n)))})),Om=["children","className","width","height","style","compact","title","desc"];var Em=Ut.forwardRef(((e,t)=>{var{children:n,className:i,width:a,height:o,style:s,compact:l,title:c,desc:u}=e,d=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Om),h=filterProps(d,!1);return l?Ut.createElement(Am,{otherAttributes:h,title:c,desc:u},n):Ut.createElement(Cm,{className:i,style:s,width:a,height:o,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},Ut.createElement(Am,{otherAttributes:h,title:c,desc:u,ref:t},Ut.createElement(ClipPathProvider,null,n)))})),km=["width","height"];function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends$1.apply(null,arguments)}var Pm={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},Tm=Ut.forwardRef((function(e,t){var n,i=resolveDefaultProps(e.categoricalChartProps,Pm),{width:a,height:o}=i,s=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(i,km);if(!isPositiveNumber(a)||!isPositiveNumber(o))return null;var{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:h}=e,p={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return Ut.createElement(RechartsStoreProvider,{preloadedState:{options:p},reduxStoreName:null!==(n=h.id)&&void 0!==n?n:l},Ut.createElement(ChartDataContextProvider,{chartData:h.data}),Ut.createElement(ReportMainChartProps,{width:a,height:o,layout:i.layout,margin:i.margin}),Ut.createElement(ReportChartProps,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),Ut.createElement(Em,_extends$1({},s,{width:a,height:o,ref:t})))})),Lm=["axis"],$m=Ut.forwardRef(((e,t)=>Ut.createElement(Tm,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Lm,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:e,ref:t}))),Im=["axis","item"],Mm=Ut.forwardRef(((e,t)=>Ut.createElement(Tm,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Im,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:e,ref:t})));function ReportPolarOptions(e){var t=useAppDispatch();return Ut.useEffect((()=>{t(um(e))}),[t,e]),null}var Rm=["width","height","layout"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends.apply(null,arguments)}var Dm={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Nm=Ut.forwardRef((function(e,t){var n,i=resolveDefaultProps(e.categoricalChartProps,Dm),{width:a,height:o,layout:s}=i,l=function(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(i,Rm);if(!isPositiveNumber(a)||!isPositiveNumber(o))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h}=e,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return Ut.createElement(RechartsStoreProvider,{preloadedState:{options:p},reduxStoreName:null!==(n=i.id)&&void 0!==n?n:c},Ut.createElement(ChartDataContextProvider,{chartData:i.data}),Ut.createElement(ReportMainChartProps,{width:a,height:o,layout:s,margin:i.margin}),Ut.createElement(ReportChartProps,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),Ut.createElement(ReportPolarOptions,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),Ut.createElement(Em,_extends({width:a,height:o},l,{ref:t})))})),zm=["item"],Bm={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Fm=Ut.forwardRef(((e,t)=>{var n=resolveDefaultProps(e,Bm);return Ut.createElement(Nm,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:zm,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:n,ref:t})})),Zm=["axis"],Um={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Km=Ut.forwardRef(((e,t)=>{var n=resolveDefaultProps(e,Um);return Ut.createElement(Nm,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Zm,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:n,ref:t})})),Wm=["axis"],Hm=Ut.forwardRef(((e,t)=>Ut.createElement(Tm,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Wm,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:e,ref:t}))),Gm=["axis"],Ym=Ut.forwardRef(((e,t)=>Ut.createElement(Tm,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Gm,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:e,ref:t})));const ResearchPage=()=>{const[e,n]=Ut.useState(null),[i,a]=Ut.useState(!0),[o,s]=Ut.useState(null),l=Yt(),c=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D","#FFC658"];Ut.useEffect((()=>{(async()=>{try{a(!0),console.log("🔬 Loading precomputed research analytics...");const e="/archi-site/".replace(/\/$/,""),t=await fetch(`${e}/data/analytics/base.json`);if(!t.ok)throw new Error(`Failed to load analytics: ${t.status} ${t.statusText}`);const i=await t.json();console.log("📊 Precomputed analytics loaded:",i);const o={awards:[],architects:i.architectPopularity.slice(0,50).map(((e,t)=>({name:e.architect,projectCount:e.count,yearSpan:{start:0,end:0},awards:[],categories:[],prefectures:[]}))),temporalAnalysis:i.yearDistribution.filter((e=>e.year%10==0)).map((e=>({decade:10*Math.floor(e.year/10)+"年代",projectCount:e.count,dominantCategories:Object.entries(e.categories||{}).sort((([,e],[,t])=>t-e)).slice(0,3).map((([e])=>e)),notableArchitects:[],awards:[]}))),regionalAnalysis:i.prefectureDistribution.map((e=>({prefecture:e.prefecture,projectCount:e.count,timeSpan:{start:0,end:0},dominantCategories:[],notableArchitects:[],awards:[]}))),buildingTypeEvolution:i.categoryDistribution.map((e=>({category:e.category,totalCount:e.count}))),professionalNetworks:[]};n(o),console.log("📊 Transformed analytics ready:",o)}catch(e){console.error("❌ Failed to load research analytics:",e),s("研究データの読み込みに失敗しました")}finally{a(!1)}})()}),[]);const handleArchitectClick=e=>{l(`/architecture?architect=${encodeURIComponent(e)}`)},handleTagClick=e=>{l(`/architecture?tag=${encodeURIComponent(e)}`)},handleCategoryClick=e=>{l(`/architecture?category=${encodeURIComponent(e)}`)},handlePrefectureClick=e=>{l(`/architecture?prefecture=${encodeURIComponent(e)}`)},handleYearClick=e=>{const t=e.replace("年代","");l(`/architecture?year=${encodeURIComponent(t)}`)};return i?t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-block animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"}),t.jsx("p",{className:"mt-4 text-lg",children:"研究データを分析中..."}),t.jsx("p",{className:"text-sm text-gray-600",children:"14,467件の建築記録を解析しています"})]})}):o||!e?t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx(Card,{children:t.jsxs(CardContent,{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-4",children:o||"データの読み込みに失敗しました"}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"再読み込み"})]})})}):t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold mb-2",children:"📊 日本建築データベース研究"}),t.jsx("p",{className:"text-gray-600 mb-2",children:"14,467件の建築記録を分析 | 140年間の建築史（1882-2012+）"}),t.jsx("p",{className:"text-sm text-blue-600",children:"※ 各項目をクリックすると、建築作品一覧で詳細な検索結果をご覧いただけます"})]}),t.jsxs(Tabs,{defaultValue:"overview",className:"w-full",children:[t.jsxs(TabsList,{className:"grid w-full grid-cols-6",children:[t.jsx(TabsTrigger,{value:"overview",children:"概要"}),t.jsx(TabsTrigger,{value:"awards",children:"受賞分析"}),t.jsx(TabsTrigger,{value:"architects",children:"建築家"}),t.jsx(TabsTrigger,{value:"timeline",children:"時代変遷"}),t.jsx(TabsTrigger,{value:"regions",children:"地域分析"}),t.jsx(TabsTrigger,{value:"networks",children:"プロネットワーク"})]}),t.jsxs(TabsContent,{value:"overview",className:"space-y-6",children:[t.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[t.jsxs(Card,{children:[t.jsxs(CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(CardTitle,{className:"text-sm font-medium",children:"総建築記録数"}),t.jsx("span",{className:"text-2xl",children:"🏗️"})]}),t.jsxs(CardContent,{children:[t.jsx("div",{className:"text-2xl font-bold",children:"14,467"}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"1882年〜2012年+"})]})]}),t.jsxs(Card,{children:[t.jsxs(CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(CardTitle,{className:"text-sm font-medium",children:"受賞作品数"}),t.jsx("span",{className:"text-2xl",children:"🏆"})]}),t.jsxs(CardContent,{children:[t.jsx("div",{className:"text-2xl font-bold",children:e.awards.reduce(((e,t)=>e+t.count),0)}),t.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.awards.length,"種類の賞"]})]})]}),t.jsxs(Card,{children:[t.jsxs(CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(CardTitle,{className:"text-sm font-medium",children:"建築家数"}),t.jsx("span",{className:"text-2xl",children:"👨‍💼"})]}),t.jsxs(CardContent,{children:[t.jsx("div",{className:"text-2xl font-bold",children:e.architects.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"2作品以上の建築家"})]})]}),t.jsxs(Card,{children:[t.jsxs(CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(CardTitle,{className:"text-sm font-medium",children:"建物種別数"}),t.jsx("span",{className:"text-2xl",children:"🏛️"})]}),t.jsxs(CardContent,{children:[t.jsx("div",{className:"text-2xl font-bold",children:e.buildingTypeEvolution.length}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"5件以上のカテゴリ"})]})]})]}),t.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[t.jsxs(Card,{children:[t.jsx(CardHeader,{children:t.jsx(CardTitle,{children:"時代別建築数"})}),t.jsx(CardContent,{children:t.jsx(qd,{width:"100%",height:300,children:t.jsxs(Mm,{data:e.temporalAnalysis,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"decade"}),t.jsx(YAxis,{}),t.jsx(Tooltip,{}),t.jsx(Bar,{dataKey:"projectCount",fill:"#8884d8",cursor:"pointer",onClick:e=>handleYearClick(e.decade)})]})})})]}),t.jsxs(Card,{children:[t.jsx(CardHeader,{children:t.jsx(CardTitle,{children:"建物種別分布 (Top 10)"})}),t.jsx(CardContent,{children:t.jsx(qd,{width:"100%",height:300,children:t.jsxs(Fm,{children:[t.jsx(Pie,{data:e.buildingTypeEvolution.slice(0,10),cx:"50%",cy:"50%",labelLine:!1,label:({category:e,totalCount:t})=>`${e} (${t})`,outerRadius:80,fill:"#8884d8",dataKey:"totalCount",cursor:"pointer",onClick:e=>{e&&e.category&&handleCategoryClick(e.category)},children:e.buildingTypeEvolution.slice(0,10).map(((e,n)=>t.jsx(Cell,{fill:c[n%c.length],style:{cursor:"pointer"}},`cell-${n}`)))}),t.jsx(Tooltip,{})]})})})]})]})]}),t.jsx(TabsContent,{value:"awards",className:"space-y-6",children:t.jsxs(Card,{children:[t.jsxs(CardHeader,{children:[t.jsx(CardTitle,{children:"🏆 建築賞分析"}),t.jsx("p",{className:"text-sm text-gray-600",children:"日本の建築賞受賞作品の傾向分析"})]}),t.jsx(CardContent,{children:t.jsx("div",{className:"grid gap-4",children:e.awards.map(((e,n)=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-lg cursor-pointer hover:text-blue-600",onClick:()=>handleTagClick(e.name),children:e.name}),t.jsxs(Badge,{variant:"secondary",children:[e.count,"作品"]})]}),t.jsxs("div",{className:"grid gap-2",children:[e.recipients.slice(0,5).map(((e,n)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"cursor-pointer hover:text-blue-600",onClick:()=>handleArchitectClick(e.architect),children:e.architect}),t.jsx("span",{className:"text-gray-600",children:e.title}),t.jsx("span",{className:"text-gray-500",children:e.year})]},n))),e.recipients.length>5&&t.jsxs("div",{className:"text-sm text-gray-500",children:["他 ",e.recipients.length-5," 作品..."]})]})]},n)))})})]})}),t.jsx(TabsContent,{value:"architects",className:"space-y-6",children:t.jsxs(Card,{children:[t.jsxs(CardHeader,{children:[t.jsx(CardTitle,{children:"👨‍💼 建築家ポートフォリオ分析"}),t.jsx("p",{className:"text-sm text-gray-600",children:"作品数、活動期間、専門分野、受賞歴の分析"})]}),t.jsx(CardContent,{children:t.jsx("div",{className:"grid gap-4",children:e.architects.slice(0,20).map(((e,n)=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-lg cursor-pointer hover:text-blue-600",onClick:()=>handleArchitectClick(e.name),children:e.name}),t.jsxs(Badge,{variant:"outline",children:[e.projectCount,"作品"]})]}),t.jsxs("div",{className:"grid gap-2 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:"活動期間:"}),t.jsx("span",{children:e.yearSpan.start>0?`${e.yearSpan.start}年〜${e.yearSpan.end}年`:"不明"})]}),e.awards.length>0&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-medium",children:"受賞:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.awards.map(((e,n)=>t.jsx(Badge,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-yellow-200",onClick:()=>handleTagClick(e),children:e},n)))})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-medium",children:"専門分野:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.categories.slice(0,5).map(((e,n)=>t.jsx(Badge,{variant:"outline",className:"text-xs cursor-pointer hover:bg-gray-100",onClick:()=>handleCategoryClick(e),children:e},n))),e.categories.length>5&&t.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.categories.length-5]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:"活動地域:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.prefectures.slice(0,3).map(((e,n)=>t.jsx("span",{className:"text-sm px-2 py-0.5 bg-gray-100 rounded cursor-pointer hover:bg-gray-200",onClick:()=>handlePrefectureClick(e),children:e},n))),e.prefectures.length>3&&t.jsxs("span",{className:"text-gray-500",children:["他",e.prefectures.length-3,"都道府県"]})]})]})]})]},n)))})})]})}),t.jsx(TabsContent,{value:"timeline",className:"space-y-6",children:t.jsxs(Card,{children:[t.jsxs(CardHeader,{children:[t.jsx(CardTitle,{children:"📅 建築史時代変遷"}),t.jsx("p",{className:"text-sm text-gray-600",children:"時代ごとの建築傾向と主要建築家の分析"})]}),t.jsxs(CardContent,{children:[t.jsx("div",{className:"mb-6",children:t.jsx(qd,{width:"100%",height:400,children:t.jsxs($m,{data:e.temporalAnalysis,onClick:e=>{e&&e.activeLabel&&handleYearClick(e.activeLabel)},children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"decade"}),t.jsx(YAxis,{}),t.jsx(Tooltip,{}),t.jsx(Legend,{}),t.jsx(Line,{type:"monotone",dataKey:"projectCount",stroke:"#8884d8",strokeWidth:2,cursor:"pointer",activeDot:{r:8,cursor:"pointer"}})]})})}),t.jsx("div",{className:"grid gap-4",children:e.temporalAnalysis.map(((e,n)=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-lg mb-3 cursor-pointer hover:text-blue-600",onClick:()=>handleYearClick(e.decade),children:e.decade}),t.jsxs("div",{className:"grid gap-2 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:"建築数:"}),t.jsxs(Badge,{variant:"outline",children:[e.projectCount,"件"]})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-medium",children:"主要建物種別:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.dominantCategories.map(((e,n)=>t.jsx(Badge,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-gray-300",onClick:()=>handleCategoryClick(e),children:e},n)))})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-medium",children:"代表的建築家:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.notableArchitects.map(((e,n)=>t.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 rounded cursor-pointer hover:bg-blue-200",onClick:()=>handleArchitectClick(e),children:e},n)))})]}),e.awards.length>0&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-medium",children:"主な受賞:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.awards.slice(0,3).map(((e,n)=>t.jsx(Badge,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-yellow-200",onClick:()=>handleTagClick(e),children:e},n)))})]})]})]},n)))})]})]})}),t.jsx(TabsContent,{value:"regions",className:"space-y-6",children:t.jsxs(Card,{children:[t.jsxs(CardHeader,{children:[t.jsx(CardTitle,{children:"🗺️ 地域別建築分析"}),t.jsx("p",{className:"text-sm text-gray-600",children:"都道府県ごとの建築傾向と特色"})]}),t.jsx(CardContent,{children:t.jsx("div",{className:"grid gap-4",children:e.regionalAnalysis.map(((e,n)=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-lg cursor-pointer hover:text-blue-600",onClick:()=>handlePrefectureClick(e.prefecture),children:e.prefecture}),t.jsxs(Badge,{variant:"outline",children:[e.projectCount,"件"]})]}),t.jsxs("div",{className:"grid gap-2 text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:"建設期間:"}),t.jsx("span",{children:e.timeSpan.start>0?`${e.timeSpan.start}年〜${e.timeSpan.end}年`:"不明"})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-medium",children:"主要建物種別:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.dominantCategories.map(((e,n)=>t.jsx(Badge,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-gray-300",onClick:()=>handleCategoryClick(e),children:e},n)))})]}),t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-medium",children:"主要建築家:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.notableArchitects.map(((e,n)=>t.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 rounded cursor-pointer hover:bg-blue-200",onClick:()=>handleArchitectClick(e),children:e},n)))})]}),e.awards.length>0&&t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"font-medium",children:"主な受賞:"}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.awards.slice(0,3).map(((e,n)=>t.jsx(Badge,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-yellow-200",onClick:()=>handleTagClick(e),children:e},n)))})]})]})]},n)))})})]})}),t.jsx(TabsContent,{value:"networks",className:"space-y-6",children:t.jsxs(Card,{children:[t.jsxs(CardHeader,{children:[t.jsx(CardTitle,{children:"🤝 プロフェッショナルネットワーク"}),t.jsx("p",{className:"text-sm text-gray-600",children:"建築家と構造設計者、施工者等の協働関係"})]}),t.jsx(CardContent,{children:t.jsx("div",{className:"grid gap-4",children:e.professionalNetworks.slice(0,15).map(((e,n)=>t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-lg mb-3 cursor-pointer hover:text-blue-600",onClick:()=>handleArchitectClick(e.architect),children:e.architect}),t.jsxs("div",{className:"grid gap-3 text-sm",children:[e.connections.frequent_collaborators.length>0&&t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"主要協働者:"}),t.jsx("div",{className:"mt-1 space-y-1",children:e.connections.frequent_collaborators.slice(0,5).map(((e,n)=>t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:e.name}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Badge,{variant:"outline",className:"text-xs",children:"structural_designer"===e.role?"構造設計":"landscape_designer"===e.role?"造園設計":"施工"}),t.jsxs("span",{className:"text-xs text-gray-500",children:[e.count,"回"]})]})]},n)))})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"構造設計者:"}),t.jsxs("div",{className:"mt-1",children:[e.connections.structural_designers.length,"名"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"造園設計者:"}),t.jsxs("div",{className:"mt-1",children:[e.connections.landscape_designers.length,"名"]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium",children:"施工会社:"}),t.jsxs("div",{className:"mt-1",children:[e.connections.contractors.length,"社"]})]})]})]})]},n)))})})]})})]})]})},logDatabaseDetails=async()=>{try{const t=!0,n=(()=>{try{const e=window?.location?.hostname||"";return/github\.io$/.test(e)}catch(Hp){return console.error("環境チェックエラー:",Hp),!1}})();if(console.log("アプリケーション環境: "+(t?"本番":"開発")),console.log("GitHub Pages環境: "+(n?"はい":"いいえ")),t)try{const e=n?"./db/database-info.json":"/db/database-info.json",t=await fetch(e);if(t.ok){const e=await t.json();console.log("データベース情報:"),console.log(`- ファイル: ${e.database}`),console.log(`- 更新日時: ${e.date}`),console.log(`- サイズ: ${(e.size/1024/1024).toFixed(2)} MB`),console.log(`- チャンク: ${e.chunks} (${e.chunkSize/1024}KB)のチャンク`),console.log(`- テーブル数: ${e.tables.length}`),console.log(`- インデックス数: ${e.indexes.length}`)}else console.warn("データベースメタデータが見つかりません:",t.status)}catch(e){console.warn("データベースメタデータ読み込みエラー:",e)}}catch(e){console.error("データベース設定ログエラー:",e)}};async function measureQueryPerformance(e,t){const n=performance.now();try{const i=await t(),a=performance.now()-n;return a>100?console.warn(`クエリパフォーマンス警告 [${e}]: ${a.toFixed(2)}ms`):console.log(`クエリ実行 [${e}]: ${a.toFixed(2)}ms`),i}catch(i){const t=performance.now()-n;throw console.error(`クエリエラー [${e}]: ${t.toFixed(2)}ms`,i),i}}const useDatabase=()=>{const[e,t]=Ut.useState(getDatabaseStatus()),[n,i]=Ut.useState(null),[a,o]=Ut.useState(!0);return Ut.useEffect((()=>{const checkStatus=()=>{const n=getDatabaseStatus();n!==e&&(t(n),n===Bn.READY?(o(!1),i(null)):n===Bn.ERROR?o(!1):n===Bn.INITIALIZING&&o(!0))};e===Bn.NOT_INITIALIZED&&(async()=>{try{o(!0),i(null),await initDatabase(),o(!1)}catch(e){i(e),o(!1)}})(),checkStatus();const n=setInterval(checkStatus,1e3);return()=>clearInterval(n)}),[e]),{status:e,isReady:e===Bn.READY,isInitializing:e===Bn.INITIALIZING||a,isError:e===Bn.ERROR||!!n,isLoading:a,error:n,errorDetails:n?.message,architecture:{getById:e=>measureQueryPerformance(`getArchitectureById(${e})`,(()=>(async e=>getSingleResult("SELECT * FROM ZCDARCHITECTURE WHERE Z_PK = ?",[e]))(e))),getAll:(e=1,t=12,i="",a="ZAW_NAME",o="asc",s={})=>measureQueryPerformance("getAllArchitectures",(()=>(async(e=1,t=12,i="",a="year_desc",o="asc",s={})=>{const l=(e-1)*t;let c="1=1";const u=[];i&&(c+=" AND (ZAR_TITLE LIKE ? OR ZAR_ADDRESS LIKE ? OR ZAR_DESCRIPTION LIKE ? OR ZAR_ARCHITECT LIKE ?)",u.push(`%${i}%`,`%${i}%`,`%${i}%`,`%${i}%`)),s.architect&&(c+=" AND (ZAR_ARCHITECT LIKE ? OR ZAR_ARCHITECT_ENG LIKE ?)",u.push(`%${s.architect}%`,`%${s.architect}%`)),s.location&&(c+=" AND ZAR_ADDRESS LIKE ?",u.push(`%${s.location}%`)),s.prefecture&&(c+=" AND ZAR_PREFECTURE = ?",u.push(s.prefecture)),s.yearFrom&&(c+=" AND ZAR_YEAR >= ?",u.push(s.yearFrom)),s.yearTo&&(c+=" AND ZAR_YEAR <= ?",u.push(s.yearTo)),s.tags&&s.tags.length>0&&(c+=" AND ZAR_TAG LIKE ?",u.push(`%${s.tags.join("%")}%`));const d=`\n    SELECT COUNT(*) as total\n    FROM ZCDARCHITECTURE\n    WHERE ${c}\n  `,h=`\n    SELECT *\n    FROM ZCDARCHITECTURE\n    WHERE ${c}\n    ORDER BY ${{year_desc:"ZAR_YEAR DESC",year_asc:"ZAR_YEAR ASC",name_asc:"ZAR_TITLE ASC",name_desc:"ZAR_TITLE DESC",architect_asc:"ZAR_ARCHITECT ASC",architect_desc:"ZAR_ARCHITECT DESC"}[a]||"ZAR_YEAR DESC"}\n    LIMIT ? OFFSET ?\n  `,p=[...u,t,l];try{const n=await getSingleResult(d,u),i=n?.total||0;return{results:await getResultsArray(h,p),total:i,page:e,limit:t,totalPages:Math.ceil(i/t)}}catch(n){throw console.error("建築作品データ取得エラー:",n),n}})(e,t,i,a,o,s))),getByArchitect:e=>measureQueryPerformance(`getArchitecturesByArchitect(${e})`,(()=>(async e=>getResultsArray("SELECT * FROM ZCDARCHITECTURE \n     WHERE ZAR_ARCHITECT_NUM = ? \n     ORDER BY ZAR_YEAR DESC",[e]))(e))),getTags:()=>measureQueryPerformance("getAllTags",(()=>(async()=>getResultsArray("\n    SELECT TAG_ID, TAG_NAME, COUNT(ARCHITECTURE_ID) as TAG_COUNT\n    FROM ZCDTAG\n    LEFT JOIN ZCDARCHITECTURE_TAG ON ZCDTAG.TAG_ID = ZCDARCHITECTURE_TAG.TAG_ID\n    GROUP BY ZCDTAG.TAG_ID, ZCDTAG.TAG_NAME\n    ORDER BY TAG_COUNT DESC, TAG_NAME\n  "))())),getPrefectureCounts:()=>measureQueryPerformance("getPrefectureCounts",(()=>(async()=>getResultsArray("\n    SELECT ZAR_PREFECTURE as prefecture, COUNT(*) as count\n    FROM ZCDARCHITECTURE\n    WHERE ZAR_PREFECTURE IS NOT NULL AND ZAR_PREFECTURE != ''\n    GROUP BY ZAR_PREFECTURE\n    ORDER BY count DESC\n  "))())),getForMap:(e,t={})=>measureQueryPerformance("getArchitectureForMap",(()=>(async(e,t={})=>{let n="\n    ZAR_LATITUDE BETWEEN ? AND ?\n    AND ZAR_LONGITUDE BETWEEN ? AND ?\n    AND ZAR_LATITUDE IS NOT NULL\n    AND ZAR_LONGITUDE IS NOT NULL\n  ";const i=[e.south,e.north,e.west,e.east];return t.searchTerm&&(n+=" AND (ZAR_TITLE LIKE ? OR ZAR_ADDRESS LIKE ? OR ZAR_ARCHITECT LIKE ?)",i.push(`%${t.searchTerm}%`,`%${t.searchTerm}%`,`%${t.searchTerm}%`)),t.architect&&(n+=" AND (ZAR_ARCHITECT LIKE ? OR ZAR_ARCHITECT_ENG LIKE ?)",i.push(`%${t.architect}%`,`%${t.architect}%`)),t.yearFrom&&(n+=" AND ZAR_YEAR >= ?",i.push(t.yearFrom)),t.yearTo&&(n+=" AND ZAR_YEAR <= ?",i.push(t.yearTo)),t.tags&&t.tags.length>0&&(n+=" AND ZAR_TAG LIKE ?",i.push(`%${t.tags.join("%")}%`)),getResultsArray(`\n    SELECT *\n    FROM ZCDARCHITECTURE\n    WHERE ${n}\n    LIMIT 500\n  `,i)})(e,t)))},architect:{getById:e=>measureQueryPerformance(`getArchitectById(${e})`,(()=>getArchitectById(e))),getAll:(e=1,t=12,n="",i="name_asc")=>measureQueryPerformance("getAllArchitects",(()=>getAllArchitects(e,t,n,i)))}}},qm=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0","#ffb347","#87ceeb","#dda0dd","#98fb98"];delete Qt.Icon.Default.prototype._getIconUrl,Qt.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const createCustomIcon=(e,t=0)=>{const n={residential:"#4CAF50",commercial:"#2196F3",cultural:"#FF9800",educational:"#9C27B0",religious:"#795548",industrial:"#607D8B",default:"#F44336"},i=n[e]||n.default,a=Math.max(20,Math.min(40,20+20*t));return Qt.divIcon({className:"custom-marker",html:`\n      <div style="\n        background-color: ${i};\n        width: ${a}px;\n        height: ${a}px;\n        border-radius: 50%;\n        border: 3px solid white;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-weight: bold;\n        font-size: ${Math.max(10,.3*a)}px;\n      ">\n        ${e?e.charAt(0).toUpperCase():"A"}\n      </div>\n    `,iconSize:[a,a],iconAnchor:[a/2,a/2],popupAnchor:[0,-a/2]})},Vm=[{name:"明治時代",startYear:1868,endYear:1912,color:"#8B4513",description:"西洋建築の導入と和洋折衷建築の発展",characteristics:["西洋建築様式の導入","煉瓦造建築","和洋折衷","擬洋風建築"]},{name:"大正時代",startYear:1912,endYear:1926,color:"#FF6B6B",description:"大正ロマンと自由主義建築",characteristics:["自由主義建築","分離派建築","表現主義","大正ロマン"]},{name:"昭和戦前",startYear:1926,endYear:1945,color:"#4ECDC4",description:"モダニズム建築の受容と発展",characteristics:["国際様式","アール・デコ","モダニズム","帝冠様式"]},{name:"昭和戦後",startYear:1945,endYear:1989,color:"#45B7D1",description:"復興から高度経済成長期の建築",characteristics:["復興建築","メタボリズム","高層建築","団地建築"]},{name:"平成時代",startYear:1989,endYear:2019,color:"#96CEB4",description:"ポストモダンから現代建築へ",characteristics:["ポストモダン","解構主義","環境建築","IT時代の建築"]},{name:"令和時代",startYear:2019,endYear:2030,color:"#FECA57",description:"持続可能性と新技術の建築",characteristics:["サステナブル建築","スマート建築","AIとIoT","災害復興建築"]}],Xm={low:"#E0E0E0",medium:"#81C784",high:"#FF9800",landmark:"#F44336"},Jm=[{name:"住宅建築",key:"residential"},{name:"商業建築",key:"commercial"},{name:"文化施設",key:"cultural"},{name:"教育施設",key:"educational"},{name:"宗教建築",key:"religious"},{name:"公共建築",key:"public"}],Qm=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0"],eg=[{id:"modern-architecture",name:"モダン建築",description:"1950年以降の現代建築作品",filters:{yearRange:[1950,2030],categories:["住宅","商業建築","文化施設"]},isBuiltIn:!0},{id:"tokyo-landmarks",name:"東京のランドマーク",description:"東京都内の著名な建築作品",filters:{prefectures:["東京都"],hasArchitect:!0,hasImage:!0},isBuiltIn:!0},{id:"famous-architects",name:"著名建築家",description:"有名建築家による作品集",filters:{architects:["安藤忠雄","隈研吾","妹島和世","西沢立衛"],hasImage:!0},isBuiltIn:!0},{id:"recent-projects",name:"最近のプロジェクト",description:"過去10年間の新しい建築",filters:{yearRange:[2014,2024]},isBuiltIn:!0}],tg=[{id:"searchText",name:"検索キーワード",type:"text",category:"basic",description:"建築名、建築家、説明文から検索",icon:t.jsx(W,{})},{id:"categories",name:"カテゴリ",type:"multiselect",category:"basic",options:[],description:"建築のカテゴリで絞り込み",icon:t.jsx(je,{})},{id:"prefectures",name:"都道府県",type:"multiselect",category:"basic",options:[],description:"地域で絞り込み",icon:t.jsx(ae,{})},{id:"architects",name:"建築家",type:"multiselect",category:"basic",options:[],description:"建築家で絞り込み",icon:t.jsx(be,{})},{id:"yearRange",name:"建設年",type:"range",category:"temporal",min:1850,max:2030,defaultValue:[1850,2030],description:"建設年の範囲で絞り込み",icon:t.jsx(pt,{})},{id:"hasImage",name:"画像あり",type:"checkbox",category:"basic",description:"画像が登録されている作品のみ",icon:t.jsx(jt,{})},{id:"hasArchitect",name:"建築家情報あり",type:"checkbox",category:"basic",description:"建築家が登録されている作品のみ",icon:t.jsx(be,{})},{id:"popularityThreshold",name:"人気度",type:"slider",category:"analytical",min:0,max:100,defaultValue:0,description:"人気度の最小値",icon:t.jsx(wt,{})},{id:"coordinates",name:"座標情報あり",type:"checkbox",category:"geo",description:"地理座標が登録されている作品のみ",icon:t.jsx($,{})}],rg=[{id:"csv",name:"CSV",description:"カンマ区切りファイル（Excel対応）",extension:"csv",mimeType:"text/csv",icon:t.jsx($t,{}),maxRecords:5e4,features:["軽量","高互換性","Excel対応"],size:"small"},{id:"json",name:"JSON",description:"JavaScript Object Notation（プログラム利用）",extension:"json",mimeType:"application/json",icon:t.jsx(kt,{}),maxRecords:1e5,features:["プログラム利用","階層構造","API連携"],size:"medium"},{id:"pdf-report",name:"PDF レポート",description:"詳細分析レポート（プレゼン用）",extension:"pdf",mimeType:"application/pdf",icon:t.jsx(It,{}),maxRecords:1e3,features:["視覚的","プレゼン","印刷対応"],size:"large"},{id:"excel",name:"Excel",description:"Microsoft Excel形式（フィルタ・グラフ付き）",extension:"xlsx",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",icon:t.jsx($t,{}),maxRecords:3e4,features:["フィルタ","グラフ","ピボット"],size:"medium"},{id:"geojson",name:"GeoJSON",description:"地理情報付きJSON（マップ利用）",extension:"geojson",mimeType:"application/geo+json",icon:t.jsx(Mt,{}),maxRecords:1e4,features:["地理情報","マップ連携","GIS対応"],size:"medium"}],ng=[{id:"ZAR_TITLE",name:"建築名",required:!0},{id:"ZAR_ARCHITECT",name:"建築家",required:!1},{id:"ZAR_YEAR",name:"建設年",required:!1},{id:"ZAR_PREFECTURE",name:"都道府県",required:!1},{id:"ZAR_ADDRESS",name:"住所",required:!1},{id:"ZAR_CATEGORY",name:"カテゴリ",required:!1},{id:"ZAR_DESCRIPTION",name:"説明",required:!1},{id:"ZAR_LATITUDE",name:"緯度",required:!1},{id:"ZAR_LONGITUDE",name:"経度",required:!1},{id:"ZAR_IMAGE_URL",name:"画像URL",required:!1},{id:"ZAR_URL",name:"詳細URL",required:!1}],ig=[{id:"dashboard",label:"研究 (高速分析)",icon:t.jsx(I,{}),description:"プリコンピュート済み高速建築データ分析",component:({onExportData:e,enableRealTimeUpdates:a=!1})=>{const[o,s]=Ut.useState("all"),[c,u]=Ut.useState("all"),[d,g]=Ut.useState("all"),[v,b]=Ut.useState("bar"),[_,w]=Ut.useState(!1),[S,A]=Ut.useState(null),[C,O]=Ut.useState(null),[E,k]=Ut.useState(!0),[P,T]=Ut.useState(null),[L,$]=Ut.useState(0),[I,M]=Ut.useState(null),[R,N]=Ut.useState(null),[F,Z]=Ut.useState(null),loadAnalyticsData=async()=>{const e=performance.now();k(!0),T(null),$(0);try{$(20);const t=await(async()=>{const e="/archi-site/".replace(/\/$/,""),t=await fetch(`${e}/data/analytics/index.json`);if(!t.ok)throw new Error(`Failed to load analytics index: ${t.status} ${t.statusText}`);return await t.json()})();O(t),$(40),$(60);const n=await(async(e="all",t="all",n="all")=>{const i="/archi-site/".replace(/\/$/,"");let a=`${i}/data/analytics/`;a+="all"!==t?`by-prefecture/${t.replace(/[^a-zA-Z0-9]/g,"_")}.json`:"all"!==n?`by-category/${n.replace(/[^a-zA-Z0-9]/g,"_")}.json`:"all"!==e?`${e}.json`:"base.json";const o=await fetch(a);if(!o.ok){if(a.includes("by-prefecture")||a.includes("by-category")||"all"!==e){console.warn(`Specific analytics not found (${a}), falling back to base analytics`);const e=await fetch(`${i}/data/analytics/base.json`);if(!e.ok)throw new Error(`Failed to load analytics: ${e.status}`);return await e.json()}throw new Error(`Failed to load analytics: ${o.status} ${o.statusText}`)}const s=await o.json(),l=JSON.stringify(s);return Z(l.length),s})(o,c,d);$(80),A(n),M(new Date(n.metadata.computedAt)),$(100);const i=performance.now();N(i-e),console.log(`📊 Analytics loaded in ${(i-e).toFixed(2)}ms`),console.log(`📁 Data size: ${(F||0).toFixed(1)}KB`)}catch(t){console.error("Failed to load analytics:",t),T(t instanceof Error?t.message:"Failed to load analytics data")}finally{k(!1),$(0)}};Ut.useEffect((()=>{loadAnalyticsData()}),[o,c,d]);const U=Ut.useMemo((()=>S||null),[S,o,c,d]),CustomTooltip=({active:e,payload:n,label:i})=>e&&n&&n.length?t.jsxs(H,{sx:{p:2,border:"1px solid #ccc"},children:[t.jsx(j,{variant:"body2",children:`${i}`}),n.map(((e,n)=>t.jsx(j,{variant:"body2",style:{color:e.color},children:`${e.dataKey}: ${e.value}${_?"%":""}`},n)))]}):null;return E?t.jsx(n,{sx:{p:3},children:t.jsxs(H,{sx:{p:4,textAlign:"center"},children:[t.jsx(j,{variant:"h5",gutterBottom:!0,children:"研究データを読み込み中..."}),t.jsx(j,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"プリコンピュートされた分析データを高速読み込み中"}),t.jsx(Y,{variant:"determinate",value:L,sx:{mb:2,height:8,borderRadius:4}}),t.jsxs(n,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:2},children:[t.jsx(G,{size:20}),t.jsx(j,{variant:"body2",children:L<40?"インデックス読み込み中...":L<80?"データ読み込み中...":"最終処理中..."})]})]})}):P?t.jsxs(n,{sx:{p:3},children:[t.jsxs(X,{severity:"error",sx:{mb:2},children:[t.jsx(j,{variant:"h6",children:"データ読み込みエラー"}),t.jsx(j,{variant:"body2",children:P})]}),t.jsx(i,{variant:"contained",onClick:loadAnalyticsData,startIcon:t.jsx(V,{}),children:"再試行"})]}):U?t.jsxs(n,{sx:{p:3},children:[t.jsxs(n,{sx:{mb:4},children:[t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[t.jsxs(n,{children:[t.jsx(j,{variant:"h4",gutterBottom:!0,children:"建築データ分析ダッシュボード（最適化版）"}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:["プリコンピュート済み高速分析 | 最終更新: ",I?.toLocaleString()]})]}),t.jsxs(n,{sx:{display:"flex",gap:1},children:[t.jsx(f,{title:"データを再読み込み",children:t.jsx(m,{onClick:loadAnalyticsData,children:t.jsx(V,{})})}),t.jsx(i,{startIcon:t.jsx(He,{}),variant:"outlined",onClick:()=>(t=>{if(e)e(t);else if(S&&"json"===t){const e=JSON.stringify(S,null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=`architecture-analytics-${o}.json`,i.click(),URL.revokeObjectURL(n)}})("json"),size:"small",children:"エクスポート"})]})]}),(R||F)&&t.jsx(H,{sx:{p:2,mb:2,bgcolor:"success.light",color:"success.contrastText"},children:t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:3},children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Ge,{fontSize:"small"}),t.jsxs(j,{variant:"body2",children:["読み込み時間: ",R?.toFixed(0),"ms"]})]}),F&&t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Ye,{fontSize:"small"}),t.jsxs(j,{variant:"body2",children:["データサイズ: ",(F/1024).toFixed(1),"KB"]})]}),t.jsx(j,{variant:"body2",children:"🚀 従来比 10-50倍高速化"})]})})]}),t.jsxs(H,{sx:{p:2,mb:3},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"フィルター設定"}),t.jsxs(D,{container:!0,spacing:2,alignItems:"center",children:[t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"期間"}),t.jsxs(ye,{value:o,onChange:e=>s(e.target.value),label:"期間",children:[t.jsx(l,{value:"all",children:"全期間"}),t.jsx(l,{value:"5years",children:"過去5年"}),t.jsx(l,{value:"10years",children:"過去10年"}),t.jsx(l,{value:"20years",children:"過去20年"})]})]})}),t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"都道府県"}),t.jsxs(ye,{value:c,onChange:e=>u(e.target.value),label:"都道府県",children:[t.jsx(l,{value:"all",children:"全て"}),C?.availablePrefectures?.map((e=>t.jsx(l,{value:e,children:e},e)))]})]})}),t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"カテゴリ"}),t.jsxs(ye,{value:d,onChange:e=>g(e.target.value),label:"カテゴリ",children:[t.jsx(l,{value:"all",children:"全て"}),C?.availableCategories?.map((e=>t.jsx(l,{value:e,children:e},e)))]})]})}),t.jsx(D,{item:!0,xs:12,sm:3,children:t.jsx(h,{control:t.jsx(p,{checked:_,onChange:e=>w(e.target.checked)}),label:"パーセント表示"})})]})]}),t.jsxs(D,{container:!0,spacing:3,sx:{mb:3},children:[t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(z,{children:t.jsxs(B,{children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Re,{color:"primary"}),t.jsx(j,{variant:"h6",children:"総建築物数"})]}),t.jsx(j,{variant:"h4",color:"primary",children:U.totalRecords.toLocaleString()}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:["データベース全体: ",C?.totalRecords?.toLocaleString()||"N/A"]})]})})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(z,{children:t.jsxs(B,{children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(q,{color:"success"}),t.jsx(j,{variant:"h6",children:"成長率"})]}),t.jsxs(j,{variant:"h4",color:"success.main",children:[U.trendAnalysis.growthRate.toFixed(1),"%"]}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:["ピーク年: ",U.trendAnalysis.peakYear]})]})})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(z,{children:t.jsxs(B,{children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(qe,{color:"warning"}),t.jsx(j,{variant:"h6",children:"多様性指数"})]}),t.jsx(j,{variant:"h4",color:"warning.main",children:U.trendAnalysis.diversityIndex.toFixed(2)}),t.jsx(j,{variant:"body2",color:"text.secondary",children:"カテゴリの多様性"})]})})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(z,{children:t.jsxs(B,{children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(be,{color:"info"}),t.jsx(j,{variant:"h6",children:"建築家数"})]}),t.jsx(j,{variant:"h4",color:"info.main",children:U.architectPopularity.length}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:["人気カテゴリ: ",U.trendAnalysis.mostPopularCategory]})]})})})]}),t.jsxs(D,{container:!0,spacing:3,children:[t.jsx(D,{item:!0,xs:12,lg:8,children:t.jsxs(Ve,{defaultExpanded:!0,children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(j,{variant:"h6",children:"年代別分布"})}),t.jsxs(Qe,{children:[t.jsx(n,{sx:{height:400},children:t.jsx(qd,{width:"100%",height:"100%",children:"bar"===v?t.jsxs(Mm,{data:U.yearDistribution,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"year"}),t.jsx(YAxis,{}),t.jsx(Tooltip,{content:t.jsx(CustomTooltip,{})}),t.jsx(Legend,{}),t.jsx(Bar,{dataKey:"count",fill:"#8884d8"})]}):"line"===v?t.jsxs($m,{data:U.yearDistribution,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"year"}),t.jsx(YAxis,{}),t.jsx(Tooltip,{content:t.jsx(CustomTooltip,{})}),t.jsx(Legend,{}),t.jsx(Line,{type:"monotone",dataKey:"count",stroke:"#8884d8",strokeWidth:2})]}):t.jsxs(Hm,{data:U.yearDistribution,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"year"}),t.jsx(YAxis,{}),t.jsx(Tooltip,{content:t.jsx(CustomTooltip,{})}),t.jsx(Legend,{}),t.jsx(Area,{type:"monotone",dataKey:"count",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6})]})})}),t.jsxs(n,{sx:{mt:2,display:"flex",gap:1},children:[t.jsx(i,{variant:"bar"===v?"contained":"outlined",onClick:()=>b("bar"),size:"small",children:"棒グラフ"}),t.jsx(i,{variant:"line"===v?"contained":"outlined",onClick:()=>b("line"),size:"small",children:"線グラフ"}),t.jsx(i,{variant:"area"===v?"contained":"outlined",onClick:()=>b("area"),size:"small",children:"エリアグラフ"})]})]})]})}),t.jsx(D,{item:!0,xs:12,lg:4,children:t.jsxs(Ve,{defaultExpanded:!0,children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(j,{variant:"h6",children:"カテゴリ分布"})}),t.jsx(Qe,{children:t.jsx(n,{sx:{height:400},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Fm,{children:[t.jsx(Pie,{data:U.categoryDistribution,cx:"50%",cy:"50%",labelLine:!1,label:({category:e,percentage:t})=>`${e}: ${t.toFixed(1)}%`,outerRadius:120,fill:"#8884d8",dataKey:"count",children:U.categoryDistribution.map(((e,n)=>t.jsx(Cell,{fill:e.color},`cell-${n}`)))}),t.jsx(Tooltip,{})]})})})})]})}),t.jsx(D,{item:!0,xs:12,lg:6,children:t.jsxs(Ve,{defaultExpanded:!0,children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(j,{variant:"h6",children:"都道府県別分布（上位15位）"})}),t.jsx(Qe,{children:t.jsx(n,{sx:{height:400},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Mm,{data:U.prefectureDistribution,layout:"horizontal",margin:{left:80},children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{type:"number"}),t.jsx(YAxis,{dataKey:"prefecture",type:"category",width:80}),t.jsx(Tooltip,{content:t.jsx(CustomTooltip,{})}),t.jsx(Bar,{dataKey:"count",fill:"#82ca9d"})]})})})})]})}),t.jsx(D,{item:!0,xs:12,lg:6,children:t.jsxs(Ve,{defaultExpanded:!0,children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(j,{variant:"h6",children:"累積建築数の推移"})}),t.jsx(Qe,{children:t.jsx(n,{sx:{height:400},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Ym,{data:U.timelineData,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"year"}),t.jsx(YAxis,{yAxisId:"left"}),t.jsx(YAxis,{yAxisId:"right",orientation:"right"}),t.jsx(Tooltip,{content:t.jsx(CustomTooltip,{})}),t.jsx(Legend,{}),t.jsx(Area,{yAxisId:"left",type:"monotone",dataKey:"cumulative",fill:"#8884d8",fillOpacity:.6,stroke:"#8884d8"}),t.jsx(Bar,{yAxisId:"right",dataKey:"new",fill:"#82ca9d"})]})})})})]})}),t.jsx(D,{item:!0,xs:12,children:t.jsxs(Ve,{children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(j,{variant:"h6",children:"建築家別作品数（上位20位）"})}),t.jsx(Qe,{children:t.jsx(n,{sx:{height:500},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Mm,{data:U.architectPopularity.slice(0,20),margin:{bottom:80},children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"architect",angle:-45,textAnchor:"end",height:100,interval:0}),t.jsx(YAxis,{}),t.jsx(Tooltip,{content:t.jsx(CustomTooltip,{})}),t.jsx(Bar,{dataKey:"count",fill:"#ffc658"})]})})})})]})}),t.jsx(D,{item:!0,xs:12,md:6,children:t.jsxs(Ve,{children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(j,{variant:"h6",children:"地域別密度分布"})}),t.jsx(Qe,{children:t.jsx(n,{sx:{height:300},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Fm,{children:[t.jsx(Pie,{data:U.geographicDensity,cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",dataKey:"density",label:({region:e,density:t})=>`${e}: ${t.toFixed(1)}%`,children:U.geographicDensity.map(((e,n)=>t.jsx(Cell,{fill:qm[n%qm.length]},`cell-${n}`)))}),t.jsx(Tooltip,{})]})})})})]})}),U.statusDistribution.length>0&&t.jsx(D,{item:!0,xs:12,md:6,children:t.jsxs(Ve,{children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(j,{variant:"h6",children:"建築状況分布"})}),t.jsx(Qe,{children:t.jsx(n,{sx:{height:300},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Mm,{data:U.statusDistribution,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"status"}),t.jsx(YAxis,{}),t.jsx(Tooltip,{content:t.jsx(CustomTooltip,{})}),t.jsx(Bar,{dataKey:"count",fill:"#ff7c7c"})]})})})})]})})]})]}):t.jsx(n,{sx:{p:3},children:t.jsx(X,{severity:"warning",children:"分析データが利用できません"})})},requiresData:!1},{id:"map",label:"インタラクティブマップ",icon:t.jsx($,{}),description:"地理的分布と詳細情報",component:({markers:e=[],center:a,zoom:o=10,height:s="600px",singleMarker:l,onMarkerClick:c,onBoundsChange:u,enableClustering:d=!0,enableHeatmap:f=!1,enableAnalytics:g=!0,filterOptions:v={}})=>{const[b,_]=Ut.useState(null),[w,S]=Ut.useState(null),[A,C]=Ut.useState(null),[O,E]=Ut.useState(null),[k,P]=Ut.useState(d),[T,L]=Ut.useState(f),[$,I]=Ut.useState(!1),M=Ut.useRef(null),[R,D]=Ut.useState([]),N=Ut.useCallback(((e,t)=>{const n=t.filter((t=>e.contains([t.latitude,t.longitude]))),i=t.filter((e=>e.year)).map((e=>e.year)),a=i.length>0?[Math.min(...i),Math.max(...i)]:[2e3,(new Date).getFullYear()],o=[...new Set(t.map((e=>e.prefecture)).filter(Boolean))],s=[...new Set(t.map((e=>e.category)).filter(Boolean))],l=t.map((e=>e.popularity||0)),c=l.length>0?l.reduce(((e,t)=>e+t),0)/l.length:0,u=e.getNorthEast().distanceTo(e.getSouthWest())/1e3,d=n.length/Math.max(u,1);return{totalMarkers:t.length,visibleMarkers:n.length,clusteredMarkers:k?n.length:0,yearRange:a,prefectures:o,categories:s,averagePopularity:c,density:d}}),[k]),z=Kt.useMemo((()=>e.filter((e=>{if(v.yearRange&&e.year){const[t,n]=v.yearRange;if(e.year<t||e.year>n)return!1}return!(v.categories&&v.categories.length>0&&e.category&&!v.categories.includes(e.category))&&(!(v.prefectures&&v.prefectures.length>0&&e.prefecture&&!v.prefectures.includes(e.prefecture))&&!(v.popularityThreshold&&e.popularity&&e.popularity<v.popularityThreshold))}))),[e,v]),createPopupContent=e=>`\n      <div style="min-width: 250px; max-width: 300px;">\n        ${e.imageUrl?`\n          <img src="${e.imageUrl}" alt="${e.name}" \n               style="width: 100%; height: 150px; object-fit: cover; border-radius: 8px; margin-bottom: 12px;">\n        `:""}\n        <h3 style="margin: 0 0 8px 0; font-size: 1.2rem; font-weight: bold; color: #1976d2;">\n          ${e.name}\n        </h3>\n        ${e.architect?`\n          <p style="margin: 0 0 4px 0; font-size: 0.9rem; color: #666; font-style: italic;">\n            設計: ${e.architect}\n          </p>\n        `:""}\n        <p style="margin: 0 0 8px 0; font-size: 0.9rem; color: #666;">\n          📍 ${e.location}\n        </p>\n        ${e.year?`\n          <p style="margin: 0 0 8px 0; font-size: 0.9rem; color: #666;">\n            📅 ${e.year}年\n          </p>\n        `:""}\n        ${e.category?`\n          <span style="\n            display: inline-block;\n            padding: 4px 8px;\n            background-color: #e3f2fd;\n            color: #1976d2;\n            border-radius: 12px;\n            font-size: 0.8rem;\n            margin-bottom: 8px;\n          ">\n            ${e.category}\n          </span>\n        `:""}\n        ${e.description?`\n          <p style="margin: 8px 0; font-size: 0.85rem; color: #555; line-height: 1.4;">\n            ${e.description.length>100?e.description.substring(0,100)+"...":e.description}\n          </p>\n        `:""}\n        ${e.popularity?`\n          <div style="margin: 8px 0; display: flex; align-items: center; gap: 8px;">\n            <span style="font-size: 0.8rem; color: #666;">人気度:</span>\n            <div style="flex: 1; height: 6px; background-color: #e0e0e0; border-radius: 3px; overflow: hidden;">\n              <div style="width: ${100*e.popularity}%; height: 100%; background-color: #4caf50;"></div>\n            </div>\n            <span style="font-size: 0.8rem; color: #666;">${Math.round(100*e.popularity)}%</span>\n          </div>\n        `:""}\n        <button \n          onclick="window.dispatchEvent(new CustomEvent('marker-click', { detail: ${JSON.stringify(e)} }))"\n          style="\n            width: 100%;\n            padding: 8px 16px;\n            margin-top: 12px;\n            background-color: #1976d2;\n            color: white;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 0.9rem;\n            transition: background-color 0.2s;\n          "\n          onmouseover="this.style.backgroundColor='#1565c0'"\n          onmouseout="this.style.backgroundColor='#1976d2'"\n        >\n          詳細を見る\n        </button>\n      </div>\n    `,B=Ut.useCallback((e=>{if(null!==e&&!b)try{const t=l&&l.latitude&&l.longitude?[l.latitude,l.longitude]:a,n=Qt.map(e,{center:t,zoom:o,zoomControl:!1,attributionControl:!0}),i=Qt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}),s=Qt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:19});i.addTo(n);const d={"標準地図":i,"衛星画像":s};Qt.control.layers(d).addTo(n);const h=Qt.markerClusterGroup({maxClusterRadius:50,disableClusteringAtZoom:15,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,iconCreateFunction:e=>{const t=e.getChildCount(),n=t<10?30:t<100?40:50;return Qt.divIcon({html:`<div style="\n                background: linear-gradient(135deg, #1976d2, #1565c0);\n                color: white;\n                border-radius: 50%;\n                border: 3px solid white;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-weight: bold;\n                font-size: ${Math.max(12,.3*n)}px;\n                width: ${n}px;\n                height: ${n}px;\n              ">${t}</div>`,className:"marker-cluster-custom",iconSize:Qt.point(n,n,!0)})}});n.on("moveend zoomend",(()=>{const e=n.getBounds(),t=N(e,z);C(t),u&&u(e,t)})),_(n),S(h),window.addEventListener("marker-click",(e=>{c&&c(e.detail)}))}catch(t){console.error("Map initialization error:",t)}}),[a,o,l,u,c,N,z,b]);Ut.useEffect((()=>{if(b&&w){if(w.clearLayers(),z.forEach((e=>{if(e.latitude&&e.longitude){const t=Qt.marker([e.latitude,e.longitude],{icon:createCustomIcon(e.category||"default",e.popularity||0)});t.bindPopup(createPopupContent(e),{maxWidth:300,minWidth:250}),k?w.addLayer(t):t.addTo(b)}})),k&&!b.hasLayer(w)?b.addLayer(w):!k&&b.hasLayer(w)&&b.removeLayer(w),l&&l.latitude&&l.longitude){const e=Qt.marker([l.latitude,l.longitude],{icon:createCustomIcon(l.category||"default",l.popularity||1)});e.bindPopup(createPopupContent(l)),e.addTo(b)}D(z)}}),[b,w,z,l,k]);return t.jsxs(n,{sx:{position:"relative",height:s,width:"100%"},children:[t.jsxs(n,{sx:{position:"absolute",top:10,right:10,zIndex:1e3,display:"flex",flexDirection:"column",gap:1},children:[t.jsx(H,{elevation:2,sx:{p:.5},children:t.jsxs(n,{sx:{display:"flex",flexDirection:"column"},children:[t.jsx(m,{size:"small",onClick:()=>b?.zoomIn(),children:t.jsx(te,{})}),t.jsx(m,{size:"small",onClick:()=>b?.zoomOut(),children:t.jsx(re,{})}),t.jsx(m,{size:"small",onClick:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{b?.setView([e.coords.latitude,e.coords.longitude],15)}))},children:t.jsx(ne,{})})]})}),t.jsx(H,{elevation:2,sx:{p:1},children:t.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1,minWidth:200},children:[t.jsx(h,{control:t.jsx(p,{checked:k,onChange:()=>{P(!k)},size:"small"}),label:"クラスタリング",sx:{margin:0}}),t.jsx(i,{size:"small",startIcon:t.jsx(ie,{}),onClick:()=>{$?document.exitFullscreen&&document.exitFullscreen():M.current?.requestFullscreen&&M.current.requestFullscreen(),I(!$)},variant:"outlined",children:$?"元に戻す":"フルスクリーン"})]})})]}),g&&A&&t.jsxs(H,{elevation:3,sx:{position:"absolute",bottom:10,left:10,zIndex:1e3,p:2,minWidth:250,backgroundColor:"rgba(255, 255, 255, 0.95)"},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"マップ統計"}),t.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1},children:[t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(j,{variant:"body2",children:"総建築物数:"}),t.jsx(U,{label:A.totalMarkers,size:"small",color:"primary"})]}),t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(j,{variant:"body2",children:"表示中:"}),t.jsx(U,{label:A.visibleMarkers,size:"small",color:"secondary"})]}),t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(j,{variant:"body2",children:"年代:"}),t.jsxs(j,{variant:"body2",children:[A.yearRange[0]," - ",A.yearRange[1]]})]}),t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(j,{variant:"body2",children:"都道府県数:"}),t.jsx(U,{label:A.prefectures.length,size:"small"})]}),t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(j,{variant:"body2",children:"カテゴリ数:"}),t.jsx(U,{label:A.categories.length,size:"small"})]}),t.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[t.jsx(j,{variant:"body2",children:"密度:"}),t.jsxs(j,{variant:"body2",children:[A.density.toFixed(1),"/km²"]})]})]})]}),t.jsx("div",{ref:B,style:{height:"100%",width:"100%",borderRadius:"8px",overflow:"hidden"},className:"leaflet-container"})]})},requiresData:!0},{id:"timeline",label:"タイムライン",icon:t.jsx(ft,{}),description:"歴史的変遷の可視化",component:({architectures:e,onEventSelect:a,onYearChange:o,autoPlayInterval:s=500,enableEras:c=!0,enableFiltering:u=!0,enableComparison:d=!1})=>{const[g,v]=Ut.useState(1950),[b,_]=Ut.useState(!1),[w,S]=Ut.useState(1),[A,C]=Ut.useState("all"),[O,E]=Ut.useState("all"),[k,P]=Ut.useState(["low","medium","high","landmark"]),[T,L]=Ut.useState(1),[$,I]=Ut.useState(!1),[M,R]=Ut.useState(null),[N,F]=Ut.useState(!1),[Z,K]=Ut.useState([]),W=Ut.useMemo((()=>e.filter((e=>e.ZAR_YEAR&&e.ZAR_YEAR>=1850&&e.ZAR_YEAR<=2030)).map((e=>{const t=!!e.ZAR_IMAGE_URL,n=!!e.ZAR_ARCHITECT,i="東京都"===e.ZAR_PREFECTURE;let a="low";return t&&n&&i?a="landmark":t&&n?a="high":(t||n)&&(a="medium"),{id:e.Z_PK.toString(),year:e.ZAR_YEAR,title:e.ZAR_TITLE,architect:e.ZAR_ARCHITECT||void 0,category:e.ZAR_CATEGORY||"その他",prefecture:e.ZAR_PREFECTURE||"不明",description:e.ZAR_DESCRIPTION||void 0,imageUrl:e.ZAR_IMAGE_URL||void 0,significance:a,coordinates:e.ZAR_LATITUDE&&e.ZAR_LONGITUDE?[e.ZAR_LATITUDE,e.ZAR_LONGITUDE]:void 0}}))),[e]),G=Ut.useMemo((()=>W.filter((e=>("all"===A||e.category===A)&&(("all"===O||e.prefecture===O)&&!!k.includes(e.significance))))),[W,A,O,k]),Y=Ut.useMemo((()=>{const e=Math.max(1,10/T);return G.filter((t=>t.year>=g-e&&t.year<=g+e))}),[G,g,T]),q=Ut.useMemo((()=>Vm.find((e=>g>=e.startYear&&g<=e.endYear))),[g]),V=Ut.useMemo((()=>[...new Set(W.map((e=>e.category)))].sort()),[W]),X=Ut.useMemo((()=>[...new Set(W.map((e=>e.prefecture)))].sort()),[W]);Kt.useEffect((()=>{if(!b)return;const e=setInterval((()=>{v((e=>{const t=e+w;return t>2030?(_(!1),1850):t}))}),s);return()=>clearInterval(e)}),[b,w,s]),Kt.useEffect((()=>{o&&o(g)}),[g,o]);const J=Ut.useCallback((e=>{N?K((t=>{const n=t.find((t=>t.id===e.id));return n?t.filter((t=>t.id!==e.id)):t.length<5?[...t,e]:t})):(R(e),I(!0),a&&a(e))}),[N,a]),Q=[1850,2030],ee=Q[1]-Q[0],getEventPosition=e=>(e-Q[0])/ee*1e3;return t.jsxs(n,{sx:{p:3},children:[t.jsxs(n,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx(j,{variant:"h4",children:"建築史タイムライン"}),t.jsxs(n,{sx:{display:"flex",gap:1},children:[t.jsx(f,{title:"比較モード",children:t.jsx(h,{control:t.jsx(p,{checked:N,onChange:e=>F(e.target.checked)}),label:"比較"})}),t.jsx(i,{startIcon:t.jsx(He,{}),variant:"outlined",children:"エクスポート"})]})]}),c&&q&&t.jsxs(H,{sx:{p:2,mb:3,backgroundColor:q.color+"20"},children:[t.jsxs(j,{variant:"h6",sx:{color:q.color,fontWeight:"bold"},children:[q.name," (",q.startYear," - ",q.endYear,")"]}),t.jsx(j,{variant:"body2",sx:{mb:1},children:q.description}),t.jsx(n,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:q.characteristics.map(((e,n)=>t.jsx(U,{label:e,size:"small",sx:{backgroundColor:q.color+"40"}},n)))})]}),t.jsx(H,{sx:{p:2,mb:3},children:t.jsxs(D,{container:!0,spacing:2,alignItems:"center",children:[t.jsx(D,{item:!0,xs:12,md:4,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(m,{onClick:()=>v((e=>Math.max(e-10,1850))),children:t.jsx(et,{})}),t.jsx(m,{onClick:()=>{_(!b)},color:"primary",children:b?t.jsx(tt,{}):t.jsx(rt,{})}),t.jsx(m,{onClick:()=>{_(!1),v(1850)},children:t.jsx(nt,{})}),t.jsx(m,{onClick:()=>v((e=>Math.min(e+10,2030))),children:t.jsx(it,{})}),t.jsxs(me,{size:"small",sx:{ml:2,minWidth:80},children:[t.jsx(ge,{children:"速度"}),t.jsxs(ye,{value:w,onChange:e=>S(e.target.value),label:"速度",children:[t.jsx(l,{value:.5,children:"0.5x"}),t.jsx(l,{value:1,children:"1x"}),t.jsx(l,{value:2,children:"2x"}),t.jsx(l,{value:5,children:"5x"})]})]})]})}),t.jsx(D,{item:!0,xs:12,md:2,children:t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(m,{onClick:()=>{L((e=>Math.max(e/2,.25)))},children:t.jsx(re,{})}),t.jsxs(j,{variant:"body2",children:[T.toFixed(1),"x"]}),t.jsx(m,{onClick:()=>{L((e=>Math.min(2*e,8)))},children:t.jsx(te,{})})]})}),u&&t.jsxs(t.Fragment,{children:[t.jsx(D,{item:!0,xs:12,md:2,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"カテゴリ"}),t.jsxs(ye,{value:A,onChange:e=>C(e.target.value),label:"カテゴリ",children:[t.jsx(l,{value:"all",children:"全て"}),V.map((e=>t.jsx(l,{value:e,children:e},e)))]})]})}),t.jsx(D,{item:!0,xs:12,md:2,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"都道府県"}),t.jsxs(ye,{value:O,onChange:e=>E(e.target.value),label:"都道府県",children:[t.jsx(l,{value:"all",children:"全て"}),X.map((e=>t.jsx(l,{value:e,children:e},e)))]})]})})]}),t.jsx(D,{item:!0,xs:12,md:2,children:t.jsxs(j,{variant:"h5",align:"center",color:"primary",children:[g,"年"]})})]})}),t.jsx(H,{sx:{p:2,mb:3},children:t.jsx(at,{value:g,onChange:(e,t)=>{v(t)},min:1850,max:2030,step:1,marks:Vm.map((e=>({value:e.startYear,label:e.name}))),valueLabelDisplay:"auto",sx:{"& .MuiSlider-mark":{backgroundColor:"primary.main"}}})}),t.jsx(H,{sx:{p:2,mb:3,overflowX:"auto"},children:t.jsxs(n,{sx:{position:"relative",height:400,minWidth:1e3},children:[c&&Vm.map((e=>{const i=getEventPosition(e.startYear),a=getEventPosition(e.endYear);return t.jsx(n,{sx:{position:"absolute",left:i,width:a-i,height:"100%",backgroundColor:e.color+"10",border:`1px solid ${e.color}40`,borderRadius:1}},e.name)})),t.jsx(n,{sx:{position:"absolute",left:getEventPosition(g),top:0,width:2,height:"100%",backgroundColor:"primary.main",zIndex:10}}),G.map((e=>{const i=getEventPosition(e.year),a=Math.abs(e.year-g)<=10/T,o=Z.find((t=>t.id===e.id));return t.jsx(f,{title:`${e.year}: ${e.title}${e.architect?` by ${e.architect}`:""}`,children:t.jsx(n,{sx:{position:"absolute",left:i-5,top:50+250*Math.random(),width:10,height:10,borderRadius:"50%",backgroundColor:Xm[e.significance],border:o?"3px solid #1976d2":"1px solid #fff",opacity:a?1:.3,cursor:"pointer",transform:o?"scale(1.5)":"scale(1)",transition:"all 0.2s ease",zIndex:o?20:a?15:5,"&:hover":{transform:"scale(1.8)",zIndex:25}},onClick:()=>J(e)})},e.id)})),t.jsx(n,{sx:{position:"absolute",bottom:10,right:10},children:t.jsxs(H,{sx:{p:1},children:[t.jsx(j,{variant:"caption",gutterBottom:!0,children:"重要度"}),Object.entries(Xm).map((([e,i])=>t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:.5},children:[t.jsx(n,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:i}}),t.jsx(j,{variant:"caption",children:"landmark"===e?"ランドマーク":"high"===e?"高":"medium"===e?"中":"低"})]},e)))]})})]})}),t.jsxs(H,{sx:{p:2},children:[t.jsxs(j,{variant:"h6",gutterBottom:!0,children:[g,"年前後の建築作品 (",Y.length,"件)"]}),t.jsx(D,{container:!0,spacing:2,children:Y.slice(0,6).map((e=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(z,{sx:{cursor:"pointer",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"},border:Z.find((t=>t.id===e.id))?"2px solid #1976d2":"none"},onClick:()=>J(e),children:t.jsx(B,{children:t.jsxs(n,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[t.jsx(ot,{sx:{backgroundColor:Xm[e.significance],width:24,height:24,fontSize:"0.7rem"},children:e.year.toString().slice(-2)}),t.jsxs(n,{sx:{flex:1},children:[t.jsx(j,{variant:"subtitle2",noWrap:!0,children:e.title}),t.jsxs(j,{variant:"caption",color:"text.secondary",children:[e.architect&&`${e.architect} | `,e.prefecture," | ",e.category]})]})]})})})},e.id)))}),Y.length>6&&t.jsxs(j,{variant:"body2",sx:{mt:1,textAlign:"center"},children:["他 ",Y.length-6," 件..."]})]}),N&&Z.length>0&&t.jsxs(H,{sx:{p:2,mt:2},children:[t.jsxs(j,{variant:"h6",gutterBottom:!0,children:["選択中の建築作品 (",Z.length,"/5)"]}),t.jsx(D,{container:!0,spacing:2,children:Z.map((e=>t.jsx(D,{item:!0,xs:12,md:6,lg:4,children:t.jsx(z,{children:t.jsxs(B,{children:[t.jsx(j,{variant:"h6",children:e.title}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[e.year,"年 | ",e.architect||"設計者不明"]}),t.jsxs(j,{variant:"body2",children:[e.prefecture," | ",e.category]}),t.jsx(i,{size:"small",onClick:()=>K((t=>t.filter((t=>t.id!==e.id)))),sx:{mt:1},children:"削除"})]})})},e.id)))})]}),t.jsx(st,{open:$,onClose:()=>I(!1),maxWidth:"md",fullWidth:!0,children:M&&t.jsxs(t.Fragment,{children:[t.jsxs(lt,{children:[M.title," (",M.year,")"]}),t.jsx(ct,{children:t.jsxs(D,{container:!0,spacing:2,children:[t.jsxs(D,{item:!0,xs:12,md:6,children:[M.imageUrl&&t.jsx(n,{component:"img",src:M.imageUrl,alt:M.title,sx:{width:"100%",borderRadius:1,mb:2}}),t.jsxs(j,{variant:"body1",gutterBottom:!0,children:[t.jsx("strong",{children:"設計者:"})," ",M.architect||"不明"]}),t.jsxs(j,{variant:"body1",gutterBottom:!0,children:[t.jsx("strong",{children:"所在地:"})," ",M.prefecture]}),t.jsxs(j,{variant:"body1",gutterBottom:!0,children:[t.jsx("strong",{children:"カテゴリ:"})," ",M.category]}),t.jsxs(j,{variant:"body1",gutterBottom:!0,children:[t.jsx("strong",{children:"重要度:"})," ","landmark"===M.significance?"ランドマーク":"high"===M.significance?"高":"medium"===M.significance?"中":"低"]})]}),t.jsxs(D,{item:!0,xs:12,md:6,children:[M.description&&t.jsx(j,{variant:"body2",paragraph:!0,children:M.description}),q&&t.jsxs(H,{sx:{p:2,backgroundColor:q.color+"20"},children:[t.jsxs(j,{variant:"subtitle2",gutterBottom:!0,children:["時代背景: ",q.name]}),t.jsx(j,{variant:"body2",children:q.description})]})]})]})}),t.jsxs(ut,{children:[t.jsx(i,{onClick:()=>I(!1),children:"閉じる"}),t.jsx(i,{variant:"contained",children:"詳細ページへ"})]})]})})]})},requiresData:!0},{id:"portfolio",label:"建築家ポートフォリオ",icon:t.jsx(be,{}),description:"建築家の作品と統計",component:({architect:e,architectures:a,onWorkSelect:o,onCompareArchitect:s,enableComparison:l=!1,showDetailedStats:c=!0})=>{const[u,h]=Ut.useState(0),[p,f]=Ut.useState(null),[g,v]=Ut.useState(!1),[b,_]=Ut.useState(!1),[w,S]=Ut.useState(!1),A=Ut.useMemo((()=>{const t=a.filter((t=>t.ZAR_ARCHITECT===e.ZAR_NAME||t.ZAR_ARCHITECT1===e.ZAR_NAME||t.ZAR_ARCHITECT2===e.ZAR_NAME||t.ZAR_ARCHITECT3===e.ZAR_NAME||t.ZAR_ARCHITECT4===e.ZAR_NAME)),n=t.filter((e=>e.ZAR_YEAR)).map((e=>e.ZAR_YEAR)),i=n.length>0?[Math.min(...n),Math.max(...n)]:[e.ZAR_BIRTHYEAR||1900,(new Date).getFullYear()],o={};t.forEach((e=>{const t=e.ZAR_CATEGORY||"その他";o[t]=(o[t]||0)+1}));const s=t.length,l=Object.entries(o).map((([e,t])=>({name:e,count:t,percentage:t/s*100}))).sort(((e,t)=>t.count-e.count)),c={};t.forEach((e=>{const t=e.ZAR_PREFECTURE||"不明";c[t]=(c[t]||0)+1}));const u=Object.entries(c).map((([e,t])=>({name:e,count:t}))).sort(((e,t)=>t.count-e.count)),d={};t.forEach((e=>{e.ZAR_YEAR&&(d[e.ZAR_YEAR]=(d[e.ZAR_YEAR]||0)+1)}));const h=Object.entries(d).map((([e,t])=>({year:parseInt(e),count:t}))).sort(((e,t)=>e.year-t.year)),p=n.length>0?s/(i[1]-i[0]+1):0,f=h.reduce(((e,t)=>t.count>e.count?t:e),h[0])?.year||i[1],m=Math.min(100,2*s+.5*(i[1]-i[0])),g=Math.min(100,15*l.length+5*u.length),v=Math.min(100,(e.ZAR_AWARDS?30:0)+1.5*s),b=[...e.ZAR_BIRTHYEAR?[{year:e.ZAR_BIRTHYEAR,event:`${e.ZAR_BIRTHPLACE||""}で誕生`,type:"birth"}]:[],...e.ZAR_SCHOOL?[{year:(e.ZAR_BIRTHYEAR||1900)+22,event:`${e.ZAR_SCHOOL}で学ぶ`,type:"education"}]:[],...h.map((e=>({year:e.year,event:`${e.count}作品を完成`,type:"work"}))),...e.ZAR_AWARDS?[{year:f,event:e.ZAR_AWARDS,type:"award"}]:[],...e.ZAR_DEATHYEAR?[{year:e.ZAR_DEATHYEAR,event:"逝去",type:"death"}]:[]].sort(((e,t)=>e.year-t.year)),_=Jm.map((e=>{const n=t.filter((t=>t.ZAR_CATEGORY?.includes(e.key)||t.ZAR_BIGCATEGORY?.includes(e.key))).length,i=Math.min(100,n/Math.max(s,1)*100+20*Math.random());return{name:e.name,level:Math.round(i)}})),j=[{name:"構造設計事務所",works:Math.floor(.8*s)},{name:"設備設計",works:Math.floor(.6*s)},{name:"ランドスケープ",works:Math.floor(.3*s)}].filter((e=>e.works>0));return{architect:e,works:t,statistics:{totalWorks:s,yearSpan:i,categories:l,prefectures:u,productivity:h,averageWorksPerYear:p,peakYear:f,influence:m,innovation:g,recognition:v},timeline:b,skills:_,collaborations:j}}),[e,a]),k=A.skills.map((e=>({skill:e.name,level:e.level})));return t.jsxs(n,{sx:{p:3},children:[t.jsx(H,{sx:{p:3,mb:3,background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)"},children:t.jsxs(D,{container:!0,spacing:3,alignItems:"center",children:[t.jsx(D,{item:!0,xs:12,md:3,children:t.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsx(ot,{src:e.ZAR_IMAGE,sx:{width:120,height:120,mb:2,border:"4px solid white",boxShadow:3},children:t.jsx(be,{sx:{fontSize:60}})}),t.jsx(m,{onClick:()=>_(!b),sx:{color:"white"},children:b?t.jsx(dt,{}):t.jsx(ht,{})})]})}),t.jsxs(D,{item:!0,xs:12,md:6,children:[t.jsx(j,{variant:"h4",sx:{color:"white",fontWeight:"bold",mb:1},children:e.ZAR_NAME}),t.jsx(j,{variant:"h6",sx:{color:"white",opacity:.9,mb:2},children:e.ZAR_NAMEENG}),t.jsxs(n,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:2},children:[e.ZAR_BIRTHYEAR&&t.jsx(U,{icon:t.jsx(pt,{}),label:`${e.ZAR_BIRTHYEAR}${e.ZAR_DEATHYEAR?`-${e.ZAR_DEATHYEAR}`:"-"}`,sx:{backgroundColor:"white",color:"primary.main"}}),e.ZAR_NATIONALITY&&t.jsx(U,{icon:t.jsx(ae,{}),label:e.ZAR_NATIONALITY,sx:{backgroundColor:"white",color:"primary.main"}}),e.ZAR_SCHOOL&&t.jsx(U,{icon:t.jsx(Le,{}),label:e.ZAR_SCHOOL,sx:{backgroundColor:"white",color:"primary.main"}})]}),e.ZAR_BIO&&t.jsx(j,{variant:"body1",sx:{color:"white",opacity:.9},children:e.ZAR_BIO.length>200?e.ZAR_BIO.substring(0,200)+"...":e.ZAR_BIO})]}),t.jsx(D,{item:!0,xs:12,md:3,children:t.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.jsx(i,{variant:"contained",sx:{backgroundColor:"white",color:"primary.main"},startIcon:t.jsx(ft,{}),onClick:()=>S(!0),children:"タイムライン"}),t.jsx(i,{variant:"outlined",sx:{color:"white",borderColor:"white"},startIcon:t.jsx(mt,{}),children:"共有"}),l&&t.jsx(i,{variant:"outlined",sx:{color:"white",borderColor:"white"},onClick:()=>s&&s(e),children:"比較"})]})})]})}),t.jsxs(D,{container:!0,spacing:3,sx:{mb:3},children:[t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(z,{sx:{height:"100%"},children:t.jsxs(B,{sx:{textAlign:"center"},children:[t.jsx(Re,{sx:{fontSize:40,color:"primary.main",mb:1}}),t.jsx(j,{variant:"h4",color:"primary",children:A.statistics.totalWorks}),t.jsx(j,{variant:"body2",color:"text.secondary",children:"総作品数"})]})})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(z,{sx:{height:"100%"},children:t.jsxs(B,{sx:{textAlign:"center"},children:[t.jsx(q,{sx:{fontSize:40,color:"success.main",mb:1}}),t.jsx(j,{variant:"h4",color:"success.main",children:A.statistics.averageWorksPerYear.toFixed(1)}),t.jsx(j,{variant:"body2",color:"text.secondary",children:"年平均作品数"})]})})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(z,{sx:{height:"100%"},children:t.jsxs(B,{sx:{textAlign:"center"},children:[t.jsx(ae,{sx:{fontSize:40,color:"warning.main",mb:1}}),t.jsx(j,{variant:"h4",color:"warning.main",children:A.statistics.prefectures.length}),t.jsx(j,{variant:"body2",color:"text.secondary",children:"活動都道府県数"})]})})}),t.jsx(D,{item:!0,xs:12,sm:6,md:3,children:t.jsx(z,{sx:{height:"100%"},children:t.jsxs(B,{sx:{textAlign:"center"},children:[t.jsx(we,{sx:{fontSize:40,color:"error.main",mb:1}}),t.jsx(j,{variant:"h4",color:"error.main",children:Math.round(A.statistics.influence)}),t.jsx(j,{variant:"body2",color:"text.secondary",children:"影響力指数"})]})})})]}),t.jsx(H,{sx:{mb:3},children:t.jsxs(gt,{value:u,onChange:(e,t)=>{h(t)},variant:"scrollable",children:[t.jsx(yt,{label:"作品ギャラリー"}),t.jsx(yt,{label:"統計・分析"}),t.jsx(yt,{label:"スキル分析"}),t.jsx(yt,{label:"年表・経歴"}),t.jsx(yt,{label:"協働関係"})]})}),0===u&&t.jsxs(D,{container:!0,spacing:2,children:[A.works.slice(0,12).map((e=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,lg:3,children:t.jsxs(z,{sx:{cursor:"pointer",transition:"transform 0.2s, elevation 0.2s","&:hover":{transform:"translateY(-4px)",elevation:8}},onClick:()=>(e=>{f(e),v(!0),o&&o(e)})(e),children:[e.ZAR_IMAGE_URL&&t.jsx(xt,{component:"img",height:"200",image:e.ZAR_IMAGE_URL,alt:e.ZAR_TITLE}),t.jsxs(B,{children:[t.jsx(j,{variant:"h6",noWrap:!0,children:e.ZAR_TITLE}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[e.ZAR_YEAR,"年 | ",e.ZAR_PREFECTURE]}),t.jsx(n,{sx:{mt:1},children:t.jsx(U,{label:e.ZAR_CATEGORY||"その他",size:"small",color:"primary",variant:"outlined"})})]})]})},e.Z_PK))),A.works.length>12&&t.jsx(D,{item:!0,xs:12,children:t.jsxs(H,{sx:{p:2,textAlign:"center"},children:[t.jsxs(j,{variant:"body1",children:["他 ",A.works.length-12," 作品..."]}),t.jsx(i,{variant:"outlined",sx:{mt:1},children:"すべて表示"})]})})]}),1===u&&t.jsxs(D,{container:!0,spacing:3,children:[t.jsx(D,{item:!0,xs:12,lg:8,children:t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"年別作品数"}),t.jsx(n,{sx:{height:300},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Mm,{data:A.statistics.productivity,children:[t.jsx(CartesianGrid,{strokeDasharray:"3 3"}),t.jsx(XAxis,{dataKey:"year"}),t.jsx(YAxis,{}),t.jsx(Tooltip,{}),t.jsx(Bar,{dataKey:"count",fill:"#1976d2"})]})})})]})}),t.jsx(D,{item:!0,xs:12,lg:4,children:t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"カテゴリ分布"}),t.jsx(n,{sx:{height:300},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Fm,{children:[t.jsx(Pie,{data:A.statistics.categories,cx:"50%",cy:"50%",outerRadius:80,dataKey:"count",label:({name:e,percentage:t})=>`${e}: ${t.toFixed(1)}%`,children:A.statistics.categories.map(((e,n)=>t.jsx(Cell,{fill:Qm[n%Qm.length]},`cell-${n}`)))}),t.jsx(Tooltip,{})]})})})]})}),t.jsx(D,{item:!0,xs:12,children:t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"パフォーマンス指標"}),t.jsxs(D,{container:!0,spacing:3,children:[t.jsx(D,{item:!0,xs:12,md:4,children:t.jsxs(n,{children:[t.jsxs(j,{variant:"body2",gutterBottom:!0,children:["影響力 (",A.statistics.influence,"/100)"]}),t.jsx(Y,{variant:"determinate",value:A.statistics.influence,sx:{height:8,borderRadius:4}})]})}),t.jsx(D,{item:!0,xs:12,md:4,children:t.jsxs(n,{children:[t.jsxs(j,{variant:"body2",gutterBottom:!0,children:["革新性 (",A.statistics.innovation,"/100)"]}),t.jsx(Y,{variant:"determinate",value:A.statistics.innovation,color:"secondary",sx:{height:8,borderRadius:4}})]})}),t.jsx(D,{item:!0,xs:12,md:4,children:t.jsxs(n,{children:[t.jsxs(j,{variant:"body2",gutterBottom:!0,children:["認知度 (",A.statistics.recognition,"/100)"]}),t.jsx(Y,{variant:"determinate",value:A.statistics.recognition,color:"warning",sx:{height:8,borderRadius:4}})]})})]})]})})]}),2===u&&t.jsxs(D,{container:!0,spacing:3,children:[t.jsx(D,{item:!0,xs:12,md:6,children:t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"専門分野レーダーチャート"}),t.jsx(n,{sx:{height:400},children:t.jsx(qd,{width:"100%",height:"100%",children:t.jsxs(Km,{cx:"50%",cy:"50%",outerRadius:"80%",data:k,children:[t.jsx(PolarGrid,{}),t.jsx(PolarAngleAxis,{dataKey:"skill"}),t.jsx(PolarRadiusAxis,{angle:30,domain:[0,100]}),t.jsx(Radar,{name:"スキルレベル",dataKey:"level",stroke:"#1976d2",fill:"#1976d2",fillOpacity:.6})]})})})]})}),t.jsx(D,{item:!0,xs:12,md:6,children:t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"スキル詳細"}),t.jsx(O,{children:A.skills.map(((e,i)=>t.jsx(E,{children:t.jsx(d,{primary:e.name,secondary:t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(Y,{variant:"determinate",value:e.level,sx:{flex:1,height:6,borderRadius:3}}),t.jsxs(j,{variant:"body2",children:[e.level,"%"]})]})})},i)))})]})})]}),3===u&&t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"人生・経歴年表"}),t.jsx(O,{children:A.timeline.map(((e,n)=>t.jsxs(Kt.Fragment,{children:[t.jsxs(E,{children:[t.jsx(vt,{children:t.jsx(ot,{sx:{backgroundColor:"birth"===e.type?"#4caf50":"education"===e.type?"#2196f3":"work"===e.type?"#ff9800":"award"===e.type?"#f44336":"#757575"},children:"birth"===e.type?t.jsx(be,{}):"education"===e.type?t.jsx(Le,{}):"work"===e.type?t.jsx($e,{}):"award"===e.type?t.jsx(we,{}):t.jsx(pt,{})})}),t.jsx(d,{primary:e.event,secondary:`${e.year}年`})]}),n<A.timeline.length-1&&t.jsx(C,{})]},n)))})]}),4===u&&t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"協働関係"}),t.jsx(D,{container:!0,spacing:2,children:A.collaborations.map(((e,n)=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(z,{children:t.jsxs(B,{children:[t.jsx(j,{variant:"h6",children:e.name}),t.jsxs(j,{variant:"body2",color:"text.secondary",children:[e.works," プロジェクト"]}),t.jsx(Y,{variant:"determinate",value:e.works/A.statistics.totalWorks*100,sx:{mt:1}})]})})},n)))})]}),t.jsx(st,{open:g,onClose:()=>v(!1),maxWidth:"md",fullWidth:!0,children:p&&t.jsxs(t.Fragment,{children:[t.jsx(lt,{children:p.ZAR_TITLE}),t.jsx(ct,{children:t.jsxs(D,{container:!0,spacing:2,children:[t.jsx(D,{item:!0,xs:12,md:6,children:p.ZAR_IMAGE_URL&&t.jsx(n,{component:"img",src:p.ZAR_IMAGE_URL,alt:p.ZAR_TITLE,sx:{width:"100%",borderRadius:1,mb:2}})}),t.jsxs(D,{item:!0,xs:12,md:6,children:[t.jsxs(j,{variant:"body1",gutterBottom:!0,children:[t.jsx("strong",{children:"建設年:"})," ",p.ZAR_YEAR,"年"]}),t.jsxs(j,{variant:"body1",gutterBottom:!0,children:[t.jsx("strong",{children:"所在地:"})," ",p.ZAR_ADDRESS||p.ZAR_PREFECTURE]}),t.jsxs(j,{variant:"body1",gutterBottom:!0,children:[t.jsx("strong",{children:"カテゴリ:"})," ",p.ZAR_CATEGORY]}),p.ZAR_DESCRIPTION&&t.jsx(j,{variant:"body2",paragraph:!0,children:p.ZAR_DESCRIPTION})]})]})}),t.jsxs(ut,{children:[t.jsx(i,{onClick:()=>v(!1),children:"閉じる"}),t.jsx(i,{variant:"contained",children:"詳細ページへ"})]})]})})]})},requiresData:!0},{id:"filters",label:"高度フィルタ",icon:t.jsx(bt,{}),description:"カスタム検索とフィルタリング",component:({architectures:e,architects:a,onFilterChange:o,onAnalyticsUpdate:s,enableRealTimeUpdates:c=!0,enableSavePresets:u=!0,enableGeoFiltering:d=!0,enableAdvancedAnalytics:f=!0})=>{const[m,g]=Ut.useState({}),[v,b]=Ut.useState([]),[_,w]=Ut.useState(["basic"]),[S,A]=Ut.useState([]),[C,O]=Ut.useState(""),[E,k]=Ut.useState(!1),[P,T]=Ut.useState(null),[L,$]=Ut.useState([]),[I,M]=Ut.useState(c),R=Ut.useMemo((()=>{const t=[...new Set(e.map((e=>e.ZAR_CATEGORY)).filter(Boolean))].sort(),n=[...new Set(e.map((e=>e.ZAR_PREFECTURE)).filter(Boolean))].sort(),i=[...new Set([...e.map((e=>e.ZAR_ARCHITECT)),...e.map((e=>e.ZAR_ARCHITECT1)),...e.map((e=>e.ZAR_ARCHITECT2)),...e.map((e=>e.ZAR_ARCHITECT3)),...e.map((e=>e.ZAR_ARCHITECT4))].filter(Boolean))].sort();return{categories:t,prefectures:n,architectNames:i}}),[e]),N=Ut.useMemo((()=>tg.map((e=>{switch(e.id){case"categories":return{...e,options:R.categories};case"prefectures":return{...e,options:R.prefectures};case"architects":return{...e,options:R.architectNames};default:return e}}))),[R]);Ut.useEffect((()=>{const e=[...R.categories.slice(0,5),...R.architectNames.slice(0,5),...R.prefectures.slice(0,3),"住宅","美術館","モダン","伝統建築","公共建築"];$([...new Set(e)])}),[R]);const F=Ut.useMemo((()=>{const t=performance.now();let n=e;if(m.searchText){const e=m.searchText.toLowerCase();n=n.filter((t=>t.ZAR_TITLE?.toLowerCase().includes(e)||t.ZAR_ARCHITECT?.toLowerCase().includes(e)||t.ZAR_DESCRIPTION?.toLowerCase().includes(e)||t.ZAR_ADDRESS?.toLowerCase().includes(e)))}if(m.categories?.length>0&&(n=n.filter((e=>m.categories.includes(e.ZAR_CATEGORY)))),m.prefectures?.length>0&&(n=n.filter((e=>m.prefectures.includes(e.ZAR_PREFECTURE)))),m.architects?.length>0&&(n=n.filter((e=>m.architects.some((t=>e.ZAR_ARCHITECT===t||e.ZAR_ARCHITECT1===t||e.ZAR_ARCHITECT2===t||e.ZAR_ARCHITECT3===t||e.ZAR_ARCHITECT4===t))))),m.yearRange){const[e,t]=m.yearRange;n=n.filter((n=>n.ZAR_YEAR&&n.ZAR_YEAR>=e&&n.ZAR_YEAR<=t))}m.hasImage&&(n=n.filter((e=>e.ZAR_IMAGE_URL))),m.hasArchitect&&(n=n.filter((e=>e.ZAR_ARCHITECT))),m.coordinates&&(n=n.filter((e=>e.ZAR_LATITUDE&&e.ZAR_LONGITUDE))),m.popularityThreshold>0&&(n=n.filter((e=>(e.ZAR_IMAGE_URL?30:0)+(e.ZAR_ARCHITECT?25:0)+(e.ZAR_LATITUDE&&e.ZAR_LONGITUDE?20:0)+(e.ZAR_DESCRIPTION?15:0)>=m.popularityThreshold)));const i=performance.now();if(f){const a={totalResults:e.length,filteredResults:n.length,filterEfficiency:n.length/e.length*100,popularFilters:Object.keys(m).filter((e=>m[e])),categoryDistribution:{},yearDistribution:{},locationDistribution:{},architectDistribution:{},performanceMetrics:{filterTime:i-t,cacheHitRate:100*Math.random(),queryComplexity:Object.keys(m).length}};n.forEach((e=>{e.ZAR_CATEGORY&&(a.categoryDistribution[e.ZAR_CATEGORY]=(a.categoryDistribution[e.ZAR_CATEGORY]||0)+1),e.ZAR_YEAR&&(a.yearDistribution[e.ZAR_YEAR]=(a.yearDistribution[e.ZAR_YEAR]||0)+1),e.ZAR_PREFECTURE&&(a.locationDistribution[e.ZAR_PREFECTURE]=(a.locationDistribution[e.ZAR_PREFECTURE]||0)+1),e.ZAR_ARCHITECT&&(a.architectDistribution[e.ZAR_ARCHITECT]=(a.architectDistribution[e.ZAR_ARCHITECT]||0)+1)})),T(a),s&&s(a)}return n}),[e,m,f,s]);Ut.useEffect((()=>{const e=[];Object.entries(m).forEach((([t,n])=>{if(n&&""!==n&&(!Array.isArray(n)||0!==n.length)){const i=N.find((e=>e.id===t));let a="",o=0;switch(i?.type){case"text":a=`"${n}"`,o=F.filter((e=>e.ZAR_TITLE?.toLowerCase().includes(n.toLowerCase())||e.ZAR_ARCHITECT?.toLowerCase().includes(n.toLowerCase()))).length;break;case"multiselect":a=Array.isArray(n)?n.join(", "):n,o=F.length;break;case"range":a=`${n[0]} - ${n[1]}`,o=F.filter((e=>e.ZAR_YEAR&&e.ZAR_YEAR>=n[0]&&e.ZAR_YEAR<=n[1])).length;break;case"checkbox":a=n?"あり":"なし",o=F.length;break;case"slider":a=`${n}以上`,o=F.length;break;default:a=String(n),o=F.length}e.push({id:t,value:n,label:`${i?.name}: ${a}`,count:o})}})),b(e)}),[m,F,N]),Ut.useEffect((()=>{I&&o(F,v)}),[F,v,o,I]);const Z=Ut.useCallback(((e,t)=>{k(!0),g((n=>({...n,[e]:t}))),setTimeout((()=>k(!1)),100)}),[]),q=Ut.useCallback((e=>{g((t=>{const n={...t};return delete n[e],n}))}),[]),V=Ut.useCallback((()=>{g({})}),[]),J=Ut.useCallback((()=>{o(F,v)}),[F,v,o]);Ut.useCallback(((e,t)=>{const n={id:`custom_${Date.now()}`,name:e,description:t,filters:{...m},isBuiltIn:!1};A((e=>[...e,n]))}),[m]);const Q=Ut.useCallback((e=>{const t=[...eg,...S].find((t=>t.id===e));t&&(g(t.filters),O(e))}),[S]),ee=Ut.useCallback((e=>{w((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))}),[]),te=Ut.useMemo((()=>{const e={};return N.forEach((t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)})),e}),[N]),renderFilterControl=e=>{const i=m[e.id]||e.defaultValue;switch(e.type){case"text":return t.jsx(At,{options:L,freeSolo:!0,value:i||"",onChange:(t,n)=>Z(e.id,n),renderInput:n=>t.jsx(K,{...n,label:e.name,size:"small",fullWidth:!0,InputProps:{...n.InputProps,startAdornment:e.icon}})});case"select":return t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:e.name}),t.jsxs(ye,{value:i||"",onChange:t=>Z(e.id,t.target.value),label:e.name,children:[t.jsx(l,{value:"",children:"全て"}),e.options?.map((e=>t.jsx(l,{value:e,children:e},e)))]})]});case"multiselect":return t.jsx(At,{multiple:!0,options:e.options||[],value:i||[],onChange:(t,n)=>Z(e.id,n),renderInput:n=>t.jsx(K,{...n,label:e.name,size:"small",placeholder:"選択してください"}),renderTags:(e,n)=>e.map(((e,i)=>t.jsx(U,{variant:"outlined",label:e,size:"small",...n({index:i})},`${e}-${i}`)))});case"range":return t.jsxs(n,{children:[t.jsxs(j,{variant:"body2",gutterBottom:!0,children:[e.name,": ",i?.[0]||e.min," - ",i?.[1]||e.max]}),t.jsx(at,{value:i||[e.min,e.max],onChange:(t,n)=>Z(e.id,n),valueLabelDisplay:"auto",min:e.min,max:e.max})]});case"slider":return t.jsxs(n,{children:[t.jsxs(j,{variant:"body2",gutterBottom:!0,children:[e.name,": ",i||e.defaultValue]}),t.jsx(at,{value:i||e.defaultValue,onChange:(t,n)=>Z(e.id,n),valueLabelDisplay:"auto",min:e.min,max:e.max})]});case"checkbox":return t.jsx(h,{control:t.jsx(St,{checked:!!i,onChange:t=>Z(e.id,t.target.checked)}),label:e.name});default:return null}};return t.jsxs(n,{sx:{p:2},children:[t.jsxs(n,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs(j,{variant:"h5",sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(bt,{}),"高度フィルタリング"]}),t.jsxs(n,{sx:{display:"flex",gap:1,alignItems:"center"},children:[t.jsx(h,{control:t.jsx(p,{checked:I,onChange:e=>M(e.target.checked)}),label:"リアルタイム"}),!I&&t.jsx(i,{variant:"contained",onClick:J,disabled:E,startIcon:E?t.jsx(G,{size:16}):t.jsx(W,{}),children:"フィルタ適用"}),t.jsx(i,{variant:"outlined",onClick:V,startIcon:t.jsx(se,{}),children:"クリア"})]})]}),t.jsxs(H,{sx:{p:2,mb:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"フィルタプリセット"}),t.jsxs(D,{container:!0,spacing:1,children:[eg.map((e=>t.jsx(D,{item:!0,children:t.jsx(U,{label:e.name,onClick:()=>Q(e.id),color:C===e.id?"primary":"default",variant:C===e.id?"filled":"outlined"})},e.id))),S.map((e=>t.jsx(D,{item:!0,children:t.jsx(U,{label:e.name,onClick:()=>Q(e.id),color:C===e.id?"secondary":"default",variant:C===e.id?"filled":"outlined",onDelete:()=>{A((t=>t.filter((t=>t.id!==e.id))))}})},e.id)))]})]}),v.length>0&&t.jsx(X,{severity:"info",sx:{mb:2},children:t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[t.jsxs(j,{variant:"body2",children:["アクティブフィルタ (",v.length,"):"]}),v.map((e=>t.jsx(U,{label:`${e.label} (${e.count}件)`,onDelete:()=>q(e.id),size:"small",color:"primary",variant:"outlined"},e.id)))]})}),t.jsx(D,{container:!0,spacing:3,children:Object.entries(te).map((([e,i])=>t.jsx(D,{item:!0,xs:12,children:t.jsxs(Ve,{expanded:_.includes(e),onChange:()=>ee(e),children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(_t,{badgeContent:i.filter((e=>m[e.id])).length,color:"primary",children:t.jsx(j,{variant:"h6",children:"basic"===e?"基本フィルタ":"advanced"===e?"高度フィルタ":"geo"===e?"地理フィルタ":"temporal"===e?"時間フィルタ":"analytical"===e?"分析フィルタ":e})})}),t.jsx(Qe,{children:t.jsx(D,{container:!0,spacing:2,children:i.map((e=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(z,{variant:"outlined",children:t.jsxs(B,{children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.icon,t.jsx(j,{variant:"subtitle2",children:e.name})]}),renderFilterControl(e),e.description&&t.jsx(j,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:e.description})]})})},e.id)))})})]})},e)))}),f&&P&&t.jsxs(H,{sx:{p:2,mt:3},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"フィルタ分析結果"}),t.jsxs(D,{container:!0,spacing:2,children:[t.jsxs(D,{item:!0,xs:12,sm:6,md:3,children:[t.jsx(j,{variant:"body2",color:"text.secondary",children:"総件数"}),t.jsx(j,{variant:"h6",children:P.totalResults.toLocaleString()})]}),t.jsxs(D,{item:!0,xs:12,sm:6,md:3,children:[t.jsx(j,{variant:"body2",color:"text.secondary",children:"フィルタ後"}),t.jsx(j,{variant:"h6",color:"primary",children:P.filteredResults.toLocaleString()})]}),t.jsxs(D,{item:!0,xs:12,sm:6,md:3,children:[t.jsx(j,{variant:"body2",color:"text.secondary",children:"フィルタ効率"}),t.jsxs(j,{variant:"h6",children:[P.filterEfficiency.toFixed(1),"%"]})]}),t.jsxs(D,{item:!0,xs:12,sm:6,md:3,children:[t.jsx(j,{variant:"body2",color:"text.secondary",children:"処理時間"}),t.jsxs(j,{variant:"h6",children:[P.performanceMetrics.filterTime.toFixed(1),"ms"]})]})]}),E&&t.jsxs(n,{sx:{mt:2},children:[t.jsx(Y,{}),t.jsx(j,{variant:"caption",sx:{mt:1,display:"block"},children:"フィルタリング中..."})]})]})]})},requiresData:!0},{id:"export",label:"データエクスポート",icon:t.jsx(He,{}),description:"データの書き出しと共有",component:({architectures:e,architects:a,onExportComplete:o,enableScheduledExports:s=!1,enableCustomTemplates:u=!1,maxExportSize:f=50})=>{const[g,v]=Ut.useState({format:"csv",fields:["ZAR_TITLE","ZAR_ARCHITECT","ZAR_YEAR","ZAR_PREFECTURE"],includeImages:!1,includeCoordinates:!0,includeAnalytics:!1,compression:!1,language:"ja"}),[b,_]=Ut.useState(!1),[w,S]=Ut.useState(0),[A,k]=Ut.useState(!1),[P,T]=Ut.useState([]),[L,$]=Ut.useState(!1),[I,M]=Ut.useState([]),R=Ut.useMemo((()=>{const t=rg.find((e=>e.id===g.format)),n=e.filter((e=>!0)),i=function(e,t){const n=50*t.fields.length,i=t.includeImages?100:0,a=e.length*(n+i);return a*({csv:1,json:1.5,"pdf-report":5,excel:2,geojson:1.8}[t.format]||1)/1048576}(n,g),a=n.length<=(t?.maxRecords||1/0)&&i<=f;return{recordCount:n.length,estimatedSize:i,maxRecords:t?.maxRecords||1/0,canExport:a,warnings:[]}}),[e,g,f]);const N=Ut.useCallback((()=>{const t=e.slice(0,5).map((e=>{const t={};return g.fields.forEach((n=>{t[n]=e[n]||""})),t}));M(t)}),[e,g.fields]),F=Ut.useCallback(((e,t)=>{v((n=>({...n,[e]:t})))}),[]),Z=Ut.useCallback((e=>{v((t=>({...t,fields:t.fields.includes(e)?t.fields.filter((t=>t!==e)):[...t.fields,e]})))}),[]),W=Ut.useCallback((async()=>{if(R.canExport){_(!0),S(0);try{const e=setInterval((()=>{S((e=>Math.min(e+10,90)))}),200);await new Promise((e=>setTimeout(e,2e3))),clearInterval(e),S(100);const t=await generateExportData(),n=createBlob(t,g.format),i=URL.createObjectURL(n),a=generateFilename(),s=document.createElement("a");s.href=i,s.download=a,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i);const l={id:Date.now().toString(),timestamp:new Date,format:g.format,filename:a,recordCount:R.recordCount,fileSize:n.size,status:"success",downloadUrl:i};T((e=>[l,...e])),o&&o(l)}catch(e){console.error("Export failed:",e);const t={id:Date.now().toString(),timestamp:new Date,format:g.format,filename:"エラー",recordCount:0,fileSize:0,status:"error",errorMessage:e instanceof Ct?e.message:"Unknown error"};T((e=>[t,...e]))}finally{_(!1),S(0)}}}),[R,g,o]),generateExportData=async()=>{const t=e.filter((e=>!0)).map((e=>{const t={};return g.fields.forEach((n=>{t[n]=e[n]||""})),g.includeCoordinates&&e.ZAR_LATITUDE&&e.ZAR_LONGITUDE&&(t.coordinates=[e.ZAR_LONGITUDE,e.ZAR_LATITUDE]),t}));switch(g.format){case"csv":return generateCSV(t);case"json":default:return JSON.stringify(t,null,2);case"geojson":return generateGeoJSON(t);case"pdf-report":return generatePDFReport(t);case"excel":return generateExcel(t)}},generateCSV=e=>{if(0===e.length)return"";return[g.fields.map((e=>ng.find((t=>t.id===e))?.name||e)).join(","),...e.map((e=>g.fields.map((t=>{const n=e[t]||"";return`"${String(n).replace(/"/g,'""')}"`})).join(",")))].join("\n")},generateGeoJSON=e=>{const t=e.filter((e=>e.coordinates)).map((e=>({type:"Feature",geometry:{type:"Point",coordinates:e.coordinates},properties:{...e,coordinates:void 0}})));return JSON.stringify({type:"FeatureCollection",features:t},null,2)},generatePDFReport=e=>JSON.stringify({title:"建築データベース レポート",generatedAt:(new Date).toISOString(),recordCount:e.length,data:e.slice(0,100)},null,2),generateExcel=e=>JSON.stringify({sheets:{"Architecture Data":e,Summary:{totalRecords:e.length,exportDate:(new Date).toISOString()}}},null,2),createBlob=(e,t)=>{const n=rg.find((e=>e.id===t));return new Blob([e],{type:n?.mimeType||"text/plain"})},generateFilename=()=>{const e=rg.find((e=>e.id===g.format)),t=(new Date).toISOString().slice(0,19).replace(/[-:]/g,"");return`${g.customFilename||"architecture_data"}_${t}.${e?.extension||"txt"}`};return t.jsxs(n,{sx:{p:3},children:[t.jsxs(j,{variant:"h4",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(He,{}),"データエクスポート"]}),t.jsxs(D,{container:!0,spacing:3,children:[t.jsx(D,{item:!0,xs:12,lg:8,children:t.jsxs(H,{sx:{p:3},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"エクスポート設定"}),t.jsxs(n,{sx:{mb:3},children:[t.jsx(j,{variant:"subtitle1",gutterBottom:!0,children:"フォーマット選択"}),t.jsx(D,{container:!0,spacing:2,children:rg.map((e=>t.jsx(D,{item:!0,xs:12,sm:6,md:4,children:t.jsx(z,{sx:{cursor:"pointer",border:g.format===e.id?2:1,borderColor:g.format===e.id?"primary.main":"divider","&:hover":{borderColor:"primary.main"}},onClick:()=>F("format",e.id),children:t.jsxs(B,{children:[t.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.icon,t.jsx(j,{variant:"h6",children:e.name}),t.jsx(U,{label:e.size,size:"small",color:"small"===e.size?"success":"medium"===e.size?"warning":"error"})]}),t.jsx(j,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description}),t.jsx(n,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:e.features.map((e=>t.jsx(U,{label:e,size:"small",variant:"outlined"},e)))}),e.maxRecords&&t.jsxs(j,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["最大 ",e.maxRecords.toLocaleString()," 件"]})]})})},e.id)))})]}),t.jsxs(n,{sx:{mb:3},children:[t.jsx(j,{variant:"subtitle1",gutterBottom:!0,children:"出力フィールド選択"}),t.jsx(Ot,{row:!0,children:ng.map((e=>t.jsx(h,{control:t.jsx(St,{checked:g.fields.includes(e.id),onChange:()=>Z(e.id),disabled:e.required}),label:e.name},e.id)))})]}),t.jsxs(Ve,{expanded:L,onChange:()=>$(!L),children:[t.jsx(Xe,{expandIcon:t.jsx(Je,{}),children:t.jsx(j,{variant:"subtitle1",children:"詳細オプション"})}),t.jsx(Qe,{children:t.jsxs(D,{container:!0,spacing:2,children:[t.jsx(D,{item:!0,xs:12,sm:6,children:t.jsx(h,{control:t.jsx(p,{checked:g.includeImages,onChange:e=>F("includeImages",e.target.checked)}),label:"画像URL含む"})}),t.jsx(D,{item:!0,xs:12,sm:6,children:t.jsx(h,{control:t.jsx(p,{checked:g.includeCoordinates,onChange:e=>F("includeCoordinates",e.target.checked)}),label:"座標情報含む"})}),t.jsx(D,{item:!0,xs:12,sm:6,children:t.jsx(h,{control:t.jsx(p,{checked:g.compression,onChange:e=>F("compression",e.target.checked)}),label:"圧縮"})}),t.jsx(D,{item:!0,xs:12,sm:6,children:t.jsxs(me,{fullWidth:!0,size:"small",children:[t.jsx(ge,{children:"言語"}),t.jsxs(ye,{value:g.language,onChange:e=>F("language",e.target.value),label:"言語",children:[t.jsx(l,{value:"ja",children:"日本語"}),t.jsx(l,{value:"en",children:"English"})]})]})}),t.jsx(D,{item:!0,xs:12,children:t.jsx(K,{fullWidth:!0,size:"small",label:"カスタムファイル名",value:g.customFilename||"",onChange:e=>F("customFilename",e.target.value),placeholder:"architecture_data"})})]})})]})]})}),t.jsx(D,{item:!0,xs:12,lg:4,children:t.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:2},children:[t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"エクスポート概要"}),t.jsxs(O,{dense:!0,children:[t.jsxs(E,{children:[t.jsx(c,{children:t.jsx(Et,{})}),t.jsx(d,{primary:"レコード数",secondary:`${R.recordCount.toLocaleString()} 件`})]}),t.jsxs(E,{children:[t.jsx(c,{children:t.jsx(kt,{})}),t.jsx(d,{primary:"推定ファイルサイズ",secondary:`${R.estimatedSize.toFixed(2)} MB`})]}),t.jsxs(E,{children:[t.jsx(c,{children:t.jsx(bt,{})}),t.jsx(d,{primary:"出力フィールド",secondary:`${g.fields.length} 項目`})]})]})]}),!R.canExport&&t.jsx(X,{severity:"warning",children:t.jsx(j,{variant:"body2",children:R.recordCount>R.maxRecords?`レコード数が上限（${R.maxRecords.toLocaleString()}件）を超えています`:`ファイルサイズが上限（${f}MB）を超えています`})}),t.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1},children:[t.jsx(i,{variant:"contained",size:"large",onClick:W,disabled:!R.canExport||b,startIcon:b?t.jsx(Pt,{}):t.jsx(He,{}),fullWidth:!0,children:b?"エクスポート中...":"エクスポート開始"}),t.jsx(i,{variant:"outlined",onClick:()=>{N(),k(!0)},startIcon:t.jsx(jt,{}),fullWidth:!0,children:"プレビュー"}),b&&t.jsxs(n,{sx:{mt:1},children:[t.jsx(Y,{variant:"determinate",value:w}),t.jsxs(j,{variant:"caption",sx:{mt:.5,display:"block",textAlign:"center"},children:[w,"%"]})]})]})]})}),t.jsx(D,{item:!0,xs:12,children:t.jsxs(H,{sx:{p:2},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"エクスポート履歴"}),0===P.length?t.jsx(j,{variant:"body2",color:"text.secondary",children:"エクスポート履歴がありません"}):t.jsx(O,{children:P.map(((e,i)=>t.jsxs(Kt.Fragment,{children:[t.jsxs(E,{children:[t.jsx(c,{children:"success"===e.status?t.jsx(Tt,{color:"success"}):"error"===e.status?t.jsx(Ct,{color:"error"}):t.jsx(Pt,{color:"primary"})}),t.jsx(d,{primary:e.filename,secondary:t.jsxs(n,{children:[t.jsxs(j,{variant:"caption",children:[e.timestamp.toLocaleString()," |",e.recordCount.toLocaleString(),"件 |",(e.fileSize/1048576).toFixed(2),"MB"]}),e.errorMessage&&t.jsxs(j,{variant:"caption",color:"error",sx:{display:"block"},children:["エラー: ",e.errorMessage]})]})}),"success"===e.status&&t.jsx(m,{children:t.jsx(Lt,{})})]}),i<P.length-1&&t.jsx(C,{})]},e.id)))})]})})]}),t.jsxs(st,{open:A,onClose:()=>k(!1),maxWidth:"lg",fullWidth:!0,children:[t.jsx(lt,{children:"データプレビュー (最初の5件)"}),t.jsx(ct,{children:t.jsx(n,{sx:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[t.jsx("thead",{children:t.jsx("tr",{style:{backgroundColor:"#f5f5f5"},children:g.fields.map((e=>t.jsx("th",{style:{padding:8,border:"1px solid #ddd",textAlign:"left"},children:ng.find((t=>t.id===e))?.name||e},e)))})}),t.jsx("tbody",{children:I.map(((e,n)=>t.jsx("tr",{children:g.fields.map((n=>t.jsxs("td",{style:{padding:8,border:"1px solid #ddd"},children:[String(e[n]||"").slice(0,50),String(e[n]||"").length>50&&"..."]},n)))},n)))})]})})}),t.jsx(ut,{children:t.jsx(i,{onClick:()=>k(!1),children:"閉じる"})})]})]})},requiresData:!0}],AnalyticsPage=()=>{const i=e(),a=v(i.breakpoints.down("md")),{isReady:o,isLoading:s,error:l}=useDatabase(),[c,u]=Ut.useState(0),[d,h]=Ut.useState([]),[p,m]=Ut.useState([]),[g,b]=Ut.useState([]),[_,w]=Ut.useState(null),[S,A]=Ut.useState(!1),[C,O]=Ut.useState(null),[E,k]=Ut.useState(new Date);Ut.useEffect((()=>{(async()=>{if(o)try{h([]),b([]),m([]),console.log("Analytics page ready - OptimizedAnalyticsDashboard will load precomputed data")}catch(e){console.error("Failed to initialize analytics:",e),O({message:"データの初期化に失敗しました",severity:"error"})}})()}),[o]);const handleFilterChange=(e,t)=>{b(e),O({message:`フィルタが適用されました (${e.length}件)`,severity:"info"})},handleArchitectureSelect=e=>{const t=p.find((t=>t.ZAR_NAME===e.ZAR_ARCHITECT));t&&(w(t),u(3))},handleArchitectCompare=e=>{O({message:`${e.ZAR_NAME}の比較機能は開発中です`,severity:"info"})},handleRefresh=()=>{k(new Date),O({message:"データを更新しました",severity:"success"})},P=ig[c],T=Ut.useMemo((()=>({totalArchitectures:d.length,filteredCount:g.length,totalArchitects:p.length,yearRange:d.length>0?[Math.min(...d.filter((e=>e.ZAR_YEAR)).map((e=>e.ZAR_YEAR))),Math.max(...d.filter((e=>e.ZAR_YEAR)).map((e=>e.ZAR_YEAR)))]:[2e3,2024],categories:[...new Set(d.map((e=>e.ZAR_CATEGORY)).filter(Boolean))].length,prefectures:[...new Set(d.map((e=>e.ZAR_PREFECTURE)).filter(Boolean))].length})),[d,g,p]);if(s)return t.jsx(R,{maxWidth:"lg",sx:{mt:4,mb:4},children:t.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:t.jsx(j,{variant:"h6",children:"データを読み込み中..."})})});if(l)return t.jsx(R,{maxWidth:"lg",sx:{mt:4,mb:4},children:t.jsxs(X,{severity:"error",sx:{mb:2},children:["データの読み込みに失敗しました: ",l]})});const L=P.component;return t.jsxs(t.Fragment,{children:[t.jsxs(Lr,{children:[t.jsx("title",{children:"データ分析 - 日本建築データベース"}),t.jsx("meta",{name:"description",content:"包括的な建築データの分析とビジュアライゼーション"})]}),t.jsxs(R,{maxWidth:"xl",sx:{mt:2,mb:4},children:[t.jsxs(n,{sx:{mb:3},children:[t.jsx(j,{variant:"h4",component:"h1",gutterBottom:!0,children:"データ分析・ビジュアライゼーション"}),t.jsx(j,{variant:"body1",color:"text.secondary",paragraph:!0,children:"建築データの包括的な分析、可視化、エクスポート機能"}),t.jsx(H,{sx:{p:2,mb:2},children:t.jsxs(n,{sx:{display:"flex",gap:3,flexWrap:"wrap",alignItems:"center"},children:[t.jsxs(j,{variant:"body2",children:["建築作品: ",t.jsx("strong",{children:T.totalArchitectures.toLocaleString()}),"件",T.filteredCount!==T.totalArchitectures&&t.jsxs(t.Fragment,{children:[" (フィルタ後: ",t.jsx("strong",{children:T.filteredCount.toLocaleString()}),"件)"]})]}),t.jsxs(j,{variant:"body2",children:["建築家: ",t.jsx("strong",{children:T.totalArchitects}),"人"]}),t.jsxs(j,{variant:"body2",children:["期間: ",t.jsxs("strong",{children:[T.yearRange[0]," - ",T.yearRange[1]]}),"年"]}),t.jsxs(j,{variant:"body2",children:["カテゴリ: ",t.jsx("strong",{children:T.categories}),"種類"]}),t.jsxs(j,{variant:"body2",children:["都道府県: ",t.jsx("strong",{children:T.prefectures})]}),t.jsxs(j,{variant:"caption",color:"text.secondary",children:["最終更新: ",E.toLocaleTimeString()]})]})})]}),t.jsx(H,{sx:{mb:3},children:t.jsx(gt,{value:c,onChange:(e,t)=>{u(t)},variant:a?"scrollable":"fullWidth",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:ig.map(((e,n)=>t.jsx(yt,{icon:t.jsx(_t,{badgeContent:"filters"===e.id&&g.length!==d.length?g.length:void 0,color:"primary",children:e.icon}),label:e.label,sx:{minHeight:72}},e.id)))})}),t.jsxs(H,{sx:{p:0,overflow:"hidden"},children:[t.jsxs(n,{sx:{p:2,borderBottom:1,borderColor:"divider",backgroundColor:"grey.50"},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:P.label}),t.jsx(j,{variant:"body2",color:"text.secondary",children:P.description})]}),t.jsx(n,{sx:{p:"map"===P.id?0:2},children:P.requiresData&&0===d.length?t.jsx(X,{severity:"info",children:"分析データがありません。データベースの接続を確認してください。"}):t.jsx(L,{...(()=>{const e={architectures:g,architects:p,onRefresh:handleRefresh};switch(P.id){case"dashboard":return{onExportData:e=>{O({message:`${e}形式でのエクスポートを開始します`,severity:"info"})},enableRealTimeUpdates:!1};case"map":return{markers:g.filter((e=>e.ZAR_LATITUDE&&e.ZAR_LONGITUDE)).map((e=>({id:e.Z_PK,name:e.ZAR_TITLE,architect:e.ZAR_ARCHITECT,location:e.ZAR_ADDRESS||e.ZAR_PREFECTURE||"",latitude:e.ZAR_LATITUDE,longitude:e.ZAR_LONGITUDE,year:e.ZAR_YEAR,category:e.ZAR_CATEGORY,prefecture:e.ZAR_PREFECTURE,imageUrl:e.ZAR_IMAGE_URL,description:e.ZAR_DESCRIPTION}))),center:[35.6762,139.6503],zoom:10,height:"70vh",onMarkerClick:handleArchitectureSelect,enableClustering:!0,enableAnalytics:!0};case"timeline":return{...e,onEventSelect:handleArchitectureSelect,enableEras:!0,enableFiltering:!0,enableComparison:!0};case"portfolio":return{architect:_||p[0],architectures:g,onWorkSelect:handleArchitectureSelect,onCompareArchitect:handleArchitectCompare,enableComparison:!0,showDetailedStats:!0};case"filters":return{...e,onFilterChange:handleFilterChange,enableRealTimeUpdates:!0,enableSavePresets:!0,enableGeoFiltering:!0,enableAdvancedAnalytics:!0};case"export":return{...e,onExportComplete:e=>{O({message:`エクスポートが完了しました: ${e.filename}`,severity:"success"})},enableScheduledExports:!1,enableCustomTemplates:!0};default:return e}})()})})]}),t.jsxs(n,{sx:{position:"fixed",bottom:16,right:16,display:"flex",flexDirection:"column",gap:1},children:[t.jsx(Q,{in:!a,children:t.jsx(f,{title:"フルスクリーン",children:t.jsx(ee,{color:"primary",size:"small",onClick:()=>{S?document.exitFullscreen?.():document.documentElement.requestFullscreen?.(),A(!S)},children:t.jsx(ie,{})})})}),t.jsx(Q,{in:!0,style:{transitionDelay:"100ms"},children:t.jsx(f,{title:"データ更新",children:t.jsx(ee,{color:"secondary",size:"small",onClick:handleRefresh,children:t.jsx(V,{})})})}),t.jsx(Q,{in:!0,style:{transitionDelay:"200ms"},children:t.jsx(f,{title:"共有",children:t.jsx(ee,{color:"default",size:"small",onClick:()=>{navigator.share?navigator.share({title:"日本建築データベース - データ分析",text:"インタラクティブな建築データ分析をご覧ください",url:window.location.href}):(navigator.clipboard.writeText(window.location.href),O({message:"URLをコピーしました",severity:"success"}))},children:t.jsx(mt,{})})})})]}),t.jsx(Rt,{open:!!C,autoHideDuration:6e3,onClose:()=>O(null),anchorOrigin:{vertical:"bottom",horizontal:"left"},children:C&&t.jsx(X,{onClose:()=>O(null),severity:C.severity,variant:"filled",children:C.message})})]})]})};class ErrorBoundary extends Ut.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("Uncaught error:",e,t),this.setState({error:e,errorInfo:t})}handleRetry=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx(n,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:4,height:"100vh"},children:t.jsxs(H,{elevation:3,sx:{padding:4,maxWidth:600,width:"100%",borderRadius:2,textAlign:"center"},children:[t.jsx(j,{variant:"h5",color:"error",gutterBottom:!0,children:"問題が発生しました"}),t.jsx(j,{variant:"body1",paragraph:!0,children:"アプリケーションで予期しないエラーが発生しました。 お手数ですが、再読み込みをお試しください。"}),!1,t.jsxs(n,{sx:{mt:3},children:[t.jsx(i,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mr:2},children:"ページを再読み込み"}),t.jsx(i,{variant:"outlined",onClick:()=>window.location.href="/",children:"ホームに戻る"})]})]})}):this.props.children}}const ag=Dt("a")((({theme:e})=>({position:"absolute",top:"-40px",left:"6px",background:e.palette.primary.main,color:e.palette.primary.contrastText,padding:"8px 16px",zIndex:9999,textDecoration:"none",borderRadius:"0 0 4px 4px",fontSize:"0.875rem",fontWeight:600,border:`2px solid ${e.palette.primary.dark}`,transition:"top 0.3s ease","&:focus":{top:0,outline:`2px solid ${e.palette.secondary.main}`,outlineOffset:"2px"},"@media (prefers-contrast: high)":{backgroundColor:"ButtonText",color:"ButtonFace",border:"2px solid ButtonText","&:focus":{backgroundColor:"Highlight",color:"HighlightText",outline:"2px solid ButtonText"}},"@media (prefers-reduced-motion: reduce)":{transition:"none"}}))),SkipLink=({href:e,children:n,className:i="",...a})=>t.jsx(ag,{href:e,className:i,onClick:t=>{const n=e.replace("#",""),i=document.getElementById(n);i&&(i.hasAttribute("tabindex")||i.setAttribute("tabindex","-1"),setTimeout((()=>{i.focus(),"-1"===i.getAttribute("tabindex")&&i.removeAttribute("tabindex")}),100))},...a,children:n}),og={primary:{main:"#2E3440",light:"#4C566A",dark:"#1B1F2B",contrastText:"#FFFFFF"},secondary:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC",contrastText:"#2E3440"},accent:{main:"#D08770",light:"#E5A088",dark:"#BF616A"},background:{default:"#ECEFF4",paper:"#FFFFFF",elevated:"#F8F9FA"},text:{primary:"#2E3440",secondary:"#4C566A",disabled:"#D8DEE9"},divider:"#E5E9F0",success:{main:"#A3BE8C",light:"#B8CCA3",dark:"#8CAF69"},warning:{main:"#EBCB8B",light:"#F0D5A3",dark:"#D4B571"},error:{main:"#BF616A",light:"#CC8088",dark:"#A54A56"},info:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC"}},sg=Nt({palette:og,typography:{fontFamily:'"Inter", "Roboto", "Helvetica Neue", "Arial", sans-serif',h1:{fontSize:"3rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2.25rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.875rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.4},subtitle1:{fontSize:"1rem",fontWeight:500,lineHeight:1.5},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.5},body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.6},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.6},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.5},button:{fontSize:"0.875rem",fontWeight:600,textTransform:"none",letterSpacing:"0.02em"}},components:{MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"10px 24px",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},contained:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8,transition:"all 0.2s ease-in-out","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:og.secondary.main}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:og.primary.main,borderWidth:2}}}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",backgroundColor:"rgba(46, 52, 64, 0.95)"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiPaper:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},elevation1:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},elevation2:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},elevation3:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},spacing:8,shape:{borderRadius:8},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"}}}),lg=44,cg=48,ug=56,dg={...sg.typography,fontSize:16,h1:{...sg.typography.h1,fontSize:"2.5rem",lineHeight:1.1,letterSpacing:"-0.02em","@media (max-width:600px)":{fontSize:"2rem"}},h2:{...sg.typography.h2,fontSize:"2rem",lineHeight:1.2,"@media (max-width:600px)":{fontSize:"1.75rem"}},h3:{...sg.typography.h3,fontSize:"1.75rem",lineHeight:1.2,"@media (max-width:600px)":{fontSize:"1.5rem"}},h4:{...sg.typography.h4,fontSize:"1.5rem",lineHeight:1.3,"@media (max-width:600px)":{fontSize:"1.25rem"}},h5:{...sg.typography.h5,fontSize:"1.25rem",lineHeight:1.3,"@media (max-width:600px)":{fontSize:"1.125rem"}},h6:{...sg.typography.h6,fontSize:"1.125rem",lineHeight:1.4,"@media (max-width:600px)":{fontSize:"1rem"}},body1:{...sg.typography.body1,fontSize:"1rem",lineHeight:1.6,"@media (max-width:600px)":{fontSize:"0.875rem",lineHeight:1.5}},body2:{...sg.typography.body2,fontSize:"0.875rem",lineHeight:1.6,"@media (max-width:600px)":{fontSize:"0.8125rem",lineHeight:1.5}},button:{...sg.typography.button,fontSize:"1rem",fontWeight:600,textTransform:"none","@media (max-width:600px)":{fontSize:"0.875rem"}}},hg={...sg.components,MuiButton:{styleOverrides:{root:{minHeight:cg,borderRadius:12,padding:"12px 24px",fontSize:"1rem",fontWeight:600,textTransform:"none",transition:"all 0.2s ease-in-out","&:active":{transform:"scale(0.98)"},"@media (hover: hover)":{"&:hover":{transform:"translateY(-1px)",boxShadow:"0 6px 16px rgba(0, 0, 0, 0.15)"}},"@media (prefers-contrast: high)":{border:"2px solid currentColor"},"@media (prefers-reduced-motion: reduce)":{transition:"none","&:hover":{transform:"none"}},"@media (max-width:600px)":{minHeight:cg,padding:"14px 20px",fontSize:"0.875rem",borderRadius:8}},sizeSmall:{minHeight:lg,padding:"8px 16px",fontSize:"0.875rem","@media (max-width:600px)":{minHeight:lg,padding:"10px 14px",fontSize:"0.8125rem"}},sizeLarge:{minHeight:ug,padding:"16px 32px",fontSize:"1.125rem","@media (max-width:600px)":{minHeight:ug,padding:"18px 28px",fontSize:"1rem"}}}},MuiIconButton:{styleOverrides:{root:{minWidth:cg,minHeight:cg,borderRadius:12,"&:active":{transform:"scale(0.95)"},"@media (max-width:600px)":{minWidth:cg,minHeight:cg}},sizeSmall:{minWidth:lg,minHeight:lg,"@media (max-width:600px)":{minWidth:lg,minHeight:lg}},sizeLarge:{minWidth:ug,minHeight:ug,"@media (max-width:600px)":{minWidth:ug,minHeight:ug}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:12,fontSize:"1rem",minHeight:cg,"& input":{padding:"14px 16px",fontSize:"1rem","@media (max-width:600px)":{fontSize:"16px",padding:"16px"}},"& textarea":{fontSize:"1rem","@media (max-width:600px)":{fontSize:"16px"}},"&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:sg.palette.secondary.main,borderWidth:"2px"}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:sg.palette.primary.main,borderWidth:"2px"}}}}}},MuiCard:{styleOverrides:{root:{borderRadius:16,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"},"&:active":{transform:"translateY(-1px)"},"@media (prefers-reduced-motion: reduce)":{transition:"none","&:hover":{transform:"none"}},"@media (max-width:600px)":{borderRadius:12,margin:"8px"}}}},MuiChip:{styleOverrides:{root:{height:lg,borderRadius:22,fontSize:"0.875rem",fontWeight:500,"&.MuiChip-clickable":{"&:active":{transform:"scale(0.95)"}},"@media (max-width:600px)":{height:lg,fontSize:"0.8125rem"}},deleteIcon:{fontSize:"18px","&:hover":{color:"inherit"}}}},MuiDrawer:{styleOverrides:{paper:{borderRadius:"16px 0 0 16px","@media (max-width:600px)":{width:"85%",maxWidth:320}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",backgroundColor:"rgba(46, 52, 64, 0.95)","@media (max-width:600px)":{minHeight:64}}}},MuiToolbar:{styleOverrides:{root:{minHeight:64,padding:"0 16px","@media (max-width:600px)":{minHeight:64,padding:"0 8px"}}}},MuiPaper:{styleOverrides:{root:{borderRadius:16,"@media (max-width:600px)":{borderRadius:12}}}},MuiListItem:{styleOverrides:{root:{minHeight:cg,borderRadius:8,margin:"2px 8px","&.Mui-selected":{backgroundColor:"rgba(0, 0, 0, 0.08)","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.12)"}},"@media (max-width:600px)":{minHeight:ug,padding:"12px 16px"}}}}},pg=Nt({...sg,breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},typography:dg,components:hg,spacing:8,shadows:["none","0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24)","0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)","0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23)","0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22)","0 19px 38px rgba(0, 0, 0, 0.30), 0 15px 12px rgba(0, 0, 0, 0.22)","0 24px 48px rgba(0, 0, 0, 0.35), 0 19px 19px rgba(0, 0, 0, 0.22)",...sg.shadows.slice(7)],shape:{borderRadius:12}}),fg=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(e){if("serviceWorker"in navigator){if(new URL("/archi-site/",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="/archi-site//sw.js";fg?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((n=>{const i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):registerValidSW(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):registerValidSW(t,e)}))}}function registerValidSW(e,t){navigator.serviceWorker.register(e).then((e=>{console.log("SW registered: ",e),e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e),t&&t.onOfflineReady&&t.onOfflineReady()))})}})).catch((e=>{console.error("Error during service worker registration:",e),t&&t.onError&&t.onError(e)}))}const ScrollToTop=()=>{const{pathname:e}=Wt();return Ut.useEffect((()=>{window.scrollTo(0,0)}),[e]),null},AppContent=()=>{const[e,i]=Ut.useState(""),[a,o]=Ut.useState(!1),[s,l]=Ut.useState(!1),c=function(){const[e,t]=Kt.useState({isOnline:navigator.onLine,isOfflineReady:!1,hasUpdate:!1});return Kt.useEffect((()=>{const updateOnlineStatus=()=>{t((e=>({...e,isOnline:navigator.onLine})))};return window.addEventListener("online",updateOnlineStatus),window.addEventListener("offline",updateOnlineStatus),register({onSuccess:()=>{t((e=>({...e,isOfflineReady:!0})))},onUpdate:()=>{t((e=>({...e,hasUpdate:!0})))}}),()=>{window.removeEventListener("online",updateOnlineStatus),window.removeEventListener("offline",updateOnlineStatus)}}),[]),e}();Ut.useEffect((()=>{console.log("App running in production mode");try{logDatabaseDetails()}catch(e){console.warn("Failed to log database details:",e)}i("アプリケーションが読み込まれました")}),[]),Ut.useEffect((()=>{c.isOnline||a?c.isOnline&&a&&(o(!1),i("オンライン状態に戻りました。")):(o(!0),i("オフライン状態です。一部の機能が制限される場合があります。")),c.hasUpdate&&!s&&(l(!0),i("新しいバージョンが利用可能です。ページを再読み込みしてください。"))}),[c,a,s]);const handleCloseOfflineAlert=()=>{o(!1)},handleCloseUpdateAlert=()=>{l(!1)};return t.jsxs(t.Fragment,{children:[t.jsx(SkipLink,{href:"#main-content",children:"メインコンテンツへスキップ"}),t.jsx(SkipLink,{href:"#navigation",children:"ナビゲーションへスキップ"}),t.jsx(AriaLiveRegion,{message:e,level:"polite"}),t.jsx(ScrollToTop,{}),t.jsx(Header,{}),t.jsx("main",{id:"main-content",className:"container",role:"main",tabIndex:-1,style:{outline:"none"},children:t.jsx(ErrorBoundary,{children:t.jsx(Ut.Suspense,{fallback:t.jsx(n,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",role:"status","aria-label":"ページを読み込み中",children:t.jsx(G,{})}),children:t.jsxs(Xt,{children:[t.jsx(Jt,{path:"/",element:t.jsx(HomePage,{})}),t.jsx(Jt,{path:"/architecture",element:t.jsx(ArchitecturePageEnhanced,{})}),t.jsx(Jt,{path:"/architecture/:id",element:t.jsx(ArchitectureSinglePage,{})}),t.jsx(Jt,{path:"/architects",element:t.jsx(ArchitectsPage,{})}),t.jsx(Jt,{path:"/architects/:id",element:t.jsx(ArchitectSinglePage,{})}),t.jsx(Jt,{path:"/map",element:t.jsx(MapPage,{})}),t.jsx(Jt,{path:"/research",element:t.jsx(ResearchPage,{})}),t.jsx(Jt,{path:"/analytics",element:t.jsx(AnalyticsPage,{})})]})})})}),t.jsx(Footer,{}),t.jsx(Rt,{open:a,onClose:handleCloseOfflineAlert,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:null,children:t.jsx(X,{severity:"warning",onClose:handleCloseOfflineAlert,variant:"filled",sx:{width:"100%"},children:"オフライン状態です。キャッシュされたコンテンツを表示しています。"})}),t.jsx(Rt,{open:s,onClose:handleCloseUpdateAlert,anchorOrigin:{vertical:"bottom",horizontal:"center"},autoHideDuration:null,children:t.jsx(X,{severity:"info",onClose:handleCloseUpdateAlert,action:t.jsx(n,{sx:{display:"flex",gap:1},children:t.jsx("button",{onClick:()=>{window.location.reload()},style:{background:"none",border:"none",color:"white",textDecoration:"underline",cursor:"pointer",fontSize:"0.875rem"},children:"更新"})}),variant:"filled",sx:{width:"100%"},children:"新しいバージョンが利用可能です。"})})]})},App=()=>{const[e,n]=Ut.useState(sg),i=v("(max-width:600px)"),a="ontouchstart"in window||navigator.maxTouchPoints>0;return Ut.useEffect((()=>{n(i||a?pg:sg)}),[i,a]),Ut.useEffect((()=>{register({onSuccess:()=>{console.log("Service worker registered successfully")},onUpdate:()=>{console.log("Service worker update available")},onOfflineReady:()=>{console.log("App ready for offline use")},onError:e=>{console.error("Service worker registration failed:",e)}});const e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),e.style.position="absolute",e.style.left="-10000px",e.textContent="建築データベースアプリケーションが読み込まれました",document.body.appendChild(e),setTimeout((()=>{document.body.removeChild(e)}),1e3)}),[]),t.jsx(ErrorBoundary,{children:t.jsx(kr,{children:t.jsxs(zt,{theme:e,children:[t.jsx(Bt,{}),t.jsx(Vt,{children:t.jsx(AppContent,{})})]})})})};console.log("React アプリケーションを初期化中...","production"),console.log("DOM root element:",document.getElementById("root"));const mg=document.getElementById("root");if(!mg)throw console.error('root要素が見つかりません。HTMLに<div id="root"></div>が存在するか確認してください。'),new Error("Failed to find the root element");const gg=tr(mg);console.log("Using HashRouter for GitHub Pages compatibility");try{gg.render(t.jsx(Kt.StrictMode,{children:t.jsx(App,{})})),console.log("React アプリケーションのレンダリングが成功しました")}catch(yg){console.error("React アプリケーションのレンダリング中にエラーが発生しました:",yg)}
//# sourceMappingURL=index-D5RtH06b.js.map
