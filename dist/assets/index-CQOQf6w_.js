import{u as Nt,a as Ft,j as e,A as Ot,T as Zt,b as l,I as Je,M as Lt,D as dt,B as a,C as Bt,L as ht,c as xt,d as ut,e as W,H as Ht,f as Ze,P as ke,g as Ie,S as Pt,h as te,G as P,i as oe,k as pe,l as fe,F as be,m as st,n as O,o as Ae,p as Me,q as Mt,r as Ce,R as zt,s as rt,t as ze,v as ce,w as Ue,x as Ve,y as mt,z as gt,E as pt,J as ft,K as jt,N as ee,O as Ut,Q as yt,U as Be,V as $e,W as bt,X as He,Y as Ct,Z as _e,_ as Xe,$ as At,a0 as Gt,a1 as Kt,a2 as qt,a3 as Qt,a4 as Jt,a5 as Vt,a6 as Xt,a7 as er,a8 as tr,a9 as rr,aa as sr,ab as ge,ac as U,ad as nr,ae as ar,af as or,ag as ir,ah as lr,ai as cr}from"./ui-Bgd0UIDH.js";import{a as dr,u as Ge,r as x,L as B,f as Ke,h as Tt,R as Et,H as hr,i as xr,j as Ee}from"./vendor-R9pUdGjU.js";import{i as ur}from"./database-8HIdH1aM.js";import{L as It,M as mr,T as gr,a as nt,P as at}from"./map-DfQbedqp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))g(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&g(d)}).observe(document,{childList:!0,subtree:!0});function o(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function g(i){if(i.ep)return;i.ep=!0;const m=o(i);fetch(i.href,m)}})();var vt,ot=dr;vt=ot.createRoot,ot.hydrateRoot;const it=[{title:"ãƒ›ãƒ¼ãƒ ",path:"/",icon:e.jsx(Ht,{})},{title:"å»ºç¯‰ä½œå“",path:"/architecture",icon:e.jsx(Ze,{})},{title:"å»ºç¯‰å®¶",path:"/architects",icon:e.jsx(ke,{})},{title:"ãƒžãƒƒãƒ—",path:"/map",icon:e.jsx(Ie,{})},{title:"DBã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼",path:"/db-explorer",icon:e.jsx(Pt,{})}],pr=()=>{const t=Ge().pathname,o=Nt(),g=Ft(o.breakpoints.down("sm")),[i,m]=x.useState(!1),d=c=>s=>{s.type==="keydown"&&(s.key==="Tab"||s.key==="Shift")||m(c)};return e.jsx(Ot,{position:"static",color:"primary",component:"nav",role:"navigation","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³",children:e.jsxs(Zt,{children:[e.jsx(l,{variant:"h6",component:B,to:"/","data-testid":"site-title",sx:{flexGrow:1,color:"white",textDecoration:"none",fontWeight:"bold"},children:"å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"}),g?e.jsxs(e.Fragment,{children:[e.jsx(Je,{edge:"end",color:"inherit","aria-label":"menu","data-testid":"mobile-menu-button",onClick:d(!0),children:e.jsx(Lt,{})}),e.jsx(dt,{anchor:"right",open:i,onClose:d(!1),children:e.jsxs(a,{sx:{width:250},role:"presentation",onClick:d(!1),onKeyDown:d(!1),children:[e.jsx(a,{sx:{display:"flex",justifyContent:"flex-end",p:1},children:e.jsx(Je,{onClick:d(!1),children:e.jsx(Bt,{})})}),e.jsx(ht,{role:"menu","aria-label":"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼",children:it.map(({title:c,path:s,icon:j})=>e.jsxs(xt,{component:B,to:s,role:"menuitem","data-testid":`nav-link-${c.toLowerCase()}`,sx:{color:t===s?"primary.main":"text.primary",backgroundColor:t===s?"rgba(0, 0, 0, 0.08)":"transparent",fontWeight:t===s?"bold":"normal","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[j,e.jsx(ut,{primary:c,sx:{ml:2}})]},c))})]})})]}):e.jsx(a,{sx:{display:"flex"},role:"menubar","aria-label":"ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³",children:it.map(({title:c,path:s})=>e.jsx(W,{component:B,to:s,color:"inherit",role:"menuitem","data-testid":`nav-link-${c.toLowerCase()}`,sx:{mx:1,fontWeight:t===s?"bold":"normal",borderBottom:t===s?"2px solid white":"none"},children:c},c))})]})})},fr=()=>e.jsx(a,{component:"footer",role:"contentinfo","data-testid":"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:"primary.main",color:"white"},children:e.jsx(te,{maxWidth:"sm",children:e.jsxs(l,{variant:"body1",align:"center",children:["å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ Â© ",new Date().getFullYear()]})})}),jr="modulepreload",yr=function(n){return"/archi-site/"+n},lt={},br=function(t,o,g){let i=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=d?.nonce||d?.getAttribute("nonce");i=Promise.allSettled(o.map(s=>{if(s=yr(s),s in lt)return;lt[s]=!0;const j=s.endsWith(".css"),f=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${f}`))return;const C=document.createElement("link");if(C.rel=j?"stylesheet":jr,j||(C.as="script"),C.crossOrigin="",C.href=s,c&&C.setAttribute("nonce",c),document.head.appendChild(C),j)return new Promise((k,w)=>{C.addEventListener("load",k),C.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${s}`)))})}))}function m(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return i.then(d=>{for(const c of d||[])c.status==="rejected"&&m(c.reason);return t().catch(m)})},ct=({variant:n="card",count:t=6})=>{const o=()=>e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsx(oe,{variant:"text",height:40,sx:{mb:1}}),e.jsx(oe,{variant:"text",height:20,sx:{mb:1}}),e.jsx(oe,{variant:"text",height:20,width:"60%"})]})}),g=()=>e.jsxs(a,{sx:{p:2},children:[e.jsx(oe,{variant:"text",height:32,sx:{mb:1}}),e.jsx(oe,{variant:"text",height:24,sx:{mb:1}}),e.jsx(oe,{variant:"text",height:20,width:"40%"})]}),i=()=>e.jsx(te,{maxWidth:"lg",children:e.jsxs(a,{sx:{textAlign:"center",py:8},children:[e.jsx(oe,{variant:"text",height:60,sx:{mb:2}}),e.jsx(oe,{variant:"text",height:30,sx:{mb:4}}),e.jsx(a,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx(oe,{variant:"rectangular",width:500,height:56,sx:{borderRadius:1}})})]})}),m=()=>e.jsx(oe,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2}});return n==="hero"?i():n==="map"?m():n==="list"?e.jsx(a,{children:Array.from({length:t}).map((d,c)=>e.jsx(a,{sx:{borderBottom:"1px solid #e0e0e0"},children:g()},c))}):e.jsx(P,{container:!0,spacing:4,children:Array.from({length:t}).map((d,c)=>e.jsx(P,{item:!0,xs:12,sm:6,md:4,children:o()},c))})},Cr=()=>{const[n,t]=x.useState(""),[o,g]=x.useState([]),[i,m]=x.useState(!0),[d,c]=x.useState(null),[s,j]=x.useState(!1);x.useEffect(()=>{const C=setTimeout(()=>{console.warn("Emergency timeout: forcing app to render without database"),m(!1),j(!1),c("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ")},3e3);return(async()=>{try{m(!0),c(null),console.log("æœ€è¿‘ã®å»ºç¯‰ä½œå“ã‚’å–å¾—ä¸­...");const{getAllArchitectures:w}=await br(async()=>{const{getAllArchitectures:q}=await Promise.resolve().then(()=>Ir);return{getAllArchitectures:q}},void 0),v=new Promise((q,u)=>{setTimeout(()=>u(new Error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ")),5e3)}),Y=w(1,6),z=await Promise.race([Y,v]);clearTimeout(C),g(z.items),j(!0),console.log("å»ºç¯‰ä½œå“ã®å–å¾—ã«æˆåŠŸã—ã¾ã—ãŸ",z)}catch(w){console.error("å»ºç¯‰ä½œå“ã®å–å¾—ã«å¤±æ•—:",w),clearTimeout(C),c(w.message||"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ"),j(!1)}finally{m(!1)}})(),()=>{clearTimeout(C)}},[]);const f=C=>{C.preventDefault(),n.trim()&&(window.location.href=`/architecture?search=${encodeURIComponent(n)}`)};return e.jsxs(te,{maxWidth:"lg","data-testid":"homepage-container",children:[e.jsx(be,{in:!0,timeout:1e3,children:e.jsxs(a,{component:"section",role:"banner","aria-labelledby":"main-heading",sx:{pt:8,pb:6,textAlign:"center",background:"linear-gradient(135deg, #ECEFF4 0%, #D8DEE9 100%)",borderRadius:3,mb:6,position:"relative",overflow:"hidden"},children:[e.jsx(a,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.1,background:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(46, 52, 64, 0.1) 10px, rgba(46, 52, 64, 0.1) 20px)"}}),e.jsxs(a,{sx:{position:"relative",zIndex:1},children:[e.jsx(l,{component:"h1",variant:"h1",align:"center",color:"text.primary",gutterBottom:!0,id:"main-heading",sx:{background:"linear-gradient(135deg, #2E3440 0%, #4C566A 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",mb:2},children:"å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"}),e.jsxs(l,{variant:"h5",align:"center",color:"text.secondary",paragraph:!0,sx:{mb:4,maxWidth:600,mx:"auto"},children:["æ—¥æœ¬ã®å»ºç¯‰ä½œå“ã¨å»ºç¯‰å®¶ã‚’æ¤œç´¢ãƒ»é–²è¦§ã§ãã‚‹",e.jsx("br",{}),"åŒ…æ‹¬çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"]}),e.jsxs(st,{direction:"row",spacing:3,justifyContent:"center",sx:{mb:4},children:[e.jsx(O,{icon:e.jsx(Ze,{}),label:"14,000+ å»ºç¯‰ä½œå“",color:"primary",variant:"outlined"}),e.jsx(O,{icon:e.jsx(ke,{}),label:"2,900+ å»ºç¯‰å®¶",color:"secondary",variant:"outlined"}),e.jsx(O,{icon:e.jsx(Ie,{}),label:"å…¨å›½å¯¾å¿œ",color:"info",variant:"outlined"})]}),e.jsx(be,{in:!0,timeout:1500,children:e.jsxs(a,{component:"form",onSubmit:f,role:"search","aria-label":"å»ºç¯‰ä½œå“æ¤œç´¢",sx:{mt:4,display:"flex",justifyContent:"center",alignItems:"center",maxWidth:600,mx:"auto",gap:2},children:[e.jsx(Ae,{fullWidth:!0,variant:"outlined",placeholder:"å»ºç¯‰ä½œå“ã€å»ºç¯‰å®¶ã€ä½æ‰€ãªã©ã§æ¤œç´¢",value:n,onChange:C=>t(C.target.value),inputProps:{"aria-label":"å»ºç¯‰ä½œå“æ¤œç´¢","data-testid":"search-input",role:"searchbox"},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}}),e.jsx(W,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(Me,{}),size:"large","data-testid":"search-button",sx:{px:3,py:1.5,minWidth:120},children:"æ¤œç´¢"})]})}),!s&&e.jsx(ct,{variant:"hero"})]})]})}),e.jsxs(a,{component:"section","aria-labelledby":"recent-works-heading",sx:{py:4},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Mt,{color:"primary"}),e.jsx(l,{variant:"h4",fontWeight:"bold",id:"recent-works-heading",component:"h2",children:"æœ€è¿‘ã®å»ºç¯‰ä½œå“"})]}),s&&e.jsx(Ce,{title:"ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥",children:e.jsx(Je,{onClick:()=>window.location.reload(),color:"primary",children:e.jsx(zt,{})})})]}),d&&e.jsx(be,{in:!0,children:e.jsx(rt,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{display:"flex",alignItems:"center",gap:2}},children:e.jsxs(a,{children:[d,e.jsx(W,{size:"small",variant:"outlined",sx:{ml:2},component:B,to:"/db-explorer",children:"è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã"})]})})}),i?e.jsx(ct,{variant:"card",count:6}):o.length>0?e.jsx(be,{in:!0,timeout:800,children:e.jsx(P,{container:!0,spacing:4,children:o.map((C,k)=>e.jsx(P,{item:!0,xs:12,sm:6,md:4,children:e.jsx(be,{in:!0,timeout:1e3+k*200,children:e.jsx(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%)",border:"1px solid #E5E9F0","&:hover":{"& .card-content":{transform:"translateY(-2px)"}}},children:e.jsx(ze,{component:B,to:`/architecture/${C.ZAW_ID}`,sx:{height:"100%"},children:e.jsxs(fe,{className:"card-content",sx:{flexGrow:1,transition:"transform 0.3s ease-in-out",p:3},children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h3",sx:{fontWeight:600,color:"text.primary",mb:2,lineHeight:1.3},children:C.ZAW_NAME}),e.jsxs(st,{spacing:1,children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ke,{fontSize:"small",color:"secondary"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:C.ZAW_ARCHITECT||"å»ºç¯‰å®¶ä¸æ˜Ž"})]}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ie,{fontSize:"small",color:"secondary"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[C.ZAW_ADDRESS||"å ´æ‰€ä¸æ˜Ž"," â€¢ ",C.ZAW_YEAR&&C.ZAW_YEAR!==0?C.ZAW_YEAR+"å¹´":"å¹´ä»£ä¸æ˜Ž"]})]})]})]})})})})},C.ZAW_ID))})}):e.jsxs(ce,{sx:{p:6,textAlign:"center",background:"linear-gradient(135deg, #F8F9FA 0%, #ECEFF4 100%)"},children:[e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æŽ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„"})]}),s&&e.jsx(be,{in:!0,timeout:1200,children:e.jsx(a,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(W,{variant:"outlined",color:"primary",component:B,to:"/architecture",size:"large",sx:{px:4,py:1.5,borderWidth:2,"&:hover":{borderWidth:2}},children:"ã™ã¹ã¦ã®ä½œå“ã‚’è¦‹ã‚‹"})})})]}),e.jsx(Ue,{sx:{my:6}}),e.jsx(be,{in:!0,timeout:1400,children:e.jsxs(a,{component:"section","aria-labelledby":"features-heading",sx:{mb:6},children:[e.jsx(l,{variant:"h4",align:"center",gutterBottom:!0,id:"features-heading",component:"h2",sx:{mb:4,fontWeight:"bold"},children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç‰¹å¾´"}),e.jsxs(P,{container:!0,spacing:4,children:[e.jsx(P,{item:!0,xs:12,md:4,children:e.jsxs(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #88C0D0 0%, #5E81AC 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(a,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Ze,{sx:{fontSize:100}})}),e.jsxs(fe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ze,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"å»ºç¯‰ä½œå“"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"æ—¥æœ¬å…¨å›½ã‹ã‚‰14,000ä»¶ä»¥ä¸Šã®å»ºç¯‰ä½œå“æƒ…å ±ã‚’é–²è¦§ã§ãã¾ã™ã€‚åœ°åŸŸã€å¹´ä»£ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ãªã©ã§è©³ç´°æ¤œç´¢ãŒå¯èƒ½ã§ã™ã€‚"}),e.jsx(W,{variant:"contained",component:B,to:"/architecture",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"ä½œå“ã‚’æŽ¢ã™"})]})]})}),e.jsx(P,{item:!0,xs:12,md:4,children:e.jsxs(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #D08770 0%, #BF616A 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(a,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(ke,{sx:{fontSize:100}})}),e.jsxs(fe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ke,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"å»ºç¯‰å®¶"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"2,900äººä»¥ä¸Šã®å»ºç¯‰å®¶æƒ…å ±ã‚’åŽéŒ²ã€‚çµŒæ­´ã€ä½œå“ãƒªã‚¹ãƒˆã€æ‰€å±žäº‹å‹™æ‰€ãªã©ã®è©³ç´°æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚"}),e.jsx(W,{variant:"contained",component:B,to:"/architects",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"å»ºç¯‰å®¶ã‚’æŽ¢ã™"})]})]})}),e.jsx(P,{item:!0,xs:12,md:4,children:e.jsxs(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #A3BE8C 0%, #8CAF69 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(a,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Ie,{sx:{fontSize:100}})}),e.jsxs(fe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ie,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"ãƒžãƒƒãƒ—è¡¨ç¤º"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"å»ºç¯‰ä½œå“ã‚’åœ°å›³ä¸Šã§è¦–è¦šçš„ã«æŽ¢ç´¢ã§ãã¾ã™ã€‚ä½ç½®æƒ…å ±ã‚’ã‚‚ã¨ã«å‘¨è¾ºã®å»ºç¯‰ä½œå“ã‚’ç™ºè¦‹ã§ãã¾ã™ã€‚"}),e.jsx(W,{variant:"contained",component:B,to:"/map",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"ãƒžãƒƒãƒ—ã‚’é–‹ã"})]})]})})]})]})})]})},Rt="/archi-site",Ar=`${Rt}/sql-wasm.wasm`,Tr=`${Rt}/db/archimap.sqlite`;let ne=null,Qe=null,et=!1,We=null;var Le=(n=>(n.NOT_INITIALIZED="not_initialized",n.INITIALIZING="initializing",n.READY="ready",n.ERROR="error",n))(Le||{});const Er=()=>ne?"ready":et?"initializing":"not_initialized",St=async()=>ne||We||(et=!0,We=(async()=>{try{console.log("ðŸš€ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚’é–‹å§‹..."),Qe||(console.log("ðŸ“¦ SQL.js WASM ã‚’èª­ã¿è¾¼ã¿ä¸­..."),Qe=await ur({locateFile:m=>m.endsWith(".wasm")?Ar:m}),console.log("âœ… SQL.js WASM èª­ã¿è¾¼ã¿å®Œäº†")),console.log("ðŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­...");const n=await fetch(Tr);if(!n.ok)throw new Error(`ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—: ${n.status} ${n.statusText}`);const t=await n.arrayBuffer(),o=new Uint8Array(t);console.log(`ðŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å®Œäº†: ${Math.round(t.byteLength/1024/1024*100)/100} MB`),ne=new Qe.Database(o),console.log("âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šã‚’ç¢ºç«‹ã—ã¾ã—ãŸ");const g=ne.exec("SELECT sqlite_version()");console.log(`ðŸ” SQLite ãƒãƒ¼ã‚¸ãƒ§ãƒ³: ${g[0]?.values[0][0]}`);const i=ne.exec("SELECT name FROM sqlite_master WHERE type='table'");return i.length>0&&console.log(`ðŸ“‹ åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ¼ãƒ–ãƒ«æ•°: ${i[0].values.length}`),ne}catch(n){throw console.error("âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n),ne=null,n}finally{et=!1,We=null}})(),We),wt=async(n,t=[])=>{try{if(ne||await St(),!ne)throw new Error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“");return ne.exec(n,t)}catch(o){throw console.error("ã‚¯ã‚¨ãƒªå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:",o),o}},Dt=n=>{if(!n||n.length===0)return[];const{columns:t,values:o}=n[0];return o.map(g=>{const i={};return t.forEach((m,d)=>{i[m]=g[d]}),i})},qe=async(n,t=[])=>{const o=await wt(n,t);return Dt(o)[0]},Ye=async(n,t=[])=>{const o=await wt(n,t);return Dt(o)},Wt=async n=>qe("SELECT * FROM ZCDARCHITECTURE WHERE ZAW_ID = ?",[n]),kt=async(n=1,t=12,o="",g="ZAW_NAME",i="asc",m={})=>{const d=(n-1)*t;let c="1=1";const s=[];o&&(c+=" AND (ZAW_NAME LIKE ? OR ZAW_ADDRESS LIKE ? OR ZAW_DETAIL LIKE ?)",s.push(`%${o}%`,`%${o}%`,`%${o}%`)),m.architect&&(c+=" AND (ZAW_ARCHITECT LIKE ? OR a.ZAR_NAME LIKE ? OR a.ZAR_NAMEENG LIKE ?)",s.push(`%${m.architect}%`,`%${m.architect}%`,`%${m.architect}%`)),m.location&&(c+=" AND ZAW_ADDRESS LIKE ?",s.push(`%${m.location}%`)),m.prefecture&&(c+=" AND ZAW_PREFECTURE = ?",s.push(m.prefecture)),m.yearFrom&&(c+=" AND ZAW_YEAR >= ?",s.push(m.yearFrom)),m.yearTo&&(c+=" AND ZAW_YEAR <= ?",s.push(m.yearTo));let j="LEFT JOIN ZCDARCHITECT a ON ZCDARCHITECTURE.ZAW_ARCHITECT_ID = a.ZAR_ID";m.tags&&m.tags.length>0&&(j+=`
      INNER JOIN ZCDARCHITECTURE_TAG ON ZCDARCHITECTURE.ZAW_ID = ZCDARCHITECTURE_TAG.ARCHITECTURE_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECTURE_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,c+=" AND ZCDTAG.TAG_NAME IN (",c+=m.tags.map(()=>"?").join(","),c+=")",s.push(...m.tags));const f=`
    SELECT COUNT(DISTINCT ZCDARCHITECTURE.ZAW_ID) as total
    FROM ZCDARCHITECTURE
    ${j}
    WHERE ${c}
  `,C=`
    SELECT DISTINCT ZCDARCHITECTURE.*
    FROM ZCDARCHITECTURE
    ${j}
    WHERE ${c}
    ORDER BY ${g} ${i==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,k=[...s,t,d];try{const v=(await qe(f,s))?.total||0;return{results:await Ye(C,k),total:v,page:n,limit:t,totalPages:Math.ceil(v/t)}}catch(w){throw console.error("å»ºç¯‰ä½œå“ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",w),w}},_t=async(n,t={})=>{let o=`
    ZAW_LAT BETWEEN ? AND ?
    AND ZAW_LNG BETWEEN ? AND ?
    AND ZAW_LAT IS NOT NULL
    AND ZAW_LNG IS NOT NULL
  `;const g=[n.south,n.north,n.west,n.east];t.searchTerm&&(o+=" AND (ZAW_NAME LIKE ? OR ZAW_ADDRESS LIKE ? OR ZAW_ARCHITECT LIKE ?)",g.push(`%${t.searchTerm}%`,`%${t.searchTerm}%`,`%${t.searchTerm}%`)),t.architect&&(o+=" AND (ZAW_ARCHITECT LIKE ? OR a.ZAR_NAME LIKE ? OR a.ZAR_NAMEENG LIKE ?)",g.push(`%${t.architect}%`,`%${t.architect}%`,`%${t.architect}%`)),t.yearFrom&&(o+=" AND ZAW_YEAR >= ?",g.push(t.yearFrom)),t.yearTo&&(o+=" AND ZAW_YEAR <= ?",g.push(t.yearTo));let i="LEFT JOIN ZCDARCHITECT a ON ZCDARCHITECTURE.ZAW_ARCHITECT_ID = a.ZAR_ID";t.tags&&t.tags.length>0&&(i+=`
      INNER JOIN ZCDARCHITECTURE_TAG ON ZCDARCHITECTURE.ZAW_ID = ZCDARCHITECTURE_TAG.ARCHITECTURE_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECTURE_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,o+=" AND ZCDTAG.TAG_NAME IN (",o+=t.tags.map(()=>"?").join(","),o+=")",g.push(...t.tags));const m=`
    SELECT DISTINCT ZCDARCHITECTURE.*
    FROM ZCDARCHITECTURE
    ${i}
    WHERE ${o}
    LIMIT 500
  `;return Ye(m,g)},Ir=Object.freeze(Object.defineProperty({__proto__:null,getAllArchitectures:kt,getArchitectureById:Wt,getArchitectureForMap:_t},Symbol.toStringTag,{value:"Module"})),vr=()=>{const[n,t]=x.useState([]),[o,g]=x.useState(!0),[i,m]=x.useState(0),[d,c]=x.useState(1),[s,j]=x.useState(""),[f,C]=x.useState(""),[k,w]=x.useState([]),[v,Y]=x.useState([]),[z,q]=x.useState([]),[u,A]=x.useState("year_desc"),[p,R]=x.useState({}),[_,ae]=x.useState(null),[I,je]=x.useState(""),[X,de]=x.useState({}),re=12,G=Ge(),Q=Ke();x.useEffect(()=>{(async()=>{try{q([])}catch(y){console.error("ã‚¿ã‚°å–å¾—ã‚¨ãƒ©ãƒ¼:",y)}})()},[]),x.useEffect(()=>{const h=new URLSearchParams(G.search),y=h.get("tag"),E=h.get("search"),$=h.get("year"),K=h.get("prefecture"),N=h.get("category"),F=h.get("architect"),D=h.get("sort");if(D&&A(D),y){const T=y.split(",").map(r=>r.trim()).filter(r=>r),L=new Set,J=[];T.forEach(r=>{const b=r.match(/\d{4}å¹´\d{1,2}æœˆå·?/);if(b){const S=r.replace(b[0],"").trim();S&&(L.add(S),J.push(r))}else L.add(r)}),w(Array.from(L)),Y(J),C(y),j(`tag:${y}`),H(1,`tag:${y}`,D||u)}else $?(j(`year:${$}`),H(1,`year:${$}`,D||u)):K?(j(`prefecture:${K}`),H(1,`prefecture:${K}`,D||u)):N?(j(`category:${N}`),H(1,`category:${N}`,D||u)):F?(j(`architect:${F}`),H(1,`architect:${F}`,D||u)):E?(j(E),H(1,E,D||u)):H(1,s,D||u)},[G.search]);const H=async(h,y=s,E=u)=>{g(!0);try{const $=await kt(h,re,y,E);t($.items),m($.total),c(h)}catch($){console.error("Error fetching architectures:",$)}finally{g(!1)}},ie=(h,y)=>{c(y),H(y,s,u),window.scrollTo(0,0)},ye=h=>{j(h.target.value)},he=async(h,y)=>{ae(h.currentTarget),je(y);try{const E=[];de($=>({...$,[y]:E}))}catch(E){console.error(`Failed to get years for tag ${y}:`,E)}},xe=()=>{ae(null),je("")},ve=h=>{const y=h?`${I}${h}`:I;let E=[...v];const $=E.findIndex(T=>T.startsWith(I)&&(T===I||T.match(new RegExp(`^${I}\\d{4}å¹´\\d{1,2}æœˆå·?`))||T.match(new RegExp(`^${I}\\d{4}å¹´åº¦?`))||T.match(new RegExp(`^${I}ç¬¬\\d+å›ž`))||T.match(new RegExp(`^${I}\\(\\d{4}\\)`))));$>=0?h?E[$]=y:E.splice($,1):h&&E.push(y),Y(E),xe();const K=[...k];K.includes(I)||K.push(I);const N=[...K,...E].filter((T,L,J)=>J.indexOf(T)===L&&!E.some(r=>r!==T&&r.startsWith(T))).join(",");C(N);const F=`tag:${N}`;j(F),H(1,F,u);const D=new URLSearchParams;D.set("tag",N),u!=="year_desc"&&D.set("sort",u),Q({search:D.toString()})},Re=(h,y)=>{const E=k.filter(N=>!y.includes(N));let $=[...v].filter(N=>!E.some(F=>N.startsWith(F)));const K=y.filter(N=>!k.includes(N));if(K.length>0&&K.forEach(async N=>{if(!X[N])try{const F=[];if(de(D=>({...D,[N]:F})),F&&F.length===1){const D=`${N}${F[0]}`;$.push(D)}}catch(F){console.error(`Failed to get years for tag ${N}:`,F)}}),w(y),Y($),y.length>0||$.length>0){const N=[...y,...$].filter((T,L,J)=>J.indexOf(T)===L&&!$.some(r=>r!==T&&r.startsWith(T))).join(",");C(N);const F=`tag:${N}`;j(F),H(1,F,u);const D=new URLSearchParams;D.set("tag",N),u!=="year_desc"&&D.set("sort",u),Q({search:D.toString()})}else Te()},ue=h=>{const y=h.target.value;A(y),H(d,s,y);const E=new URLSearchParams(G.search);E.set("sort",y),Q({search:E.toString()})},me=()=>{c(1),H(1,s,u);const h=new URLSearchParams;if(u!=="year_desc"&&h.set("sort",u),s.startsWith("tag:")){const y=s.substring(4).trim();h.set("tag",y)}else if(s.startsWith("year:")){const y=s.substring(5).trim();h.set("year",y)}else if(s.startsWith("prefecture:")){const y=s.substring(11).trim();h.set("prefecture",y)}else if(s.startsWith("category:")){const y=s.substring(9).trim();h.set("category",y)}else if(s.startsWith("architect:")){const y=s.substring(10).trim();h.set("architect",y)}else s&&h.set("search",s);Q({search:h.toString()})},Te=()=>{C(""),j(""),w([]),Y([]),c(1),H(1,"",u);const h=new URLSearchParams;u!=="year_desc"&&h.set("sort",u),Q({search:h.toString()})},le=Math.ceil(i/re);return e.jsxs(te,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰ä½œå“ä¸€è¦§"}),e.jsxs(ce,{sx:{p:3,mb:4},children:[e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Ae,{fullWidth:!0,label:"å»ºç¯‰ä½œå“åã€ä½æ‰€ã€å»ºç¯‰å®¶ã§æ¤œç´¢",value:s,onChange:ye,onKeyPress:h=>h.key==="Enter"&&me(),InputProps:{startAdornment:e.jsx(Ve,{position:"start",children:e.jsx(Me,{})})}}),e.jsx(W,{variant:"contained",onClick:me,sx:{minWidth:"120px"},children:"æ¤œç´¢"})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(mt,{multiple:!0,id:"tags-selector",options:z,value:k,onChange:Re,renderInput:h=>e.jsx(Ae,{...h,variant:"outlined",label:"ã‚¿ã‚°ã§çµžã‚Šè¾¼ã¿",placeholder:"ã‚¿ã‚°ã‚’é¸æŠž"}),renderTags:(h,y)=>h.map((E,$)=>{const K=v.some(T=>T.startsWith(E)&&T!==E),N=!!(X[E]&&X[E].length>0),F=v.find(T=>T.startsWith(E)&&T!==E);let D="";if(F){const T=F.substring(E.length);T.match(/\d{4}å¹´\d{1,2}æœˆå·?/)?D=T.replace(/^(\d{4})/,(L,J)=>`'${J.substring(2)}`):T.match(/\d{4}å¹´åº¦?/)?D=T.replace(/^(\d{4})/,(L,J)=>`'${J.substring(2)}`):T.match(/ç¬¬\d+å›ž/)?D=T:T.match(/\(\d{4}\)/)?D=T.replace(/\((\d{4})\)/,(L,J)=>`'${J.substring(2)}`):D=T}return e.jsx(O,{label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[E,F&&e.jsx(l,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:D}),N&&e.jsx(gt,{fontSize:"small"})]}),...y({index:$}),color:K?"primary":"default",variant:"outlined",onClick:T=>{T.stopPropagation(),he(T,E)},onDelete:T=>{y({index:$}).onDelete(T)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}},E)}),sx:{flex:2}}),e.jsxs(pt,{sx:{minWidth:200,flex:1},children:[e.jsx(ft,{id:"sort-select-label",children:"ä¸¦ã³æ›¿ãˆ"}),e.jsxs(jt,{labelId:"sort-select-label",id:"sort-select",value:u,label:"ä¸¦ã³æ›¿ãˆ",onChange:ue,startAdornment:e.jsx(Ve,{position:"start",children:e.jsx(Ut,{})}),children:[e.jsx(ee,{value:"year_desc",children:"å¹´ä»£ï¼ˆæ–°ã—ã„é †ï¼‰"}),e.jsx(ee,{value:"year_asc",children:"å¹´ä»£ï¼ˆå¤ã„é †ï¼‰"}),e.jsx(ee,{value:"name_asc",children:"åå‰ï¼ˆæ˜‡é †ï¼‰"}),e.jsx(ee,{value:"name_desc",children:"åå‰ï¼ˆé™é †ï¼‰"}),e.jsx(ee,{value:"architect_asc",children:"å»ºç¯‰å®¶ï¼ˆæ˜‡é †ï¼‰"}),e.jsx(ee,{value:"architect_desc",children:"å»ºç¯‰å®¶ï¼ˆé™é †ï¼‰"})]})]})]}),e.jsx(yt,{open:!!_,anchorEl:_,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(a,{sx:{p:2,maxHeight:300,width:"250px",overflowY:"auto"},children:[e.jsxs(l,{variant:"subtitle2",sx:{mb:1},children:[I," ã®é¸æŠž:"]}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(O,{label:"æŒ‡å®šãªã—",onClick:()=>ve(""),variant:"outlined",size:"small",color:k.includes(I)&&!v.some(h=>h.startsWith(I)&&h!==I)?"primary":"default"}),X[I]?.map(h=>{let y=h,E="default";return v.some($=>$===`${I}${h}`)&&(E="primary"),e.jsx(O,{label:y,onClick:()=>ve(h),variant:"outlined",size:"small",color:E,sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},h)})]})]})}),(f||s)&&e.jsx(a,{sx:{mb:3},children:e.jsx(rt,{severity:"info",action:e.jsx(W,{color:"inherit",size:"small",onClick:Te,children:"ã‚¯ãƒªã‚¢"}),children:f?`ã‚¿ã‚°ã€Œ${f}ã€ã§çµžã‚Šè¾¼ã¿ä¸­`:`ã€Œ${s}ã€ã§æ¤œç´¢ä¸­`})}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[i," ä»¶ã®å»ºç¯‰ä½œå“"]}),le>1&&e.jsx(Be,{count:le,page:d,onChange:ie,color:"primary",size:"small"})]})]}),o?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx($e,{})}):e.jsxs(e.Fragment,{children:[n.length===0?e.jsxs(a,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{variant:"h6",children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„"})]}):e.jsx(P,{container:!0,spacing:3,children:n.map(h=>e.jsx(P,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(ze,{component:B,to:`/architecture/${h.id}`,sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%"},children:e.jsxs(fe,{sx:{width:"100%",flexGrow:1},children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h2",children:h.name}),e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:1,mt:2},children:[h.architectName&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(bt,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:h.architectName})]}),h.city&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(He,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:h.city})]}),h.completedYear>0&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ct,{fontSize:"small",color:"action"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[h.completedYear,"å¹´"]})]})]})]})})})},h.id))}),le>1&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Be,{count:le,page:d,onChange:ie,color:"primary"})})]})]})};delete It.Icon.Default.prototype._getIconUrl;It.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const Pe=({markers:n=[],center:t,zoom:o=13,height:g="500px",singleMarker:i})=>{const[m,d]=x.useState(t);return x.useEffect(()=>{i&&i.latitude&&i.longitude?d([i.latitude,i.longitude]):t&&d(t)},[i,t]),e.jsx("div",{style:{height:g,width:"100%",marginBottom:"20px"},children:e.jsxs(mr,{center:m,zoom:o,style:{height:"100%",width:"100%"},children:[e.jsx(gr,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((c,s)=>c.latitude&&c.longitude?e.jsx(nt,{position:[c.latitude,c.longitude],children:e.jsxs(at,{children:[e.jsx(l,{variant:"h6",children:c.name}),e.jsx(l,{variant:"body2",children:c.location}),e.jsx(W,{component:B,to:`/architecture/${c.id}`,size:"small",variant:"outlined",sx:{mt:1},children:"è©³ç´°ã‚’è¦‹ã‚‹"})]})},`marker-${c.id||s}`):null),i&&i.latitude&&i.longitude&&e.jsx(nt,{position:[i.latitude,i.longitude],children:e.jsxs(at,{children:[e.jsx(l,{variant:"h6",children:i.name}),e.jsx(l,{variant:"body2",children:i.location})]})})]})})},Rr=()=>{const{id:n}=Tt(),[t,o]=x.useState(null),[g,i]=x.useState(!0),[m,d]=x.useState(null),c=Ke();if(x.useEffect(()=>{(async()=>{i(!0);try{const Y=await Wt(n);if(!Y)throw new Error("å»ºç¯‰ä½œå“ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");o(Y)}catch(Y){console.error("Error fetching work:",Y),d(Y.message)}finally{i(!1)}})()},[n]),g)return e.jsx(a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx($e,{})});if(m)return e.jsxs(te,{children:[e.jsxs(l,{variant:"h5",color:"error",sx:{textAlign:"center",my:4},children:["ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ",m]}),e.jsx(W,{variant:"contained",component:B,to:"/architecture",startIcon:e.jsx(_e,{}),children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"})]});if(!t)return e.jsxs(te,{children:[e.jsx(l,{variant:"h5",sx:{textAlign:"center",my:4},children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(W,{variant:"contained",component:B,to:"/architecture",startIcon:e.jsx(_e,{}),children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"})]});const s=t.tag?t.tag.split(",").filter(v=>v.trim()!==""&&!v.includes("ã®è¿½åŠ å»ºç¯‰")):[],j=s.find(v=>v.includes("æ–°å»ºç¯‰")),f=j?j.replace("æ–°å»ºç¯‰",""):"",C=v=>{console.log(`ã‚¿ã‚°ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ: ${v}`),c(`/architecture?tag=${encodeURIComponent(v)}`)},k=(v,Y)=>{const z=`${v} ${Y?.name||""} å»ºç¯‰`;return`https://www.google.com/search?q=${encodeURIComponent(z)}&tbm=isch`},w=v=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(v)}`;return e.jsxs(te,{maxWidth:"lg",sx:{py:4},children:[e.jsx(W,{variant:"outlined",component:B,to:"/architecture",startIcon:e.jsx(_e,{}),sx:{mb:3},children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"}),e.jsxs(ce,{sx:{p:3,mb:4},children:[e.jsxs(a,{sx:{mb:2},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"ç„¡é¡Œ"}),t.location&&e.jsxs(l,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:[e.jsx(He,{fontSize:"small",sx:{verticalAlign:"middle",mr:.5}}),t.location]}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[t.completedYear!==0&&e.jsx(O,{icon:e.jsx(Ct,{}),label:`${t.completedYear}å¹´`,variant:"outlined",size:"small",onClick:()=>c(`/architecture?year=${t.completedYear}`),clickable:!0}),t.city&&e.jsx(O,{icon:e.jsx(He,{}),label:t.city,variant:"outlined",size:"small",onClick:()=>c(`/architecture?prefecture=${encodeURIComponent(t.city)}`),clickable:!0}),t.architect&&t.architect.name&&e.jsx(O,{icon:e.jsx(bt,{}),label:t.architect.name,component:B,to:`/architects/${t.architect.id}`,clickable:!0,color:"primary",size:"small"}),t.bigCategory&&e.jsx(O,{icon:e.jsx(Xe,{}),label:t.bigCategory,variant:"outlined",size:"small",onClick:()=>c(`/architecture?category=${encodeURIComponent(t.bigCategory)}`),clickable:!0}),t.category&&t.category!==t.bigCategory&&e.jsx(O,{icon:e.jsx(Xe,{}),label:t.category,variant:"outlined",size:"small",onClick:()=>c(`/architecture?category=${encodeURIComponent(t.category)}`),clickable:!0})]}),s.length>0&&e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:s.map((v,Y)=>e.jsx(O,{icon:e.jsx(At,{}),label:v,onClick:()=>C(v),clickable:!0,color:"secondary",variant:"outlined",size:"small"},Y))})]}),e.jsx(Ue,{sx:{my:3}}),e.jsxs(a,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.shinkenchikuUrl&&e.jsx(Ce,{title:"æ–°å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ã§è¦‹ã‚‹",children:e.jsxs(W,{variant:"contained",href:t.shinkenchikuUrl,target:"_blank",rel:"noopener noreferrer",size:"small",sx:{backgroundColor:"#003366",color:"#ffffff","&:hover":{backgroundColor:"#002244"}},children:[e.jsx(a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mr:.5},children:e.jsx("img",{src:"https://data.shinkenchiku.online/favicon.ico",alt:"æ–°å»ºç¯‰ãƒ‡ãƒ¼ã‚¿",style:{height:"16px",width:"auto",marginRight:"4px"}})}),f&&e.jsx(l,{variant:"caption",children:f})]})}),e.jsx(Ce,{title:"Googleç”»åƒæ¤œç´¢",children:e.jsx(W,{href:k(t.name,t.architect),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Gt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"ç”»åƒ"})}),e.jsx(Ce,{title:"Wikipediaã§æ¤œç´¢",children:e.jsx(W,{href:w(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Kt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),t.description&&e.jsxs(a,{sx:{mt:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"æ¦‚è¦"}),e.jsx(l,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-line"},children:t.description})]}),t.latitude&&t.longitude&&e.jsxs(a,{sx:{mt:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½ç½®æƒ…å ±"}),e.jsx(a,{sx:{height:"400px",width:"100%",mt:2,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(Pe,{singleMarker:{id:t.id||0,latitude:t.latitude,longitude:t.longitude,name:t.name,location:t.location},center:[t.latitude,t.longitude],zoom:15})})]})]})]})},Sr=async n=>qe("SELECT * FROM ZCDARCHITECT WHERE ZAR_ID = ?",[n]),wr=async(n=1,t=12,o="",g=[],i="ZAR_NAME",m="asc",d={})=>{const c=(n-1)*t;let s="1=1";const j=[];o&&(s+=" AND (ZAR_NAME LIKE ? OR ZAR_KANA LIKE ? OR ZAR_NAMEENG LIKE ?)",j.push(`%${o}%`,`%${o}%`,`%${o}%`)),d.nationality&&(s+=" AND ZAR_NATIONALITY = ?",j.push(d.nationality)),d.category&&(s+=" AND ZAR_CATEGORY = ?",j.push(d.category)),d.school&&(s+=" AND ZAR_SCHOOL = ?",j.push(d.school)),d.birthYearFrom&&(s+=" AND ZAR_BIRTHYEAR >= ?",j.push(d.birthYearFrom)),d.birthYearTo&&(s+=" AND ZAR_BIRTHYEAR <= ?",j.push(d.birthYearTo)),d.deathYear&&(s+=" AND ZAR_DEATHYEAR = ?",j.push(d.deathYear));let f="";g&&g.length>0&&(f=`
      INNER JOIN ZCDARCHITECT_TAG ON ZCDARCHITECT.ZAR_ID = ZCDARCHITECT_TAG.ARCHITECT_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECT_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,s+=" AND ZCDTAG.TAG_NAME IN (",s+=g.map(()=>"?").join(","),s+=")",j.push(...g));const C=`
    SELECT COUNT(DISTINCT ZCDARCHITECT.ZAR_ID) as total
    FROM ZCDARCHITECT
    ${f}
    WHERE ${s}
  `,k=`
    SELECT DISTINCT ZCDARCHITECT.*
    FROM ZCDARCHITECT
    ${f}
    WHERE ${s}
    ORDER BY ${i} ${m==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,w=[...j,t,c];try{const Y=(await qe(C,j))?.total||0;return{results:await Ye(k,w),total:Y,page:n,limit:t,totalPages:Math.ceil(Y/t)}}catch(v){throw console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",v),v}},Dr=async()=>Ye(`
    SELECT TAG_ID, TAG_NAME, COUNT(ARCHITECT_ID) as TAG_COUNT
    FROM ZCDTAG
    LEFT JOIN ZCDARCHITECT_TAG ON ZCDTAG.TAG_ID = ZCDARCHITECT_TAG.TAG_ID
    GROUP BY ZCDTAG.TAG_ID, ZCDTAG.TAG_NAME
    ORDER BY TAG_COUNT DESC, TAG_NAME
  `),Wr=()=>{console.log("ArchitectsPage ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã—ãŸ");const[n,t]=x.useState([]),[o,g]=x.useState(!0),[i,m]=x.useState(0),[d,c]=x.useState(0),[s,j]=x.useState(1),[f,C]=x.useState(""),[k,w]=x.useState([]),[v,Y]=x.useState([]),[z,q]=x.useState([]),[u,A]=x.useState("name"),[p,R]=x.useState("asc"),[_,ae]=x.useState(null),[I,je]=x.useState(""),[X,de]=x.useState({}),[re,G]=x.useState(""),[Q,H]=x.useState(""),[ie,ye]=x.useState(""),[he,xe]=x.useState(""),[ve,Re]=x.useState(""),[ue,me]=x.useState(""),Te=Ke(),le=Ge(),h=new URLSearchParams(le.search);x.useEffect(()=>{console.log("tagMenuAnchorEl çŠ¶æ…‹å¤‰æ›´:",!!_)},[_]),x.useEffect(()=>{console.log("ã‚¿ã‚°èª­ã¿è¾¼ã¿ã®useEffectãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ"),(async()=>{try{console.log("å»ºç¯‰å®¶ã‚¿ã‚°å–å¾—é–‹å§‹");const b=await Dr();console.log("å–å¾—ã—ãŸå»ºç¯‰å®¶ã‚¿ã‚°:",b),q(["å›½ç±","ã‚«ãƒ†ã‚´ãƒªãƒ¼","å­¦æ ¡","ç”Ÿå¹´","æ²¡å¹´"])}catch(b){console.error("ã‚¿ã‚°å–å¾—ã‚¨ãƒ©ãƒ¼:",b)}})()},[]),x.useEffect(()=>{console.log("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã®useEffectãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ",le.search),(async()=>{g(!0);try{const b=parseInt(h.get("page")||"1"),S=h.get("search")||"",V=h.get("tags")?h.get("tags").split(","):[],Z=h.get("sortBy")||"name",M=h.get("sortOrder")||"asc",se=h.get("nationality")||"",Ne=h.get("category")||"",Fe=h.get("school")||"",Se=h.get("birthYearFrom")||"",we=h.get("birthYearTo")||"",De=h.get("deathYear")||"";console.log("URLã‹ã‚‰èª­ã¿å–ã£ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:",{page:b,search:S,tags:V,sort:Z,order:M,nat:se,cat:Ne,sch:Fe,birthFrom:Se,birthTo:we,death:De}),j(b),C(S),w(V),A(Z),R(M),G(se),H(Ne),ye(Fe),xe(Se),Re(we),me(De),console.log("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—é–‹å§‹:",{page:b,search:S,tags:V,sort:Z,order:M,nat:se,cat:Ne,sch:Fe,birthFrom:Se,birthTo:we,death:De});const Oe=await wr(b,10,S,V,Z,M,se,Ne,Fe,Se?parseInt(Se):0,we?parseInt(we):0,De?parseInt(De):0);console.log("å–å¾—ã—ãŸå»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿:",Oe),t(Oe.items),m(Oe.totalPages),c(Oe.total)}catch(b){console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",b)}finally{g(!1)}})()},[le.search]);const y=async r=>{console.log(`${r}ã®å¹´åº¦å–å¾—é–‹å§‹`);let b="";if(r==="å›½ç±"?b="SELECT DISTINCT ZAT_NATIONALITY as value FROM ZCDARCHITECT WHERE ZAT_NATIONALITY != '' ORDER BY ZAT_NATIONALITY":r==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?b="SELECT DISTINCT ZAT_CATEGORY as value FROM ZCDARCHITECT WHERE ZAT_CATEGORY != '' ORDER BY ZAT_CATEGORY":r==="å­¦æ ¡"?b="SELECT DISTINCT ZAT_SCHOOL as value FROM ZCDARCHITECT WHERE ZAT_SCHOOL != '' ORDER BY ZAT_SCHOOL":r==="ç”Ÿå¹´"?b="SELECT DISTINCT ZAT_BIRTHYEAR as value FROM ZCDARCHITECT WHERE ZAT_BIRTHYEAR > 0 ORDER BY ZAT_BIRTHYEAR DESC":r==="æ²¡å¹´"&&(b="SELECT DISTINCT ZAT_DEATHYEAR as value FROM ZCDARCHITECT WHERE ZAT_DEATHYEAR > 0 ORDER BY ZAT_DEATHYEAR DESC"),!b)return[];try{return(await Ye(b)).map(V=>String(V.value)).filter(Boolean)}catch(S){return console.error(`${r}ã®å€¤å–å¾—ã‚¨ãƒ©ãƒ¼:`,S),[]}},E=async(r,b)=>{if(console.log(`${b}ã®å¹´åº¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã`,r.currentTarget),ae(r.currentTarget),je(b),!X[b])try{const S=await y(b);console.log(`å–å¾—ã—ãŸ${b}ã®å¹´åº¦:`,S),de(V=>({...V,[b]:S}))}catch(S){console.error(`${b}ã®å¹´åº¦å–å¾—ã‚¨ãƒ©ãƒ¼:`,S)}},$=()=>{console.log("å¹´åº¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"),ae(null),je("")},K=r=>{console.log(`å¹´åº¦é¸æŠž: ${r} (ã‚¿ã‚°: ${I})`),I==="å›½ç±"?G(r):I==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?H(r):I==="å­¦æ ¡"?ye(r):I==="ç”Ÿå¹´"?xe(r):I==="æ²¡å¹´"&&me(r),$(),L()},N=(r,b)=>{console.log("ã‚¿ã‚°é¸æŠžå¤‰æ›´:",b),w(b);const S=k.filter(Z=>!b.includes(Z));for(const Z of S)Z==="å›½ç±"?G(""):Z==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?H(""):Z==="å­¦æ ¡"?ye(""):Z==="ç”Ÿå¹´"?(xe(""),Re("")):Z==="æ²¡å¹´"&&me("");const V=b.filter(Z=>!k.includes(Z));V.length>0&&V.forEach(async Z=>{if(!X[Z])try{const M=await y(Z);de(se=>({...se,[Z]:M}))}catch(M){console.error(`${Z}ã®å¹´åº¦å–å¾—ã‚¨ãƒ©ãƒ¼:`,M)}}),L()},F=(r,b)=>{console.log(`ãƒšãƒ¼ã‚¸å¤‰æ›´: ${b}`),j(b);const S=new URLSearchParams(le.search);S.set("page",b.toString()),Te({search:S.toString()})},D=()=>{console.log(`æ¤œç´¢å®Ÿè¡Œ: ${f}`),L()},T=()=>{console.log("æ¤œç´¢æ¡ä»¶ã‚’ã‚¯ãƒªã‚¢"),C(""),w([]),Y([]),G(""),H(""),ye(""),xe(""),Re(""),me(""),j(1);const r=new URLSearchParams;u!=="name"&&r.set("sortBy",u),p!=="asc"&&r.set("sortOrder",p),Te({search:r.toString()})},L=()=>{console.log("URLã¨æ¤œç´¢ã‚’æ›´æ–°");const r=new URLSearchParams;s>1&&r.set("page",s.toString()),f&&r.set("search",f),k.length>0&&r.set("tags",k.join(",")),u!=="name"&&r.set("sortBy",u),p!=="asc"&&r.set("sortOrder",p),re&&r.set("nationality",re),Q&&r.set("category",Q),ie&&r.set("school",ie),he&&r.set("birthYearFrom",he),ve&&r.set("birthYearTo",ve),ue&&r.set("deathYear",ue),console.log("æ–°ã—ã„URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:",r.toString()),Te({search:r.toString()})},J=()=>{const r=[];return re&&r.push({label:`å›½ç±: ${re}`,onDelete:()=>{G(""),L()}}),he&&r.push({label:`ç”Ÿå¹´: ${he}`,onDelete:()=>{xe(""),L()}}),ue&&r.push({label:`æ²¡å¹´: ${ue}`,onDelete:()=>{me(""),L()}}),Q&&r.push({label:`ã‚«ãƒ†ã‚´ãƒªãƒ¼: ${Q}`,onDelete:()=>{H(""),L()}}),ie&&r.push({label:`å­¦æ ¡: ${ie}`,onDelete:()=>{ye(""),L()}}),r.length===0&&!f&&k.length===0?null:e.jsx(a,{sx:{mb:3},children:e.jsx(rt,{severity:"info",action:e.jsx(W,{color:"inherit",size:"small",onClick:T,children:"ã‚¯ãƒªã‚¢"}),children:r.length>0?`ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: ${r.map(b=>b.label).join(", ")}`:f?`ã€Œ${f}ã€ã§æ¤œç´¢ä¸­`:k.length>0?`ã‚¿ã‚°ã€Œ${k.join(", ")}ã€ã§çµžã‚Šè¾¼ã¿ä¸­`:""})})};return e.jsxs(te,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰å®¶ä¸€è¦§"}),e.jsxs(ce,{sx:{p:3,mb:4},children:[e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Ae,{fullWidth:!0,label:"å»ºç¯‰å®¶åã€å›½ç±ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã§æ¤œç´¢",value:f,onChange:r=>C(r.target.value),onKeyPress:r=>r.key==="Enter"&&D(),InputProps:{startAdornment:e.jsx(Ve,{position:"start",children:e.jsx(Me,{})})}}),e.jsx(W,{variant:"contained",onClick:D,sx:{minWidth:"120px"},children:"æ¤œç´¢"})]}),e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(mt,{multiple:!0,id:"tags-selector",options:z,value:k,onChange:N,fullWidth:!0,renderInput:r=>e.jsx(Ae,{...r,variant:"outlined",label:"ã‚¿ã‚°ã§çµžã‚Šè¾¼ã¿",placeholder:"ã‚¿ã‚°ã‚’é¸æŠž"}),renderTags:(r,b)=>r.map((S,V)=>{const Z=!!(X[S]&&X[S].length>0);let M="";return S==="å›½ç±"?M=re:S==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?M=Q:S==="å­¦æ ¡"?M=ie:S==="ç”Ÿå¹´"?M=he:S==="æ²¡å¹´"&&(M=ue),e.jsx(O,{label:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[S,M&&e.jsx(l,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:M}),Z&&e.jsx(gt,{fontSize:"small"})]}),...b({index:V}),color:M?"primary":"default",variant:"outlined",onClick:se=>{se.stopPropagation(),E(se,S)},onDelete:se=>{b({index:V}).onDelete(se)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap"}}},S)})}),e.jsxs(pt,{sx:{minWidth:200},children:[e.jsx(ft,{id:"sort-select-label",children:"ä¸¦ã³æ›¿ãˆ"}),e.jsxs(jt,{labelId:"sort-select-label",value:`${u}_${p}`,label:"ä¸¦ã³æ›¿ãˆ",onChange:r=>{const[b,S]=r.target.value.split("_");A(b),R(S),L()},children:[e.jsx(ee,{value:"name_asc",children:"åå‰ (æ˜‡é †)"}),e.jsx(ee,{value:"name_desc",children:"åå‰ (é™é †)"}),e.jsx(ee,{value:"birthYear_asc",children:"ç”Ÿå¹´ (æ˜‡é †)"}),e.jsx(ee,{value:"birthYear_desc",children:"ç”Ÿå¹´ (é™é †)"}),e.jsx(ee,{value:"nationality_asc",children:"å›½ç± (æ˜‡é †)"}),e.jsx(ee,{value:"nationality_desc",children:"å›½ç± (é™é †)"})]})]})]}),e.jsx(yt,{open:!!_,anchorEl:_,onClose:$,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsxs(a,{sx:{p:2,width:300,maxHeight:400,overflow:"auto"},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,children:I==="å›½ç±"?"å›½ç±ã‚’é¸æŠž":I==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?"ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠž":I==="å­¦æ ¡"?"å­¦æ ¡ã‚’é¸æŠž":I==="ç”Ÿå¹´"?"ç”Ÿå¹´ã‚’é¸æŠž":I==="æ²¡å¹´"?"æ²¡å¹´ã‚’é¸æŠž":"ã‚¿ã‚°å€¤ã‚’é¸æŠž"}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:[e.jsx(O,{label:"æŒ‡å®šãªã—",onClick:()=>K(""),variant:"outlined",size:"small",sx:{mb:1}}),X[I]?.map(r=>e.jsx(O,{label:r,onClick:()=>K(r),variant:"outlined",size:"small",color:I==="å›½ç±"&&r===re||I==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"&&r===Q||I==="å­¦æ ¡"&&r===ie||I==="ç”Ÿå¹´"&&r===he||I==="æ²¡å¹´"&&r===ue?"primary":"default",sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},r))]})]})}),e.jsx(J,{}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[d,"äººã®å»ºç¯‰å®¶"]}),i>1&&e.jsx(Be,{count:i,page:s,onChange:F,color:"primary",size:"small"})]})]}),o?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx($e,{})}):e.jsxs(e.Fragment,{children:[n.length===0?e.jsxs(a,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{variant:"h6",children:"å»ºç¯‰å®¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„"})]}):e.jsx(P,{container:!0,spacing:3,children:n.map(r=>e.jsx(P,{item:!0,xs:12,sm:6,md:4,children:e.jsx(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(ze,{component:B,to:`/architects/${r.id}`,children:e.jsxs(fe,{children:[e.jsx(l,{variant:"h6",component:"div",gutterBottom:!0,children:r.name}),e.jsxs(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[r.nationality," â€¢ ",r.birthYear||"?","-",r.deathYear||"ç¾åœ¨"]}),e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:r.tags&&r.tags.map(b=>e.jsx(O,{label:b,size:"small",variant:"outlined",sx:{pointerEvents:"none"}},b))})]})})})},r.id))}),i>1&&e.jsx(a,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Be,{count:i,page:s,onChange:F,color:"primary"})})]})]})},kr=({architectures:n,compact:t=!1})=>!n||n.length===0?e.jsx(l,{variant:"body2",color:"text.secondary",children:"ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ä½œå“ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"}):e.jsx(P,{container:!0,spacing:t?2:3,children:n.map(o=>e.jsx(P,{item:!0,xs:12,sm:6,md:t?6:4,children:e.jsx(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(ze,{component:B,to:`/architecture/${o.id}`,sx:{flexGrow:1},children:e.jsxs(fe,{children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h2",children:o.name}),o.completedYear>0&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(qt,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[o.completedYear,"å¹´"]})]}),(o.city||o.location)&&e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(He,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[o.city?o.city:"",o.city&&o.location?" / ":"",o.location?o.location:""]})]}),o.tag&&e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:o.tag.split(",").filter(g=>g.trim()!==""&&!g.includes("ã®è¿½åŠ å»ºç¯‰")).map((g,i)=>e.jsx(O,{label:g.trim(),size:"small",color:"secondary",variant:"outlined",sx:{height:"20px",fontSize:"0.65rem"}},i))})]})})})},o.id))}),_r=()=>e.jsx(a,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:e.jsx(l,{variant:"caption",component:"span",sx:{fontFamily:"serif",fontWeight:"bold",fontSize:"16px"},children:"W"})}),$r=()=>{const{id:n}=Tt(),[t,o]=x.useState(null),[g,i]=x.useState(!0),[m,d]=x.useState(null),[c,s]=x.useState([]),j=Ke();x.useEffect(()=>{n&&(async()=>{i(!0);try{const A=await Sr(parseInt(n));if(!A){d("å»ºç¯‰å®¶æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"),i(!1);return}o(A);const p=[];if(A.teacher1){const R={name:A.teacher1,id:null};try{R.id=await f(A.teacher1)}catch(_){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",_)}p.push(R)}if(A.teacher2){const R={name:A.teacher2,id:null};try{R.id=await f(A.teacher2)}catch(_){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",_)}p.push(R)}if(A.teacher3){const R={name:A.teacher3,id:null};try{R.id=await f(A.teacher3)}catch(_){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",_)}p.push(R)}s(p)}catch(A){console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",A),d("å»ºç¯‰å®¶æƒ…å ±ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}finally{i(!1)}})()},[n]);const f=async u=>null,C=()=>{if(!t)return null;const u=[];if(t.school){let A=t.school;t.faculty&&(A+=` ${t.faculty}`),u.push(A)}return t.schoolAbroad&&u.push(t.schoolAbroad),u.length>0?u.join("ã€"):null},k=()=>!c||c.length===0?null:c.map((u,A)=>e.jsxs("span",{children:[A>0&&"ã€",u.id?e.jsx(ar,{component:B,to:`/architects/${u.id}`,color:"inherit",underline:"hover",children:u.name}):u.name]},A)),w=(u,A)=>{if(!A)return;let p="";switch(u){case"nationality":p=`nationality=${encodeURIComponent(A)}`;break;case"born":p=`birthyear_from=${encodeURIComponent(A)}&birthyear_to=${encodeURIComponent(A)}`;break;case"died":p=`deathyear=${encodeURIComponent(A)}`;break;case"category":p=`category=${encodeURIComponent(A)}`;break;default:return}j(`/architects?${p}`)},v=(u,A)=>{const p=`${u} ${A||""} å»ºç¯‰å®¶`;return`https://www.google.com/search?q=${encodeURIComponent(p)}`},Y=u=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(u)}`;if(g)return e.jsx(te,{maxWidth:"lg",sx:{py:4},children:e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx($e,{})})});if(m||!t)return e.jsx(te,{maxWidth:"lg",sx:{py:4},children:e.jsxs(ce,{sx:{p:3},children:[e.jsx(l,{variant:"h5",color:"error",gutterBottom:!0,children:"ã‚¨ãƒ©ãƒ¼"}),e.jsx(l,{paragraph:!0,children:m||"å»ºç¯‰å®¶æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"}),e.jsx(W,{variant:"outlined",startIcon:e.jsx(_e,{}),onClick:()=>j(-1),children:"æˆ»ã‚‹"})]})});const z=new Set;t.works&&t.works.forEach(u=>{u.tag&&u.tag.split(",").forEach(p=>{const R=p.trim();R&&!R.includes("ã®è¿½åŠ å»ºç¯‰")&&z.add(R)})});const q=[];if(t.nationality&&q.push(`nationality:${t.nationality}`),t.birthYear>0){const u=Math.floor(t.birthYear/10)*10;q.push(`born:${u}s`)}return t.deathYear>0&&q.push(`died:${t.deathYear}`),t.category&&q.push(`category:${t.category}`),t.school&&q.push(`school:${t.school}`),e.jsxs(te,{maxWidth:"lg",sx:{py:4},children:[e.jsx(W,{variant:"outlined",component:B,to:"/architects",startIcon:e.jsx(_e,{}),sx:{mb:3},children:"å»ºç¯‰å®¶ä¸€è¦§ã«æˆ»ã‚‹"}),e.jsxs(ce,{sx:{p:3,mb:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"ä¸æ˜Ž"}),e.jsxs(a,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:3},children:[t.nationality&&e.jsx(O,{icon:e.jsx(Qt,{}),label:`nationality:${t.nationality}`,variant:"outlined",onClick:()=>w("nationality",t.nationality),clickable:!0}),t.birthYear>0&&e.jsx(O,{icon:e.jsx(Jt,{}),label:`born:${Math.floor(t.birthYear/10)*10}s`,variant:"outlined",onClick:()=>w("born",Math.floor(t.birthYear/10)*10),clickable:!0}),t.deathYear>0&&e.jsx(O,{icon:e.jsx(Vt,{}),label:`died:${t.deathYear}`,variant:"outlined",onClick:()=>w("died",t.deathYear),clickable:!0}),t.category&&e.jsx(O,{icon:e.jsx(Xe,{}),label:`category:${t.category}`,variant:"outlined",onClick:()=>w("category",t.category),clickable:!0}),t.office&&e.jsx(O,{icon:e.jsx(Xt,{}),label:t.office,variant:"outlined"})]}),e.jsx(Ue,{sx:{my:3}}),e.jsxs(a,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.website&&e.jsx(Ce,{title:"å…¬å¼ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸",children:e.jsx(W,{href:t.website.startsWith("http")?t.website:`http://${t.website}`,target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(er,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4caf50",color:"#ffffff","&:hover":{backgroundColor:"#388e3c"}},children:"ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸"})}),e.jsx(Ce,{title:"Googleæ¤œç´¢",children:e.jsx(W,{href:v(t.name,t.nationality),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Me,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"æ¤œç´¢"})}),e.jsx(Ce,{title:"Wikipediaã§æ¤œç´¢",children:e.jsx(W,{href:Y(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(_r,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),e.jsx(tr,{component:ce,variant:"outlined",sx:{mb:4},children:e.jsx(rr,{children:e.jsxs(sr,{children:[t.nationality&&e.jsxs(ge,{children:[e.jsx(U,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"å›½ç±"})}),e.jsx(U,{children:t.nationality})]}),(t.birthYear>0||t.deathYear>0)&&e.jsxs(ge,{children:[e.jsx(U,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ç”Ÿå¹´ - æ²¡å¹´"})}),e.jsxs(U,{children:[t.birthYear>0?`${t.birthYear}å¹´`:"ä¸æ˜Ž",t.deathYear>0?` - ${t.deathYear}å¹´`:""]})]}),t.office&&e.jsxs(ge,{children:[e.jsx(U,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"äº‹å‹™æ‰€"})}),e.jsx(U,{children:t.office})]}),t.prefecture&&e.jsxs(ge,{children:[e.jsx(U,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"æ‹ ç‚¹"})}),e.jsx(U,{children:t.prefecture})]}),t.nameEn&&e.jsxs(ge,{children:[e.jsx(U,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"è‹±èªžè¡¨è¨˜"})}),e.jsx(U,{children:t.nameEn})]}),(t.school||t.faculty||t.schoolAbroad)&&e.jsxs(ge,{children:[e.jsx(U,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"æ•™è‚²èƒŒæ™¯"})}),e.jsx(U,{children:e.jsxs(a,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(nr,{sx:{mr:1,fontSize:"1rem",color:"text.secondary"}}),e.jsx(l,{variant:"body2",children:C()})]})})]}),(t.teacher1||t.teacher2||t.teacher3)&&e.jsxs(ge,{children:[e.jsx(U,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"å¸«äº‹ã—ãŸå»ºç¯‰å®¶"})}),e.jsx(U,{children:e.jsx(a,{sx:{display:"flex",flexDirection:"column",gap:1},children:k()})})]}),t.category&&e.jsxs(ge,{children:[e.jsx(U,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ã‚«ãƒ†ã‚´ãƒªãƒ¼"})}),e.jsx(U,{children:t.category})]})]})})}),z.size>0&&e.jsxs(a,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"å—è³žæ­´ãƒ»é¸å®š"}),e.jsx(a,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:Array.from(z).map((u,A)=>e.jsx(O,{icon:e.jsx(At,{}),label:String(u),onClick:()=>w("category",u),clickable:!0,color:"secondary",variant:"outlined",size:"small"},A))})]}),t.bio&&e.jsxs(a,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"çµŒæ­´"}),e.jsx(l,{variant:"body1",sx:{whiteSpace:"pre-line"},children:t.bio})]}),t.works&&t.works.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(a,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½œå“ãƒžãƒƒãƒ—"}),t.works.some(u=>u.latitude&&u.longitude)?e.jsx(a,{sx:{height:"400px",width:"100%",mb:3,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(Pe,{markers:t.works.filter(u=>u.latitude&&u.longitude),zoom:5,center:[t.works[0].latitude||35.6762,t.works[0].longitude||139.6503]})}):e.jsx(l,{variant:"body2",color:"text.secondary",children:"ä½ç½®æƒ…å ±ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ä½œå“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"})]}),e.jsxs(a,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä»£è¡¨ä½œå“"}),e.jsx(kr,{architectures:t.works})]})]})]})]})},Yr=()=>{const[n,t]=x.useState(!0),[o,g]=x.useState([]),[i,m]=x.useState([]),[d,c]=x.useState({yearFrom:"",yearTo:""}),[s,j]=x.useState(!1),[f,C]=x.useState(null),[k,w]=x.useState(!1);x.useEffect(()=>{Y()},[]);const v=p=>{if(!p||p.length===0)return{from:0,to:0};const R=p.filter(G=>G.completedYear>0);if(R.length===0)return{from:0,to:0};const _=R.map(G=>G.completedYear).sort((G,Q)=>G-Q),ae=_[0],I=_[_.length-1],je=Math.min(100,Math.floor((I-ae)/2)),X=Math.floor(Math.random()*(_.length-Math.floor(_.length/4))),de=_[X],re=Math.min(de+je,I);return{from:de,to:re}},Y=async()=>{t(!0);try{const p=await _t();if(m(p),!d.yearFrom&&!d.yearTo){const R=v(p);c({yearFrom:R.from.toString(),yearTo:R.to.toString()});const _=p.filter(ae=>ae.completedYear>=R.from&&ae.completedYear<=R.to);g(_)}else{let R=p;d.yearFrom&&(R=R.filter(_=>_.completedYear>=parseInt(d.yearFrom))),d.yearTo&&(R=R.filter(_=>_.completedYear<=parseInt(d.yearTo))),g(R)}}catch(p){console.error("Error fetching works:",p)}finally{t(!1)}},z=p=>{const{name:R,value:_}=p.target;c({...d,[R]:_})},q=()=>{t(!0);let p=i;d.yearFrom&&(p=p.filter(R=>R.completedYear>=parseInt(d.yearFrom))),d.yearTo&&(p=p.filter(R=>R.completedYear<=parseInt(d.yearTo))),g(p),t(!1)},u=()=>{c({yearFrom:"",yearTo:""}),g(i)},A=p=>{C(p),w(!0)};return e.jsxs(te,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰åœ°å›³"}),e.jsxs(ce,{sx:{p:3,mb:4},children:[e.jsx(W,{startIcon:e.jsx(or,{}),onClick:()=>j(!s),sx:{mb:2},children:s?"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é–‰ã˜ã‚‹":"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’è¡¨ç¤º"}),s&&e.jsx(a,{sx:{mb:2},children:e.jsxs(P,{container:!0,spacing:2,children:[e.jsx(P,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ae,{fullWidth:!0,label:"å¹´ä»£ï¼ˆã‹ã‚‰ï¼‰",name:"yearFrom",type:"number",value:d.yearFrom,onChange:z})}),e.jsx(P,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ae,{fullWidth:!0,label:"å¹´ä»£ï¼ˆã¾ã§ï¼‰",name:"yearTo",type:"number",value:d.yearTo,onChange:z})}),e.jsx(P,{item:!0,xs:12,md:4,children:e.jsxs(a,{sx:{display:"flex",gap:1,height:"100%"},children:[e.jsx(W,{variant:"contained",color:"primary",onClick:q,sx:{flexGrow:1},children:"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨"}),e.jsx(W,{variant:"outlined",onClick:u,sx:{flexGrow:1},children:"ã‚¯ãƒªã‚¢"})]})})]})}),e.jsxs(a,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ie,{sx:{mr:1}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["ãƒžãƒƒãƒ—ä¸Šã«è¡¨ç¤ºã•ã‚ŒãŸä½œå“: ",o.length,"ä»¶ ",d.yearFrom&&d.yearTo&&`(${d.yearFrom}å¹´ã€œ${d.yearTo}å¹´)`]})]})]}),n?e.jsx(a,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx($e,{})}):e.jsxs(a,{sx:{height:600,bgcolor:"grey.200",position:"relative",borderRadius:1},children:[e.jsx(Pe,{markers:o,height:"600px",zoom:5,center:[35.6762,139.6503]}),e.jsxs(a,{sx:{position:"absolute",top:16,right:16,width:320,maxHeight:568,overflow:"auto",bgcolor:"background.paper",borderRadius:1,boxShadow:3,p:2,zIndex:1e3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½œå“ãƒªã‚¹ãƒˆ"}),o.length===0?e.jsx(l,{variant:"body2",children:"æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ä½œå“ã¯ã‚ã‚Šã¾ã›ã‚“"}):e.jsx(ht,{dense:!0,children:o.map(p=>e.jsxs(Et.Fragment,{children:[e.jsx(xt,{onClick:()=>A(p),sx:{cursor:"pointer",bgcolor:f&&f.id===p.id?"action.selected":"transparent","&:hover":{bgcolor:"action.hover"}},children:e.jsx(ut,{primary:p.name,secondary:e.jsxs(e.Fragment,{children:[p.architectName&&e.jsxs("span",{children:[p.architectName,e.jsx("br",{})]}),p.completedYear>0&&`${p.completedYear}å¹´ | `,p.city||""]})})}),e.jsx(Ue,{component:"li"})]},p.id))})]})]}),e.jsx(dt,{anchor:"right",open:k,onClose:()=>w(!1),children:f&&e.jsxs(a,{sx:{width:350,p:3},children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:f.name}),e.jsxs(a,{sx:{mb:3},children:[f.architectName&&e.jsx(l,{variant:"subtitle1",color:"text.secondary",children:f.architectName}),e.jsxs(l,{variant:"body2",children:[f.completedYear>0&&`${f.completedYear}å¹´`,f.city&&` | ${f.city}`]}),f.location&&e.jsx(l,{variant:"body2",sx:{mt:1},children:f.location})]}),e.jsx(a,{sx:{mb:3,height:200},children:e.jsx(Pe,{singleMarker:f,height:"200px",zoom:15,center:[f.latitude,f.longitude]})}),e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(W,{variant:"outlined",onClick:()=>w(!1),children:"é–‰ã˜ã‚‹"}),e.jsx(W,{variant:"contained",component:B,to:`/architecture/${f.id}`,children:"è©³ç´°ã‚’è¦‹ã‚‹"})]})]})})]})};class $t extends x.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,o){console.error("Uncaught error:",t,o),this.setState({error:t,errorInfo:o})}handleRetry=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:4,height:"100vh"},children:e.jsxs(ce,{elevation:3,sx:{padding:4,maxWidth:600,width:"100%",borderRadius:2,textAlign:"center"},children:[e.jsx(l,{variant:"h5",color:"error",gutterBottom:!0,children:"å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ"}),e.jsx(l,{variant:"body1",paragraph:!0,children:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ ãŠæ‰‹æ•°ã§ã™ãŒã€å†èª­ã¿è¾¼ã¿ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚"}),!1,e.jsxs(a,{sx:{mt:3},children:[e.jsx(W,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mr:2},children:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿"}),e.jsx(W,{variant:"outlined",onClick:()=>window.location.href="/",children:"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"})]})]})}):this.props.children}}const Nr=()=>{try{const n=window?.location?.hostname||"";return/github\.io$/.test(n)}catch(n){return console.error("ç’°å¢ƒãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:",n),!1}},Fr=async()=>{try{const t=Nr();console.log("ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒ: æœ¬ç•ª"),console.log(`GitHub Pagesç’°å¢ƒ: ${t?"ã¯ã„":"ã„ã„ãˆ"}`);try{const g=await fetch(t?"./db/database-info.json":"/db/database-info.json");if(g.ok){const i=await g.json();console.log("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æƒ…å ±:"),console.log(`- ãƒ•ã‚¡ã‚¤ãƒ«: ${i.database}`),console.log(`- æ›´æ–°æ—¥æ™‚: ${i.date}`),console.log(`- ã‚µã‚¤ã‚º: ${(i.size/1024/1024).toFixed(2)} MB`),console.log(`- ãƒãƒ£ãƒ³ã‚¯: ${i.chunks} (${i.chunkSize/1024}KB)ã®ãƒãƒ£ãƒ³ã‚¯`),console.log(`- ãƒ†ãƒ¼ãƒ–ãƒ«æ•°: ${i.tables.length}`),console.log(`- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ•°: ${i.indexes.length}`)}else console.warn("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:",g.status)}catch(o){console.warn("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",o)}}catch(n){console.error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šãƒ­ã‚°ã‚¨ãƒ©ãƒ¼:",n)}},Or=({children:n})=>{const[t,o]=x.useState(Er()),[g,i]=x.useState(null),[m,d]=x.useState(0);return x.useEffect(()=>{let c=!0,s;return(async()=>{t!==Le.READY&&setTimeout(async()=>{s=setInterval(()=>{c&&d(f=>{const C=(95-f)*.1;return Math.min(f+C,95)})},300);try{await St(),c&&(d(100),o(Le.READY))}catch(f){c&&(i(`ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: ${f instanceof Error?f.message:"ä¸æ˜Žãªã‚¨ãƒ©ãƒ¼"}`),o(Le.ERROR))}finally{clearInterval(s)}},100)})(),()=>{c=!1,clearInterval(s)}},[t]),e.jsx(e.Fragment,{children:n})},tt={primary:{main:"#2E3440",light:"#4C566A",dark:"#1B1F2B",contrastText:"#FFFFFF"},secondary:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC",contrastText:"#2E3440"},accent:{main:"#D08770",light:"#E5A088",dark:"#BF616A"},background:{default:"#ECEFF4",paper:"#FFFFFF",elevated:"#F8F9FA"},text:{primary:"#2E3440",secondary:"#4C566A",disabled:"#D8DEE9"},divider:"#E5E9F0",success:{main:"#A3BE8C",light:"#B8CCA3",dark:"#8CAF69"},warning:{main:"#EBCB8B",light:"#F0D5A3",dark:"#D4B571"},error:{main:"#BF616A",light:"#CC8088",dark:"#A54A56"},info:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC"}},Zr={fontFamily:'"Inter", "Roboto", "Helvetica Neue", "Arial", sans-serif',h1:{fontSize:"3rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2.25rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.875rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.4},subtitle1:{fontSize:"1rem",fontWeight:500,lineHeight:1.5},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.5},body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.6},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.6},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.5},button:{fontSize:"0.875rem",fontWeight:600,textTransform:"none",letterSpacing:"0.02em"}},Lr={MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"10px 24px",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},contained:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8,transition:"all 0.2s ease-in-out","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:tt.secondary.main}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:tt.primary.main,borderWidth:2}}}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",backgroundColor:"rgba(46, 52, 64, 0.95)"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiPaper:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},elevation1:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},elevation2:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},elevation3:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},Br=ir({palette:tt,typography:Zr,components:Lr,spacing:8,shape:{borderRadius:8},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"}}}),Hr=()=>{const{pathname:n}=Ge();return x.useEffect(()=>{window.scrollTo(0,0)},[n]),null},Pr=()=>(x.useEffect(()=>{console.log("App running in production mode");try{Fr()}catch(n){console.warn("Failed to log database details:",n)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(Hr,{}),e.jsx(pr,{}),e.jsx("main",{className:"container",role:"main",children:e.jsx($t,{children:e.jsxs(xr,{children:[e.jsx(Ee,{path:"/",element:e.jsx(Cr,{})}),e.jsx(Ee,{path:"/architecture",element:e.jsx(vr,{})}),e.jsx(Ee,{path:"/architecture/:id",element:e.jsx(Rr,{})}),e.jsx(Ee,{path:"/architects",element:e.jsx(Wr,{})}),e.jsx(Ee,{path:"/architects/:id",element:e.jsx($r,{})}),e.jsx(Ee,{path:"/map",element:e.jsx(Yr,{})})]})})}),e.jsx(fr,{})]})),Mr=()=>e.jsx($t,{children:e.jsxs(lr,{theme:Br,children:[e.jsx(cr,{}),e.jsx(hr,{children:e.jsx(Or,{children:e.jsx(Pr,{})})})]})});console.log("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–ä¸­...","production");console.log("DOM root element:",document.getElementById("root"));const Yt=document.getElementById("root");if(!Yt)throw console.error('rootè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚HTMLã«<div id="root"></div>ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚'),new Error("Failed to find the root element");const zr=vt(Yt);console.log("Using HashRouter for GitHub Pages compatibility");try{zr.render(e.jsx(Et.StrictMode,{children:e.jsx(Mr,{})})),console.log("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒæˆåŠŸã—ã¾ã—ãŸ")}catch(n){console.error("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:",n)}
//# sourceMappingURL=index-CQOQf6w_.js.map
