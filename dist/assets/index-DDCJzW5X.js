import{u as Lt,a as Zt,j as e,A as Mt,T as Bt,b as l,I as Ve,M as Pt,D as mt,B as s,C as Ht,L as gt,c as pt,d as ft,e as F,H as zt,f as Ze,P as ke,g as ve,S as Ut,h as se,G as U,i as ie,k as pe,l as fe,F as be,m as Le,n as Z,o as Te,p as ze,q as ae,r as Ae,s as Gt,t as Kt,v as Ce,R as ot,w as st,x as Ue,y as Ge,z as Xe,E as jt,J as yt,K as bt,N as Ct,O as Tt,Q as re,U as qt,V as At,W as Be,X as Et,Y as Pe,Z as It,_ as _e,$ as et,a0 as vt,a1 as Qt,a2 as Jt,a3 as Vt,a4 as Xt,a5 as er,a6 as tr,a7 as rr,a8 as sr,a9 as nr,aa as or,ab as ar,ac as ge,ad as K,ae as ir,af as lr,ag as cr,ah as dr,ai as hr,aj as xr}from"./ui-BqN58jDe.js";import{a as ur,u as Ke,r as u,L as P,f as qe,h as Rt,R as St,H as mr,i as gr,j as Ie}from"./vendor-R9pUdGjU.js";import{i as pr}from"./database-8HIdH1aM.js";import{L as wt,M as fr,T as jr,a as at,P as it}from"./map-DfQbedqp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))f(i);new MutationObserver(i=>{for(const g of i)if(g.type==="childList")for(const d of g.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&f(d)}).observe(document,{childList:!0,subtree:!0});function a(i){const g={};return i.integrity&&(g.integrity=i.integrity),i.referrerPolicy&&(g.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?g.credentials="include":i.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function f(i){if(i.ep)return;i.ep=!0;const g=a(i);fetch(i.href,g)}})();var Dt,lt=ur;Dt=lt.createRoot,lt.hydrateRoot;const ct=[{title:"ãƒ›ãƒ¼ãƒ ",path:"/",icon:e.jsx(zt,{})},{title:"å»ºç¯‰ä½œå“",path:"/architecture",icon:e.jsx(Ze,{})},{title:"å»ºç¯‰å®¶",path:"/architects",icon:e.jsx(ke,{})},{title:"ãƒžãƒƒãƒ—",path:"/map",icon:e.jsx(ve,{})},{title:"DBã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼",path:"/db-explorer",icon:e.jsx(Ut,{})}],yr=()=>{const t=Ke().pathname,a=Lt(),f=Zt(a.breakpoints.down("sm")),[i,g]=u.useState(!1),d=c=>r=>{r.type==="keydown"&&(r.key==="Tab"||r.key==="Shift")||g(c)};return e.jsx(Mt,{position:"static",color:"primary",component:"nav",role:"navigation","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³",children:e.jsxs(Bt,{children:[e.jsx(l,{variant:"h6",component:P,to:"/","data-testid":"site-title",sx:{flexGrow:1,color:"white",textDecoration:"none",fontWeight:"bold"},children:"å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"}),f?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{edge:"end",color:"inherit","aria-label":"menu","data-testid":"mobile-menu-button",onClick:d(!0),children:e.jsx(Pt,{})}),e.jsx(mt,{anchor:"right",open:i,onClose:d(!1),children:e.jsxs(s,{sx:{width:250},role:"presentation",onClick:d(!1),onKeyDown:d(!1),children:[e.jsx(s,{sx:{display:"flex",justifyContent:"flex-end",p:1},children:e.jsx(Ve,{onClick:d(!1),children:e.jsx(Ht,{})})}),e.jsx(gt,{role:"menu","aria-label":"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼",children:ct.map(({title:c,path:r,icon:y})=>e.jsxs(pt,{component:P,to:r,role:"menuitem","data-testid":`nav-link-${c.toLowerCase()}`,sx:{color:t===r?"primary.main":"text.primary",backgroundColor:t===r?"rgba(0, 0, 0, 0.08)":"transparent",fontWeight:t===r?"bold":"normal","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[y,e.jsx(ft,{primary:c,sx:{ml:2}})]},c))})]})})]}):e.jsx(s,{sx:{display:"flex"},role:"menubar","aria-label":"ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³",children:ct.map(({title:c,path:r})=>e.jsx(F,{component:P,to:r,color:"inherit",role:"menuitem","data-testid":`nav-link-${c.toLowerCase()}`,sx:{mx:1,fontWeight:t===r?"bold":"normal",borderBottom:t===r?"2px solid white":"none"},children:c},c))})]})})},br=()=>e.jsx(s,{component:"footer",role:"contentinfo","data-testid":"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:"primary.main",color:"white"},children:e.jsx(se,{maxWidth:"sm",children:e.jsxs(l,{variant:"body1",align:"center",children:["å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ Â© ",new Date().getFullYear()]})})}),Cr="modulepreload",Tr=function(n){return"/archi-site/"+n},dt={},Ar=function(t,a,f){let i=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=d?.nonce||d?.getAttribute("nonce");i=Promise.allSettled(a.map(r=>{if(r=Tr(r),r in dt)return;dt[r]=!0;const y=r.endsWith(".css"),j=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${j}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":Cr,y||(w.as="script"),w.crossOrigin="",w.href=r,c&&w.setAttribute("nonce",c),document.head.appendChild(w),y)return new Promise((k,W)=>{w.addEventListener("load",k),w.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${r}`)))})}))}function g(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return i.then(d=>{for(const c of d||[])c.status==="rejected"&&g(c.reason);return t().catch(g)})},Er=({variant:n="card",count:t=6})=>{const a=()=>e.jsx(pe,{sx:{height:"100%"},children:e.jsxs(fe,{children:[e.jsx(ie,{variant:"text",height:40,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,width:"60%"})]})}),f=()=>e.jsxs(s,{sx:{p:2},children:[e.jsx(ie,{variant:"text",height:32,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:24,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,width:"40%"})]}),i=()=>e.jsx(se,{maxWidth:"lg",children:e.jsxs(s,{sx:{textAlign:"center",py:8},children:[e.jsx(ie,{variant:"text",height:60,sx:{mb:2}}),e.jsx(ie,{variant:"text",height:30,sx:{mb:4}}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx(ie,{variant:"rectangular",width:500,height:56,sx:{borderRadius:1}})})]})}),g=()=>e.jsx(ie,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2}});return n==="hero"?i():n==="map"?g():n==="list"?e.jsx(s,{children:Array.from({length:t}).map((d,c)=>e.jsx(s,{sx:{borderBottom:"1px solid #e0e0e0"},children:f()},c))}):e.jsx(U,{container:!0,spacing:4,children:Array.from({length:t}).map((d,c)=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:a()},c))})},Ir=()=>{const[n,t]=u.useState(""),[a,f]=u.useState([]),[i,g]=u.useState(!0),[d,c]=u.useState(null),[r,y]=u.useState(!1),[j,w]=u.useState(null);u.useEffect(()=>{const A=p=>{const{progress:m,speed:b,eta:I,receivedLength:H,totalLength:E}=p.detail;w({progress:m,speed:b,eta:I,receivedLength:H,totalLength:E})};window.addEventListener("database-download-progress",A);const $=setTimeout(()=>{console.warn("Emergency timeout: forcing app to render without database after 3 minutes"),g(!1),y(!1),c("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸï¼ˆå¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ï¼‰ã€‚æŽ¥ç¶šãŒé…ã„å ´åˆã¯ã€ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚")},18e4);return(async()=>{try{g(!0),c(null),console.log("æœ€è¿‘ã®å»ºç¯‰ä½œå“ã‚’å–å¾—ä¸­...");const{getAllArchitectures:p}=await Ar(async()=>{const{getAllArchitectures:H}=await Promise.resolve().then(()=>Rr);return{getAllArchitectures:H}},void 0),m=new Promise((H,E)=>{setTimeout(()=>E(new Error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸï¼ˆ90ç§’ï¼‰ã€‚å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚")),9e4)}),b=p(1,6),I=await Promise.race([b,m]);clearTimeout($),f(I.items),y(!0),console.log("å»ºç¯‰ä½œå“ã®å–å¾—ã«æˆåŠŸã—ã¾ã—ãŸ",I)}catch(p){console.error("å»ºç¯‰ä½œå“ã®å–å¾—ã«å¤±æ•—:",p),clearTimeout($);let m=p.message||"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ";p.message?.includes("timeout")?m+=" ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæŽ¥ç¶šãŒé…ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚":p.message?.includes("fetch")&&(m+=" ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æŽ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"),c(m),y(!1)}finally{g(!1)}})(),()=>{clearTimeout($),window.removeEventListener("database-download-progress",A)}},[]);const k=A=>{A.preventDefault(),n.trim()&&(window.location.href=`/architecture?search=${encodeURIComponent(n)}`)},W=()=>{c(null),g(!0),w(null),window.location.reload()},v=A=>A<1024?`${Math.round(A)} B/s`:A<1024*1024?`${Math.round(A/1024)} KB/s`:`${Math.round(A/1024/1024)} MB/s`,N=A=>A<60?`${Math.round(A)}s`:A<3600?`${Math.round(A/60)}m ${Math.round(A%60)}s`:`${Math.round(A/3600)}h ${Math.round(A%3600/60)}m`;return e.jsxs(se,{maxWidth:"lg","data-testid":"homepage-container",children:[e.jsx(be,{in:!0,timeout:1e3,children:e.jsxs(s,{component:"section",role:"banner","aria-labelledby":"main-heading",sx:{pt:8,pb:6,textAlign:"center",background:"linear-gradient(135deg, #ECEFF4 0%, #D8DEE9 100%)",borderRadius:3,mb:6,position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.1,background:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(46, 52, 64, 0.1) 10px, rgba(46, 52, 64, 0.1) 20px)"}}),e.jsxs(s,{sx:{position:"relative",zIndex:1},children:[e.jsx(l,{component:"h1",variant:"h1",align:"center",color:"text.primary",gutterBottom:!0,id:"main-heading",sx:{background:"linear-gradient(135deg, #2E3440 0%, #4C566A 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",mb:2},children:"å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"}),e.jsxs(l,{variant:"h5",align:"center",color:"text.secondary",paragraph:!0,sx:{mb:4,maxWidth:600,mx:"auto"},children:["æ—¥æœ¬ã®å»ºç¯‰ä½œå“ã¨å»ºç¯‰å®¶ã‚’æ¤œç´¢ãƒ»é–²è¦§ã§ãã‚‹",e.jsx("br",{}),"åŒ…æ‹¬çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"]}),e.jsxs(Le,{direction:"row",spacing:3,justifyContent:"center",sx:{mb:4},children:[e.jsx(Z,{icon:e.jsx(Ze,{}),label:"14,000+ å»ºç¯‰ä½œå“",color:"primary",variant:"outlined"}),e.jsx(Z,{icon:e.jsx(ke,{}),label:"2,900+ å»ºç¯‰å®¶",color:"secondary",variant:"outlined"}),e.jsx(Z,{icon:e.jsx(ve,{}),label:"å…¨å›½å¯¾å¿œ",color:"info",variant:"outlined"})]}),e.jsx(be,{in:!0,timeout:1500,children:e.jsxs(s,{component:"form",onSubmit:k,role:"search","aria-label":"å»ºç¯‰ä½œå“æ¤œç´¢",sx:{mt:4,display:"flex",justifyContent:"center",alignItems:"center",maxWidth:600,mx:"auto",gap:2},children:[e.jsx(Te,{fullWidth:!0,variant:"outlined",placeholder:"å»ºç¯‰ä½œå“ã€å»ºç¯‰å®¶ã€ä½æ‰€ãªã©ã§æ¤œç´¢",value:n,onChange:A=>t(A.target.value),inputProps:{"aria-label":"å»ºç¯‰ä½œå“æ¤œç´¢","data-testid":"search-input",role:"searchbox"},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}}),e.jsx(F,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(ze,{}),size:"large","data-testid":"search-button",sx:{px:3,py:1.5,minWidth:120},children:"æ¤œç´¢"})]})}),!r&&i&&e.jsx(s,{sx:{mt:4,maxWidth:600,mx:"auto"},children:j?e.jsxs(ae,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main"},children:"ðŸ“¦ å¤§ããªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã¿ä¸­..."}),e.jsxs(s,{sx:{mb:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Ae,{variant:"determinate",value:j.progress,size:24,sx:{mr:2}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[j.progress,"% â€¢ ",Math.round(j.receivedLength/1024/1024)," MB / ",Math.round(j.totalLength/1024/1024)," MB"]})]}),e.jsx(Gt,{variant:"determinate",value:j.progress,sx:{height:8,borderRadius:4}})]}),e.jsxs(Le,{direction:"row",spacing:2,sx:{fontSize:"0.875rem",color:"text.secondary"},children:[e.jsxs(s,{children:["ðŸ“Š ",v(j.speed)]}),e.jsxs(s,{children:["â±ï¸ ETA: ",N(j.eta)]})]}),e.jsx(l,{variant:"body2",sx:{mt:1,fontStyle:"italic",color:"text.secondary"},children:"åˆå›žã®ã‚¢ã‚¯ã‚»ã‚¹ã§ã¯ã€å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚"})]}):e.jsxs(ae,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(Ae,{size:24,sx:{mr:2}}),e.jsx(l,{variant:"h6",sx:{color:"primary.main"},children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ä¸­..."})]}),e.jsx(l,{variant:"body2",color:"text.secondary",align:"center",children:"14,000ä»¶ã®å»ºç¯‰ä½œå“ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™"})]})})]})]})}),e.jsxs(s,{component:"section","aria-labelledby":"recent-works-heading",sx:{py:4},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Kt,{color:"primary"}),e.jsx(l,{variant:"h4",fontWeight:"bold",id:"recent-works-heading",component:"h2",children:"æœ€è¿‘ã®å»ºç¯‰ä½œå“"})]}),r&&e.jsx(Ce,{title:"ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥",children:e.jsx(Ve,{onClick:()=>window.location.reload(),color:"primary",children:e.jsx(ot,{})})})]}),d&&e.jsx(be,{in:!0,children:e.jsx(st,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{display:"flex",alignItems:"center",gap:2}},children:e.jsxs(s,{children:[d,e.jsxs(Le,{direction:"row",spacing:2,sx:{mt:2},children:[e.jsx(F,{size:"small",variant:"contained",color:"primary",onClick:W,startIcon:e.jsx(ot,{}),children:"å†è©¦è¡Œ"}),e.jsx(F,{size:"small",variant:"outlined",component:P,to:"/db-explorer",children:"è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã"})]})]})})}),i?e.jsx(Er,{variant:"card",count:6}):a.length>0?e.jsx(be,{in:!0,timeout:800,children:e.jsx(U,{container:!0,spacing:4,children:a.map((A,$)=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsx(be,{in:!0,timeout:1e3+$*200,children:e.jsx(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%)",border:"1px solid #E5E9F0","&:hover":{"& .card-content":{transform:"translateY(-2px)"}}},children:e.jsx(Ue,{component:P,to:`/architecture/${A.ZAW_ID}`,sx:{height:"100%"},children:e.jsxs(fe,{className:"card-content",sx:{flexGrow:1,transition:"transform 0.3s ease-in-out",p:3},children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h3",sx:{fontWeight:600,color:"text.primary",mb:2,lineHeight:1.3},children:A.ZAW_NAME}),e.jsxs(Le,{spacing:1,children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ke,{fontSize:"small",color:"secondary"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:A.ZAW_ARCHITECT||"å»ºç¯‰å®¶ä¸æ˜Ž"})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(ve,{fontSize:"small",color:"secondary"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[A.ZAW_ADDRESS||"å ´æ‰€ä¸æ˜Ž"," â€¢ ",A.ZAW_YEAR&&A.ZAW_YEAR!==0?A.ZAW_YEAR+"å¹´":"å¹´ä»£ä¸æ˜Ž"]})]})]})]})})})})},A.ZAW_ID))})}):e.jsxs(ae,{sx:{p:6,textAlign:"center",background:"linear-gradient(135deg, #F8F9FA 0%, #ECEFF4 100%)"},children:[e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æŽ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„"})]}),r&&e.jsx(be,{in:!0,timeout:1200,children:e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(F,{variant:"outlined",color:"primary",component:P,to:"/architecture",size:"large",sx:{px:4,py:1.5,borderWidth:2,"&:hover":{borderWidth:2}},children:"ã™ã¹ã¦ã®ä½œå“ã‚’è¦‹ã‚‹"})})})]}),e.jsx(Ge,{sx:{my:6}}),e.jsx(be,{in:!0,timeout:1400,children:e.jsxs(s,{component:"section","aria-labelledby":"features-heading",sx:{mb:6},children:[e.jsx(l,{variant:"h4",align:"center",gutterBottom:!0,id:"features-heading",component:"h2",sx:{mb:4,fontWeight:"bold"},children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç‰¹å¾´"}),e.jsxs(U,{container:!0,spacing:4,children:[e.jsx(U,{item:!0,xs:12,md:4,children:e.jsxs(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #88C0D0 0%, #5E81AC 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Ze,{sx:{fontSize:100}})}),e.jsxs(fe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ze,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"å»ºç¯‰ä½œå“"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"æ—¥æœ¬å…¨å›½ã‹ã‚‰14,000ä»¶ä»¥ä¸Šã®å»ºç¯‰ä½œå“æƒ…å ±ã‚’é–²è¦§ã§ãã¾ã™ã€‚åœ°åŸŸã€å¹´ä»£ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ãªã©ã§è©³ç´°æ¤œç´¢ãŒå¯èƒ½ã§ã™ã€‚"}),e.jsx(F,{variant:"contained",component:P,to:"/architecture",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"ä½œå“ã‚’æŽ¢ã™"})]})]})}),e.jsx(U,{item:!0,xs:12,md:4,children:e.jsxs(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #D08770 0%, #BF616A 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(ke,{sx:{fontSize:100}})}),e.jsxs(fe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ke,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"å»ºç¯‰å®¶"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"2,900äººä»¥ä¸Šã®å»ºç¯‰å®¶æƒ…å ±ã‚’åŽéŒ²ã€‚çµŒæ­´ã€ä½œå“ãƒªã‚¹ãƒˆã€æ‰€å±žäº‹å‹™æ‰€ãªã©ã®è©³ç´°æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚"}),e.jsx(F,{variant:"contained",component:P,to:"/architects",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"å»ºç¯‰å®¶ã‚’æŽ¢ã™"})]})]})}),e.jsx(U,{item:!0,xs:12,md:4,children:e.jsxs(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #A3BE8C 0%, #8CAF69 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(ve,{sx:{fontSize:100}})}),e.jsxs(fe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ve,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"ãƒžãƒƒãƒ—è¡¨ç¤º"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"å»ºç¯‰ä½œå“ã‚’åœ°å›³ä¸Šã§è¦–è¦šçš„ã«æŽ¢ç´¢ã§ãã¾ã™ã€‚ä½ç½®æƒ…å ±ã‚’ã‚‚ã¨ã«å‘¨è¾ºã®å»ºç¯‰ä½œå“ã‚’ç™ºè¦‹ã§ãã¾ã™ã€‚"}),e.jsx(F,{variant:"contained",component:P,to:"/map",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"ãƒžãƒƒãƒ—ã‚’é–‹ã"})]})]})})]})]})})]})},nt="/archi-site",ht=`${nt}/sql-wasm.wasm`,xt=`${nt}/db/archimap.sqlite`;let te=null,Je=null,tt=!1,We=null;var Me=(n=>(n.NOT_INITIALIZED="not_initialized",n.INITIALIZING="initializing",n.READY="ready",n.ERROR="error",n))(Me||{});const vr=()=>te?"ready":tt?"initializing":"not_initialized",ut=async()=>{try{const n=Date.now(),t=await fetch(`${nt}/images/shinkenchiku-favicon.ico`,{method:"HEAD",cache:"no-cache"}),f=Date.now()-n;return f<100?"fast":f<500?"slow":"very-slow"}catch{return"very-slow"}},$t=async()=>te||We||(tt=!0,We=(async()=>{try{console.log("ðŸš€ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚’é–‹å§‹...");const n=await ut();if(console.log(`ðŸŒ Connection speed detected: ${n}`),!Je){console.log("ðŸ“¦ SQL.js WASM ã‚’èª­ã¿è¾¼ã¿ä¸­...");const $=new Promise((p,m)=>setTimeout(()=>m(new Error("WASM initialization timeout after 45 seconds")),45e3)),h=pr({locateFile:p=>(console.log(`ðŸ” ãƒ•ã‚¡ã‚¤ãƒ«è¦æ±‚: ${p}`),p.endsWith(".wasm")?(console.log(`ðŸ“ WASM URL: ${ht}`),ht):p)});Je=await Promise.race([h,$]),console.log("âœ… SQL.js WASM èª­ã¿è¾¼ã¿å®Œäº†")}console.log("ðŸ’¾ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­..."),console.log(`ðŸ“ Database URL: ${xt}`);const t=new Promise(($,h)=>setTimeout(()=>h(new Error("Database fetch timeout after 120 seconds - Large file download may take longer on slow connections")),12e4)),f=(async($,h,p=3)=>{let m=null;for(let b=1;b<=p;b++)try{console.log(`ðŸ”„ Database fetch attempt ${b}/${p}`);const I=await fetch($,h);if(I.ok)return I;throw new Error(`HTTP ${I.status}: ${I.statusText}`)}catch(I){if(m=I,console.warn(`âŒ Attempt ${b} failed:`,I),b<p){const H=Math.pow(2,b-1)*1e3;console.log(`â³ Retrying in ${H}ms...`),await new Promise(E=>setTimeout(E,H))}}throw m})(xt,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),i=await Promise.race([f,t]);if(!i.ok)throw new Error(`ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—: ${i.status} ${i.statusText}`);const g=i.headers.get("content-length");console.log(`ðŸ“ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚µã‚¤ã‚º: ${g?Math.round(parseInt(g)/1024/1024*100)/100:"unknown"} MB`);const d=i.body?.getReader();if(!d)throw new Error("Response body reader not available");const c=[];let r=0;const y=g?parseInt(g):0,j=Date.now();let w=j;const k=($,h,p)=>{window.dispatchEvent(new CustomEvent("database-download-progress",{detail:{progress:$,speed:h,eta:p,receivedLength:r,totalLength:y}}))};for(console.log(`ðŸ“¦ Starting database download: ${Math.round(y/1024/1024)} MB`);;){const{done:$,value:h}=await d.read();if($)break;if(c.push(h),r+=h.length,y>0){const p=Math.round(r/y*100),m=Date.now(),b=(m-j)/1e3,I=r/b,E=(y-r)/I;(m-w>500||r%(1024*1024)<h.length)&&(console.log(`ðŸ“¥ Download progress: ${p}% (${Math.round(r/1024/1024)} MB) - ${Math.round(I/1024)} KB/s - ETA: ${Math.round(E)}s`),k(p,I,E),w=m)}}y>0&&k(100,0,0);const W=new Uint8Array(r);let v=0;for(const $ of c)W.set($,v),v+=$.length;console.log(`ðŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å®Œäº†: ${Math.round(r/1024/1024*100)/100} MB`),console.log("ðŸ”§ SQLite ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ä¸­..."),te=new Je.Database(W),console.log("âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šã‚’ç¢ºç«‹ã—ã¾ã—ãŸ");const N=te.exec("SELECT sqlite_version()");console.log(`ðŸ” SQLite ãƒãƒ¼ã‚¸ãƒ§ãƒ³: ${N[0]?.values[0][0]}`);const A=te.exec("SELECT name FROM sqlite_master WHERE type='table'");if(A.length>0){console.log(`ðŸ“‹ åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ¼ãƒ–ãƒ«æ•°: ${A[0].values.length}`);try{const $=te.exec("SELECT COUNT(*) FROM ZCDARCHITECTURE");$.length>0&&console.log(`ðŸ¢ å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: ${$[0].values[0][0]} ä»¶`)}catch{console.log("ðŸ“‹ ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ç¢ºèªä¸­...")}}return te}catch(n){if(console.error("âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n),te=null,n instanceof Error){const t=await ut().catch(()=>"unknown");let a=n.message;n.message.includes("timeout")?t==="very-slow"?a+=`

ðŸ“¡ æŽ¥ç¶šé€Ÿåº¦ãŒéžå¸¸ã«é…ã„ãŸã‚ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚WiFiã‚„ã‚ˆã‚Šé«˜é€ŸãªæŽ¥ç¶šã‚’ãŠè©¦ã—ãã ã•ã„ã€‚`:t==="slow"&&(a+=`

ðŸ“¡ æŽ¥ç¶šé€Ÿåº¦ãŒé…ã„ãŸã‚ã€å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚`):(n.message.includes("fetch")||n.message.includes("network"))&&(a+=`

ðŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æŽ¥ç¶šã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚æŽ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`);const f=new Error(a);throw f.name=n.name,f}throw n}finally{tt=!1,We=null}})(),We),Wt=async(n,t=[])=>{try{if(te||await $t(),!te)throw new Error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“");return te.exec(n,t)}catch(a){throw console.error("ã‚¯ã‚¨ãƒªå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:",a),a}},kt=n=>{if(!n||n.length===0)return[];const{columns:t,values:a}=n[0];return a.map(f=>{const i={};return t.forEach((g,d)=>{i[g]=f[d]}),i})},Qe=async(n,t=[])=>{const a=await Wt(n,t);return kt(a)[0]},Fe=async(n,t=[])=>{const a=await Wt(n,t);return kt(a)},_t=async n=>Qe("SELECT * FROM ZCDARCHITECTURE WHERE ZAW_ID = ?",[n]),Ft=async(n=1,t=12,a="",f="ZAW_NAME",i="asc",g={})=>{const d=(n-1)*t;let c="1=1";const r=[];a&&(c+=" AND (ZAW_NAME LIKE ? OR ZAW_ADDRESS LIKE ? OR ZAW_DETAIL LIKE ?)",r.push(`%${a}%`,`%${a}%`,`%${a}%`)),g.architect&&(c+=" AND (ZAW_ARCHITECT LIKE ? OR a.ZAR_NAME LIKE ? OR a.ZAR_NAMEENG LIKE ?)",r.push(`%${g.architect}%`,`%${g.architect}%`,`%${g.architect}%`)),g.location&&(c+=" AND ZAW_ADDRESS LIKE ?",r.push(`%${g.location}%`)),g.prefecture&&(c+=" AND ZAW_PREFECTURE = ?",r.push(g.prefecture)),g.yearFrom&&(c+=" AND ZAW_YEAR >= ?",r.push(g.yearFrom)),g.yearTo&&(c+=" AND ZAW_YEAR <= ?",r.push(g.yearTo));let y="LEFT JOIN ZCDARCHITECT a ON ZCDARCHITECTURE.ZAW_ARCHITECT_ID = a.ZAR_ID";g.tags&&g.tags.length>0&&(y+=`
      INNER JOIN ZCDARCHITECTURE_TAG ON ZCDARCHITECTURE.ZAW_ID = ZCDARCHITECTURE_TAG.ARCHITECTURE_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECTURE_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,c+=" AND ZCDTAG.TAG_NAME IN (",c+=g.tags.map(()=>"?").join(","),c+=")",r.push(...g.tags));const j=`
    SELECT COUNT(DISTINCT ZCDARCHITECTURE.ZAW_ID) as total
    FROM ZCDARCHITECTURE
    ${y}
    WHERE ${c}
  `,w=`
    SELECT DISTINCT ZCDARCHITECTURE.*
    FROM ZCDARCHITECTURE
    ${y}
    WHERE ${c}
    ORDER BY ${f} ${i==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,k=[...r,t,d];try{const v=(await Qe(j,r))?.total||0;return{results:await Fe(w,k),total:v,page:n,limit:t,totalPages:Math.ceil(v/t)}}catch(W){throw console.error("å»ºç¯‰ä½œå“ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",W),W}},Nt=async(n,t={})=>{let a=`
    ZAW_LAT BETWEEN ? AND ?
    AND ZAW_LNG BETWEEN ? AND ?
    AND ZAW_LAT IS NOT NULL
    AND ZAW_LNG IS NOT NULL
  `;const f=[n.south,n.north,n.west,n.east];t.searchTerm&&(a+=" AND (ZAW_NAME LIKE ? OR ZAW_ADDRESS LIKE ? OR ZAW_ARCHITECT LIKE ?)",f.push(`%${t.searchTerm}%`,`%${t.searchTerm}%`,`%${t.searchTerm}%`)),t.architect&&(a+=" AND (ZAW_ARCHITECT LIKE ? OR a.ZAR_NAME LIKE ? OR a.ZAR_NAMEENG LIKE ?)",f.push(`%${t.architect}%`,`%${t.architect}%`,`%${t.architect}%`)),t.yearFrom&&(a+=" AND ZAW_YEAR >= ?",f.push(t.yearFrom)),t.yearTo&&(a+=" AND ZAW_YEAR <= ?",f.push(t.yearTo));let i="LEFT JOIN ZCDARCHITECT a ON ZCDARCHITECTURE.ZAW_ARCHITECT_ID = a.ZAR_ID";t.tags&&t.tags.length>0&&(i+=`
      INNER JOIN ZCDARCHITECTURE_TAG ON ZCDARCHITECTURE.ZAW_ID = ZCDARCHITECTURE_TAG.ARCHITECTURE_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECTURE_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,a+=" AND ZCDTAG.TAG_NAME IN (",a+=t.tags.map(()=>"?").join(","),a+=")",f.push(...t.tags));const g=`
    SELECT DISTINCT ZCDARCHITECTURE.*
    FROM ZCDARCHITECTURE
    ${i}
    WHERE ${a}
    LIMIT 500
  `;return Fe(g,f)},Rr=Object.freeze(Object.defineProperty({__proto__:null,getAllArchitectures:Ft,getArchitectureById:_t,getArchitectureForMap:Nt},Symbol.toStringTag,{value:"Module"})),Sr=()=>{const[n,t]=u.useState([]),[a,f]=u.useState(!0),[i,g]=u.useState(0),[d,c]=u.useState(1),[r,y]=u.useState(""),[j,w]=u.useState(""),[k,W]=u.useState([]),[v,N]=u.useState([]),[A,$]=u.useState([]),[h,p]=u.useState("year_desc"),[m,b]=u.useState({}),[I,H]=u.useState(null),[E,je]=u.useState(""),[ee,de]=u.useState({}),ne=12,q=Ke(),J=qe();u.useEffect(()=>{(async()=>{try{$([])}catch(C){console.error("ã‚¿ã‚°å–å¾—ã‚¨ãƒ©ãƒ¼:",C)}})()},[]),u.useEffect(()=>{const x=new URLSearchParams(q.search),C=x.get("tag"),S=x.get("search"),Y=x.get("year"),Q=x.get("prefecture"),O=x.get("category"),L=x.get("architect"),_=x.get("sort");if(_&&p(_),C){const R=C.split(",").map(o=>o.trim()).filter(o=>o),B=new Set,V=[];R.forEach(o=>{const T=o.match(/\d{4}å¹´\d{1,2}æœˆå·?/);if(T){const D=o.replace(T[0],"").trim();D&&(B.add(D),V.push(o))}else B.add(o)}),W(Array.from(B)),N(V),w(C),y(`tag:${C}`),z(1,`tag:${C}`,_||h)}else Y?(y(`year:${Y}`),z(1,`year:${Y}`,_||h)):Q?(y(`prefecture:${Q}`),z(1,`prefecture:${Q}`,_||h)):O?(y(`category:${O}`),z(1,`category:${O}`,_||h)):L?(y(`architect:${L}`),z(1,`architect:${L}`,_||h)):S?(y(S),z(1,S,_||h)):z(1,r,_||h)},[q.search]);const z=async(x,C=r,S=h)=>{f(!0);try{const Y=await Ft(x,ne,C,S);t(Y.items),g(Y.total),c(x)}catch(Y){console.error("Error fetching architectures:",Y)}finally{f(!1)}},le=(x,C)=>{c(C),z(C,r,h),window.scrollTo(0,0)},ye=x=>{y(x.target.value)},he=async(x,C)=>{H(x.currentTarget),je(C);try{const S=[];de(Y=>({...Y,[C]:S}))}catch(S){console.error(`Failed to get years for tag ${C}:`,S)}},xe=()=>{H(null),je("")},Re=x=>{const C=x?`${E}${x}`:E;let S=[...v];const Y=S.findIndex(R=>R.startsWith(E)&&(R===E||R.match(new RegExp(`^${E}\\d{4}å¹´\\d{1,2}æœˆå·?`))||R.match(new RegExp(`^${E}\\d{4}å¹´åº¦?`))||R.match(new RegExp(`^${E}ç¬¬\\d+å›ž`))||R.match(new RegExp(`^${E}\\(\\d{4}\\)`))));Y>=0?x?S[Y]=C:S.splice(Y,1):x&&S.push(C),N(S),xe();const Q=[...k];Q.includes(E)||Q.push(E);const O=[...Q,...S].filter((R,B,V)=>V.indexOf(R)===B&&!S.some(o=>o!==R&&o.startsWith(R))).join(",");w(O);const L=`tag:${O}`;y(L),z(1,L,h);const _=new URLSearchParams;_.set("tag",O),h!=="year_desc"&&_.set("sort",h),J({search:_.toString()})},Se=(x,C)=>{const S=k.filter(O=>!C.includes(O));let Y=[...v].filter(O=>!S.some(L=>O.startsWith(L)));const Q=C.filter(O=>!k.includes(O));if(Q.length>0&&Q.forEach(async O=>{if(!ee[O])try{const L=[];if(de(_=>({..._,[O]:L})),L&&L.length===1){const _=`${O}${L[0]}`;Y.push(_)}}catch(L){console.error(`Failed to get years for tag ${O}:`,L)}}),W(C),N(Y),C.length>0||Y.length>0){const O=[...C,...Y].filter((R,B,V)=>V.indexOf(R)===B&&!Y.some(o=>o!==R&&o.startsWith(R))).join(",");w(O);const L=`tag:${O}`;y(L),z(1,L,h);const _=new URLSearchParams;_.set("tag",O),h!=="year_desc"&&_.set("sort",h),J({search:_.toString()})}else Ee()},ue=x=>{const C=x.target.value;p(C),z(d,r,C);const S=new URLSearchParams(q.search);S.set("sort",C),J({search:S.toString()})},me=()=>{c(1),z(1,r,h);const x=new URLSearchParams;if(h!=="year_desc"&&x.set("sort",h),r.startsWith("tag:")){const C=r.substring(4).trim();x.set("tag",C)}else if(r.startsWith("year:")){const C=r.substring(5).trim();x.set("year",C)}else if(r.startsWith("prefecture:")){const C=r.substring(11).trim();x.set("prefecture",C)}else if(r.startsWith("category:")){const C=r.substring(9).trim();x.set("category",C)}else if(r.startsWith("architect:")){const C=r.substring(10).trim();x.set("architect",C)}else r&&x.set("search",r);J({search:x.toString()})},Ee=()=>{w(""),y(""),W([]),N([]),c(1),z(1,"",h);const x=new URLSearchParams;h!=="year_desc"&&x.set("sort",h),J({search:x.toString()})},ce=Math.ceil(i/ne);return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰ä½œå“ä¸€è¦§"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Te,{fullWidth:!0,label:"å»ºç¯‰ä½œå“åã€ä½æ‰€ã€å»ºç¯‰å®¶ã§æ¤œç´¢",value:r,onChange:ye,onKeyPress:x=>x.key==="Enter"&&me(),InputProps:{startAdornment:e.jsx(Xe,{position:"start",children:e.jsx(ze,{})})}}),e.jsx(F,{variant:"contained",onClick:me,sx:{minWidth:"120px"},children:"æ¤œç´¢"})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(jt,{multiple:!0,id:"tags-selector",options:A,value:k,onChange:Se,renderInput:x=>e.jsx(Te,{...x,variant:"outlined",label:"ã‚¿ã‚°ã§çµžã‚Šè¾¼ã¿",placeholder:"ã‚¿ã‚°ã‚’é¸æŠž"}),renderTags:(x,C)=>x.map((S,Y)=>{const Q=v.some(R=>R.startsWith(S)&&R!==S),O=!!(ee[S]&&ee[S].length>0),L=v.find(R=>R.startsWith(S)&&R!==S);let _="";if(L){const R=L.substring(S.length);R.match(/\d{4}å¹´\d{1,2}æœˆå·?/)?_=R.replace(/^(\d{4})/,(B,V)=>`'${V.substring(2)}`):R.match(/\d{4}å¹´åº¦?/)?_=R.replace(/^(\d{4})/,(B,V)=>`'${V.substring(2)}`):R.match(/ç¬¬\d+å›ž/)?_=R:R.match(/\(\d{4}\)/)?_=R.replace(/\((\d{4})\)/,(B,V)=>`'${V.substring(2)}`):_=R}return e.jsx(Z,{label:e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[S,L&&e.jsx(l,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:_}),O&&e.jsx(yt,{fontSize:"small"})]}),...C({index:Y}),color:Q?"primary":"default",variant:"outlined",onClick:R=>{R.stopPropagation(),he(R,S)},onDelete:R=>{C({index:Y}).onDelete(R)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}},S)}),sx:{flex:2}}),e.jsxs(bt,{sx:{minWidth:200,flex:1},children:[e.jsx(Ct,{id:"sort-select-label",children:"ä¸¦ã³æ›¿ãˆ"}),e.jsxs(Tt,{labelId:"sort-select-label",id:"sort-select",value:h,label:"ä¸¦ã³æ›¿ãˆ",onChange:ue,startAdornment:e.jsx(Xe,{position:"start",children:e.jsx(qt,{})}),children:[e.jsx(re,{value:"year_desc",children:"å¹´ä»£ï¼ˆæ–°ã—ã„é †ï¼‰"}),e.jsx(re,{value:"year_asc",children:"å¹´ä»£ï¼ˆå¤ã„é †ï¼‰"}),e.jsx(re,{value:"name_asc",children:"åå‰ï¼ˆæ˜‡é †ï¼‰"}),e.jsx(re,{value:"name_desc",children:"åå‰ï¼ˆé™é †ï¼‰"}),e.jsx(re,{value:"architect_asc",children:"å»ºç¯‰å®¶ï¼ˆæ˜‡é †ï¼‰"}),e.jsx(re,{value:"architect_desc",children:"å»ºç¯‰å®¶ï¼ˆé™é †ï¼‰"})]})]})]}),e.jsx(At,{open:!!I,anchorEl:I,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(s,{sx:{p:2,maxHeight:300,width:"250px",overflowY:"auto"},children:[e.jsxs(l,{variant:"subtitle2",sx:{mb:1},children:[E," ã®é¸æŠž:"]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(Z,{label:"æŒ‡å®šãªã—",onClick:()=>Re(""),variant:"outlined",size:"small",color:k.includes(E)&&!v.some(x=>x.startsWith(E)&&x!==E)?"primary":"default"}),ee[E]?.map(x=>{let C=x,S="default";return v.some(Y=>Y===`${E}${x}`)&&(S="primary"),e.jsx(Z,{label:C,onClick:()=>Re(x),variant:"outlined",size:"small",color:S,sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},x)})]})]})}),(j||r)&&e.jsx(s,{sx:{mb:3},children:e.jsx(st,{severity:"info",action:e.jsx(F,{color:"inherit",size:"small",onClick:Ee,children:"ã‚¯ãƒªã‚¢"}),children:j?`ã‚¿ã‚°ã€Œ${j}ã€ã§çµžã‚Šè¾¼ã¿ä¸­`:`ã€Œ${r}ã€ã§æ¤œç´¢ä¸­`})}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[i," ä»¶ã®å»ºç¯‰ä½œå“"]}),ce>1&&e.jsx(Be,{count:ce,page:d,onChange:le,color:"primary",size:"small"})]})]}),a?e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Ae,{})}):e.jsxs(e.Fragment,{children:[n.length===0?e.jsxs(s,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{variant:"h6",children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„"})]}):e.jsx(U,{container:!0,spacing:3,children:n.map(x=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ue,{component:P,to:`/architecture/${x.id}`,sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%"},children:e.jsxs(fe,{sx:{width:"100%",flexGrow:1},children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h2",children:x.name}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1,mt:2},children:[x.architectName&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Et,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:x.architectName})]}),x.city&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Pe,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:x.city})]}),x.completedYear>0&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(It,{fontSize:"small",color:"action"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[x.completedYear,"å¹´"]})]})]})]})})})},x.id))}),ce>1&&e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Be,{count:ce,page:d,onChange:le,color:"primary"})})]})]})};delete wt.Icon.Default.prototype._getIconUrl;wt.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const He=({markers:n=[],center:t,zoom:a=13,height:f="500px",singleMarker:i})=>{const[g,d]=u.useState(t);return u.useEffect(()=>{i&&i.latitude&&i.longitude?d([i.latitude,i.longitude]):t&&d(t)},[i,t]),e.jsx("div",{style:{height:f,width:"100%",marginBottom:"20px"},children:e.jsxs(fr,{center:g,zoom:a,style:{height:"100%",width:"100%"},children:[e.jsx(jr,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((c,r)=>c.latitude&&c.longitude?e.jsx(at,{position:[c.latitude,c.longitude],children:e.jsxs(it,{children:[e.jsx(l,{variant:"h6",children:c.name}),e.jsx(l,{variant:"body2",children:c.location}),e.jsx(F,{component:P,to:`/architecture/${c.id}`,size:"small",variant:"outlined",sx:{mt:1},children:"è©³ç´°ã‚’è¦‹ã‚‹"})]})},`marker-${c.id||r}`):null),i&&i.latitude&&i.longitude&&e.jsx(at,{position:[i.latitude,i.longitude],children:e.jsxs(it,{children:[e.jsx(l,{variant:"h6",children:i.name}),e.jsx(l,{variant:"body2",children:i.location})]})})]})})},wr=()=>{const{id:n}=Rt(),[t,a]=u.useState(null),[f,i]=u.useState(!0),[g,d]=u.useState(null),c=qe();if(u.useEffect(()=>{(async()=>{i(!0);try{const N=await _t(n);if(!N)throw new Error("å»ºç¯‰ä½œå“ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");a(N)}catch(N){console.error("Error fetching work:",N),d(N.message)}finally{i(!1)}})()},[n]),f)return e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(Ae,{})});if(g)return e.jsxs(se,{children:[e.jsxs(l,{variant:"h5",color:"error",sx:{textAlign:"center",my:4},children:["ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ",g]}),e.jsx(F,{variant:"contained",component:P,to:"/architecture",startIcon:e.jsx(_e,{}),children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"})]});if(!t)return e.jsxs(se,{children:[e.jsx(l,{variant:"h5",sx:{textAlign:"center",my:4},children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(F,{variant:"contained",component:P,to:"/architecture",startIcon:e.jsx(_e,{}),children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"})]});const r=t.tag?t.tag.split(",").filter(v=>v.trim()!==""&&!v.includes("ã®è¿½åŠ å»ºç¯‰")):[],y=r.find(v=>v.includes("æ–°å»ºç¯‰")),j=y?y.replace("æ–°å»ºç¯‰",""):"",w=v=>{console.log(`ã‚¿ã‚°ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ: ${v}`),c(`/architecture?tag=${encodeURIComponent(v)}`)},k=(v,N)=>{const A=`${v} ${N?.name||""} å»ºç¯‰`;return`https://www.google.com/search?q=${encodeURIComponent(A)}&tbm=isch`},W=v=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(v)}`;return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(F,{variant:"outlined",component:P,to:"/architecture",startIcon:e.jsx(_e,{}),sx:{mb:3},children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsxs(s,{sx:{mb:2},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"ç„¡é¡Œ"}),t.location&&e.jsxs(l,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:[e.jsx(Pe,{fontSize:"small",sx:{verticalAlign:"middle",mr:.5}}),t.location]}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[t.completedYear!==0&&e.jsx(Z,{icon:e.jsx(It,{}),label:`${t.completedYear}å¹´`,variant:"outlined",size:"small",onClick:()=>c(`/architecture?year=${t.completedYear}`),clickable:!0}),t.city&&e.jsx(Z,{icon:e.jsx(Pe,{}),label:t.city,variant:"outlined",size:"small",onClick:()=>c(`/architecture?prefecture=${encodeURIComponent(t.city)}`),clickable:!0}),t.architect&&t.architect.name&&e.jsx(Z,{icon:e.jsx(Et,{}),label:t.architect.name,component:P,to:`/architects/${t.architect.id}`,clickable:!0,color:"primary",size:"small"}),t.bigCategory&&e.jsx(Z,{icon:e.jsx(et,{}),label:t.bigCategory,variant:"outlined",size:"small",onClick:()=>c(`/architecture?category=${encodeURIComponent(t.bigCategory)}`),clickable:!0}),t.category&&t.category!==t.bigCategory&&e.jsx(Z,{icon:e.jsx(et,{}),label:t.category,variant:"outlined",size:"small",onClick:()=>c(`/architecture?category=${encodeURIComponent(t.category)}`),clickable:!0})]}),r.length>0&&e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:r.map((v,N)=>e.jsx(Z,{icon:e.jsx(vt,{}),label:v,onClick:()=>w(v),clickable:!0,color:"secondary",variant:"outlined",size:"small"},N))})]}),e.jsx(Ge,{sx:{my:3}}),e.jsxs(s,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.shinkenchikuUrl&&e.jsx(Ce,{title:"æ–°å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ã§è¦‹ã‚‹",children:e.jsxs(F,{variant:"contained",href:t.shinkenchikuUrl,target:"_blank",rel:"noopener noreferrer",size:"small",sx:{backgroundColor:"#003366",color:"#ffffff","&:hover":{backgroundColor:"#002244"}},children:[e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mr:.5},children:e.jsx("img",{src:"https://data.shinkenchiku.online/favicon.ico",alt:"æ–°å»ºç¯‰ãƒ‡ãƒ¼ã‚¿",style:{height:"16px",width:"auto",marginRight:"4px"}})}),j&&e.jsx(l,{variant:"caption",children:j})]})}),e.jsx(Ce,{title:"Googleç”»åƒæ¤œç´¢",children:e.jsx(F,{href:k(t.name,t.architect),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Qt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"ç”»åƒ"})}),e.jsx(Ce,{title:"Wikipediaã§æ¤œç´¢",children:e.jsx(F,{href:W(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Jt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),t.description&&e.jsxs(s,{sx:{mt:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"æ¦‚è¦"}),e.jsx(l,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-line"},children:t.description})]}),t.latitude&&t.longitude&&e.jsxs(s,{sx:{mt:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½ç½®æƒ…å ±"}),e.jsx(s,{sx:{height:"400px",width:"100%",mt:2,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(He,{singleMarker:{id:t.id||0,latitude:t.latitude,longitude:t.longitude,name:t.name,location:t.location},center:[t.latitude,t.longitude],zoom:15})})]})]})]})},Dr=async n=>Qe("SELECT * FROM ZCDARCHITECT WHERE ZAR_ID = ?",[n]),$r=async(n=1,t=12,a="",f=[],i="ZAR_NAME",g="asc",d={})=>{const c=(n-1)*t;let r="1=1";const y=[];a&&(r+=" AND (ZAR_NAME LIKE ? OR ZAR_KANA LIKE ? OR ZAR_NAMEENG LIKE ?)",y.push(`%${a}%`,`%${a}%`,`%${a}%`)),d.nationality&&(r+=" AND ZAR_NATIONALITY = ?",y.push(d.nationality)),d.category&&(r+=" AND ZAR_CATEGORY = ?",y.push(d.category)),d.school&&(r+=" AND ZAR_SCHOOL = ?",y.push(d.school)),d.birthYearFrom&&(r+=" AND ZAR_BIRTHYEAR >= ?",y.push(d.birthYearFrom)),d.birthYearTo&&(r+=" AND ZAR_BIRTHYEAR <= ?",y.push(d.birthYearTo)),d.deathYear&&(r+=" AND ZAR_DEATHYEAR = ?",y.push(d.deathYear));let j="";f&&f.length>0&&(j=`
      INNER JOIN ZCDARCHITECT_TAG ON ZCDARCHITECT.ZAR_ID = ZCDARCHITECT_TAG.ARCHITECT_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECT_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,r+=" AND ZCDTAG.TAG_NAME IN (",r+=f.map(()=>"?").join(","),r+=")",y.push(...f));const w=`
    SELECT COUNT(DISTINCT ZCDARCHITECT.ZAR_ID) as total
    FROM ZCDARCHITECT
    ${j}
    WHERE ${r}
  `,k=`
    SELECT DISTINCT ZCDARCHITECT.*
    FROM ZCDARCHITECT
    ${j}
    WHERE ${r}
    ORDER BY ${i} ${g==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,W=[...y,t,c];try{const N=(await Qe(w,y))?.total||0;return{results:await Fe(k,W),total:N,page:n,limit:t,totalPages:Math.ceil(N/t)}}catch(v){throw console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",v),v}},Wr=async()=>Fe(`
    SELECT TAG_ID, TAG_NAME, COUNT(ARCHITECT_ID) as TAG_COUNT
    FROM ZCDTAG
    LEFT JOIN ZCDARCHITECT_TAG ON ZCDTAG.TAG_ID = ZCDARCHITECT_TAG.TAG_ID
    GROUP BY ZCDTAG.TAG_ID, ZCDTAG.TAG_NAME
    ORDER BY TAG_COUNT DESC, TAG_NAME
  `),kr=()=>{console.log("ArchitectsPage ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã—ãŸ");const[n,t]=u.useState([]),[a,f]=u.useState(!0),[i,g]=u.useState(0),[d,c]=u.useState(0),[r,y]=u.useState(1),[j,w]=u.useState(""),[k,W]=u.useState([]),[v,N]=u.useState([]),[A,$]=u.useState([]),[h,p]=u.useState("name"),[m,b]=u.useState("asc"),[I,H]=u.useState(null),[E,je]=u.useState(""),[ee,de]=u.useState({}),[ne,q]=u.useState(""),[J,z]=u.useState(""),[le,ye]=u.useState(""),[he,xe]=u.useState(""),[Re,Se]=u.useState(""),[ue,me]=u.useState(""),Ee=qe(),ce=Ke(),x=new URLSearchParams(ce.search);u.useEffect(()=>{console.log("tagMenuAnchorEl çŠ¶æ…‹å¤‰æ›´:",!!I)},[I]),u.useEffect(()=>{console.log("ã‚¿ã‚°èª­ã¿è¾¼ã¿ã®useEffectãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ"),(async()=>{try{console.log("å»ºç¯‰å®¶ã‚¿ã‚°å–å¾—é–‹å§‹");const T=await Wr();console.log("å–å¾—ã—ãŸå»ºç¯‰å®¶ã‚¿ã‚°:",T),$(["å›½ç±","ã‚«ãƒ†ã‚´ãƒªãƒ¼","å­¦æ ¡","ç”Ÿå¹´","æ²¡å¹´"])}catch(T){console.error("ã‚¿ã‚°å–å¾—ã‚¨ãƒ©ãƒ¼:",T)}})()},[]),u.useEffect(()=>{console.log("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã®useEffectãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ",ce.search),(async()=>{f(!0);try{const T=parseInt(x.get("page")||"1"),D=x.get("search")||"",X=x.get("tags")?x.get("tags").split(","):[],M=x.get("sortBy")||"name",G=x.get("sortOrder")||"asc",oe=x.get("nationality")||"",Ne=x.get("category")||"",Ye=x.get("school")||"",we=x.get("birthYearFrom")||"",De=x.get("birthYearTo")||"",$e=x.get("deathYear")||"";console.log("URLã‹ã‚‰èª­ã¿å–ã£ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:",{page:T,search:D,tags:X,sort:M,order:G,nat:oe,cat:Ne,sch:Ye,birthFrom:we,birthTo:De,death:$e}),y(T),w(D),W(X),p(M),b(G),q(oe),z(Ne),ye(Ye),xe(we),Se(De),me($e),console.log("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—é–‹å§‹:",{page:T,search:D,tags:X,sort:M,order:G,nat:oe,cat:Ne,sch:Ye,birthFrom:we,birthTo:De,death:$e});const Oe=await $r(T,10,D,X,M,G,oe,Ne,Ye,we?parseInt(we):0,De?parseInt(De):0,$e?parseInt($e):0);console.log("å–å¾—ã—ãŸå»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿:",Oe),t(Oe.items),g(Oe.totalPages),c(Oe.total)}catch(T){console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",T)}finally{f(!1)}})()},[ce.search]);const C=async o=>{console.log(`${o}ã®å¹´åº¦å–å¾—é–‹å§‹`);let T="";if(o==="å›½ç±"?T="SELECT DISTINCT ZAT_NATIONALITY as value FROM ZCDARCHITECT WHERE ZAT_NATIONALITY != '' ORDER BY ZAT_NATIONALITY":o==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?T="SELECT DISTINCT ZAT_CATEGORY as value FROM ZCDARCHITECT WHERE ZAT_CATEGORY != '' ORDER BY ZAT_CATEGORY":o==="å­¦æ ¡"?T="SELECT DISTINCT ZAT_SCHOOL as value FROM ZCDARCHITECT WHERE ZAT_SCHOOL != '' ORDER BY ZAT_SCHOOL":o==="ç”Ÿå¹´"?T="SELECT DISTINCT ZAT_BIRTHYEAR as value FROM ZCDARCHITECT WHERE ZAT_BIRTHYEAR > 0 ORDER BY ZAT_BIRTHYEAR DESC":o==="æ²¡å¹´"&&(T="SELECT DISTINCT ZAT_DEATHYEAR as value FROM ZCDARCHITECT WHERE ZAT_DEATHYEAR > 0 ORDER BY ZAT_DEATHYEAR DESC"),!T)return[];try{return(await Fe(T)).map(X=>String(X.value)).filter(Boolean)}catch(D){return console.error(`${o}ã®å€¤å–å¾—ã‚¨ãƒ©ãƒ¼:`,D),[]}},S=async(o,T)=>{if(console.log(`${T}ã®å¹´åº¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã`,o.currentTarget),H(o.currentTarget),je(T),!ee[T])try{const D=await C(T);console.log(`å–å¾—ã—ãŸ${T}ã®å¹´åº¦:`,D),de(X=>({...X,[T]:D}))}catch(D){console.error(`${T}ã®å¹´åº¦å–å¾—ã‚¨ãƒ©ãƒ¼:`,D)}},Y=()=>{console.log("å¹´åº¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"),H(null),je("")},Q=o=>{console.log(`å¹´åº¦é¸æŠž: ${o} (ã‚¿ã‚°: ${E})`),E==="å›½ç±"?q(o):E==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?z(o):E==="å­¦æ ¡"?ye(o):E==="ç”Ÿå¹´"?xe(o):E==="æ²¡å¹´"&&me(o),Y(),B()},O=(o,T)=>{console.log("ã‚¿ã‚°é¸æŠžå¤‰æ›´:",T),W(T);const D=k.filter(M=>!T.includes(M));for(const M of D)M==="å›½ç±"?q(""):M==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?z(""):M==="å­¦æ ¡"?ye(""):M==="ç”Ÿå¹´"?(xe(""),Se("")):M==="æ²¡å¹´"&&me("");const X=T.filter(M=>!k.includes(M));X.length>0&&X.forEach(async M=>{if(!ee[M])try{const G=await C(M);de(oe=>({...oe,[M]:G}))}catch(G){console.error(`${M}ã®å¹´åº¦å–å¾—ã‚¨ãƒ©ãƒ¼:`,G)}}),B()},L=(o,T)=>{console.log(`ãƒšãƒ¼ã‚¸å¤‰æ›´: ${T}`),y(T);const D=new URLSearchParams(ce.search);D.set("page",T.toString()),Ee({search:D.toString()})},_=()=>{console.log(`æ¤œç´¢å®Ÿè¡Œ: ${j}`),B()},R=()=>{console.log("æ¤œç´¢æ¡ä»¶ã‚’ã‚¯ãƒªã‚¢"),w(""),W([]),N([]),q(""),z(""),ye(""),xe(""),Se(""),me(""),y(1);const o=new URLSearchParams;h!=="name"&&o.set("sortBy",h),m!=="asc"&&o.set("sortOrder",m),Ee({search:o.toString()})},B=()=>{console.log("URLã¨æ¤œç´¢ã‚’æ›´æ–°");const o=new URLSearchParams;r>1&&o.set("page",r.toString()),j&&o.set("search",j),k.length>0&&o.set("tags",k.join(",")),h!=="name"&&o.set("sortBy",h),m!=="asc"&&o.set("sortOrder",m),ne&&o.set("nationality",ne),J&&o.set("category",J),le&&o.set("school",le),he&&o.set("birthYearFrom",he),Re&&o.set("birthYearTo",Re),ue&&o.set("deathYear",ue),console.log("æ–°ã—ã„URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:",o.toString()),Ee({search:o.toString()})},V=()=>{const o=[];return ne&&o.push({label:`å›½ç±: ${ne}`,onDelete:()=>{q(""),B()}}),he&&o.push({label:`ç”Ÿå¹´: ${he}`,onDelete:()=>{xe(""),B()}}),ue&&o.push({label:`æ²¡å¹´: ${ue}`,onDelete:()=>{me(""),B()}}),J&&o.push({label:`ã‚«ãƒ†ã‚´ãƒªãƒ¼: ${J}`,onDelete:()=>{z(""),B()}}),le&&o.push({label:`å­¦æ ¡: ${le}`,onDelete:()=>{ye(""),B()}}),o.length===0&&!j&&k.length===0?null:e.jsx(s,{sx:{mb:3},children:e.jsx(st,{severity:"info",action:e.jsx(F,{color:"inherit",size:"small",onClick:R,children:"ã‚¯ãƒªã‚¢"}),children:o.length>0?`ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: ${o.map(T=>T.label).join(", ")}`:j?`ã€Œ${j}ã€ã§æ¤œç´¢ä¸­`:k.length>0?`ã‚¿ã‚°ã€Œ${k.join(", ")}ã€ã§çµžã‚Šè¾¼ã¿ä¸­`:""})})};return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰å®¶ä¸€è¦§"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Te,{fullWidth:!0,label:"å»ºç¯‰å®¶åã€å›½ç±ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã§æ¤œç´¢",value:j,onChange:o=>w(o.target.value),onKeyPress:o=>o.key==="Enter"&&_(),InputProps:{startAdornment:e.jsx(Xe,{position:"start",children:e.jsx(ze,{})})}}),e.jsx(F,{variant:"contained",onClick:_,sx:{minWidth:"120px"},children:"æ¤œç´¢"})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(jt,{multiple:!0,id:"tags-selector",options:A,value:k,onChange:O,fullWidth:!0,renderInput:o=>e.jsx(Te,{...o,variant:"outlined",label:"ã‚¿ã‚°ã§çµžã‚Šè¾¼ã¿",placeholder:"ã‚¿ã‚°ã‚’é¸æŠž"}),renderTags:(o,T)=>o.map((D,X)=>{const M=!!(ee[D]&&ee[D].length>0);let G="";return D==="å›½ç±"?G=ne:D==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?G=J:D==="å­¦æ ¡"?G=le:D==="ç”Ÿå¹´"?G=he:D==="æ²¡å¹´"&&(G=ue),e.jsx(Z,{label:e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[D,G&&e.jsx(l,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:G}),M&&e.jsx(yt,{fontSize:"small"})]}),...T({index:X}),color:G?"primary":"default",variant:"outlined",onClick:oe=>{oe.stopPropagation(),S(oe,D)},onDelete:oe=>{T({index:X}).onDelete(oe)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap"}}},D)})}),e.jsxs(bt,{sx:{minWidth:200},children:[e.jsx(Ct,{id:"sort-select-label",children:"ä¸¦ã³æ›¿ãˆ"}),e.jsxs(Tt,{labelId:"sort-select-label",value:`${h}_${m}`,label:"ä¸¦ã³æ›¿ãˆ",onChange:o=>{const[T,D]=o.target.value.split("_");p(T),b(D),B()},children:[e.jsx(re,{value:"name_asc",children:"åå‰ (æ˜‡é †)"}),e.jsx(re,{value:"name_desc",children:"åå‰ (é™é †)"}),e.jsx(re,{value:"birthYear_asc",children:"ç”Ÿå¹´ (æ˜‡é †)"}),e.jsx(re,{value:"birthYear_desc",children:"ç”Ÿå¹´ (é™é †)"}),e.jsx(re,{value:"nationality_asc",children:"å›½ç± (æ˜‡é †)"}),e.jsx(re,{value:"nationality_desc",children:"å›½ç± (é™é †)"})]})]})]}),e.jsx(At,{open:!!I,anchorEl:I,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsxs(s,{sx:{p:2,width:300,maxHeight:400,overflow:"auto"},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,children:E==="å›½ç±"?"å›½ç±ã‚’é¸æŠž":E==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?"ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠž":E==="å­¦æ ¡"?"å­¦æ ¡ã‚’é¸æŠž":E==="ç”Ÿå¹´"?"ç”Ÿå¹´ã‚’é¸æŠž":E==="æ²¡å¹´"?"æ²¡å¹´ã‚’é¸æŠž":"ã‚¿ã‚°å€¤ã‚’é¸æŠž"}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:[e.jsx(Z,{label:"æŒ‡å®šãªã—",onClick:()=>Q(""),variant:"outlined",size:"small",sx:{mb:1}}),ee[E]?.map(o=>e.jsx(Z,{label:o,onClick:()=>Q(o),variant:"outlined",size:"small",color:E==="å›½ç±"&&o===ne||E==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"&&o===J||E==="å­¦æ ¡"&&o===le||E==="ç”Ÿå¹´"&&o===he||E==="æ²¡å¹´"&&o===ue?"primary":"default",sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},o))]})]})}),e.jsx(V,{}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[d,"äººã®å»ºç¯‰å®¶"]}),i>1&&e.jsx(Be,{count:i,page:r,onChange:L,color:"primary",size:"small"})]})]}),a?e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Ae,{})}):e.jsxs(e.Fragment,{children:[n.length===0?e.jsxs(s,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{variant:"h6",children:"å»ºç¯‰å®¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„"})]}):e.jsx(U,{container:!0,spacing:3,children:n.map(o=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsx(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ue,{component:P,to:`/architects/${o.id}`,children:e.jsxs(fe,{children:[e.jsx(l,{variant:"h6",component:"div",gutterBottom:!0,children:o.name}),e.jsxs(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[o.nationality," â€¢ ",o.birthYear||"?","-",o.deathYear||"ç¾åœ¨"]}),e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:o.tags&&o.tags.map(T=>e.jsx(Z,{label:T,size:"small",variant:"outlined",sx:{pointerEvents:"none"}},T))})]})})})},o.id))}),i>1&&e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Be,{count:i,page:r,onChange:L,color:"primary"})})]})]})},_r=({architectures:n,compact:t=!1})=>!n||n.length===0?e.jsx(l,{variant:"body2",color:"text.secondary",children:"ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ä½œå“ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"}):e.jsx(U,{container:!0,spacing:t?2:3,children:n.map(a=>e.jsx(U,{item:!0,xs:12,sm:6,md:t?6:4,children:e.jsx(pe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ue,{component:P,to:`/architecture/${a.id}`,sx:{flexGrow:1},children:e.jsxs(fe,{children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h2",children:a.name}),a.completedYear>0&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Vt,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[a.completedYear,"å¹´"]})]}),(a.city||a.location)&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Pe,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[a.city?a.city:"",a.city&&a.location?" / ":"",a.location?a.location:""]})]}),a.tag&&e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:a.tag.split(",").filter(f=>f.trim()!==""&&!f.includes("ã®è¿½åŠ å»ºç¯‰")).map((f,i)=>e.jsx(Z,{label:f.trim(),size:"small",color:"secondary",variant:"outlined",sx:{height:"20px",fontSize:"0.65rem"}},i))})]})})})},a.id))}),Fr=()=>e.jsx(s,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:e.jsx(l,{variant:"caption",component:"span",sx:{fontFamily:"serif",fontWeight:"bold",fontSize:"16px"},children:"W"})}),Nr=()=>{const{id:n}=Rt(),[t,a]=u.useState(null),[f,i]=u.useState(!0),[g,d]=u.useState(null),[c,r]=u.useState([]),y=qe();u.useEffect(()=>{n&&(async()=>{i(!0);try{const p=await Dr(parseInt(n));if(!p){d("å»ºç¯‰å®¶æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"),i(!1);return}a(p);const m=[];if(p.teacher1){const b={name:p.teacher1,id:null};try{b.id=await j(p.teacher1)}catch(I){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",I)}m.push(b)}if(p.teacher2){const b={name:p.teacher2,id:null};try{b.id=await j(p.teacher2)}catch(I){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",I)}m.push(b)}if(p.teacher3){const b={name:p.teacher3,id:null};try{b.id=await j(p.teacher3)}catch(I){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",I)}m.push(b)}r(m)}catch(p){console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",p),d("å»ºç¯‰å®¶æƒ…å ±ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}finally{i(!1)}})()},[n]);const j=async h=>null,w=()=>{if(!t)return null;const h=[];if(t.school){let p=t.school;t.faculty&&(p+=` ${t.faculty}`),h.push(p)}return t.schoolAbroad&&h.push(t.schoolAbroad),h.length>0?h.join("ã€"):null},k=()=>!c||c.length===0?null:c.map((h,p)=>e.jsxs("span",{children:[p>0&&"ã€",h.id?e.jsx(lr,{component:P,to:`/architects/${h.id}`,color:"inherit",underline:"hover",children:h.name}):h.name]},p)),W=(h,p)=>{if(!p)return;let m="";switch(h){case"nationality":m=`nationality=${encodeURIComponent(p)}`;break;case"born":m=`birthyear_from=${encodeURIComponent(p)}&birthyear_to=${encodeURIComponent(p)}`;break;case"died":m=`deathyear=${encodeURIComponent(p)}`;break;case"category":m=`category=${encodeURIComponent(p)}`;break;default:return}y(`/architects?${m}`)},v=(h,p)=>{const m=`${h} ${p||""} å»ºç¯‰å®¶`;return`https://www.google.com/search?q=${encodeURIComponent(m)}`},N=h=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(h)}`;if(f)return e.jsx(se,{maxWidth:"lg",sx:{py:4},children:e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(Ae,{})})});if(g||!t)return e.jsx(se,{maxWidth:"lg",sx:{py:4},children:e.jsxs(ae,{sx:{p:3},children:[e.jsx(l,{variant:"h5",color:"error",gutterBottom:!0,children:"ã‚¨ãƒ©ãƒ¼"}),e.jsx(l,{paragraph:!0,children:g||"å»ºç¯‰å®¶æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"}),e.jsx(F,{variant:"outlined",startIcon:e.jsx(_e,{}),onClick:()=>y(-1),children:"æˆ»ã‚‹"})]})});const A=new Set;t.works&&t.works.forEach(h=>{h.tag&&h.tag.split(",").forEach(m=>{const b=m.trim();b&&!b.includes("ã®è¿½åŠ å»ºç¯‰")&&A.add(b)})});const $=[];if(t.nationality&&$.push(`nationality:${t.nationality}`),t.birthYear>0){const h=Math.floor(t.birthYear/10)*10;$.push(`born:${h}s`)}return t.deathYear>0&&$.push(`died:${t.deathYear}`),t.category&&$.push(`category:${t.category}`),t.school&&$.push(`school:${t.school}`),e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(F,{variant:"outlined",component:P,to:"/architects",startIcon:e.jsx(_e,{}),sx:{mb:3},children:"å»ºç¯‰å®¶ä¸€è¦§ã«æˆ»ã‚‹"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"ä¸æ˜Ž"}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:3},children:[t.nationality&&e.jsx(Z,{icon:e.jsx(Xt,{}),label:`nationality:${t.nationality}`,variant:"outlined",onClick:()=>W("nationality",t.nationality),clickable:!0}),t.birthYear>0&&e.jsx(Z,{icon:e.jsx(er,{}),label:`born:${Math.floor(t.birthYear/10)*10}s`,variant:"outlined",onClick:()=>W("born",Math.floor(t.birthYear/10)*10),clickable:!0}),t.deathYear>0&&e.jsx(Z,{icon:e.jsx(tr,{}),label:`died:${t.deathYear}`,variant:"outlined",onClick:()=>W("died",t.deathYear),clickable:!0}),t.category&&e.jsx(Z,{icon:e.jsx(et,{}),label:`category:${t.category}`,variant:"outlined",onClick:()=>W("category",t.category),clickable:!0}),t.office&&e.jsx(Z,{icon:e.jsx(rr,{}),label:t.office,variant:"outlined"})]}),e.jsx(Ge,{sx:{my:3}}),e.jsxs(s,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.website&&e.jsx(Ce,{title:"å…¬å¼ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸",children:e.jsx(F,{href:t.website.startsWith("http")?t.website:`http://${t.website}`,target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(sr,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4caf50",color:"#ffffff","&:hover":{backgroundColor:"#388e3c"}},children:"ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸"})}),e.jsx(Ce,{title:"Googleæ¤œç´¢",children:e.jsx(F,{href:v(t.name,t.nationality),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(ze,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"æ¤œç´¢"})}),e.jsx(Ce,{title:"Wikipediaã§æ¤œç´¢",children:e.jsx(F,{href:N(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Fr,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),e.jsx(nr,{component:ae,variant:"outlined",sx:{mb:4},children:e.jsx(or,{children:e.jsxs(ar,{children:[t.nationality&&e.jsxs(ge,{children:[e.jsx(K,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"å›½ç±"})}),e.jsx(K,{children:t.nationality})]}),(t.birthYear>0||t.deathYear>0)&&e.jsxs(ge,{children:[e.jsx(K,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ç”Ÿå¹´ - æ²¡å¹´"})}),e.jsxs(K,{children:[t.birthYear>0?`${t.birthYear}å¹´`:"ä¸æ˜Ž",t.deathYear>0?` - ${t.deathYear}å¹´`:""]})]}),t.office&&e.jsxs(ge,{children:[e.jsx(K,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"äº‹å‹™æ‰€"})}),e.jsx(K,{children:t.office})]}),t.prefecture&&e.jsxs(ge,{children:[e.jsx(K,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"æ‹ ç‚¹"})}),e.jsx(K,{children:t.prefecture})]}),t.nameEn&&e.jsxs(ge,{children:[e.jsx(K,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"è‹±èªžè¡¨è¨˜"})}),e.jsx(K,{children:t.nameEn})]}),(t.school||t.faculty||t.schoolAbroad)&&e.jsxs(ge,{children:[e.jsx(K,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"æ•™è‚²èƒŒæ™¯"})}),e.jsx(K,{children:e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ir,{sx:{mr:1,fontSize:"1rem",color:"text.secondary"}}),e.jsx(l,{variant:"body2",children:w()})]})})]}),(t.teacher1||t.teacher2||t.teacher3)&&e.jsxs(ge,{children:[e.jsx(K,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"å¸«äº‹ã—ãŸå»ºç¯‰å®¶"})}),e.jsx(K,{children:e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:1},children:k()})})]}),t.category&&e.jsxs(ge,{children:[e.jsx(K,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ã‚«ãƒ†ã‚´ãƒªãƒ¼"})}),e.jsx(K,{children:t.category})]})]})})}),A.size>0&&e.jsxs(s,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"å—è³žæ­´ãƒ»é¸å®š"}),e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:Array.from(A).map((h,p)=>e.jsx(Z,{icon:e.jsx(vt,{}),label:String(h),onClick:()=>W("category",h),clickable:!0,color:"secondary",variant:"outlined",size:"small"},p))})]}),t.bio&&e.jsxs(s,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"çµŒæ­´"}),e.jsx(l,{variant:"body1",sx:{whiteSpace:"pre-line"},children:t.bio})]}),t.works&&t.works.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(s,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½œå“ãƒžãƒƒãƒ—"}),t.works.some(h=>h.latitude&&h.longitude)?e.jsx(s,{sx:{height:"400px",width:"100%",mb:3,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(He,{markers:t.works.filter(h=>h.latitude&&h.longitude),zoom:5,center:[t.works[0].latitude||35.6762,t.works[0].longitude||139.6503]})}):e.jsx(l,{variant:"body2",color:"text.secondary",children:"ä½ç½®æƒ…å ±ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ä½œå“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"})]}),e.jsxs(s,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä»£è¡¨ä½œå“"}),e.jsx(_r,{architectures:t.works})]})]})]})]})},Yr=()=>{const[n,t]=u.useState(!0),[a,f]=u.useState([]),[i,g]=u.useState([]),[d,c]=u.useState({yearFrom:"",yearTo:""}),[r,y]=u.useState(!1),[j,w]=u.useState(null),[k,W]=u.useState(!1);u.useEffect(()=>{N()},[]);const v=m=>{if(!m||m.length===0)return{from:0,to:0};const b=m.filter(q=>q.completedYear>0);if(b.length===0)return{from:0,to:0};const I=b.map(q=>q.completedYear).sort((q,J)=>q-J),H=I[0],E=I[I.length-1],je=Math.min(100,Math.floor((E-H)/2)),ee=Math.floor(Math.random()*(I.length-Math.floor(I.length/4))),de=I[ee],ne=Math.min(de+je,E);return{from:de,to:ne}},N=async()=>{t(!0);try{const m=await Nt();if(g(m),!d.yearFrom&&!d.yearTo){const b=v(m);c({yearFrom:b.from.toString(),yearTo:b.to.toString()});const I=m.filter(H=>H.completedYear>=b.from&&H.completedYear<=b.to);f(I)}else{let b=m;d.yearFrom&&(b=b.filter(I=>I.completedYear>=parseInt(d.yearFrom))),d.yearTo&&(b=b.filter(I=>I.completedYear<=parseInt(d.yearTo))),f(b)}}catch(m){console.error("Error fetching works:",m)}finally{t(!1)}},A=m=>{const{name:b,value:I}=m.target;c({...d,[b]:I})},$=()=>{t(!0);let m=i;d.yearFrom&&(m=m.filter(b=>b.completedYear>=parseInt(d.yearFrom))),d.yearTo&&(m=m.filter(b=>b.completedYear<=parseInt(d.yearTo))),f(m),t(!1)},h=()=>{c({yearFrom:"",yearTo:""}),f(i)},p=m=>{w(m),W(!0)};return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰åœ°å›³"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsx(F,{startIcon:e.jsx(cr,{}),onClick:()=>y(!r),sx:{mb:2},children:r?"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é–‰ã˜ã‚‹":"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’è¡¨ç¤º"}),r&&e.jsx(s,{sx:{mb:2},children:e.jsxs(U,{container:!0,spacing:2,children:[e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Te,{fullWidth:!0,label:"å¹´ä»£ï¼ˆã‹ã‚‰ï¼‰",name:"yearFrom",type:"number",value:d.yearFrom,onChange:A})}),e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Te,{fullWidth:!0,label:"å¹´ä»£ï¼ˆã¾ã§ï¼‰",name:"yearTo",type:"number",value:d.yearTo,onChange:A})}),e.jsx(U,{item:!0,xs:12,md:4,children:e.jsxs(s,{sx:{display:"flex",gap:1,height:"100%"},children:[e.jsx(F,{variant:"contained",color:"primary",onClick:$,sx:{flexGrow:1},children:"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨"}),e.jsx(F,{variant:"outlined",onClick:h,sx:{flexGrow:1},children:"ã‚¯ãƒªã‚¢"})]})})]})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ve,{sx:{mr:1}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["ãƒžãƒƒãƒ—ä¸Šã«è¡¨ç¤ºã•ã‚ŒãŸä½œå“: ",a.length,"ä»¶ ",d.yearFrom&&d.yearTo&&`(${d.yearFrom}å¹´ã€œ${d.yearTo}å¹´)`]})]})]}),n?e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Ae,{})}):e.jsxs(s,{sx:{height:600,bgcolor:"grey.200",position:"relative",borderRadius:1},children:[e.jsx(He,{markers:a,height:"600px",zoom:5,center:[35.6762,139.6503]}),e.jsxs(s,{sx:{position:"absolute",top:16,right:16,width:320,maxHeight:568,overflow:"auto",bgcolor:"background.paper",borderRadius:1,boxShadow:3,p:2,zIndex:1e3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½œå“ãƒªã‚¹ãƒˆ"}),a.length===0?e.jsx(l,{variant:"body2",children:"æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ä½œå“ã¯ã‚ã‚Šã¾ã›ã‚“"}):e.jsx(gt,{dense:!0,children:a.map(m=>e.jsxs(St.Fragment,{children:[e.jsx(pt,{onClick:()=>p(m),sx:{cursor:"pointer",bgcolor:j&&j.id===m.id?"action.selected":"transparent","&:hover":{bgcolor:"action.hover"}},children:e.jsx(ft,{primary:m.name,secondary:e.jsxs(e.Fragment,{children:[m.architectName&&e.jsxs("span",{children:[m.architectName,e.jsx("br",{})]}),m.completedYear>0&&`${m.completedYear}å¹´ | `,m.city||""]})})}),e.jsx(Ge,{component:"li"})]},m.id))})]})]}),e.jsx(mt,{anchor:"right",open:k,onClose:()=>W(!1),children:j&&e.jsxs(s,{sx:{width:350,p:3},children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:j.name}),e.jsxs(s,{sx:{mb:3},children:[j.architectName&&e.jsx(l,{variant:"subtitle1",color:"text.secondary",children:j.architectName}),e.jsxs(l,{variant:"body2",children:[j.completedYear>0&&`${j.completedYear}å¹´`,j.city&&` | ${j.city}`]}),j.location&&e.jsx(l,{variant:"body2",sx:{mt:1},children:j.location})]}),e.jsx(s,{sx:{mb:3,height:200},children:e.jsx(He,{singleMarker:j,height:"200px",zoom:15,center:[j.latitude,j.longitude]})}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(F,{variant:"outlined",onClick:()=>W(!1),children:"é–‰ã˜ã‚‹"}),e.jsx(F,{variant:"contained",component:P,to:`/architecture/${j.id}`,children:"è©³ç´°ã‚’è¦‹ã‚‹"})]})]})})]})};class Yt extends u.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,a){console.error("Uncaught error:",t,a),this.setState({error:t,errorInfo:a})}handleRetry=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:4,height:"100vh"},children:e.jsxs(ae,{elevation:3,sx:{padding:4,maxWidth:600,width:"100%",borderRadius:2,textAlign:"center"},children:[e.jsx(l,{variant:"h5",color:"error",gutterBottom:!0,children:"å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ"}),e.jsx(l,{variant:"body1",paragraph:!0,children:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ ãŠæ‰‹æ•°ã§ã™ãŒã€å†èª­ã¿è¾¼ã¿ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚"}),!1,e.jsxs(s,{sx:{mt:3},children:[e.jsx(F,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mr:2},children:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿"}),e.jsx(F,{variant:"outlined",onClick:()=>window.location.href="/",children:"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"})]})]})}):this.props.children}}const Or=()=>{try{const n=window?.location?.hostname||"";return/github\.io$/.test(n)}catch(n){return console.error("ç’°å¢ƒãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:",n),!1}},Lr=async()=>{try{const t=Or();console.log("ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒ: æœ¬ç•ª"),console.log(`GitHub Pagesç’°å¢ƒ: ${t?"ã¯ã„":"ã„ã„ãˆ"}`);try{const f=await fetch(t?"./db/database-info.json":"/db/database-info.json");if(f.ok){const i=await f.json();console.log("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æƒ…å ±:"),console.log(`- ãƒ•ã‚¡ã‚¤ãƒ«: ${i.database}`),console.log(`- æ›´æ–°æ—¥æ™‚: ${i.date}`),console.log(`- ã‚µã‚¤ã‚º: ${(i.size/1024/1024).toFixed(2)} MB`),console.log(`- ãƒãƒ£ãƒ³ã‚¯: ${i.chunks} (${i.chunkSize/1024}KB)ã®ãƒãƒ£ãƒ³ã‚¯`),console.log(`- ãƒ†ãƒ¼ãƒ–ãƒ«æ•°: ${i.tables.length}`),console.log(`- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ•°: ${i.indexes.length}`)}else console.warn("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:",f.status)}catch(a){console.warn("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",a)}}catch(n){console.error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šãƒ­ã‚°ã‚¨ãƒ©ãƒ¼:",n)}},Zr=({children:n})=>{const[t,a]=u.useState(vr()),[f,i]=u.useState(null),[g,d]=u.useState(0);return u.useEffect(()=>{let c=!0,r;return(async()=>{t!==Me.READY&&setTimeout(async()=>{r=setInterval(()=>{c&&d(j=>{const w=(95-j)*.1;return Math.min(j+w,95)})},300);try{await $t(),c&&(d(100),a(Me.READY))}catch(j){c&&(i(`ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: ${j instanceof Error?j.message:"ä¸æ˜Žãªã‚¨ãƒ©ãƒ¼"}`),a(Me.ERROR))}finally{clearInterval(r)}},100)})(),()=>{c=!1,clearInterval(r)}},[t]),e.jsx(e.Fragment,{children:n})},rt={primary:{main:"#2E3440",light:"#4C566A",dark:"#1B1F2B",contrastText:"#FFFFFF"},secondary:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC",contrastText:"#2E3440"},accent:{main:"#D08770",light:"#E5A088",dark:"#BF616A"},background:{default:"#ECEFF4",paper:"#FFFFFF",elevated:"#F8F9FA"},text:{primary:"#2E3440",secondary:"#4C566A",disabled:"#D8DEE9"},divider:"#E5E9F0",success:{main:"#A3BE8C",light:"#B8CCA3",dark:"#8CAF69"},warning:{main:"#EBCB8B",light:"#F0D5A3",dark:"#D4B571"},error:{main:"#BF616A",light:"#CC8088",dark:"#A54A56"},info:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC"}},Mr={fontFamily:'"Inter", "Roboto", "Helvetica Neue", "Arial", sans-serif',h1:{fontSize:"3rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2.25rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.875rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.4},subtitle1:{fontSize:"1rem",fontWeight:500,lineHeight:1.5},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.5},body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.6},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.6},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.5},button:{fontSize:"0.875rem",fontWeight:600,textTransform:"none",letterSpacing:"0.02em"}},Br={MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"10px 24px",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},contained:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8,transition:"all 0.2s ease-in-out","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:rt.secondary.main}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:rt.primary.main,borderWidth:2}}}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",backgroundColor:"rgba(46, 52, 64, 0.95)"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiPaper:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},elevation1:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},elevation2:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},elevation3:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},Pr=dr({palette:rt,typography:Mr,components:Br,spacing:8,shape:{borderRadius:8},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"}}}),Hr=()=>{const{pathname:n}=Ke();return u.useEffect(()=>{window.scrollTo(0,0)},[n]),null},zr=()=>(u.useEffect(()=>{console.log("App running in production mode");try{Lr()}catch(n){console.warn("Failed to log database details:",n)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(Hr,{}),e.jsx(yr,{}),e.jsx("main",{className:"container",role:"main",children:e.jsx(Yt,{children:e.jsxs(gr,{children:[e.jsx(Ie,{path:"/",element:e.jsx(Ir,{})}),e.jsx(Ie,{path:"/architecture",element:e.jsx(Sr,{})}),e.jsx(Ie,{path:"/architecture/:id",element:e.jsx(wr,{})}),e.jsx(Ie,{path:"/architects",element:e.jsx(kr,{})}),e.jsx(Ie,{path:"/architects/:id",element:e.jsx(Nr,{})}),e.jsx(Ie,{path:"/map",element:e.jsx(Yr,{})})]})})}),e.jsx(br,{})]})),Ur=()=>e.jsx(Yt,{children:e.jsxs(hr,{theme:Pr,children:[e.jsx(xr,{}),e.jsx(mr,{children:e.jsx(Zr,{children:e.jsx(zr,{})})})]})});console.log("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–ä¸­...","production");console.log("DOM root element:",document.getElementById("root"));const Ot=document.getElementById("root");if(!Ot)throw console.error('rootè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚HTMLã«<div id="root"></div>ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚'),new Error("Failed to find the root element");const Gr=Dt(Ot);console.log("Using HashRouter for GitHub Pages compatibility");try{Gr.render(e.jsx(St.StrictMode,{children:e.jsx(Ur,{})})),console.log("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒæˆåŠŸã—ã¾ã—ãŸ")}catch(n){console.error("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:",n)}
//# sourceMappingURL=index-DDCJzW5X.js.map
