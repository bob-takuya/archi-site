import{u as Lt,a as Ot,j as e,A as Bt,T as zt,b as l,I as Xe,M as Pt,D as xt,B as r,C as Mt,L as ut,c as mt,d as gt,e as _,H as Nt,f as Me,P as Fe,g as we,S as Ht,h as se,G as H,i as ie,k as fe,l as pe,F as be,m as Pe,n as B,o as Ee,p as Ge,q as ae,r as Te,s as Zt,t as Ut,v as Ce,R as ot,w as nt,x as qe,y as Ke,z as et,E as ft,J as pt,K as jt,N as yt,O as bt,Q as re,U as Gt,V as Ct,W as He,X as Et,Y as Ze,Z as Tt,_ as Ye,$ as tt,a0 as vt,a1 as qt,a2 as Kt,a3 as Qt,a4 as Vt,a5 as Jt,a6 as Xt,a7 as er,a8 as tr,a9 as rr,aa as sr,ab as nr,ac as ge,ad as G,ae as or,af as ar,ag as ir,ah as lr,ai as cr,aj as dr}from"./ui-Dt_CYN3Z.js";import{a as hr,u as Qe,r as x,L as M,e as Ve,f as At,R as It,H as xr,h as ur,i as Ae}from"./vendor-C30vB44U.js";import{d as mr}from"./database-C3TWL7Qm.js";import{L as wt,M as gr,T as fr,a as at,P as it}from"./map-C0JyOu4T.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))u(i);new MutationObserver(i=>{for(const m of i)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const m={};return i.integrity&&(m.integrity=i.integrity),i.referrerPolicy&&(m.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?m.credentials="include":i.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function u(i){if(i.ep)return;i.ep=!0;const m=n(i);fetch(i.href,m)}})();var St,lt=hr;St=lt.createRoot,lt.hydrateRoot;const ct=[{title:"„Éõ„Éº„É†",path:"/",icon:e.jsx(Nt,{})},{title:"Âª∫ÁØâ‰ΩúÂìÅ",path:"/architecture",icon:e.jsx(Me,{})},{title:"Âª∫ÁØâÂÆ∂",path:"/architects",icon:e.jsx(Fe,{})},{title:"„Éû„ÉÉ„Éó",path:"/map",icon:e.jsx(we,{})},{title:"DB„Ç®„ÇØ„Çπ„Éó„É≠„Éº„É©„Éº",path:"/db-explorer",icon:e.jsx(Ht,{})}],pr=()=>{const t=Qe().pathname,n=Lt(),u=Ot(n.breakpoints.down("sm")),[i,m]=x.useState(!1),d=c=>o=>{o.type==="keydown"&&(o.key==="Tab"||o.key==="Shift")||m(c)};return e.jsx(Bt,{position:"static",color:"primary",component:"nav",role:"navigation","aria-label":"„É°„Ç§„É≥„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥",children:e.jsxs(zt,{children:[e.jsx(l,{variant:"h6",component:M,to:"/","data-testid":"site-title",sx:{flexGrow:1,color:"white",textDecoration:"none",fontWeight:"bold"},children:"Âª∫ÁØâ„Éá„Éº„Çø„Éô„Éº„Çπ"}),u?e.jsxs(e.Fragment,{children:[e.jsx(Xe,{edge:"end",color:"inherit","aria-label":"menu","data-testid":"mobile-menu-button",onClick:d(!0),children:e.jsx(Pt,{})}),e.jsx(xt,{anchor:"right",open:i,onClose:d(!1),children:e.jsxs(r,{sx:{width:250},role:"presentation",onClick:d(!1),onKeyDown:d(!1),children:[e.jsx(r,{sx:{display:"flex",justifyContent:"flex-end",p:1},children:e.jsx(Xe,{onClick:d(!1),children:e.jsx(Mt,{})})}),e.jsx(ut,{role:"menu","aria-label":"„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„É°„Éã„É•„Éº",children:ct.map(({title:c,path:o,icon:y})=>e.jsxs(mt,{component:M,to:o,role:"menuitem","data-testid":`nav-link-${c.toLowerCase()}`,sx:{color:t===o?"primary.main":"text.primary",backgroundColor:t===o?"rgba(0, 0, 0, 0.08)":"transparent",fontWeight:t===o?"bold":"normal","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[y,e.jsx(gt,{primary:c,sx:{ml:2}})]},c))})]})})]}):e.jsx(r,{sx:{display:"flex"},role:"menubar","aria-label":"„Éá„Çπ„ÇØ„Éà„ÉÉ„Éó„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥",children:ct.map(({title:c,path:o})=>e.jsx(_,{component:M,to:o,color:"inherit",role:"menuitem","data-testid":`nav-link-${c.toLowerCase()}`,sx:{mx:1,fontWeight:t===o?"bold":"normal",borderBottom:t===o?"2px solid white":"none"},children:c},c))})]})})},jr=()=>e.jsx(r,{component:"footer",role:"contentinfo","data-testid":"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:"primary.main",color:"white"},children:e.jsx(se,{maxWidth:"sm",children:e.jsxs(l,{variant:"body1",align:"center",children:["Âª∫ÁØâ„Éá„Éº„Çø„Éô„Éº„Çπ ¬© ",new Date().getFullYear()]})})}),yr="modulepreload",br=function(s){return"/archi-site/"+s},dt={},Cr=function(t,n,u){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),c=d?.nonce||d?.getAttribute("nonce");i=Promise.allSettled(n.map(o=>{if(o=br(o),o in dt)return;dt[o]=!0;const y=o.endsWith(".css"),p=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${p}`))return;const g=document.createElement("link");if(g.rel=y?"stylesheet":yr,y||(g.as="script"),g.crossOrigin="",g.href=o,c&&g.setAttribute("nonce",c),document.head.appendChild(g),y)return new Promise((T,R)=>{g.addEventListener("load",T),g.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${o}`)))})}))}function m(d){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=d,window.dispatchEvent(c),!c.defaultPrevented)throw d}return i.then(d=>{for(const c of d||[])c.status==="rejected"&&m(c.reason);return t().catch(m)})},Er=({variant:s="card",count:t=6})=>{const n=()=>e.jsx(fe,{sx:{height:"100%"},children:e.jsxs(pe,{children:[e.jsx(ie,{variant:"text",height:40,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,width:"60%"})]})}),u=()=>e.jsxs(r,{sx:{p:2},children:[e.jsx(ie,{variant:"text",height:32,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:24,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,width:"40%"})]}),i=()=>e.jsx(se,{maxWidth:"lg",children:e.jsxs(r,{sx:{textAlign:"center",py:8},children:[e.jsx(ie,{variant:"text",height:60,sx:{mb:2}}),e.jsx(ie,{variant:"text",height:30,sx:{mb:4}}),e.jsx(r,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx(ie,{variant:"rectangular",width:500,height:56,sx:{borderRadius:1}})})]})}),m=()=>e.jsx(ie,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2}});return s==="hero"?i():s==="map"?m():s==="list"?e.jsx(r,{children:Array.from({length:t}).map((d,c)=>e.jsx(r,{sx:{borderBottom:"1px solid #e0e0e0"},children:u()},c))}):e.jsx(H,{container:!0,spacing:4,children:Array.from({length:t}).map((d,c)=>e.jsx(H,{item:!0,xs:12,sm:6,md:4,children:n()},c))})},Tr=()=>{const[s,t]=x.useState(""),[n,u]=x.useState([]),[i,m]=x.useState(!0),[d,c]=x.useState(null),[o,y]=x.useState(!1),[p,g]=x.useState(null);x.useEffect(()=>{const v=b=>{const{progress:j,speed:I,eta:$,receivedLength:q,totalLength:A}=b.detail;g({progress:j,speed:I,eta:$,receivedLength:q,totalLength:A})};window.addEventListener("database-download-progress",v);const Z=setTimeout(()=>{console.warn("Emergency timeout: forcing app to render without database after 3 minutes"),m(!1),y(!1),c("„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÂàùÊúüÂåñ„Åå„Çø„Ç§„É†„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„ÅüÔºàÂ§ß„Åç„Å™„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´ÊôÇÈñì„Åå„Åã„Åã„Å£„Å¶„ÅÑ„Åæ„ÅôÔºâ„ÄÇÊé•Á∂ö„ÅåÈÅÖ„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„Åó„Å∞„Çâ„Åè„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ„ÄÇ")},18e4);return(async()=>{try{m(!0),c(null),console.log("ÊúÄËøë„ÅÆÂª∫ÁØâ‰ΩúÂìÅ„ÇíÂèñÂæó‰∏≠...");const{getAllArchitectures:b}=await Cr(async()=>{const{getAllArchitectures:q}=await Promise.resolve().then(()=>Ar);return{getAllArchitectures:q}},void 0),j=new Promise((q,A)=>{setTimeout(()=>A(new Error("„Éá„Éº„Çø„Éô„Éº„ÇπÊé•Á∂ö„Åå„Çø„Ç§„É†„Ç¢„Ç¶„Éà„Åó„Åæ„Åó„ÅüÔºà90ÁßíÔºâ„ÄÇÂ§ß„Åç„Å™„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´ÊôÇÈñì„Åå„Åã„Åã„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ")),9e4)}),I=b(1,6),$=await Promise.race([I,j]);clearTimeout(Z),u($.items),y(!0),console.log("Âª∫ÁØâ‰ΩúÂìÅ„ÅÆÂèñÂæó„Å´ÊàêÂäü„Åó„Åæ„Åó„Åü",$)}catch(b){console.error("Âª∫ÁØâ‰ΩúÂìÅ„ÅÆÂèñÂæó„Å´Â§±Êïó:",b),clearTimeout(Z);let j=b.message||"„Éá„Éº„Çø„Éô„Éº„Çπ„Åã„Çâ„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü";b.message?.includes("timeout")?j+=" „Ç§„É≥„Çø„Éº„Éç„ÉÉ„ÉàÊé•Á∂ö„ÅåÈÅÖ„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åó„Å∞„Çâ„ÅèÂæÖ„Å£„Å¶„Åã„Çâ„Éö„Éº„Ç∏„ÇíÂÜçË™≠„ÅøËæº„Åø„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ":b.message?.includes("fetch")&&(j+=" „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊé•Á∂ö„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"),c(j),y(!1)}finally{m(!1)}})(),()=>{clearTimeout(Z),window.removeEventListener("database-download-progress",v)}},[]);const T=v=>{v.preventDefault(),s.trim()&&(window.location.href=`/architecture?search=${encodeURIComponent(s)}`)},R=()=>{c(null),m(!0),g(null),window.location.reload()},D=v=>v<1024?`${Math.round(v)} B/s`:v<1024*1024?`${Math.round(v/1024)} KB/s`:`${Math.round(v/1024/1024)} MB/s`,L=v=>v<60?`${Math.round(v)}s`:v<3600?`${Math.round(v/60)}m ${Math.round(v%60)}s`:`${Math.round(v/3600)}h ${Math.round(v%3600/60)}m`;return e.jsxs(se,{maxWidth:"lg","data-testid":"homepage-container",children:[e.jsx(be,{in:!0,timeout:1e3,children:e.jsxs(r,{component:"section",role:"banner","aria-labelledby":"main-heading",sx:{pt:8,pb:6,textAlign:"center",background:"linear-gradient(135deg, #ECEFF4 0%, #D8DEE9 100%)",borderRadius:3,mb:6,position:"relative",overflow:"hidden"},children:[e.jsx(r,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.1,background:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(46, 52, 64, 0.1) 10px, rgba(46, 52, 64, 0.1) 20px)"}}),e.jsxs(r,{sx:{position:"relative",zIndex:1},children:[e.jsx(l,{component:"h1",variant:"h1",align:"center",color:"text.primary",gutterBottom:!0,id:"main-heading",sx:{background:"linear-gradient(135deg, #2E3440 0%, #4C566A 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",mb:2},children:"Âª∫ÁØâ„Éá„Éº„Çø„Éô„Éº„Çπ"}),e.jsxs(l,{variant:"h5",align:"center",color:"text.secondary",paragraph:!0,sx:{mb:4,maxWidth:600,mx:"auto"},children:["Êó•Êú¨„ÅÆÂª∫ÁØâ‰ΩúÂìÅ„Å®Âª∫ÁØâÂÆ∂„ÇíÊ§úÁ¥¢„ÉªÈñ≤Ë¶ß„Åß„Åç„Çã",e.jsx("br",{}),"ÂåÖÊã¨ÁöÑ„Å™„Éá„Éº„Çø„Éô„Éº„Çπ"]}),e.jsxs(Pe,{direction:"row",spacing:3,justifyContent:"center",sx:{mb:4},children:[e.jsx(B,{icon:e.jsx(Me,{}),label:"14,000+ Âª∫ÁØâ‰ΩúÂìÅ",color:"primary",variant:"outlined"}),e.jsx(B,{icon:e.jsx(Fe,{}),label:"2,900+ Âª∫ÁØâÂÆ∂",color:"secondary",variant:"outlined"}),e.jsx(B,{icon:e.jsx(we,{}),label:"ÂÖ®ÂõΩÂØæÂøú",color:"info",variant:"outlined"})]}),e.jsx(be,{in:!0,timeout:1500,children:e.jsxs(r,{component:"form",onSubmit:T,role:"search","aria-label":"Âª∫ÁØâ‰ΩúÂìÅÊ§úÁ¥¢",sx:{mt:4,display:"flex",justifyContent:"center",alignItems:"center",maxWidth:600,mx:"auto",gap:2},children:[e.jsx(Ee,{fullWidth:!0,variant:"outlined",placeholder:"Âª∫ÁØâ‰ΩúÂìÅ„ÄÅÂª∫ÁØâÂÆ∂„ÄÅ‰ΩèÊâÄ„Å™„Å©„ÅßÊ§úÁ¥¢",value:s,onChange:v=>t(v.target.value),inputProps:{"aria-label":"Âª∫ÁØâ‰ΩúÂìÅÊ§úÁ¥¢","data-testid":"search-input",role:"searchbox"},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}}),e.jsx(_,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(Ge,{}),size:"large","data-testid":"search-button",sx:{px:3,py:1.5,minWidth:120},children:"Ê§úÁ¥¢"})]})}),!o&&i&&e.jsx(r,{sx:{mt:4,maxWidth:600,mx:"auto"},children:p?e.jsxs(ae,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main"},children:"üì¶ Â§ß„Åç„Å™„Éá„Éº„Çø„Éô„Éº„Çπ„ÇíË™≠„ÅøËæº„Åø‰∏≠..."}),e.jsxs(r,{sx:{mb:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Te,{variant:"determinate",value:p.progress,size:24,sx:{mr:2}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[p.progress,"% ‚Ä¢ ",Math.round(p.receivedLength/1024/1024)," MB / ",Math.round(p.totalLength/1024/1024)," MB"]})]}),e.jsx(Zt,{variant:"determinate",value:p.progress,sx:{height:8,borderRadius:4}})]}),e.jsxs(Pe,{direction:"row",spacing:2,sx:{fontSize:"0.875rem",color:"text.secondary"},children:[e.jsxs(r,{children:["üìä ",D(p.speed)]}),e.jsxs(r,{children:["‚è±Ô∏è ETA: ",L(p.eta)]})]}),e.jsx(l,{variant:"body2",sx:{mt:1,fontStyle:"italic",color:"text.secondary"},children:"ÂàùÂõû„ÅÆ„Ç¢„ÇØ„Çª„Çπ„Åß„ÅØ„ÄÅÂ§ß„Åç„Å™„Éï„Ç°„Ç§„É´„ÅÆ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ„Åó„Å∞„Çâ„Åè„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ„ÄÇ"})]}):e.jsxs(ae,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(Te,{size:24,sx:{mr:2}}),e.jsx(l,{variant:"h6",sx:{color:"primary.main"},children:"„Éá„Éº„Çø„Éô„Éº„Çπ„ÇíÂàùÊúüÂåñ‰∏≠..."})]}),e.jsx(l,{variant:"body2",color:"text.secondary",align:"center",children:"14,000‰ª∂„ÅÆÂª∫ÁØâ‰ΩúÂìÅ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„Åø‰∏≠„Åß„Åô"})]})})]})]})}),e.jsxs(r,{component:"section","aria-labelledby":"recent-works-heading",sx:{py:4},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Ut,{color:"primary"}),e.jsx(l,{variant:"h4",fontWeight:"bold",id:"recent-works-heading",component:"h2",children:"ÊúÄËøë„ÅÆÂª∫ÁØâ‰ΩúÂìÅ"})]}),o&&e.jsx(Ce,{title:"„É™„Éï„É¨„ÉÉ„Ç∑„É•",children:e.jsx(Xe,{onClick:()=>window.location.reload(),color:"primary",children:e.jsx(ot,{})})})]}),d&&e.jsx(be,{in:!0,children:e.jsx(nt,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{display:"flex",alignItems:"center",gap:2}},children:e.jsxs(r,{children:[d,e.jsxs(Pe,{direction:"row",spacing:2,sx:{mt:2},children:[e.jsx(_,{size:"small",variant:"contained",color:"primary",onClick:R,startIcon:e.jsx(ot,{}),children:"ÂÜçË©¶Ë°å"}),e.jsx(_,{size:"small",variant:"outlined",component:M,to:"/db-explorer",children:"Ë®∫Êñ≠„ÉÑ„Éº„É´„ÇíÈñã„Åè"})]})]})})}),i?e.jsx(Er,{variant:"card",count:6}):n.length>0?e.jsx(be,{in:!0,timeout:800,children:e.jsx(H,{container:!0,spacing:4,children:n.map((v,Z)=>e.jsx(H,{item:!0,xs:12,sm:6,md:4,children:e.jsx(be,{in:!0,timeout:1e3+Z*200,children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%)",border:"1px solid #E5E9F0","&:hover":{"& .card-content":{transform:"translateY(-2px)"}}},children:e.jsx(qe,{component:M,to:`/architecture/${v.ZAW_ID}`,sx:{height:"100%"},children:e.jsxs(pe,{className:"card-content",sx:{flexGrow:1,transition:"transform 0.3s ease-in-out",p:3},children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h3",sx:{fontWeight:600,color:"text.primary",mb:2,lineHeight:1.3},children:v.ZAW_NAME}),e.jsxs(Pe,{spacing:1,children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Fe,{fontSize:"small",color:"secondary"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:v.ZAW_ARCHITECT||"Âª∫ÁØâÂÆ∂‰∏çÊòé"})]}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(we,{fontSize:"small",color:"secondary"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[v.ZAW_ADDRESS||"Â†¥ÊâÄ‰∏çÊòé"," ‚Ä¢ ",v.ZAW_YEAR&&v.ZAW_YEAR!==0?v.ZAW_YEAR+"Âπ¥":"Âπ¥‰ª£‰∏çÊòé"]})]})]})]})})})})},v.ZAW_ID))})}):e.jsxs(ae,{sx:{p:6,textAlign:"center",background:"linear-gradient(135deg, #F8F9FA 0%, #ECEFF4 100%)"},children:[e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Âª∫ÁØâ‰ΩúÂìÅ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÊé•Á∂ö„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ"})]}),o&&e.jsx(be,{in:!0,timeout:1200,children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(_,{variant:"outlined",color:"primary",component:M,to:"/architecture",size:"large",sx:{px:4,py:1.5,borderWidth:2,"&:hover":{borderWidth:2}},children:"„Åô„Åπ„Å¶„ÅÆ‰ΩúÂìÅ„ÇíË¶ã„Çã"})})})]}),e.jsx(Ke,{sx:{my:6}}),e.jsx(be,{in:!0,timeout:1400,children:e.jsxs(r,{component:"section","aria-labelledby":"features-heading",sx:{mb:6},children:[e.jsx(l,{variant:"h4",align:"center",gutterBottom:!0,id:"features-heading",component:"h2",sx:{mb:4,fontWeight:"bold"},children:"„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÁâπÂæ¥"}),e.jsxs(H,{container:!0,spacing:4,children:[e.jsx(H,{item:!0,xs:12,md:4,children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #88C0D0 0%, #5E81AC 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(r,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Me,{sx:{fontSize:100}})}),e.jsxs(pe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Me,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"Âª∫ÁØâ‰ΩúÂìÅ"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"Êó•Êú¨ÂÖ®ÂõΩ„Åã„Çâ14,000‰ª∂‰ª•‰∏ä„ÅÆÂª∫ÁØâ‰ΩúÂìÅÊÉÖÂ†±„ÇíÈñ≤Ë¶ß„Åß„Åç„Åæ„Åô„ÄÇÂú∞Âüü„ÄÅÂπ¥‰ª£„ÄÅ„Ç´„ÉÜ„Ç¥„É™„Éº„Å™„Å©„ÅßË©≥Á¥∞Ê§úÁ¥¢„ÅåÂèØËÉΩ„Åß„Åô„ÄÇ"}),e.jsx(_,{variant:"contained",component:M,to:"/architecture",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"‰ΩúÂìÅ„ÇíÊé¢„Åô"})]})]})}),e.jsx(H,{item:!0,xs:12,md:4,children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #D08770 0%, #BF616A 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(r,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Fe,{sx:{fontSize:100}})}),e.jsxs(pe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Fe,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"Âª∫ÁØâÂÆ∂"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"2,900‰∫∫‰ª•‰∏ä„ÅÆÂª∫ÁØâÂÆ∂ÊÉÖÂ†±„ÇíÂèéÈå≤„ÄÇÁµåÊ≠¥„ÄÅ‰ΩúÂìÅ„É™„Çπ„Éà„ÄÅÊâÄÂ±û‰∫ãÂãôÊâÄ„Å™„Å©„ÅÆË©≥Á¥∞ÊÉÖÂ†±„ÇíÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ"}),e.jsx(_,{variant:"contained",component:M,to:"/architects",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"Âª∫ÁØâÂÆ∂„ÇíÊé¢„Åô"})]})]})}),e.jsx(H,{item:!0,xs:12,md:4,children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #A3BE8C 0%, #8CAF69 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(r,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(we,{sx:{fontSize:100}})}),e.jsxs(pe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(we,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"„Éû„ÉÉ„ÉóË°®Á§∫"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"Âª∫ÁØâ‰ΩúÂìÅ„ÇíÂú∞Âõ≥‰∏ä„ÅßË¶ñË¶öÁöÑ„Å´Êé¢Á¥¢„Åß„Åç„Åæ„Åô„ÄÇ‰ΩçÁΩÆÊÉÖÂ†±„Çí„ÇÇ„Å®„Å´Âë®Ëæ∫„ÅÆÂª∫ÁØâ‰ΩúÂìÅ„ÇíÁô∫Ë¶ã„Åß„Åç„Åæ„Åô„ÄÇ"}),e.jsx(_,{variant:"contained",component:M,to:"/map",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"„Éû„ÉÉ„Éó„ÇíÈñã„Åè"})]})]})})]})]})})]})},Se="/archi-site",Ie=`${Se}/db/archimap.sqlite`;console.log("üîß Environment debug info:");console.log("  - import.meta.env.PROD:",!0);console.log("  - BASE_PATH:",Se);console.log("  - DATABASE_URL:",Ie);let te=null,rt=!1,_e=null;var Ne=(s=>(s.NOT_INITIALIZED="not_initialized",s.INITIALIZING="initializing",s.READY="ready",s.ERROR="error",s))(Ne||{});const vr=()=>te?"ready":rt?"initializing":"not_initialized",ht=async()=>{try{const s=Date.now(),t=await fetch(`${Se}/images/shinkenchiku-favicon.ico`,{method:"HEAD",cache:"no-cache"}),u=Date.now()-s;return u<100?"fast":u<500?"slow":"very-slow"}catch{return"very-slow"}},Rt=async()=>te||_e||(rt=!0,_e=(async()=>{try{console.log("üöÄ „Éá„Éº„Çø„Éô„Éº„ÇπÂàùÊúüÂåñ„ÇíÈñãÂßãÔºàsql.js-httpvfs‰ΩøÁî®Ôºâ...");const s=await ht();console.log(`üåê Connection speed detected: ${s}`),console.log("üóÑÔ∏è Testing database file accessibility...");try{const g=await fetch(Ie,{method:"HEAD"});if(console.log("  - Database file status:",g.status,g.statusText),!g.ok)throw new Error(`Database file not accessible: ${g.status} ${g.statusText} at ${Ie}`);const T=g.headers.get("content-length");if(T){const R=parseInt(T)/1048576;console.log(`  - Database file size: ${R.toFixed(2)} MB`)}console.log("‚úÖ Database file is accessible")}catch(g){throw console.error("‚ùå Database file accessibility check failed:",g),new Error(`Database file not accessible: ${g.message}`)}console.log("üì¶ sql.js-httpvfs worker „ÇíÂàùÊúüÂåñ‰∏≠..."),console.log(`üìç Database URL: ${Ie}`);const t=`${Se}/sqlite.worker.js`,n=`${Se}/sql-wasm.wasm`;console.log("üîß Worker file URLs:"),console.log("  - workerUrl:",t),console.log("  - wasmUrl:",n),console.log("üîç Testing worker file accessibility...");try{const g=await fetch(t,{method:"HEAD"}),T=await fetch(n,{method:"HEAD"});if(console.log("  - Worker file status:",g.status,g.statusText),console.log("  - WASM file status:",T.status,T.statusText),!g.ok)throw new Error(`Worker file not accessible: ${g.status} ${g.statusText} at ${t}`);if(!T.ok)throw new Error(`WASM file not accessible: ${T.status} ${T.statusText} at ${n}`);console.log("‚úÖ All worker files are accessible")}catch(g){throw console.error("‚ùå Worker file accessibility check failed:",g),new Error(`Worker files not accessible: ${g.message}`)}let u=12730368,i=u;try{const g=await fetch(`${Se}/db/database-info.json`);g.ok&&(u=(await g.json()).size,console.log(`üìÑ Database info loaded: ${(u/1024/1024).toFixed(2)} MB (uncompressed)`))}catch{console.warn("‚ö†Ô∏è Database info not available, using default size")}try{console.log("üîç Detecting actual database file size from HTTP server...");const g=await fetch(Ie,{method:"HEAD"}),T=g.headers.get("content-length"),R=g.headers.get("content-encoding");T?(i=parseInt(T),console.log(`üìè Actual served file size: ${(i/1024/1024).toFixed(2)} MB`),R&&R!=="identity"&&(console.log(`‚ö†Ô∏è File is compressed with: ${R}`),console.log(`   Original size: ${(u/1024/1024).toFixed(2)} MB`),console.log(`   Compressed size: ${(i/1024/1024).toFixed(2)} MB`),console.log("   Using compressed size for sql.js-httpvfs compatibility"))):(console.warn("‚ö†Ô∏è Could not determine actual file size, using configured size"),i=u)}catch(g){console.warn("‚ö†Ô∏è Error detecting file size:",g),i=u}const m={from:"inline",config:{serverMode:"full",url:Ie,requestChunkSize:4096,cacheSizeKiB:2048,filename:"archimap.sqlite",debug:!1}};console.log("üîß Worker config:",m),console.log("üîß Worker URL:",t),console.log("üîß WASM URL:",n),console.log("üîß Config details:"),console.log("  - serverMode:",m.config.serverMode),console.log("  - url:",m.config.url),console.log("  - requestChunkSize:",m.config.requestChunkSize),console.log("  - cacheSizeKiB:",m.config.cacheSizeKiB),console.log("  - filename:",m.config.filename),console.log("  - size: AUTO-DETECT (GitHub Pages gzip workaround)"),console.log("  - detected compressed size:",i,`(${(i/1024/1024).toFixed(2)} MB)`);const d=new Promise((g,T)=>setTimeout(()=>T(new Error("Worker initialization timeout after 30 seconds")),3e4)),c=50*1024*1024,o=mr.createDbWorker([m],t,n,c);te=await Promise.race([o,d]),console.log("‚úÖ sql.js-httpvfs worker ÂàùÊúüÂåñÂÆå‰∫Ü");const y=await te.db.exec("SELECT sqlite_version()");console.log(`üîç SQLite „Éê„Éº„Ç∏„Éß„É≥: ${y[0]?.values[0][0]}`);const p=await te.db.exec("SELECT name FROM sqlite_master WHERE type='table'");if(p.length>0){console.log(`üìã Âà©Áî®ÂèØËÉΩ„Å™„ÉÜ„Éº„Éñ„É´Êï∞: ${p[0].values.length}`);try{const g=await te.db.exec("SELECT COUNT(*) FROM ZCDARCHITECTURE");g.length>0&&console.log(`üè¢ Âª∫ÁØâ„Éá„Éº„Çø‰ª∂Êï∞: ${g[0].values[0][0]} ‰ª∂`)}catch{console.log("üìã „ÉÜ„Éº„Éñ„É´ÊßãÈÄ†Á¢∫Ë™ç‰∏≠...")}}return te}catch(s){if(console.error("‚ùå „Éá„Éº„Çø„Éô„Éº„ÇπÂàùÊúüÂåñ„Ç®„É©„Éº:",s),te=null,s instanceof Error){const t=await ht().catch(()=>"unknown");let n=s.message;s.message.includes("timeout")?t==="very-slow"?n+=`

üì° Êé•Á∂öÈÄüÂ∫¶„ÅåÈùûÂ∏∏„Å´ÈÅÖ„ÅÑ„Åü„ÇÅ„ÄÅ„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÂàùÊúüÂåñ„Å´ÊôÇÈñì„Åå„Åã„Åã„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇWiFi„ÇÑ„Çà„ÇäÈ´òÈÄü„Å™Êé•Á∂ö„Çí„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ`:t==="slow"&&(n+=`

üì° Êé•Á∂öÈÄüÂ∫¶„ÅåÈÅÖ„ÅÑ„Åü„ÇÅ„ÄÅ„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÂàùÊúüÂåñ„Å´ÊôÇÈñì„Åå„Åã„Åã„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ`):(s.message.includes("fetch")||s.message.includes("network"))&&(n+=`

üåê „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÊé•Á∂ö„Å´ÂïèÈ°å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÊé•Á∂öÁä∂ÊÖã„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ`);const u=new Error(n);throw u.name=s.name,u}throw s}finally{rt=!1,_e=null}})(),_e),Dt=async(s,t=[])=>{try{if(te||await Rt(),!te)throw new Error("„Éá„Éº„Çø„Éô„Éº„Çπ„ÅåÂàùÊúüÂåñ„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì");return await te.db.exec(s,t)}catch(n){throw console.error("„ÇØ„Ç®„É™ÂÆüË°å„Ç®„É©„Éº:",n),n}},kt=s=>{if(!s||s.length===0)return[];const{columns:t,values:n}=s[0];return n.map(u=>{const i={};return t.forEach((m,d)=>{i[m]=u[d]}),i})},Je=async(s,t=[])=>{const n=await Dt(s,t);return kt(n)[0]},Le=async(s,t=[])=>{const n=await Dt(s,t);return kt(n)},$t=async s=>Je("SELECT * FROM ZCDARCHITECTURE WHERE Z_PK = ?",[s]),Wt=async(s=1,t=12,n="",u="ZAR_TITLE",i="asc",m={})=>{const d=(s-1)*t;let c="1=1";const o=[];n&&(c+=" AND (ZAR_TITLE LIKE ? OR ZAR_ADDRESS LIKE ? OR ZAR_DESCRIPTION LIKE ? OR ZAR_ARCHITECT LIKE ?)",o.push(`%${n}%`,`%${n}%`,`%${n}%`,`%${n}%`)),m.architect&&(c+=" AND (ZAR_ARCHITECT LIKE ? OR ZAR_ARCHITECT_ENG LIKE ?)",o.push(`%${m.architect}%`,`%${m.architect}%`)),m.location&&(c+=" AND ZAR_ADDRESS LIKE ?",o.push(`%${m.location}%`)),m.prefecture&&(c+=" AND ZAR_PREFECTURE = ?",o.push(m.prefecture)),m.yearFrom&&(c+=" AND ZAR_YEAR >= ?",o.push(m.yearFrom)),m.yearTo&&(c+=" AND ZAR_YEAR <= ?",o.push(m.yearTo)),m.tags&&m.tags.length>0&&(c+=" AND ZAR_TAG LIKE ?",o.push(`%${m.tags.join("%")}%`));const y=`
    SELECT COUNT(*) as total
    FROM ZCDARCHITECTURE
    WHERE ${c}
  `,p=`
    SELECT *
    FROM ZCDARCHITECTURE
    WHERE ${c}
    ORDER BY ${u} ${i==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,g=[...o,t,d];try{const R=(await Je(y,o))?.total||0;return{results:await Le(p,g),total:R,page:s,limit:t,totalPages:Math.ceil(R/t)}}catch(T){throw console.error("Âª∫ÁØâ‰ΩúÂìÅ„Éá„Éº„ÇøÂèñÂæó„Ç®„É©„Éº:",T),T}},_t=async(s,t={})=>{let n=`
    ZAR_LATITUDE BETWEEN ? AND ?
    AND ZAR_LONGITUDE BETWEEN ? AND ?
    AND ZAR_LATITUDE IS NOT NULL
    AND ZAR_LONGITUDE IS NOT NULL
  `;const u=[s.south,s.north,s.west,s.east];t.searchTerm&&(n+=" AND (ZAR_TITLE LIKE ? OR ZAR_ADDRESS LIKE ? OR ZAR_ARCHITECT LIKE ?)",u.push(`%${t.searchTerm}%`,`%${t.searchTerm}%`,`%${t.searchTerm}%`)),t.architect&&(n+=" AND (ZAR_ARCHITECT LIKE ? OR ZAR_ARCHITECT_ENG LIKE ?)",u.push(`%${t.architect}%`,`%${t.architect}%`)),t.yearFrom&&(n+=" AND ZAR_YEAR >= ?",u.push(t.yearFrom)),t.yearTo&&(n+=" AND ZAR_YEAR <= ?",u.push(t.yearTo)),t.tags&&t.tags.length>0&&(n+=" AND ZAR_TAG LIKE ?",u.push(`%${t.tags.join("%")}%`));const i=`
    SELECT *
    FROM ZCDARCHITECTURE
    WHERE ${n}
    LIMIT 500
  `;return Le(i,u)},Ar=Object.freeze(Object.defineProperty({__proto__:null,getAllArchitectures:Wt,getArchitectureById:$t,getArchitectureForMap:_t},Symbol.toStringTag,{value:"Module"})),Ir=()=>{const[s,t]=x.useState([]),[n,u]=x.useState(!0),[i,m]=x.useState(0),[d,c]=x.useState(1),[o,y]=x.useState(""),[p,g]=x.useState(""),[T,R]=x.useState([]),[D,L]=x.useState([]),[v,Z]=x.useState([]),[f,b]=x.useState("year_desc"),[j,I]=x.useState({}),[$,q]=x.useState(null),[A,je]=x.useState(""),[ee,de]=x.useState({}),ne=12,K=Qe(),V=Ve();x.useEffect(()=>{(async()=>{try{Z([])}catch(C){console.error("„Çø„Ç∞ÂèñÂæó„Ç®„É©„Éº:",C)}})()},[]),x.useEffect(()=>{const h=new URLSearchParams(K.search),C=h.get("tag"),S=h.get("search"),F=h.get("year"),Q=h.get("prefecture"),Y=h.get("category"),O=h.get("architect"),W=h.get("sort");if(W&&b(W),C){const w=C.split(",").map(a=>a.trim()).filter(a=>a),P=new Set,J=[];w.forEach(a=>{const E=a.match(/\d{4}Âπ¥\d{1,2}ÊúàÂè∑?/);if(E){const k=a.replace(E[0],"").trim();k&&(P.add(k),J.push(a))}else P.add(a)}),R(Array.from(P)),L(J),g(C),y(`tag:${C}`),N(1,`tag:${C}`,W||f)}else F?(y(`year:${F}`),N(1,`year:${F}`,W||f)):Q?(y(`prefecture:${Q}`),N(1,`prefecture:${Q}`,W||f)):Y?(y(`category:${Y}`),N(1,`category:${Y}`,W||f)):O?(y(`architect:${O}`),N(1,`architect:${O}`,W||f)):S?(y(S),N(1,S,W||f)):N(1,o,W||f)},[K.search]);const N=async(h,C=o,S=f)=>{u(!0);try{const F=await Wt(h,ne,C,S);t(F.items),m(F.total),c(h)}catch(F){console.error("Error fetching architectures:",F)}finally{u(!1)}},le=(h,C)=>{c(C),N(C,o,f),window.scrollTo(0,0)},ye=h=>{y(h.target.value)},he=async(h,C)=>{q(h.currentTarget),je(C);try{const S=[];de(F=>({...F,[C]:S}))}catch(S){console.error(`Failed to get years for tag ${C}:`,S)}},xe=()=>{q(null),je("")},Re=h=>{const C=h?`${A}${h}`:A;let S=[...D];const F=S.findIndex(w=>w.startsWith(A)&&(w===A||w.match(new RegExp(`^${A}\\d{4}Âπ¥\\d{1,2}ÊúàÂè∑?`))||w.match(new RegExp(`^${A}\\d{4}Âπ¥Â∫¶?`))||w.match(new RegExp(`^${A}Á¨¨\\d+Âõû`))||w.match(new RegExp(`^${A}\\(\\d{4}\\)`))));F>=0?h?S[F]=C:S.splice(F,1):h&&S.push(C),L(S),xe();const Q=[...T];Q.includes(A)||Q.push(A);const Y=[...Q,...S].filter((w,P,J)=>J.indexOf(w)===P&&!S.some(a=>a!==w&&a.startsWith(w))).join(",");g(Y);const O=`tag:${Y}`;y(O),N(1,O,f);const W=new URLSearchParams;W.set("tag",Y),f!=="year_desc"&&W.set("sort",f),V({search:W.toString()})},De=(h,C)=>{const S=T.filter(Y=>!C.includes(Y));let F=[...D].filter(Y=>!S.some(O=>Y.startsWith(O)));const Q=C.filter(Y=>!T.includes(Y));if(Q.length>0&&Q.forEach(async Y=>{if(!ee[Y])try{const O=[];if(de(W=>({...W,[Y]:O})),O&&O.length===1){const W=`${Y}${O[0]}`;F.push(W)}}catch(O){console.error(`Failed to get years for tag ${Y}:`,O)}}),R(C),L(F),C.length>0||F.length>0){const Y=[...C,...F].filter((w,P,J)=>J.indexOf(w)===P&&!F.some(a=>a!==w&&a.startsWith(w))).join(",");g(Y);const O=`tag:${Y}`;y(O),N(1,O,f);const W=new URLSearchParams;W.set("tag",Y),f!=="year_desc"&&W.set("sort",f),V({search:W.toString()})}else ve()},ue=h=>{const C=h.target.value;b(C),N(d,o,C);const S=new URLSearchParams(K.search);S.set("sort",C),V({search:S.toString()})},me=()=>{c(1),N(1,o,f);const h=new URLSearchParams;if(f!=="year_desc"&&h.set("sort",f),o.startsWith("tag:")){const C=o.substring(4).trim();h.set("tag",C)}else if(o.startsWith("year:")){const C=o.substring(5).trim();h.set("year",C)}else if(o.startsWith("prefecture:")){const C=o.substring(11).trim();h.set("prefecture",C)}else if(o.startsWith("category:")){const C=o.substring(9).trim();h.set("category",C)}else if(o.startsWith("architect:")){const C=o.substring(10).trim();h.set("architect",C)}else o&&h.set("search",o);V({search:h.toString()})},ve=()=>{g(""),y(""),R([]),L([]),c(1),N(1,"",f);const h=new URLSearchParams;f!=="year_desc"&&h.set("sort",f),V({search:h.toString()})},ce=Math.ceil(i/ne);return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"Âª∫ÁØâ‰ΩúÂìÅ‰∏ÄË¶ß"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Ee,{fullWidth:!0,label:"Âª∫ÁØâ‰ΩúÂìÅÂêç„ÄÅ‰ΩèÊâÄ„ÄÅÂª∫ÁØâÂÆ∂„ÅßÊ§úÁ¥¢",value:o,onChange:ye,onKeyPress:h=>h.key==="Enter"&&me(),InputProps:{startAdornment:e.jsx(et,{position:"start",children:e.jsx(Ge,{})})}}),e.jsx(_,{variant:"contained",onClick:me,sx:{minWidth:"120px"},children:"Ê§úÁ¥¢"})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(ft,{multiple:!0,id:"tags-selector",options:v,value:T,onChange:De,renderInput:h=>e.jsx(Ee,{...h,variant:"outlined",label:"„Çø„Ç∞„ÅßÁµû„ÇäËæº„Åø",placeholder:"„Çø„Ç∞„ÇíÈÅ∏Êäû"}),renderTags:(h,C)=>h.map((S,F)=>{const Q=D.some(w=>w.startsWith(S)&&w!==S),Y=!!(ee[S]&&ee[S].length>0),O=D.find(w=>w.startsWith(S)&&w!==S);let W="";if(O){const w=O.substring(S.length);w.match(/\d{4}Âπ¥\d{1,2}ÊúàÂè∑?/)?W=w.replace(/^(\d{4})/,(P,J)=>`'${J.substring(2)}`):w.match(/\d{4}Âπ¥Â∫¶?/)?W=w.replace(/^(\d{4})/,(P,J)=>`'${J.substring(2)}`):w.match(/Á¨¨\d+Âõû/)?W=w:w.match(/\(\d{4}\)/)?W=w.replace(/\((\d{4})\)/,(P,J)=>`'${J.substring(2)}`):W=w}return e.jsx(B,{label:e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[S,O&&e.jsx(l,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:W}),Y&&e.jsx(pt,{fontSize:"small"})]}),...C({index:F}),color:Q?"primary":"default",variant:"outlined",onClick:w=>{w.stopPropagation(),he(w,S)},onDelete:w=>{C({index:F}).onDelete(w)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}},S)}),sx:{flex:2}}),e.jsxs(jt,{sx:{minWidth:200,flex:1},children:[e.jsx(yt,{id:"sort-select-label",children:"‰∏¶„Å≥Êõø„Åà"}),e.jsxs(bt,{labelId:"sort-select-label",id:"sort-select",value:f,label:"‰∏¶„Å≥Êõø„Åà",onChange:ue,startAdornment:e.jsx(et,{position:"start",children:e.jsx(Gt,{})}),children:[e.jsx(re,{value:"year_desc",children:"Âπ¥‰ª£ÔºàÊñ∞„Åó„ÅÑÈ†ÜÔºâ"}),e.jsx(re,{value:"year_asc",children:"Âπ¥‰ª£ÔºàÂè§„ÅÑÈ†ÜÔºâ"}),e.jsx(re,{value:"name_asc",children:"ÂêçÂâçÔºàÊòáÈ†ÜÔºâ"}),e.jsx(re,{value:"name_desc",children:"ÂêçÂâçÔºàÈôçÈ†ÜÔºâ"}),e.jsx(re,{value:"architect_asc",children:"Âª∫ÁØâÂÆ∂ÔºàÊòáÈ†ÜÔºâ"}),e.jsx(re,{value:"architect_desc",children:"Âª∫ÁØâÂÆ∂ÔºàÈôçÈ†ÜÔºâ"})]})]})]}),e.jsx(Ct,{open:!!$,anchorEl:$,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(r,{sx:{p:2,maxHeight:300,width:"250px",overflowY:"auto"},children:[e.jsxs(l,{variant:"subtitle2",sx:{mb:1},children:[A," „ÅÆÈÅ∏Êäû:"]}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(B,{label:"ÊåáÂÆö„Å™„Åó",onClick:()=>Re(""),variant:"outlined",size:"small",color:T.includes(A)&&!D.some(h=>h.startsWith(A)&&h!==A)?"primary":"default"}),ee[A]?.map(h=>{let C=h,S="default";return D.some(F=>F===`${A}${h}`)&&(S="primary"),e.jsx(B,{label:C,onClick:()=>Re(h),variant:"outlined",size:"small",color:S,sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},h)})]})]})}),(p||o)&&e.jsx(r,{sx:{mb:3},children:e.jsx(nt,{severity:"info",action:e.jsx(_,{color:"inherit",size:"small",onClick:ve,children:"„ÇØ„É™„Ç¢"}),children:p?`„Çø„Ç∞„Äå${p}„Äç„ÅßÁµû„ÇäËæº„Åø‰∏≠`:`„Äå${o}„Äç„ÅßÊ§úÁ¥¢‰∏≠`})}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[i," ‰ª∂„ÅÆÂª∫ÁØâ‰ΩúÂìÅ"]}),ce>1&&e.jsx(He,{count:ce,page:d,onChange:le,color:"primary",size:"small"})]})]}),n?e.jsx(r,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(e.Fragment,{children:[s.length===0?e.jsxs(r,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{variant:"h6",children:"Âª∫ÁØâ‰ΩúÂìÅ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Ê§úÁ¥¢Êù°‰ª∂„ÇíÂ§âÊõ¥„Åó„Å¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ"})]}):e.jsx(H,{container:!0,spacing:3,children:s.map(h=>e.jsx(H,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(qe,{component:M,to:`/architecture/${h.id}`,sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%"},children:e.jsxs(pe,{sx:{width:"100%",flexGrow:1},children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h2",children:h.name}),e.jsxs(r,{sx:{display:"flex",flexDirection:"column",gap:1,mt:2},children:[h.architectName&&e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Et,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:h.architectName})]}),h.city&&e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ze,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:h.city})]}),h.completedYear>0&&e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Tt,{fontSize:"small",color:"action"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[h.completedYear,"Âπ¥"]})]})]})]})})})},h.id))}),ce>1&&e.jsx(r,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(He,{count:ce,page:d,onChange:le,color:"primary"})})]})]})};delete wt.Icon.Default.prototype._getIconUrl;wt.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const Ue=({markers:s=[],center:t,zoom:n=13,height:u="500px",singleMarker:i})=>{const[m,d]=x.useState(t);return x.useEffect(()=>{i&&i.latitude&&i.longitude?d([i.latitude,i.longitude]):t&&d(t)},[i,t]),e.jsx("div",{style:{height:u,width:"100%",marginBottom:"20px"},children:e.jsxs(gr,{center:m,zoom:n,style:{height:"100%",width:"100%"},children:[e.jsx(fr,{attribution:'¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.map((c,o)=>c.latitude&&c.longitude?e.jsx(at,{position:[c.latitude,c.longitude],children:e.jsxs(it,{children:[e.jsx(l,{variant:"h6",children:c.name}),e.jsx(l,{variant:"body2",children:c.location}),e.jsx(_,{component:M,to:`/architecture/${c.id}`,size:"small",variant:"outlined",sx:{mt:1},children:"Ë©≥Á¥∞„ÇíË¶ã„Çã"})]})},`marker-${c.id||o}`):null),i&&i.latitude&&i.longitude&&e.jsx(at,{position:[i.latitude,i.longitude],children:e.jsxs(it,{children:[e.jsx(l,{variant:"h6",children:i.name}),e.jsx(l,{variant:"body2",children:i.location})]})})]})})},wr=()=>{const{id:s}=At(),[t,n]=x.useState(null),[u,i]=x.useState(!0),[m,d]=x.useState(null),c=Ve();if(x.useEffect(()=>{(async()=>{i(!0);try{const L=await $t(s);if(!L)throw new Error("Âª∫ÁØâ‰ΩúÂìÅ„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü");n(L)}catch(L){console.error("Error fetching work:",L),d(L.message)}finally{i(!1)}})()},[s]),u)return e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(Te,{})});if(m)return e.jsxs(se,{children:[e.jsxs(l,{variant:"h5",color:"error",sx:{textAlign:"center",my:4},children:["„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü: ",m]}),e.jsx(_,{variant:"contained",component:M,to:"/architecture",startIcon:e.jsx(Ye,{}),children:"Âª∫ÁØâ‰ΩúÂìÅ‰∏ÄË¶ß„Å´Êàª„Çã"})]});if(!t)return e.jsxs(se,{children:[e.jsx(l,{variant:"h5",sx:{textAlign:"center",my:4},children:"Âª∫ÁØâ‰ΩúÂìÅ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü"}),e.jsx(_,{variant:"contained",component:M,to:"/architecture",startIcon:e.jsx(Ye,{}),children:"Âª∫ÁØâ‰ΩúÂìÅ‰∏ÄË¶ß„Å´Êàª„Çã"})]});const o=t.tag?t.tag.split(",").filter(D=>D.trim()!==""&&!D.includes("„ÅÆËøΩÂä†Âª∫ÁØâ")):[],y=o.find(D=>D.includes("Êñ∞Âª∫ÁØâ")),p=y?y.replace("Êñ∞Âª∫ÁØâ",""):"",g=D=>{console.log(`„Çø„Ç∞„Åå„ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„Åæ„Åó„Åü: ${D}`),c(`/architecture?tag=${encodeURIComponent(D)}`)},T=(D,L)=>{const v=`${D} ${L?.name||""} Âª∫ÁØâ`;return`https://www.google.com/search?q=${encodeURIComponent(v)}&tbm=isch`},R=D=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(D)}`;return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(_,{variant:"outlined",component:M,to:"/architecture",startIcon:e.jsx(Ye,{}),sx:{mb:3},children:"Âª∫ÁØâ‰ΩúÂìÅ‰∏ÄË¶ß„Å´Êàª„Çã"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsxs(r,{sx:{mb:2},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"ÁÑ°È°å"}),t.location&&e.jsxs(l,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:[e.jsx(Ze,{fontSize:"small",sx:{verticalAlign:"middle",mr:.5}}),t.location]}),e.jsxs(r,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[t.completedYear!==0&&e.jsx(B,{icon:e.jsx(Tt,{}),label:`${t.completedYear}Âπ¥`,variant:"outlined",size:"small",onClick:()=>c(`/architecture?year=${t.completedYear}`),clickable:!0}),t.city&&e.jsx(B,{icon:e.jsx(Ze,{}),label:t.city,variant:"outlined",size:"small",onClick:()=>c(`/architecture?prefecture=${encodeURIComponent(t.city)}`),clickable:!0}),t.architect&&t.architect.name&&e.jsx(B,{icon:e.jsx(Et,{}),label:t.architect.name,component:M,to:`/architects/${t.architect.id}`,clickable:!0,color:"primary",size:"small"}),t.bigCategory&&e.jsx(B,{icon:e.jsx(tt,{}),label:t.bigCategory,variant:"outlined",size:"small",onClick:()=>c(`/architecture?category=${encodeURIComponent(t.bigCategory)}`),clickable:!0}),t.category&&t.category!==t.bigCategory&&e.jsx(B,{icon:e.jsx(tt,{}),label:t.category,variant:"outlined",size:"small",onClick:()=>c(`/architecture?category=${encodeURIComponent(t.category)}`),clickable:!0})]}),o.length>0&&e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:o.map((D,L)=>e.jsx(B,{icon:e.jsx(vt,{}),label:D,onClick:()=>g(D),clickable:!0,color:"secondary",variant:"outlined",size:"small"},L))})]}),e.jsx(Ke,{sx:{my:3}}),e.jsxs(r,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.shinkenchikuUrl&&e.jsx(Ce,{title:"Êñ∞Âª∫ÁØâ„Éá„Éº„Çø„ÅßË¶ã„Çã",children:e.jsxs(_,{variant:"contained",href:t.shinkenchikuUrl,target:"_blank",rel:"noopener noreferrer",size:"small",sx:{backgroundColor:"#003366",color:"#ffffff","&:hover":{backgroundColor:"#002244"}},children:[e.jsx(r,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mr:.5},children:e.jsx("img",{src:"https://data.shinkenchiku.online/favicon.ico",alt:"Êñ∞Âª∫ÁØâ„Éá„Éº„Çø",style:{height:"16px",width:"auto",marginRight:"4px"}})}),p&&e.jsx(l,{variant:"caption",children:p})]})}),e.jsx(Ce,{title:"GoogleÁîªÂÉèÊ§úÁ¥¢",children:e.jsx(_,{href:T(t.name,t.architect),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(qt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"ÁîªÂÉè"})}),e.jsx(Ce,{title:"Wikipedia„ÅßÊ§úÁ¥¢",children:e.jsx(_,{href:R(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Kt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),t.description&&e.jsxs(r,{sx:{mt:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Ê¶ÇË¶Å"}),e.jsx(l,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-line"},children:t.description})]}),t.latitude&&t.longitude&&e.jsxs(r,{sx:{mt:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"‰ΩçÁΩÆÊÉÖÂ†±"}),e.jsx(r,{sx:{height:"400px",width:"100%",mt:2,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(Ue,{singleMarker:{id:t.id||0,latitude:t.latitude,longitude:t.longitude,name:t.name,location:t.location},center:[t.latitude,t.longitude],zoom:15})})]})]})]})},Sr=async s=>Je("SELECT * FROM ZCDARCHITECT WHERE ZAR_ID = ?",[s]),Rr=async(s=1,t=12,n="",u=[],i="ZAR_NAME",m="asc",d={})=>{const c=(s-1)*t;let o="1=1";const y=[];n&&(o+=" AND (ZAR_NAME LIKE ? OR ZAR_KANA LIKE ? OR ZAR_NAMEENG LIKE ?)",y.push(`%${n}%`,`%${n}%`,`%${n}%`)),d.nationality&&(o+=" AND ZAR_NATIONALITY = ?",y.push(d.nationality)),d.category&&(o+=" AND ZAR_CATEGORY = ?",y.push(d.category)),d.school&&(o+=" AND ZAR_SCHOOL = ?",y.push(d.school)),d.birthYearFrom&&(o+=" AND ZAR_BIRTHYEAR >= ?",y.push(d.birthYearFrom)),d.birthYearTo&&(o+=" AND ZAR_BIRTHYEAR <= ?",y.push(d.birthYearTo)),d.deathYear&&(o+=" AND ZAR_DEATHYEAR = ?",y.push(d.deathYear));let p="";u&&u.length>0&&(p=`
      INNER JOIN ZCDARCHITECT_TAG ON ZCDARCHITECT.ZAR_ID = ZCDARCHITECT_TAG.ARCHITECT_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECT_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,o+=" AND ZCDTAG.TAG_NAME IN (",o+=u.map(()=>"?").join(","),o+=")",y.push(...u));const g=`
    SELECT COUNT(DISTINCT ZCDARCHITECT.ZAR_ID) as total
    FROM ZCDARCHITECT
    ${p}
    WHERE ${o}
  `,T=`
    SELECT DISTINCT ZCDARCHITECT.*
    FROM ZCDARCHITECT
    ${p}
    WHERE ${o}
    ORDER BY ${i} ${m==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,R=[...y,t,c];try{const L=(await Je(g,y))?.total||0;return{results:await Le(T,R),total:L,page:s,limit:t,totalPages:Math.ceil(L/t)}}catch(D){throw console.error("Âª∫ÁØâÂÆ∂„Éá„Éº„ÇøÂèñÂæó„Ç®„É©„Éº:",D),D}},Dr=async()=>Le(`
    SELECT TAG_ID, TAG_NAME, COUNT(ARCHITECT_ID) as TAG_COUNT
    FROM ZCDTAG
    LEFT JOIN ZCDARCHITECT_TAG ON ZCDTAG.TAG_ID = ZCDARCHITECT_TAG.TAG_ID
    GROUP BY ZCDTAG.TAG_ID, ZCDTAG.TAG_NAME
    ORDER BY TAG_COUNT DESC, TAG_NAME
  `),kr=()=>{console.log("ArchitectsPage „Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„Åå„É¨„É≥„ÉÄ„É™„É≥„Ç∞„Åï„Çå„Åæ„Åó„Åü");const[s,t]=x.useState([]),[n,u]=x.useState(!0),[i,m]=x.useState(0),[d,c]=x.useState(0),[o,y]=x.useState(1),[p,g]=x.useState(""),[T,R]=x.useState([]),[D,L]=x.useState([]),[v,Z]=x.useState([]),[f,b]=x.useState("name"),[j,I]=x.useState("asc"),[$,q]=x.useState(null),[A,je]=x.useState(""),[ee,de]=x.useState({}),[ne,K]=x.useState(""),[V,N]=x.useState(""),[le,ye]=x.useState(""),[he,xe]=x.useState(""),[Re,De]=x.useState(""),[ue,me]=x.useState(""),ve=Ve(),ce=Qe(),h=new URLSearchParams(ce.search);x.useEffect(()=>{console.log("tagMenuAnchorEl Áä∂ÊÖãÂ§âÊõ¥:",!!$)},[$]),x.useEffect(()=>{console.log("„Çø„Ç∞Ë™≠„ÅøËæº„Åø„ÅÆuseEffect„ÅåÂÆüË°å„Åï„Çå„Åæ„Åó„Åü"),(async()=>{try{console.log("Âª∫ÁØâÂÆ∂„Çø„Ç∞ÂèñÂæóÈñãÂßã");const E=await Dr();console.log("ÂèñÂæó„Åó„ÅüÂª∫ÁØâÂÆ∂„Çø„Ç∞:",E),Z(["ÂõΩÁ±ç","„Ç´„ÉÜ„Ç¥„É™„Éº","Â≠¶Ê†°","ÁîüÂπ¥","Ê≤°Âπ¥"])}catch(E){console.error("„Çø„Ç∞ÂèñÂæó„Ç®„É©„Éº:",E)}})()},[]),x.useEffect(()=>{console.log("Âª∫ÁØâÂÆ∂„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„ÅÆuseEffect„ÅåÂÆüË°å„Åï„Çå„Åæ„Åó„Åü",ce.search),(async()=>{u(!0);try{const E=parseInt(h.get("page")||"1"),k=h.get("search")||"",X=h.get("tags")?h.get("tags").split(","):[],z=h.get("sortBy")||"name",U=h.get("sortOrder")||"asc",oe=h.get("nationality")||"",Oe=h.get("category")||"",Be=h.get("school")||"",ke=h.get("birthYearFrom")||"",$e=h.get("birthYearTo")||"",We=h.get("deathYear")||"";console.log("URL„Åã„ÇâË™≠„ÅøÂèñ„Å£„Åü„Éë„É©„É°„Éº„Çø:",{page:E,search:k,tags:X,sort:z,order:U,nat:oe,cat:Oe,sch:Be,birthFrom:ke,birthTo:$e,death:We}),y(E),g(k),R(X),b(z),I(U),K(oe),N(Oe),ye(Be),xe(ke),De($e),me(We),console.log("Âª∫ÁØâÂÆ∂„Éá„Éº„ÇøÂèñÂæóÈñãÂßã:",{page:E,search:k,tags:X,sort:z,order:U,nat:oe,cat:Oe,sch:Be,birthFrom:ke,birthTo:$e,death:We});const ze=await Rr(E,10,k,X,z,U,oe,Oe,Be,ke?parseInt(ke):0,$e?parseInt($e):0,We?parseInt(We):0);console.log("ÂèñÂæó„Åó„ÅüÂª∫ÁØâÂÆ∂„Éá„Éº„Çø:",ze),t(ze.items),m(ze.totalPages),c(ze.total)}catch(E){console.error("Âª∫ÁØâÂÆ∂„Éá„Éº„ÇøÂèñÂæó„Ç®„É©„Éº:",E)}finally{u(!1)}})()},[ce.search]);const C=async a=>{console.log(`${a}„ÅÆÂπ¥Â∫¶ÂèñÂæóÈñãÂßã`);let E="";if(a==="ÂõΩÁ±ç"?E="SELECT DISTINCT ZAT_NATIONALITY as value FROM ZCDARCHITECT WHERE ZAT_NATIONALITY != '' ORDER BY ZAT_NATIONALITY":a==="„Ç´„ÉÜ„Ç¥„É™„Éº"?E="SELECT DISTINCT ZAT_CATEGORY as value FROM ZCDARCHITECT WHERE ZAT_CATEGORY != '' ORDER BY ZAT_CATEGORY":a==="Â≠¶Ê†°"?E="SELECT DISTINCT ZAT_SCHOOL as value FROM ZCDARCHITECT WHERE ZAT_SCHOOL != '' ORDER BY ZAT_SCHOOL":a==="ÁîüÂπ¥"?E="SELECT DISTINCT ZAT_BIRTHYEAR as value FROM ZCDARCHITECT WHERE ZAT_BIRTHYEAR > 0 ORDER BY ZAT_BIRTHYEAR DESC":a==="Ê≤°Âπ¥"&&(E="SELECT DISTINCT ZAT_DEATHYEAR as value FROM ZCDARCHITECT WHERE ZAT_DEATHYEAR > 0 ORDER BY ZAT_DEATHYEAR DESC"),!E)return[];try{return(await Le(E)).map(X=>String(X.value)).filter(Boolean)}catch(k){return console.error(`${a}„ÅÆÂÄ§ÂèñÂæó„Ç®„É©„Éº:`,k),[]}},S=async(a,E)=>{if(console.log(`${E}„ÅÆÂπ¥Â∫¶„É°„Éã„É•„Éº„ÇíÈñã„Åè`,a.currentTarget),q(a.currentTarget),je(E),!ee[E])try{const k=await C(E);console.log(`ÂèñÂæó„Åó„Åü${E}„ÅÆÂπ¥Â∫¶:`,k),de(X=>({...X,[E]:k}))}catch(k){console.error(`${E}„ÅÆÂπ¥Â∫¶ÂèñÂæó„Ç®„É©„Éº:`,k)}},F=()=>{console.log("Âπ¥Â∫¶„É°„Éã„É•„Éº„ÇíÈñâ„Åò„Çã"),q(null),je("")},Q=a=>{console.log(`Âπ¥Â∫¶ÈÅ∏Êäû: ${a} („Çø„Ç∞: ${A})`),A==="ÂõΩÁ±ç"?K(a):A==="„Ç´„ÉÜ„Ç¥„É™„Éº"?N(a):A==="Â≠¶Ê†°"?ye(a):A==="ÁîüÂπ¥"?xe(a):A==="Ê≤°Âπ¥"&&me(a),F(),P()},Y=(a,E)=>{console.log("„Çø„Ç∞ÈÅ∏ÊäûÂ§âÊõ¥:",E),R(E);const k=T.filter(z=>!E.includes(z));for(const z of k)z==="ÂõΩÁ±ç"?K(""):z==="„Ç´„ÉÜ„Ç¥„É™„Éº"?N(""):z==="Â≠¶Ê†°"?ye(""):z==="ÁîüÂπ¥"?(xe(""),De("")):z==="Ê≤°Âπ¥"&&me("");const X=E.filter(z=>!T.includes(z));X.length>0&&X.forEach(async z=>{if(!ee[z])try{const U=await C(z);de(oe=>({...oe,[z]:U}))}catch(U){console.error(`${z}„ÅÆÂπ¥Â∫¶ÂèñÂæó„Ç®„É©„Éº:`,U)}}),P()},O=(a,E)=>{console.log(`„Éö„Éº„Ç∏Â§âÊõ¥: ${E}`),y(E);const k=new URLSearchParams(ce.search);k.set("page",E.toString()),ve({search:k.toString()})},W=()=>{console.log(`Ê§úÁ¥¢ÂÆüË°å: ${p}`),P()},w=()=>{console.log("Ê§úÁ¥¢Êù°‰ª∂„Çí„ÇØ„É™„Ç¢"),g(""),R([]),L([]),K(""),N(""),ye(""),xe(""),De(""),me(""),y(1);const a=new URLSearchParams;f!=="name"&&a.set("sortBy",f),j!=="asc"&&a.set("sortOrder",j),ve({search:a.toString()})},P=()=>{console.log("URL„Å®Ê§úÁ¥¢„ÇíÊõ¥Êñ∞");const a=new URLSearchParams;o>1&&a.set("page",o.toString()),p&&a.set("search",p),T.length>0&&a.set("tags",T.join(",")),f!=="name"&&a.set("sortBy",f),j!=="asc"&&a.set("sortOrder",j),ne&&a.set("nationality",ne),V&&a.set("category",V),le&&a.set("school",le),he&&a.set("birthYearFrom",he),Re&&a.set("birthYearTo",Re),ue&&a.set("deathYear",ue),console.log("Êñ∞„Åó„ÅÑURL„Éë„É©„É°„Éº„Çø:",a.toString()),ve({search:a.toString()})},J=()=>{const a=[];return ne&&a.push({label:`ÂõΩÁ±ç: ${ne}`,onDelete:()=>{K(""),P()}}),he&&a.push({label:`ÁîüÂπ¥: ${he}`,onDelete:()=>{xe(""),P()}}),ue&&a.push({label:`Ê≤°Âπ¥: ${ue}`,onDelete:()=>{me(""),P()}}),V&&a.push({label:`„Ç´„ÉÜ„Ç¥„É™„Éº: ${V}`,onDelete:()=>{N(""),P()}}),le&&a.push({label:`Â≠¶Ê†°: ${le}`,onDelete:()=>{ye(""),P()}}),a.length===0&&!p&&T.length===0?null:e.jsx(r,{sx:{mb:3},children:e.jsx(nt,{severity:"info",action:e.jsx(_,{color:"inherit",size:"small",onClick:w,children:"„ÇØ„É™„Ç¢"}),children:a.length>0?`„Éï„Ç£„É´„Çø„Éº: ${a.map(E=>E.label).join(", ")}`:p?`„Äå${p}„Äç„ÅßÊ§úÁ¥¢‰∏≠`:T.length>0?`„Çø„Ç∞„Äå${T.join(", ")}„Äç„ÅßÁµû„ÇäËæº„Åø‰∏≠`:""})})};return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"Âª∫ÁØâÂÆ∂‰∏ÄË¶ß"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Ee,{fullWidth:!0,label:"Âª∫ÁØâÂÆ∂Âêç„ÄÅÂõΩÁ±ç„ÄÅ„Ç´„ÉÜ„Ç¥„É™„Éº„ÅßÊ§úÁ¥¢",value:p,onChange:a=>g(a.target.value),onKeyPress:a=>a.key==="Enter"&&W(),InputProps:{startAdornment:e.jsx(et,{position:"start",children:e.jsx(Ge,{})})}}),e.jsx(_,{variant:"contained",onClick:W,sx:{minWidth:"120px"},children:"Ê§úÁ¥¢"})]}),e.jsxs(r,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(ft,{multiple:!0,id:"tags-selector",options:v,value:T,onChange:Y,fullWidth:!0,renderInput:a=>e.jsx(Ee,{...a,variant:"outlined",label:"„Çø„Ç∞„ÅßÁµû„ÇäËæº„Åø",placeholder:"„Çø„Ç∞„ÇíÈÅ∏Êäû"}),renderTags:(a,E)=>a.map((k,X)=>{const z=!!(ee[k]&&ee[k].length>0);let U="";return k==="ÂõΩÁ±ç"?U=ne:k==="„Ç´„ÉÜ„Ç¥„É™„Éº"?U=V:k==="Â≠¶Ê†°"?U=le:k==="ÁîüÂπ¥"?U=he:k==="Ê≤°Âπ¥"&&(U=ue),e.jsx(B,{label:e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[k,U&&e.jsx(l,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:U}),z&&e.jsx(pt,{fontSize:"small"})]}),...E({index:X}),color:U?"primary":"default",variant:"outlined",onClick:oe=>{oe.stopPropagation(),S(oe,k)},onDelete:oe=>{E({index:X}).onDelete(oe)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap"}}},k)})}),e.jsxs(jt,{sx:{minWidth:200},children:[e.jsx(yt,{id:"sort-select-label",children:"‰∏¶„Å≥Êõø„Åà"}),e.jsxs(bt,{labelId:"sort-select-label",value:`${f}_${j}`,label:"‰∏¶„Å≥Êõø„Åà",onChange:a=>{const[E,k]=a.target.value.split("_");b(E),I(k),P()},children:[e.jsx(re,{value:"name_asc",children:"ÂêçÂâç (ÊòáÈ†Ü)"}),e.jsx(re,{value:"name_desc",children:"ÂêçÂâç (ÈôçÈ†Ü)"}),e.jsx(re,{value:"birthYear_asc",children:"ÁîüÂπ¥ (ÊòáÈ†Ü)"}),e.jsx(re,{value:"birthYear_desc",children:"ÁîüÂπ¥ (ÈôçÈ†Ü)"}),e.jsx(re,{value:"nationality_asc",children:"ÂõΩÁ±ç (ÊòáÈ†Ü)"}),e.jsx(re,{value:"nationality_desc",children:"ÂõΩÁ±ç (ÈôçÈ†Ü)"})]})]})]}),e.jsx(Ct,{open:!!$,anchorEl:$,onClose:F,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsxs(r,{sx:{p:2,width:300,maxHeight:400,overflow:"auto"},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,children:A==="ÂõΩÁ±ç"?"ÂõΩÁ±ç„ÇíÈÅ∏Êäû":A==="„Ç´„ÉÜ„Ç¥„É™„Éº"?"„Ç´„ÉÜ„Ç¥„É™„Éº„ÇíÈÅ∏Êäû":A==="Â≠¶Ê†°"?"Â≠¶Ê†°„ÇíÈÅ∏Êäû":A==="ÁîüÂπ¥"?"ÁîüÂπ¥„ÇíÈÅ∏Êäû":A==="Ê≤°Âπ¥"?"Ê≤°Âπ¥„ÇíÈÅ∏Êäû":"„Çø„Ç∞ÂÄ§„ÇíÈÅ∏Êäû"}),e.jsxs(r,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:[e.jsx(B,{label:"ÊåáÂÆö„Å™„Åó",onClick:()=>Q(""),variant:"outlined",size:"small",sx:{mb:1}}),ee[A]?.map(a=>e.jsx(B,{label:a,onClick:()=>Q(a),variant:"outlined",size:"small",color:A==="ÂõΩÁ±ç"&&a===ne||A==="„Ç´„ÉÜ„Ç¥„É™„Éº"&&a===V||A==="Â≠¶Ê†°"&&a===le||A==="ÁîüÂπ¥"&&a===he||A==="Ê≤°Âπ¥"&&a===ue?"primary":"default",sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},a))]})]})}),e.jsx(J,{}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[d,"‰∫∫„ÅÆÂª∫ÁØâÂÆ∂"]}),i>1&&e.jsx(He,{count:i,page:o,onChange:O,color:"primary",size:"small"})]})]}),n?e.jsx(r,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(e.Fragment,{children:[s.length===0?e.jsxs(r,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{variant:"h6",children:"Âª∫ÁØâÂÆ∂„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Ê§úÁ¥¢Êù°‰ª∂„ÇíÂ§âÊõ¥„Åó„Å¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ"})]}):e.jsx(H,{container:!0,spacing:3,children:s.map(a=>e.jsx(H,{item:!0,xs:12,sm:6,md:4,children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(qe,{component:M,to:`/architects/${a.id}`,children:e.jsxs(pe,{children:[e.jsx(l,{variant:"h6",component:"div",gutterBottom:!0,children:a.name}),e.jsxs(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[a.nationality," ‚Ä¢ ",a.birthYear||"?","-",a.deathYear||"ÁèæÂú®"]}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:a.tags&&a.tags.map(E=>e.jsx(B,{label:E,size:"small",variant:"outlined",sx:{pointerEvents:"none"}},E))})]})})})},a.id))}),i>1&&e.jsx(r,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(He,{count:i,page:o,onChange:O,color:"primary"})})]})]})},$r=({architectures:s,compact:t=!1})=>!s||s.length===0?e.jsx(l,{variant:"body2",color:"text.secondary",children:"ÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Çã‰ΩúÂìÅ„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"}):e.jsx(H,{container:!0,spacing:t?2:3,children:s.map(n=>e.jsx(H,{item:!0,xs:12,sm:6,md:t?6:4,children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(qe,{component:M,to:`/architecture/${n.id}`,sx:{flexGrow:1},children:e.jsxs(pe,{children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h2",children:n.name}),n.completedYear>0&&e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Qt,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[n.completedYear,"Âπ¥"]})]}),(n.city||n.location)&&e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Ze,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[n.city?n.city:"",n.city&&n.location?" / ":"",n.location?n.location:""]})]}),n.tag&&e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:n.tag.split(",").filter(u=>u.trim()!==""&&!u.includes("„ÅÆËøΩÂä†Âª∫ÁØâ")).map((u,i)=>e.jsx(B,{label:u.trim(),size:"small",color:"secondary",variant:"outlined",sx:{height:"20px",fontSize:"0.65rem"}},i))})]})})})},n.id))}),Wr=()=>e.jsx(r,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:e.jsx(l,{variant:"caption",component:"span",sx:{fontFamily:"serif",fontWeight:"bold",fontSize:"16px"},children:"W"})}),_r=()=>{const{id:s}=At(),[t,n]=x.useState(null),[u,i]=x.useState(!0),[m,d]=x.useState(null),[c,o]=x.useState([]),y=Ve();x.useEffect(()=>{s&&(async()=>{i(!0);try{const b=await Sr(parseInt(s));if(!b){d("Âª∫ÁØâÂÆ∂ÊÉÖÂ†±„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"),i(!1);return}n(b);const j=[];if(b.teacher1){const I={name:b.teacher1,id:null};try{I.id=await p(b.teacher1)}catch($){console.error("ÊïôÂ∏´ÊÉÖÂ†±„ÅÆÂèñÂæó„Å´Â§±Êïó:",$)}j.push(I)}if(b.teacher2){const I={name:b.teacher2,id:null};try{I.id=await p(b.teacher2)}catch($){console.error("ÊïôÂ∏´ÊÉÖÂ†±„ÅÆÂèñÂæó„Å´Â§±Êïó:",$)}j.push(I)}if(b.teacher3){const I={name:b.teacher3,id:null};try{I.id=await p(b.teacher3)}catch($){console.error("ÊïôÂ∏´ÊÉÖÂ†±„ÅÆÂèñÂæó„Å´Â§±Êïó:",$)}j.push(I)}o(j)}catch(b){console.error("Âª∫ÁØâÂÆ∂„Éá„Éº„ÇøÂèñÂæó„Ç®„É©„Éº:",b),d("Âª∫ÁØâÂÆ∂ÊÉÖÂ†±„ÅÆË™≠„ÅøËæº„Åø‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ")}finally{i(!1)}})()},[s]);const p=async f=>null,g=()=>{if(!t)return null;const f=[];if(t.school){let b=t.school;t.faculty&&(b+=` ${t.faculty}`),f.push(b)}return t.schoolAbroad&&f.push(t.schoolAbroad),f.length>0?f.join("„ÄÅ"):null},T=()=>!c||c.length===0?null:c.map((f,b)=>e.jsxs("span",{children:[b>0&&"„ÄÅ",f.id?e.jsx(ar,{component:M,to:`/architects/${f.id}`,color:"inherit",underline:"hover",children:f.name}):f.name]},b)),R=(f,b)=>{if(!b)return;let j="";switch(f){case"nationality":j=`nationality=${encodeURIComponent(b)}`;break;case"born":j=`birthyear_from=${encodeURIComponent(b)}&birthyear_to=${encodeURIComponent(b)}`;break;case"died":j=`deathyear=${encodeURIComponent(b)}`;break;case"category":j=`category=${encodeURIComponent(b)}`;break;default:return}y(`/architects?${j}`)},D=(f,b)=>{const j=`${f} ${b||""} Âª∫ÁØâÂÆ∂`;return`https://www.google.com/search?q=${encodeURIComponent(j)}`},L=f=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(f)}`;if(u)return e.jsx(se,{maxWidth:"lg",sx:{py:4},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(Te,{})})});if(m||!t)return e.jsx(se,{maxWidth:"lg",sx:{py:4},children:e.jsxs(ae,{sx:{p:3},children:[e.jsx(l,{variant:"h5",color:"error",gutterBottom:!0,children:"„Ç®„É©„Éº"}),e.jsx(l,{paragraph:!0,children:m||"Âª∫ÁØâÂÆ∂ÊÉÖÂ†±„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ"}),e.jsx(_,{variant:"outlined",startIcon:e.jsx(Ye,{}),onClick:()=>y(-1),children:"Êàª„Çã"})]})});const v=new Set;t.works&&t.works.forEach(f=>{f.tag&&f.tag.split(",").forEach(j=>{const I=j.trim();I&&!I.includes("„ÅÆËøΩÂä†Âª∫ÁØâ")&&v.add(I)})});const Z=[];if(t.nationality&&Z.push(`nationality:${t.nationality}`),t.birthYear>0){const f=Math.floor(t.birthYear/10)*10;Z.push(`born:${f}s`)}return t.deathYear>0&&Z.push(`died:${t.deathYear}`),t.category&&Z.push(`category:${t.category}`),t.school&&Z.push(`school:${t.school}`),e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(_,{variant:"outlined",component:M,to:"/architects",startIcon:e.jsx(Ye,{}),sx:{mb:3},children:"Âª∫ÁØâÂÆ∂‰∏ÄË¶ß„Å´Êàª„Çã"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"‰∏çÊòé"}),e.jsxs(r,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:3},children:[t.nationality&&e.jsx(B,{icon:e.jsx(Vt,{}),label:`nationality:${t.nationality}`,variant:"outlined",onClick:()=>R("nationality",t.nationality),clickable:!0}),t.birthYear>0&&e.jsx(B,{icon:e.jsx(Jt,{}),label:`born:${Math.floor(t.birthYear/10)*10}s`,variant:"outlined",onClick:()=>R("born",Math.floor(t.birthYear/10)*10),clickable:!0}),t.deathYear>0&&e.jsx(B,{icon:e.jsx(Xt,{}),label:`died:${t.deathYear}`,variant:"outlined",onClick:()=>R("died",t.deathYear),clickable:!0}),t.category&&e.jsx(B,{icon:e.jsx(tt,{}),label:`category:${t.category}`,variant:"outlined",onClick:()=>R("category",t.category),clickable:!0}),t.office&&e.jsx(B,{icon:e.jsx(er,{}),label:t.office,variant:"outlined"})]}),e.jsx(Ke,{sx:{my:3}}),e.jsxs(r,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.website&&e.jsx(Ce,{title:"ÂÖ¨Âºè„Éõ„Éº„É†„Éö„Éº„Ç∏",children:e.jsx(_,{href:t.website.startsWith("http")?t.website:`http://${t.website}`,target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(tr,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4caf50",color:"#ffffff","&:hover":{backgroundColor:"#388e3c"}},children:"„Éõ„Éº„É†„Éö„Éº„Ç∏"})}),e.jsx(Ce,{title:"GoogleÊ§úÁ¥¢",children:e.jsx(_,{href:D(t.name,t.nationality),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Ge,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"Ê§úÁ¥¢"})}),e.jsx(Ce,{title:"Wikipedia„ÅßÊ§úÁ¥¢",children:e.jsx(_,{href:L(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Wr,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),e.jsx(rr,{component:ae,variant:"outlined",sx:{mb:4},children:e.jsx(sr,{children:e.jsxs(nr,{children:[t.nationality&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ÂõΩÁ±ç"})}),e.jsx(G,{children:t.nationality})]}),(t.birthYear>0||t.deathYear>0)&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ÁîüÂπ¥ - Ê≤°Âπ¥"})}),e.jsxs(G,{children:[t.birthYear>0?`${t.birthYear}Âπ¥`:"‰∏çÊòé",t.deathYear>0?` - ${t.deathYear}Âπ¥`:""]})]}),t.office&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"‰∫ãÂãôÊâÄ"})}),e.jsx(G,{children:t.office})]}),t.prefecture&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"Êã†ÁÇπ"})}),e.jsx(G,{children:t.prefecture})]}),t.nameEn&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"Ëã±Ë™ûË°®Ë®ò"})}),e.jsx(G,{children:t.nameEn})]}),(t.school||t.faculty||t.schoolAbroad)&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ÊïôËÇ≤ËÉåÊôØ"})}),e.jsx(G,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(or,{sx:{mr:1,fontSize:"1rem",color:"text.secondary"}}),e.jsx(l,{variant:"body2",children:g()})]})})]}),(t.teacher1||t.teacher2||t.teacher3)&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"Â∏´‰∫ã„Åó„ÅüÂª∫ÁØâÂÆ∂"})}),e.jsx(G,{children:e.jsx(r,{sx:{display:"flex",flexDirection:"column",gap:1},children:T()})})]}),t.category&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"„Ç´„ÉÜ„Ç¥„É™„Éº"})}),e.jsx(G,{children:t.category})]})]})})}),v.size>0&&e.jsxs(r,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ÂèóË≥ûÊ≠¥„ÉªÈÅ∏ÂÆö"}),e.jsx(r,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:Array.from(v).map((f,b)=>e.jsx(B,{icon:e.jsx(vt,{}),label:String(f),onClick:()=>R("category",f),clickable:!0,color:"secondary",variant:"outlined",size:"small"},b))})]}),t.bio&&e.jsxs(r,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ÁµåÊ≠¥"}),e.jsx(l,{variant:"body1",sx:{whiteSpace:"pre-line"},children:t.bio})]}),t.works&&t.works.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(r,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"‰ΩúÂìÅ„Éû„ÉÉ„Éó"}),t.works.some(f=>f.latitude&&f.longitude)?e.jsx(r,{sx:{height:"400px",width:"100%",mb:3,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(Ue,{markers:t.works.filter(f=>f.latitude&&f.longitude),zoom:5,center:[t.works[0].latitude||35.6762,t.works[0].longitude||139.6503]})}):e.jsx(l,{variant:"body2",color:"text.secondary",children:"‰ΩçÁΩÆÊÉÖÂ†±„ÅåÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Çã‰ΩúÂìÅ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ"})]}),e.jsxs(r,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"‰ª£Ë°®‰ΩúÂìÅ"}),e.jsx($r,{architectures:t.works})]})]})]})]})},Fr=()=>{const[s,t]=x.useState(!0),[n,u]=x.useState([]),[i,m]=x.useState([]),[d,c]=x.useState({yearFrom:"",yearTo:""}),[o,y]=x.useState(!1),[p,g]=x.useState(null),[T,R]=x.useState(!1);x.useEffect(()=>{L()},[]);const D=j=>{if(!j||j.length===0)return{from:0,to:0};const I=j.filter(K=>K.completedYear>0);if(I.length===0)return{from:0,to:0};const $=I.map(K=>K.completedYear).sort((K,V)=>K-V),q=$[0],A=$[$.length-1],je=Math.min(100,Math.floor((A-q)/2)),ee=Math.floor(Math.random()*($.length-Math.floor($.length/4))),de=$[ee],ne=Math.min(de+je,A);return{from:de,to:ne}},L=async()=>{t(!0);try{const j=await _t();if(m(j),!d.yearFrom&&!d.yearTo){const I=D(j);c({yearFrom:I.from.toString(),yearTo:I.to.toString()});const $=j.filter(q=>q.completedYear>=I.from&&q.completedYear<=I.to);u($)}else{let I=j;d.yearFrom&&(I=I.filter($=>$.completedYear>=parseInt(d.yearFrom))),d.yearTo&&(I=I.filter($=>$.completedYear<=parseInt(d.yearTo))),u(I)}}catch(j){console.error("Error fetching works:",j)}finally{t(!1)}},v=j=>{const{name:I,value:$}=j.target;c({...d,[I]:$})},Z=()=>{t(!0);let j=i;d.yearFrom&&(j=j.filter(I=>I.completedYear>=parseInt(d.yearFrom))),d.yearTo&&(j=j.filter(I=>I.completedYear<=parseInt(d.yearTo))),u(j),t(!1)},f=()=>{c({yearFrom:"",yearTo:""}),u(i)},b=j=>{g(j),R(!0)};return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"Âª∫ÁØâÂú∞Âõ≥"}),e.jsxs(ae,{sx:{p:3,mb:4},children:[e.jsx(_,{startIcon:e.jsx(ir,{}),onClick:()=>y(!o),sx:{mb:2},children:o?"„Éï„Ç£„É´„Çø„Éº„ÇíÈñâ„Åò„Çã":"„Éï„Ç£„É´„Çø„Éº„ÇíË°®Á§∫"}),o&&e.jsx(r,{sx:{mb:2},children:e.jsxs(H,{container:!0,spacing:2,children:[e.jsx(H,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ee,{fullWidth:!0,label:"Âπ¥‰ª£Ôºà„Åã„ÇâÔºâ",name:"yearFrom",type:"number",value:d.yearFrom,onChange:v})}),e.jsx(H,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ee,{fullWidth:!0,label:"Âπ¥‰ª£Ôºà„Åæ„ÅßÔºâ",name:"yearTo",type:"number",value:d.yearTo,onChange:v})}),e.jsx(H,{item:!0,xs:12,md:4,children:e.jsxs(r,{sx:{display:"flex",gap:1,height:"100%"},children:[e.jsx(_,{variant:"contained",color:"primary",onClick:Z,sx:{flexGrow:1},children:"„Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®"}),e.jsx(_,{variant:"outlined",onClick:f,sx:{flexGrow:1},children:"„ÇØ„É™„Ç¢"})]})})]})}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(we,{sx:{mr:1}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["„Éû„ÉÉ„Éó‰∏ä„Å´Ë°®Á§∫„Åï„Çå„Åü‰ΩúÂìÅ: ",n.length,"‰ª∂ ",d.yearFrom&&d.yearTo&&`(${d.yearFrom}Âπ¥„Äú${d.yearTo}Âπ¥)`]})]})]}),s?e.jsx(r,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(r,{sx:{height:600,bgcolor:"grey.200",position:"relative",borderRadius:1},children:[e.jsx(Ue,{markers:n,height:"600px",zoom:5,center:[35.6762,139.6503]}),e.jsxs(r,{sx:{position:"absolute",top:16,right:16,width:320,maxHeight:568,overflow:"auto",bgcolor:"background.paper",borderRadius:1,boxShadow:3,p:2,zIndex:1e3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"‰ΩúÂìÅ„É™„Çπ„Éà"}),n.length===0?e.jsx(l,{variant:"body2",children:"Êù°‰ª∂„Å´‰∏ÄËá¥„Åô„Çã‰ΩúÂìÅ„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì"}):e.jsx(ut,{dense:!0,children:n.map(j=>e.jsxs(It.Fragment,{children:[e.jsx(mt,{onClick:()=>b(j),sx:{cursor:"pointer",bgcolor:p&&p.id===j.id?"action.selected":"transparent","&:hover":{bgcolor:"action.hover"}},children:e.jsx(gt,{primary:j.name,secondary:e.jsxs(e.Fragment,{children:[j.architectName&&e.jsxs("span",{children:[j.architectName,e.jsx("br",{})]}),j.completedYear>0&&`${j.completedYear}Âπ¥ | `,j.city||""]})})}),e.jsx(Ke,{component:"li"})]},j.id))})]})]}),e.jsx(xt,{anchor:"right",open:T,onClose:()=>R(!1),children:p&&e.jsxs(r,{sx:{width:350,p:3},children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:p.name}),e.jsxs(r,{sx:{mb:3},children:[p.architectName&&e.jsx(l,{variant:"subtitle1",color:"text.secondary",children:p.architectName}),e.jsxs(l,{variant:"body2",children:[p.completedYear>0&&`${p.completedYear}Âπ¥`,p.city&&` | ${p.city}`]}),p.location&&e.jsx(l,{variant:"body2",sx:{mt:1},children:p.location})]}),e.jsx(r,{sx:{mb:3,height:200},children:e.jsx(Ue,{singleMarker:p,height:"200px",zoom:15,center:[p.latitude,p.longitude]})}),e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(_,{variant:"outlined",onClick:()=>R(!1),children:"Èñâ„Åò„Çã"}),e.jsx(_,{variant:"contained",component:M,to:`/architecture/${p.id}`,children:"Ë©≥Á¥∞„ÇíË¶ã„Çã"})]})]})})]})};class Ft extends x.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,n){console.error("Uncaught error:",t,n),this.setState({error:t,errorInfo:n})}handleRetry=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:4,height:"100vh"},children:e.jsxs(ae,{elevation:3,sx:{padding:4,maxWidth:600,width:"100%",borderRadius:2,textAlign:"center"},children:[e.jsx(l,{variant:"h5",color:"error",gutterBottom:!0,children:"ÂïèÈ°å„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü"}),e.jsx(l,{variant:"body1",paragraph:!0,children:"„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Åß‰∫àÊúü„Åó„Å™„ÅÑ„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü„ÄÇ „ÅäÊâãÊï∞„Åß„Åô„Åå„ÄÅÂÜçË™≠„ÅøËæº„Åø„Çí„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ"}),!1,e.jsxs(r,{sx:{mt:3},children:[e.jsx(_,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mr:2},children:"„Éö„Éº„Ç∏„ÇíÂÜçË™≠„ÅøËæº„Åø"}),e.jsx(_,{variant:"outlined",onClick:()=>window.location.href="/",children:"„Éõ„Éº„É†„Å´Êàª„Çã"})]})]})}):this.props.children}}const Yr=()=>{try{const s=window?.location?.hostname||"";return/github\.io$/.test(s)}catch(s){return console.error("Áí∞Â¢É„ÉÅ„Çß„ÉÉ„ÇØ„Ç®„É©„Éº:",s),!1}},Lr=async()=>{try{const t=Yr();console.log("„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥Áí∞Â¢É: Êú¨Áï™"),console.log(`GitHub PagesÁí∞Â¢É: ${t?"„ÅØ„ÅÑ":"„ÅÑ„ÅÑ„Åà"}`);try{const u=await fetch(t?"./db/database-info.json":"/db/database-info.json");if(u.ok){const i=await u.json();console.log("„Éá„Éº„Çø„Éô„Éº„ÇπÊÉÖÂ†±:"),console.log(`- „Éï„Ç°„Ç§„É´: ${i.database}`),console.log(`- Êõ¥Êñ∞Êó•ÊôÇ: ${i.date}`),console.log(`- „Çµ„Ç§„Ç∫: ${(i.size/1024/1024).toFixed(2)} MB`),console.log(`- „ÉÅ„É£„É≥„ÇØ: ${i.chunks} (${i.chunkSize/1024}KB)„ÅÆ„ÉÅ„É£„É≥„ÇØ`),console.log(`- „ÉÜ„Éº„Éñ„É´Êï∞: ${i.tables.length}`),console.log(`- „Ç§„É≥„Éá„ÉÉ„ÇØ„ÇπÊï∞: ${i.indexes.length}`)}else console.warn("„Éá„Éº„Çø„Éô„Éº„Çπ„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì:",u.status)}catch(n){console.warn("„Éá„Éº„Çø„Éô„Éº„Çπ„É°„Çø„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„Ç®„É©„Éº:",n)}}catch(s){console.error("„Éá„Éº„Çø„Éô„Éº„ÇπË®≠ÂÆö„É≠„Ç∞„Ç®„É©„Éº:",s)}},Or=({children:s})=>{const[t,n]=x.useState(vr()),[u,i]=x.useState(null),[m,d]=x.useState(0);return x.useEffect(()=>{let c=!0,o;return(async()=>{t!==Ne.READY&&setTimeout(async()=>{o=setInterval(()=>{c&&d(p=>{const g=(95-p)*.1;return Math.min(p+g,95)})},300);try{await Rt(),c&&(d(100),n(Ne.READY))}catch(p){c&&(i(`„Éá„Éº„Çø„Éô„Éº„Çπ„ÅÆÂàùÊúüÂåñ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü: ${p instanceof Error?p.message:"‰∏çÊòé„Å™„Ç®„É©„Éº"}`),n(Ne.ERROR))}finally{clearInterval(o)}},100)})(),()=>{c=!1,clearInterval(o)}},[t]),e.jsx(e.Fragment,{children:s})},st={primary:{main:"#2E3440",light:"#4C566A",dark:"#1B1F2B",contrastText:"#FFFFFF"},secondary:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC",contrastText:"#2E3440"},accent:{main:"#D08770",light:"#E5A088",dark:"#BF616A"},background:{default:"#ECEFF4",paper:"#FFFFFF",elevated:"#F8F9FA"},text:{primary:"#2E3440",secondary:"#4C566A",disabled:"#D8DEE9"},divider:"#E5E9F0",success:{main:"#A3BE8C",light:"#B8CCA3",dark:"#8CAF69"},warning:{main:"#EBCB8B",light:"#F0D5A3",dark:"#D4B571"},error:{main:"#BF616A",light:"#CC8088",dark:"#A54A56"},info:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC"}},Br={fontFamily:'"Inter", "Roboto", "Helvetica Neue", "Arial", sans-serif',h1:{fontSize:"3rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2.25rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.875rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.4},subtitle1:{fontSize:"1rem",fontWeight:500,lineHeight:1.5},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.5},body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.6},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.6},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.5},button:{fontSize:"0.875rem",fontWeight:600,textTransform:"none",letterSpacing:"0.02em"}},zr={MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"10px 24px",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},contained:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8,transition:"all 0.2s ease-in-out","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:st.secondary.main}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:st.primary.main,borderWidth:2}}}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",backgroundColor:"rgba(46, 52, 64, 0.95)"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiPaper:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},elevation1:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},elevation2:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},elevation3:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},Pr=lr({palette:st,typography:Br,components:zr,spacing:8,shape:{borderRadius:8},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"}}}),Mr=()=>{const{pathname:s}=Qe();return x.useEffect(()=>{window.scrollTo(0,0)},[s]),null},Nr=()=>(x.useEffect(()=>{console.log("App running in production mode");try{Lr()}catch(s){console.warn("Failed to log database details:",s)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(Mr,{}),e.jsx(pr,{}),e.jsx("main",{className:"container",role:"main",children:e.jsx(Ft,{children:e.jsxs(ur,{children:[e.jsx(Ae,{path:"/",element:e.jsx(Tr,{})}),e.jsx(Ae,{path:"/architecture",element:e.jsx(Ir,{})}),e.jsx(Ae,{path:"/architecture/:id",element:e.jsx(wr,{})}),e.jsx(Ae,{path:"/architects",element:e.jsx(kr,{})}),e.jsx(Ae,{path:"/architects/:id",element:e.jsx(_r,{})}),e.jsx(Ae,{path:"/map",element:e.jsx(Fr,{})})]})})}),e.jsx(jr,{})]})),Hr=()=>e.jsx(Ft,{children:e.jsxs(cr,{theme:Pr,children:[e.jsx(dr,{}),e.jsx(xr,{children:e.jsx(Or,{children:e.jsx(Nr,{})})})]})});console.log("React „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÇíÂàùÊúüÂåñ‰∏≠...","production");console.log("DOM root element:",document.getElementById("root"));const Yt=document.getElementById("root");if(!Yt)throw console.error('rootË¶ÅÁ¥†„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇHTML„Å´<div id="root"></div>„ÅåÂ≠òÂú®„Åô„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ'),new Error("Failed to find the root element");const Zr=St(Yt);console.log("Using HashRouter for GitHub Pages compatibility");try{Zr.render(e.jsx(It.StrictMode,{children:e.jsx(Hr,{})})),console.log("React „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆ„É¨„É≥„ÉÄ„É™„É≥„Ç∞„ÅåÊàêÂäü„Åó„Åæ„Åó„Åü")}catch(s){console.error("React „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„ÅÆ„É¨„É≥„ÉÄ„É™„É≥„Ç∞‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü:",s)}
//# sourceMappingURL=index-B1Guuobv.js.map
