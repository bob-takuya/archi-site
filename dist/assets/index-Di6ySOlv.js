const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/database-CzynoM3b.js","assets/vendor-R9pUdGjU.js"])))=>i.map(i=>d[i]);
import{u as Pt,a as zt,j as e,A as Mt,T as Nt,b as d,I as Xe,M as Zt,D as ft,B as o,C as Ut,L as pt,c as jt,d as yt,e as _,H as Ht,f as ze,P as Le,g as Ie,S as Gt,h as ne,G as U,i as le,k as je,l as ye,F as Ce,m as Pe,n as P,o as Ae,p as He,q as ie,r as Te,s as qt,t as Kt,v as ve,R as lt,w as ot,x as Ge,y as qe,z as et,E as bt,J as wt,K as Ct,N as vt,O as At,Q as re,U as Qt,V as Tt,W as Ne,X as Et,Y as Ze,Z as St,_ as We,$ as tt,a0 as It,a1 as Jt,a2 as Vt,a3 as Xt,a4 as er,a5 as tr,a6 as rr,a7 as sr,a8 as nr,a9 as or,aa as ar,ab as ir,ac as pe,ad as G,ae as lr,af as cr,ag as dr,ah as hr,ai as xr,aj as ur}from"./ui-BqN58jDe.js";import{a as gr,u as Ke,r as g,L as N,f as Qe,h as Rt,R as Dt,H as mr,i as fr,j as Se}from"./vendor-R9pUdGjU.js";import{L as $t,M as pr,T as jr,a as ct,P as dt}from"./map-DfQbedqp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const f of n)if(f.type==="childList")for(const i of f.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const f={};return n.integrity&&(f.integrity=n.integrity),n.referrerPolicy&&(f.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?f.credentials="include":n.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(n){if(n.ep)return;n.ep=!0;const f=r(n);fetch(n.href,f)}})();var kt,ht=gr;kt=ht.createRoot,ht.hydrateRoot;const xt=[{title:"ホーム",path:"/",icon:e.jsx(Ht,{})},{title:"建築作品",path:"/architecture",icon:e.jsx(ze,{})},{title:"建築家",path:"/architects",icon:e.jsx(Le,{})},{title:"マップ",path:"/map",icon:e.jsx(Ie,{})},{title:"DBエクスプローラー",path:"/db-explorer",icon:e.jsx(Gt,{})}],yr=()=>{const t=Ke().pathname,r=Pt(),c=zt(r.breakpoints.down("sm")),[n,f]=g.useState(!1),i=h=>l=>{l.type==="keydown"&&(l.key==="Tab"||l.key==="Shift")||f(h)};return e.jsx(Mt,{position:"static",color:"primary",component:"nav",role:"navigation","aria-label":"メインナビゲーション",children:e.jsxs(Nt,{children:[e.jsx(d,{variant:"h6",component:N,to:"/","data-testid":"site-title",sx:{flexGrow:1,color:"white",textDecoration:"none",fontWeight:"bold"},children:"建築データベース"}),c?e.jsxs(e.Fragment,{children:[e.jsx(Xe,{edge:"end",color:"inherit","aria-label":"menu","data-testid":"mobile-menu-button",onClick:i(!0),children:e.jsx(Zt,{})}),e.jsx(ft,{anchor:"right",open:n,onClose:i(!1),children:e.jsxs(o,{sx:{width:250},role:"presentation",onClick:i(!1),onKeyDown:i(!1),children:[e.jsx(o,{sx:{display:"flex",justifyContent:"flex-end",p:1},children:e.jsx(Xe,{onClick:i(!1),children:e.jsx(Ut,{})})}),e.jsx(pt,{role:"menu","aria-label":"ナビゲーションメニュー",children:xt.map(({title:h,path:l,icon:b})=>e.jsxs(jt,{component:N,to:l,role:"menuitem","data-testid":`nav-link-${h.toLowerCase()}`,sx:{color:t===l?"primary.main":"text.primary",backgroundColor:t===l?"rgba(0, 0, 0, 0.08)":"transparent",fontWeight:t===l?"bold":"normal","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[b,e.jsx(yt,{primary:h,sx:{ml:2}})]},h))})]})})]}):e.jsx(o,{sx:{display:"flex"},role:"menubar","aria-label":"デスクトップナビゲーション",children:xt.map(({title:h,path:l})=>e.jsx(_,{component:N,to:l,color:"inherit",role:"menuitem","data-testid":`nav-link-${h.toLowerCase()}`,sx:{mx:1,fontWeight:t===l?"bold":"normal",borderBottom:t===l?"2px solid white":"none"},children:h},h))})]})})},br=()=>e.jsx(o,{component:"footer",role:"contentinfo","data-testid":"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:"primary.main",color:"white"},children:e.jsx(ne,{maxWidth:"sm",children:e.jsxs(d,{variant:"body1",align:"center",children:["建築データベース © ",new Date().getFullYear()]})})}),wr="modulepreload",Cr=function(s){return"/archi-site/"+s},ut={},at=function(t,r,c){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),h=i?.nonce||i?.getAttribute("nonce");n=Promise.allSettled(r.map(l=>{if(l=Cr(l),l in ut)return;ut[l]=!0;const b=l.endsWith(".css"),u=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const R=document.createElement("link");if(R.rel=b?"stylesheet":wr,b||(R.as="script"),R.crossOrigin="",R.href=l,h&&R.setAttribute("nonce",h),document.head.appendChild(R),b)return new Promise((F,L)=>{R.addEventListener("load",F),R.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${l}`)))})}))}function f(i){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=i,window.dispatchEvent(h),!h.defaultPrevented)throw i}return n.then(i=>{for(const h of i||[])h.status==="rejected"&&f(h.reason);return t().catch(f)})},vr=({variant:s="card",count:t=6})=>{const r=()=>e.jsx(je,{sx:{height:"100%"},children:e.jsxs(ye,{children:[e.jsx(le,{variant:"text",height:40,sx:{mb:1}}),e.jsx(le,{variant:"text",height:20,sx:{mb:1}}),e.jsx(le,{variant:"text",height:20,width:"60%"})]})}),c=()=>e.jsxs(o,{sx:{p:2},children:[e.jsx(le,{variant:"text",height:32,sx:{mb:1}}),e.jsx(le,{variant:"text",height:24,sx:{mb:1}}),e.jsx(le,{variant:"text",height:20,width:"40%"})]}),n=()=>e.jsx(ne,{maxWidth:"lg",children:e.jsxs(o,{sx:{textAlign:"center",py:8},children:[e.jsx(le,{variant:"text",height:60,sx:{mb:2}}),e.jsx(le,{variant:"text",height:30,sx:{mb:4}}),e.jsx(o,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx(le,{variant:"rectangular",width:500,height:56,sx:{borderRadius:1}})})]})}),f=()=>e.jsx(le,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2}});return s==="hero"?n():s==="map"?f():s==="list"?e.jsx(o,{children:Array.from({length:t}).map((i,h)=>e.jsx(o,{sx:{borderBottom:"1px solid #e0e0e0"},children:c()},h))}):e.jsx(U,{container:!0,spacing:4,children:Array.from({length:t}).map((i,h)=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:r()},h))})},Ar=()=>{const[s,t]=g.useState(""),[r,c]=g.useState([]),[n,f]=g.useState(!0),[i,h]=g.useState(null),[l,b]=g.useState(!1),[u,R]=g.useState(null);g.useEffect(()=>{const j=C=>{const{progress:p,speed:E,eta:$,receivedLength:q,totalLength:T}=C.detail;R({progress:p,speed:E,eta:$,receivedLength:q,totalLength:T})};window.addEventListener("database-download-progress",j);const O=setTimeout(()=>{console.warn("Emergency timeout: forcing app to render without data after 30 seconds"),f(!1),b(!1),h("データの読み込みがタイムアウトしました（30秒）。ネットワーク接続を確認してください。")},3e4);return(async()=>{try{f(!0),h(null),console.log("最近の建築作品を取得中...");const{getAllArchitectures:C}=await at(async()=>{const{getAllArchitectures:q}=await Promise.resolve().then(()=>Er);return{getAllArchitectures:q}},void 0),p=new Promise((q,T)=>{setTimeout(()=>T(new Error("データの読み込みがタイムアウトしました（30秒）。ネットワーク接続を確認してください。")),3e4)}),E=C(1,6),$=await Promise.race([E,p]);clearTimeout(O),c($.results||[]),b(!0),console.log("建築作品の取得に成功しました",$)}catch(C){console.error("建築作品の取得に失敗:",C),clearTimeout(O);let p=C.message||"データベースからの読み込みに失敗しました";C.message?.includes("timeout")?p+=" インターネット接続が遅い可能性があります。しばらく待ってからページを再読み込みしてください。":C.message?.includes("fetch")&&(p+=" ネットワーク接続を確認してください。"),h(p),b(!1)}finally{f(!1)}})(),()=>{clearTimeout(O),window.removeEventListener("database-download-progress",j)}},[]);const F=j=>{j.preventDefault(),s.trim()&&(window.location.href=`#/architecture?search=${encodeURIComponent(s)}`)},L=()=>{h(null),f(!0),R(null),window.location.reload()},y=j=>j<1024?`${Math.round(j)} B/s`:j<1024*1024?`${Math.round(j/1024)} KB/s`:`${Math.round(j/1024/1024)} MB/s`,w=j=>j<60?`${Math.round(j)}s`:j<3600?`${Math.round(j/60)}m ${Math.round(j%60)}s`:`${Math.round(j/3600)}h ${Math.round(j%3600/60)}m`;return e.jsxs(ne,{maxWidth:"lg","data-testid":"homepage-container",children:[e.jsx(Ce,{in:!0,timeout:1e3,children:e.jsxs(o,{component:"section",role:"banner","aria-labelledby":"main-heading",sx:{pt:8,pb:6,textAlign:"center",background:"linear-gradient(135deg, #ECEFF4 0%, #D8DEE9 100%)",borderRadius:3,mb:6,position:"relative",overflow:"hidden"},children:[e.jsx(o,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.1,background:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(46, 52, 64, 0.1) 10px, rgba(46, 52, 64, 0.1) 20px)"}}),e.jsxs(o,{sx:{position:"relative",zIndex:1},children:[e.jsx(d,{component:"h1",variant:"h1",align:"center",color:"text.primary",gutterBottom:!0,id:"main-heading",sx:{background:"linear-gradient(135deg, #2E3440 0%, #4C566A 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",mb:2},children:"建築データベース"}),e.jsxs(d,{variant:"h5",align:"center",color:"text.secondary",paragraph:!0,sx:{mb:4,maxWidth:600,mx:"auto"},children:["日本の建築作品と建築家を検索・閲覧できる",e.jsx("br",{}),"包括的なデータベース"]}),e.jsxs(Pe,{direction:"row",spacing:3,justifyContent:"center",sx:{mb:4},children:[e.jsx(P,{icon:e.jsx(ze,{}),label:"14,000+ 建築作品",color:"primary",variant:"outlined"}),e.jsx(P,{icon:e.jsx(Le,{}),label:"2,900+ 建築家",color:"secondary",variant:"outlined"}),e.jsx(P,{icon:e.jsx(Ie,{}),label:"全国対応",color:"info",variant:"outlined"})]}),e.jsx(Ce,{in:!0,timeout:1500,children:e.jsxs(o,{component:"form",onSubmit:F,role:"search","aria-label":"建築作品検索",sx:{mt:4,display:"flex",justifyContent:"center",alignItems:"center",maxWidth:600,mx:"auto",gap:2},children:[e.jsx(Ae,{fullWidth:!0,variant:"outlined",placeholder:"建築作品、建築家、住所などで検索",value:s,onChange:j=>t(j.target.value),inputProps:{"aria-label":"建築作品検索","data-testid":"search-input",role:"searchbox"},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}}),e.jsx(_,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(He,{}),size:"large","data-testid":"search-button",sx:{px:3,py:1.5,minWidth:120},children:"検索"})]})}),!l&&n&&e.jsx(o,{sx:{mt:4,maxWidth:600,mx:"auto"},children:u?e.jsxs(ie,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main"},children:"📦 大きなデータベースを読み込み中..."}),e.jsxs(o,{sx:{mb:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Te,{variant:"determinate",value:u.progress,size:24,sx:{mr:2}}),e.jsxs(d,{variant:"body2",color:"text.secondary",children:[u.progress,"% • ",Math.round(u.receivedLength/1024/1024)," MB / ",Math.round(u.totalLength/1024/1024)," MB"]})]}),e.jsx(qt,{variant:"determinate",value:u.progress,sx:{height:8,borderRadius:4}})]}),e.jsxs(Pe,{direction:"row",spacing:2,sx:{fontSize:"0.875rem",color:"text.secondary"},children:[e.jsxs(o,{children:["📊 ",y(u.speed)]}),e.jsxs(o,{children:["⏱️ ETA: ",w(u.eta)]})]}),e.jsx(d,{variant:"body2",sx:{mt:1,fontStyle:"italic",color:"text.secondary"},children:"最適化されたデータを読み込み中です。通常1-3秒で完了します。"})]}):e.jsxs(ie,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(Te,{size:24,sx:{mr:2}}),e.jsx(d,{variant:"h6",sx:{color:"primary.main"},children:"データベースを初期化中..."})]}),e.jsxs(d,{variant:"body2",color:"text.secondary",align:"center",children:["14,000件の建築作品データを読み込み中です",e.jsx("br",{}),e.jsx("em",{children:"最適化されたデータで高速読み込み中（1-3秒）"})]})]})})]})]})}),e.jsxs(o,{component:"section","aria-labelledby":"recent-works-heading",sx:{py:4},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Kt,{color:"primary"}),e.jsx(d,{variant:"h4",fontWeight:"bold",id:"recent-works-heading",component:"h2",children:"最近の建築作品"})]}),l&&e.jsx(ve,{title:"リフレッシュ",children:e.jsx(Xe,{onClick:()=>window.location.reload(),color:"primary",children:e.jsx(lt,{})})})]}),i&&e.jsx(Ce,{in:!0,children:e.jsx(ot,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{display:"flex",alignItems:"center",gap:2}},children:e.jsxs(o,{children:[i,e.jsxs(Pe,{direction:"row",spacing:2,sx:{mt:2},children:[e.jsx(_,{size:"small",variant:"contained",color:"primary",onClick:L,startIcon:e.jsx(lt,{}),children:"再試行"}),e.jsx(_,{size:"small",variant:"outlined",component:N,to:"/db-explorer",children:"診断ツールを開く"})]})]})})}),n?e.jsx(vr,{variant:"card",count:6}):r&&r.length>0?e.jsx(Ce,{in:!0,timeout:800,children:e.jsx(U,{container:!0,spacing:4,children:r.map((j,O)=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ce,{in:!0,timeout:1e3+O*200,children:e.jsx(je,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%)",border:"1px solid #E5E9F0","&:hover":{"& .card-content":{transform:"translateY(-2px)"}}},children:e.jsx(Ge,{component:N,to:`/architecture/${j.Z_PK}`,sx:{height:"100%"},children:e.jsxs(ye,{className:"card-content",sx:{flexGrow:1,transition:"transform 0.3s ease-in-out",p:3},children:[e.jsx(d,{gutterBottom:!0,variant:"h6",component:"h3",sx:{fontWeight:600,color:"text.primary",mb:2,lineHeight:1.3},children:j.ZAR_TITLE}),e.jsxs(Pe,{spacing:1,children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Le,{fontSize:"small",color:"secondary"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:j.ZAR_ARCHITECT||"建築家不明"})]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ie,{fontSize:"small",color:"secondary"}),e.jsxs(d,{variant:"body2",color:"text.secondary",children:[j.ZAR_ADDRESS||"場所不明"," • ",j.ZAR_YEAR&&j.ZAR_YEAR!==0?j.ZAR_YEAR+"年":"年代不明"]})]})]})]})})})})},j.Z_PK))})}):e.jsxs(ie,{sx:{p:6,textAlign:"center",background:"linear-gradient(135deg, #F8F9FA 0%, #ECEFF4 100%)"},children:[e.jsx(d,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"建築作品が見つかりませんでした"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:"データベースの接続を確認してください"})]}),l&&e.jsx(Ce,{in:!0,timeout:1200,children:e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(_,{variant:"outlined",color:"primary",component:N,to:"/architecture",size:"large",sx:{px:4,py:1.5,borderWidth:2,"&:hover":{borderWidth:2}},children:"すべての作品を見る"})})})]}),e.jsx(qe,{sx:{my:6}}),e.jsx(Ce,{in:!0,timeout:1400,children:e.jsxs(o,{component:"section","aria-labelledby":"features-heading",sx:{mb:6},children:[e.jsx(d,{variant:"h4",align:"center",gutterBottom:!0,id:"features-heading",component:"h2",sx:{mb:4,fontWeight:"bold"},children:"データベースの特徴"}),e.jsxs(U,{container:!0,spacing:4,children:[e.jsx(U,{item:!0,xs:12,md:4,children:e.jsxs(je,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #88C0D0 0%, #5E81AC 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(o,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(ze,{sx:{fontSize:100}})}),e.jsxs(ye,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(ze,{sx:{mr:2,fontSize:32}}),e.jsx(d,{variant:"h5",fontWeight:"bold",children:"建築作品"})]}),e.jsx(d,{paragraph:!0,sx:{mb:3,opacity:.9},children:"日本全国から14,000件以上の建築作品情報を閲覧できます。地域、年代、カテゴリーなどで詳細検索が可能です。"}),e.jsx(_,{variant:"contained",component:N,to:"/architecture",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"作品を探す"})]})]})}),e.jsx(U,{item:!0,xs:12,md:4,children:e.jsxs(je,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #D08770 0%, #BF616A 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(o,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Le,{sx:{fontSize:100}})}),e.jsxs(ye,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Le,{sx:{mr:2,fontSize:32}}),e.jsx(d,{variant:"h5",fontWeight:"bold",children:"建築家"})]}),e.jsx(d,{paragraph:!0,sx:{mb:3,opacity:.9},children:"2,900人以上の建築家情報を収録。経歴、作品リスト、所属事務所などの詳細情報を確認できます。"}),e.jsx(_,{variant:"contained",component:N,to:"/architects",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"建築家を探す"})]})]})}),e.jsx(U,{item:!0,xs:12,md:4,children:e.jsxs(je,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #A3BE8C 0%, #8CAF69 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(o,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Ie,{sx:{fontSize:100}})}),e.jsxs(ye,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ie,{sx:{mr:2,fontSize:32}}),e.jsx(d,{variant:"h5",fontWeight:"bold",children:"マップ表示"})]}),e.jsx(d,{paragraph:!0,sx:{mb:3,opacity:.9},children:"建築作品を地図上で視覚的に探索できます。位置情報をもとに周辺の建築作品を発見できます。"}),e.jsx(_,{variant:"contained",component:N,to:"/map",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"マップを開く"})]})]})})]})]})})]})};class Tr{baseUrl;cache=new Map;searchIndex=null;allItems=new Map;initialized=!1;constructor(){this.baseUrl="/archi-site/data",console.log("🚀 FastArchitectureService initialized with baseUrl:",this.baseUrl)}async initialize(){if(!this.initialized)try{console.log("📋 Loading search index...");const t=await fetch(`${this.baseUrl}/search_index.json`);if(!t.ok)throw new Error(`Failed to load search index: ${t.status}`);this.searchIndex=await t.json(),console.log("✅ Search index loaded successfully");const r=await fetch(`${this.baseUrl}/metadata.json`);if(r.ok){const c=await r.json();console.log(`📊 Database info: ${c.total_items.toLocaleString()} items in ${c.total_pages} pages`)}this.initialized=!0}catch(t){throw console.error("❌ Failed to initialize FastArchitectureService:",t),t}}async loadPage(t){const r=`page_${t}`;if(this.cache.has(r))return this.cache.get(r);try{const c=await fetch(`${this.baseUrl}/page_${t}.json`);if(!c.ok)throw new Error(`Failed to load page ${t}: ${c.status}`);const n=await c.json();return this.cache.set(r,n),n.items.forEach(f=>{this.allItems.set(f.id,f)}),console.log(`✅ Loaded page ${t} with ${n.items.length} items`),n}catch(c){throw console.error(`❌ Failed to load page ${t}:`,c),c}}async getAllArchitectures(t=1,r=20){try{await this.initialize();const c=await this.loadPage(t);return{results:c.items.slice(0,r),total:c.total_items,page:t,total_pages:c.total_pages,has_more:t<c.total_pages}}catch(c){throw console.error("❌ getAllArchitectures error:",c),c}}async searchArchitectures(t="",r={},c=1,n=20){try{if(await this.initialize(),!this.searchIndex)throw new Error("Search index not loaded");let f=new Set,i=!0;if(t.trim()){const y=t.toLowerCase(),w=new Set;Object.entries(this.searchIndex.titles).forEach(([j,O])=>{(j.includes(y)||y.includes(j))&&O.forEach(m=>w.add(m))}),Object.entries(this.searchIndex.architects).forEach(([j,O])=>{(j.includes(y)||y.includes(j))&&O.forEach(m=>w.add(m))}),i?(f=w,i=!1):f=new Set([...f].filter(j=>w.has(j)))}if(r.architect){const y=r.architect.toLowerCase(),w=new Set;Object.entries(this.searchIndex.architects).forEach(([j,O])=>{j.includes(y)&&O.forEach(m=>w.add(m))}),i?(f=w,i=!1):f=new Set([...f].filter(j=>w.has(j)))}if(r.year){const y=r.year.toString(),w=this.searchIndex.years[y]||[],j=new Set(w);i?(f=j,i=!1):f=new Set([...f].filter(O=>j.has(O)))}if(i)return this.getAllArchitectures(c,n);const h=[...f].filter(y=>!this.allItems.has(y));if(h.length>0){const y=Math.min(10,Math.ceil(h.length/50));for(let w=1;w<=y;w++)this.cache.has(`page_${w}`)||await this.loadPage(w)}const l=[];for(const y of f){const w=this.allItems.get(y);w&&l.push(w)}l.sort((y,w)=>y.year&&w.year?w.year-y.year:y.year&&!w.year?-1:!y.year&&w.year?1:y.title.localeCompare(w.title));const b=(c-1)*n,u=b+n,R=l.slice(b,u),F=l.length,L=Math.ceil(F/n);return console.log(`🔍 Search results: ${F} matches, showing page ${c}/${L}`),{results:R,total:F,page:c,total_pages:L,has_more:c<L}}catch(f){throw console.error("❌ searchArchitectures error:",f),f}}async getArchitectureById(t){try{if(await this.initialize(),this.allItems.has(t))return this.allItems.get(t)||null;for(let r=1;r<=10;r++){const n=(await this.loadPage(r)).items.find(f=>f.id===t);if(n)return n}return null}catch(r){return console.error(`❌ getArchitectureById(${t}) error:`,r),null}}async getStats(){try{const t=await fetch(`${this.baseUrl}/metadata.json`);if(t.ok){const r=await t.json();return{total_items:r.total_items,total_pages:r.total_pages,items_per_page:r.items_per_page,loading_performance:"Sub-second loading (300x faster than SQLite)"}}return{total_items:0,total_pages:0,items_per_page:50,loading_performance:"Statistics unavailable"}}catch(t){throw console.error("❌ getStats error:",t),t}}clearCache(){this.cache.clear(),this.allItems.clear(),this.searchIndex=null,this.initialized=!1,console.log("🧹 FastArchitectureService cache cleared")}}const _t=new Tr;async function Ft(s=1,t=20){return _t.getAllArchitectures(s,t)}const Er=Object.freeze(Object.defineProperty({__proto__:null,fastArchitectureService:_t,getAllArchitectures:Ft},Symbol.toStringTag,{value:"Module"})),Sr=()=>{const[s,t]=g.useState([]),[r,c]=g.useState(!0),[n,f]=g.useState(0),[i,h]=g.useState(1),[l,b]=g.useState(""),[u,R]=g.useState(""),[F,L]=g.useState([]),[y,w]=g.useState([]),[j,O]=g.useState([]),[m,C]=g.useState("year_desc"),[p,E]=g.useState({}),[$,q]=g.useState(null),[T,be]=g.useState(""),[te,xe]=g.useState({}),oe=12,K=Ke(),J=Qe();g.useEffect(()=>{(async()=>{try{O([])}catch(v){console.error("タグ取得エラー:",v)}})()},[]),g.useEffect(()=>{const x=new URLSearchParams(K.search),v=x.get("tag"),I=x.get("search"),W=x.get("year"),Q=x.get("prefecture"),Y=x.get("category"),B=x.get("architect"),k=x.get("sort");if(k&&C(k),v){const S=v.split(",").map(a=>a.trim()).filter(a=>a),M=new Set,V=[];S.forEach(a=>{const A=a.match(/\d{4}年\d{1,2}月号?/);if(A){const D=a.replace(A[0],"").trim();D&&(M.add(D),V.push(a))}else M.add(a)}),L(Array.from(M)),w(V),R(v),b(`tag:${v}`),Z(1,`tag:${v}`,k||m)}else W?(b(`year:${W}`),Z(1,`year:${W}`,k||m)):Q?(b(`prefecture:${Q}`),Z(1,`prefecture:${Q}`,k||m)):Y?(b(`category:${Y}`),Z(1,`category:${Y}`,k||m)):B?(b(`architect:${B}`),Z(1,`architect:${B}`,k||m)):I?(b(I),Z(1,I,k||m)):Z(1,l,k||m)},[K.search]);const Z=async(x,v=l,I=m)=>{c(!0);try{const W=await Ft(x,oe,v,I);t(W.results),f(W.total),h(x)}catch(W){console.error("Error fetching architectures:",W)}finally{c(!1)}},ce=(x,v)=>{h(v),Z(v,l,m),window.scrollTo(0,0)},we=x=>{b(x.target.value)},ue=async(x,v)=>{q(x.currentTarget),be(v);try{const I=[];xe(W=>({...W,[v]:I}))}catch(I){console.error(`Failed to get years for tag ${v}:`,I)}},ge=()=>{q(null),be("")},Re=x=>{const v=x?`${T}${x}`:T;let I=[...y];const W=I.findIndex(S=>S.startsWith(T)&&(S===T||S.match(new RegExp(`^${T}\\d{4}年\\d{1,2}月号?`))||S.match(new RegExp(`^${T}\\d{4}年度?`))||S.match(new RegExp(`^${T}第\\d+回`))||S.match(new RegExp(`^${T}\\(\\d{4}\\)`))));W>=0?x?I[W]=v:I.splice(W,1):x&&I.push(v),w(I),ge();const Q=[...F];Q.includes(T)||Q.push(T);const Y=[...Q,...I].filter((S,M,V)=>V.indexOf(S)===M&&!I.some(a=>a!==S&&a.startsWith(S))).join(",");R(Y);const B=`tag:${Y}`;b(B),Z(1,B,m);const k=new URLSearchParams;k.set("tag",Y),m!=="year_desc"&&k.set("sort",m),J({search:k.toString()})},De=(x,v)=>{const I=F.filter(Y=>!v.includes(Y));let W=[...y].filter(Y=>!I.some(B=>Y.startsWith(B)));const Q=v.filter(Y=>!F.includes(Y));if(Q.length>0&&Q.forEach(async Y=>{if(!te[Y])try{const B=[];if(xe(k=>({...k,[Y]:B})),B&&B.length===1){const k=`${Y}${B[0]}`;W.push(k)}}catch(B){console.error(`Failed to get years for tag ${Y}:`,B)}}),L(v),w(W),v.length>0||W.length>0){const Y=[...v,...W].filter((S,M,V)=>V.indexOf(S)===M&&!W.some(a=>a!==S&&a.startsWith(S))).join(",");R(Y);const B=`tag:${Y}`;b(B),Z(1,B,m);const k=new URLSearchParams;k.set("tag",Y),m!=="year_desc"&&k.set("sort",m),J({search:k.toString()})}else Ee()},me=x=>{const v=x.target.value;C(v),Z(i,l,v);const I=new URLSearchParams(K.search);I.set("sort",v),J({search:I.toString()})},fe=()=>{h(1),Z(1,l,m);const x=new URLSearchParams;if(m!=="year_desc"&&x.set("sort",m),l.startsWith("tag:")){const v=l.substring(4).trim();x.set("tag",v)}else if(l.startsWith("year:")){const v=l.substring(5).trim();x.set("year",v)}else if(l.startsWith("prefecture:")){const v=l.substring(11).trim();x.set("prefecture",v)}else if(l.startsWith("category:")){const v=l.substring(9).trim();x.set("category",v)}else if(l.startsWith("architect:")){const v=l.substring(10).trim();x.set("architect",v)}else l&&x.set("search",l);J({search:x.toString()})},Ee=()=>{R(""),b(""),L([]),w([]),h(1),Z(1,"",m);const x=new URLSearchParams;m!=="year_desc"&&x.set("sort",m),J({search:x.toString()})},de=Math.ceil(n/oe);return e.jsxs(ne,{maxWidth:"lg",sx:{py:4},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:"建築作品一覧"}),e.jsxs(ie,{sx:{p:3,mb:4},children:[e.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Ae,{fullWidth:!0,label:"建築作品名、住所、建築家で検索",value:l,onChange:we,onKeyPress:x=>x.key==="Enter"&&fe(),InputProps:{startAdornment:e.jsx(et,{position:"start",children:e.jsx(He,{})})}}),e.jsx(_,{variant:"contained",onClick:fe,sx:{minWidth:"120px"},children:"検索"})]}),e.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(bt,{multiple:!0,id:"tags-selector",options:j,value:F,onChange:De,renderInput:x=>e.jsx(Ae,{...x,variant:"outlined",label:"タグで絞り込み",placeholder:"タグを選択"}),renderTags:(x,v)=>x.map((I,W)=>{const Q=y.some(S=>S.startsWith(I)&&S!==I),Y=!!(te[I]&&te[I].length>0),B=y.find(S=>S.startsWith(I)&&S!==I);let k="";if(B){const S=B.substring(I.length);S.match(/\d{4}年\d{1,2}月号?/)?k=S.replace(/^(\d{4})/,(M,V)=>`'${V.substring(2)}`):S.match(/\d{4}年度?/)?k=S.replace(/^(\d{4})/,(M,V)=>`'${V.substring(2)}`):S.match(/第\d+回/)?k=S:S.match(/\(\d{4}\)/)?k=S.replace(/\((\d{4})\)/,(M,V)=>`'${V.substring(2)}`):k=S}return e.jsx(P,{label:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[I,B&&e.jsx(d,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:k}),Y&&e.jsx(wt,{fontSize:"small"})]}),...v({index:W}),color:Q?"primary":"default",variant:"outlined",onClick:S=>{S.stopPropagation(),ue(S,I)},onDelete:S=>{v({index:W}).onDelete(S)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}},I)}),sx:{flex:2}}),e.jsxs(Ct,{sx:{minWidth:200,flex:1},children:[e.jsx(vt,{id:"sort-select-label",children:"並び替え"}),e.jsxs(At,{labelId:"sort-select-label",id:"sort-select",value:m,label:"並び替え",onChange:me,startAdornment:e.jsx(et,{position:"start",children:e.jsx(Qt,{})}),children:[e.jsx(re,{value:"year_desc",children:"年代（新しい順）"}),e.jsx(re,{value:"year_asc",children:"年代（古い順）"}),e.jsx(re,{value:"name_asc",children:"名前（昇順）"}),e.jsx(re,{value:"name_desc",children:"名前（降順）"}),e.jsx(re,{value:"architect_asc",children:"建築家（昇順）"}),e.jsx(re,{value:"architect_desc",children:"建築家（降順）"})]})]})]}),e.jsx(Tt,{open:!!$,anchorEl:$,onClose:ge,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(o,{sx:{p:2,maxHeight:300,width:"250px",overflowY:"auto"},children:[e.jsxs(d,{variant:"subtitle2",sx:{mb:1},children:[T," の選択:"]}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(P,{label:"指定なし",onClick:()=>Re(""),variant:"outlined",size:"small",color:F.includes(T)&&!y.some(x=>x.startsWith(T)&&x!==T)?"primary":"default"}),te[T]?.map(x=>{let v=x,I="default";return y.some(W=>W===`${T}${x}`)&&(I="primary"),e.jsx(P,{label:v,onClick:()=>Re(x),variant:"outlined",size:"small",color:I,sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},x)})]})]})}),(u||l)&&e.jsx(o,{sx:{mb:3},children:e.jsx(ot,{severity:"info",action:e.jsx(_,{color:"inherit",size:"small",onClick:Ee,children:"クリア"}),children:u?`タグ「${u}」で絞り込み中`:`「${l}」で検索中`})}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(d,{variant:"body2",color:"text.secondary",children:[n," 件の建築作品"]}),de>1&&e.jsx(Ne,{count:de,page:i,onChange:ce,color:"primary",size:"small"})]})]}),r?e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(e.Fragment,{children:[s.length===0?e.jsxs(o,{sx:{textAlign:"center",py:4},children:[e.jsx(d,{variant:"h6",children:"建築作品が見つかりませんでした"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"検索条件を変更してお試しください"})]}):e.jsx(U,{container:!0,spacing:3,children:s.map(x=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(je,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ge,{component:N,to:`/architecture/${x.Z_PK}`,sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%"},children:e.jsxs(ye,{sx:{width:"100%",flexGrow:1},children:[e.jsx(d,{gutterBottom:!0,variant:"h6",component:"h2",children:x.ZAR_TITLE}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1,mt:2},children:[x.ZAR_ARCHITECT&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Et,{fontSize:"small",color:"action"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:x.ZAR_ARCHITECT})]}),x.ZAR_ADDRESS&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ze,{fontSize:"small",color:"action"}),e.jsx(d,{variant:"body2",color:"text.secondary",children:x.ZAR_ADDRESS})]}),x.ZAR_YEAR&&x.ZAR_YEAR>0&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(St,{fontSize:"small",color:"action"}),e.jsxs(d,{variant:"body2",color:"text.secondary",children:[x.ZAR_YEAR,"年"]})]})]})]})})})},x.Z_PK))}),de>1&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Ne,{count:de,page:i,onChange:ce,color:"primary"})})]})]})},he="/archi-site",rt={from:"jsonconfig",configUrl:`${he}/db/archimap.sqlite3.json`},Ve=`${he}/db/archimap.sqlite3`;console.log("🔧 Environment debug info:");console.log("  - import.meta.env.PROD:",!0);console.log("  - BASE_PATH:",he);console.log("  - Database config URL:",rt.configUrl);let se=null,ee=null,st=!1,Fe=null,gt=!0;var Me=(s=>(s.NOT_INITIALIZED="not_initialized",s.INITIALIZING="initializing",s.READY="ready",s.ERROR="error",s))(Me||{});const Ir=()=>se||ee?"ready":st?"initializing":"not_initialized",mt=async()=>{try{const s=Date.now(),t=await fetch(`${he}/images/shinkenchiku-favicon.ico`,{method:"HEAD",cache:"no-cache"}),c=Date.now()-s;return c<100?"fast":c<500?"slow":"very-slow"}catch{return"very-slow"}};async function Rr(){console.log("🚀 Attempting chunked database loading with sql.js-httpvfs...");try{const{createDbWorker:s}=await at(async()=>{const{createDbWorker:h}=await import("./database-CzynoM3b.js").then(l=>l.i);return{createDbWorker:h}},__vite__mapDeps([0,1]));console.log("🗄️ Testing database config file accessibility..."),console.log(`🔗 Config URL: ${rt.configUrl}`);const t=await fetch(rt.configUrl,{method:"HEAD"});if(!t.ok)throw new Error(`Database config not accessible: ${t.status} ${t.statusText}`);console.log("✅ Database config is accessible");const r=new URL(`${he}/sqlite.worker.js`,window.location.origin),c=new URL(`${he}/sql-wasm.wasm`,window.location.origin);console.log("🔧 Worker URL:",r.toString()),console.log("🔧 WASM URL:",c.toString());const n=[{from:"inline",config:{serverMode:"full",url:`${he}/db/archimap.sqlite3`,requestChunkSize:65536},fileLength:12730368}];console.log("🔧 Using inline config:",JSON.stringify(n,null,2)),se=await s(n,r.toString(),c.toString()),console.log("✅ sql.js-httpvfs worker initialized successfully");const f=await se.db.exec("SELECT sqlite_version()");f&&f.length>0&&console.log(`🔍 SQLite バージョン: ${f[0].values[0][0]}`);const i=await se.db.exec("SELECT name FROM sqlite_master WHERE type='table'");if(i&&i.length>0){console.log(`📋 利用可能なテーブル数: ${i[0].values.length}`),console.log(`📋 テーブル一覧: ${i[0].values.map(h=>h[0]).join(", ")}`);try{const h=await se.db.exec("SELECT COUNT(*) FROM ZCDARCHITECTURE");h&&h.length>0&&console.log(`🏢 建築データ件数: ${h[0].values[0][0]} 件 (チャンク読み込み)`)}catch{console.log("📋 Architecture table structure checking...")}}return se}catch(s){throw console.warn("⚠️ Chunked loading failed, will try direct loading:",s.message),s}}async function Dr(){console.log("🚀 Fallback: Using direct sql.js loading...");try{console.log("📦 Importing sql.js...");const s=await at(()=>import("./database-CzynoM3b.js").then(u=>u.s),__vite__mapDeps([0,1]));console.log("📦 sql.js imported:",typeof s,Object.keys(s));const t=s.default||s;if(typeof t!="function"){if(s.initSqlJs&&typeof s.initSqlJs=="function"){console.log("📦 Found initSqlJs as named export");const u=await s.initSqlJs({locateFile:R=>R==="sql-wasm.wasm"?`${he}/sql-wasm.wasm`:R});return ee=new u.Database,ee}throw console.error("❌ Unable to find initSqlJs function in:",s),new Error("sql.js import failed - no initialization function found")}console.log("📦 initSqlJs function found:",typeof t),console.log("🗄️ Testing database file accessibility..."),console.log(`🔗 Database URL: ${Ve}`);const r=await fetch(Ve,{method:"HEAD"});if(!r.ok)throw new Error(`Database file not accessible: ${r.status} ${r.statusText}`);const c=r.headers.get("content-length");if(c){const u=parseInt(c)/1048576;console.log(`📁 Database file size: ${u.toFixed(2)} MB`)}console.log("✅ Database file is accessible");const n=`${he}/sql-wasm.wasm`,f=await t({locateFile:u=>u==="sql-wasm.wasm"?n:u});console.log("✅ SQL.js initialized successfully"),console.log("📥 Downloading database file...");const i=await fetch(Ve);if(!i.ok)throw new Error(`Failed to download database: ${i.status} ${i.statusText}`);const h=await i.arrayBuffer();console.log(`✅ Database downloaded: ${(h.byteLength/1024/1024).toFixed(2)} MB (uncompressed)`),ee=new f.Database(new Uint8Array(h)),console.log("✅ Database created successfully");const l=ee.exec("SELECT sqlite_version()");l.length>0&&console.log(`🔍 SQLite バージョン: ${l[0].values[0][0]}`);const b=ee.exec("SELECT name FROM sqlite_master WHERE type='table'");if(b.length>0){console.log(`📋 利用可能なテーブル数: ${b[0].values.length}`),console.log(`📋 テーブル一覧: ${b[0].values.map(u=>u[0]).join(", ")}`);try{const u=ee.exec("SELECT COUNT(*) FROM ZCDARCHITECTURE");u.length>0&&console.log(`🏢 建築データ件数: ${u[0].values[0][0]} 件 (直接読み込み)`)}catch{console.log("📋 Architecture table structure checking...")}}return ee}catch(s){throw console.error("❌ Direct loading also failed:",s.message),s}}const Lt=async()=>se||ee?se||ee:Fe||(st=!0,Fe=(async()=>{try{console.log("🚀 データベース初期化を開始（チャンク読み込み優先、直接読み込みフォールバック）...");const s=await mt();if(console.log(`🌐 Connection speed detected: ${s}`),gt)try{const r=await Rr();return console.log("🎉 チャンク読み込みが成功しました！"),r}catch(r){console.warn("⚠️ チャンク読み込みに失敗、直接読み込みにフォールバック:",r.message),gt=!1}const t=await Dr();return console.log("🎉 直接読み込みが成功しました！"),t}catch(s){if(console.error("❌ データベース初期化エラー:",s),se=null,ee=null,s instanceof Error){const t=await mt().catch(()=>"unknown");let r=s.message;s.message.includes("timeout")?t==="very-slow"?r+=`

📡 接続速度が非常に遅いため、データベースの初期化に時間がかかっています。WiFiやより高速な接続をお試しください。`:t==="slow"&&(r+=`

📡 接続速度が遅いため、データベースの初期化に時間がかかっています。`):s.message.includes("fetch")||s.message.includes("network")?r+=`

🌐 ネットワーク接続に問題があります。接続状態を確認してください。`:(s.message.includes("GZIP")||s.message.includes("compression"))&&(r+=`

📦 GZIP圧縮の問題が検出されました。データベースファイルの設定を確認中...`);const c=new Error(r);throw c.name=s.name,c}throw s}finally{st=!1,Fe=null}})(),Fe),Wt=async(s,t=[])=>{try{if(!se&&!ee&&await Lt(),se)return await se.db.exec(s,t);if(ee)return ee.exec(s,t);throw new Error("データベースが初期化されていません")}catch(r){throw console.error("クエリ実行エラー:",r),r}},Yt=s=>{if(!s||s.length===0)return[];const{columns:t,values:r}=s[0];return r.map(c=>{const n={};return t.forEach((f,i)=>{n[f]=c[i]}),n})},it=async(s,t=[])=>{const r=await Wt(s,t);return Yt(r)[0]},Je=async(s,t=[])=>{const r=await Wt(s,t);return Yt(r)},$r=async s=>it("SELECT * FROM ZCDARCHITECTURE WHERE Z_PK = ?",[s]),kr=async(s,t={})=>{let r=`
    ZAR_LATITUDE BETWEEN ? AND ?
    AND ZAR_LONGITUDE BETWEEN ? AND ?
    AND ZAR_LATITUDE IS NOT NULL
    AND ZAR_LONGITUDE IS NOT NULL
  `;const c=[s.south,s.north,s.west,s.east];t.searchTerm&&(r+=" AND (ZAR_TITLE LIKE ? OR ZAR_ADDRESS LIKE ? OR ZAR_ARCHITECT LIKE ?)",c.push(`%${t.searchTerm}%`,`%${t.searchTerm}%`,`%${t.searchTerm}%`)),t.architect&&(r+=" AND (ZAR_ARCHITECT LIKE ? OR ZAR_ARCHITECT_ENG LIKE ?)",c.push(`%${t.architect}%`,`%${t.architect}%`)),t.yearFrom&&(r+=" AND ZAR_YEAR >= ?",c.push(t.yearFrom)),t.yearTo&&(r+=" AND ZAR_YEAR <= ?",c.push(t.yearTo)),t.tags&&t.tags.length>0&&(r+=" AND ZAR_TAG LIKE ?",c.push(`%${t.tags.join("%")}%`));const n=`
    SELECT *
    FROM ZCDARCHITECTURE
    WHERE ${r}
    LIMIT 500
  `;return Je(n,c)};delete $t.Icon.Default.prototype._getIconUrl;$t.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const Ue=({markers:s=[],center:t,zoom:r=13,height:c="500px",singleMarker:n})=>{const[f,i]=g.useState(t);return g.useEffect(()=>{n&&n.latitude&&n.longitude?i([n.latitude,n.longitude]):t&&i(t)},[n,t]),e.jsx("div",{style:{height:c,width:"100%",marginBottom:"20px"},children:e.jsxs(pr,{center:f,zoom:r,style:{height:"100%",width:"100%"},children:[e.jsx(jr,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.map((h,l)=>h.latitude&&h.longitude?e.jsx(ct,{position:[h.latitude,h.longitude],children:e.jsxs(dt,{children:[e.jsx(d,{variant:"h6",children:h.name}),e.jsx(d,{variant:"body2",children:h.location}),e.jsx(_,{component:N,to:`/architecture/${h.id}`,size:"small",variant:"outlined",sx:{mt:1},children:"詳細を見る"})]})},`marker-${h.id||l}`):null),n&&n.latitude&&n.longitude&&e.jsx(ct,{position:[n.latitude,n.longitude],children:e.jsxs(dt,{children:[e.jsx(d,{variant:"h6",children:n.name}),e.jsx(d,{variant:"body2",children:n.location})]})})]})})},_r=()=>{const{id:s}=Rt(),[t,r]=g.useState(null),[c,n]=g.useState(!0),[f,i]=g.useState(null),h=Qe();if(g.useEffect(()=>{(async()=>{n(!0);try{const w=await $r(s);if(!w)throw new Error("建築作品の取得に失敗しました");r(w)}catch(w){console.error("Error fetching work:",w),i(w.message)}finally{n(!1)}})()},[s]),c)return e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(Te,{})});if(f)return e.jsxs(ne,{children:[e.jsxs(d,{variant:"h5",color:"error",sx:{textAlign:"center",my:4},children:["エラーが発生しました: ",f]}),e.jsx(_,{variant:"contained",component:N,to:"/architecture",startIcon:e.jsx(We,{}),children:"建築作品一覧に戻る"})]});if(!t)return e.jsxs(ne,{children:[e.jsx(d,{variant:"h5",sx:{textAlign:"center",my:4},children:"建築作品が見つかりませんでした"}),e.jsx(_,{variant:"contained",component:N,to:"/architecture",startIcon:e.jsx(We,{}),children:"建築作品一覧に戻る"})]});const l=t.tag?t.tag.split(",").filter(y=>y.trim()!==""&&!y.includes("の追加建築")):[],b=l.find(y=>y.includes("新建築")),u=b?b.replace("新建築",""):"",R=y=>{console.log(`タグがクリックされました: ${y}`),h(`/architecture?tag=${encodeURIComponent(y)}`)},F=(y,w)=>{const j=`${y} ${w?.name||""} 建築`;return`https://www.google.com/search?q=${encodeURIComponent(j)}&tbm=isch`},L=y=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(y)}`;return e.jsxs(ne,{maxWidth:"lg",sx:{py:4},children:[e.jsx(_,{variant:"outlined",component:N,to:"/architecture",startIcon:e.jsx(We,{}),sx:{mb:3},children:"建築作品一覧に戻る"}),e.jsxs(ie,{sx:{p:3,mb:4},children:[e.jsxs(o,{sx:{mb:2},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"無題"}),t.location&&e.jsxs(d,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:[e.jsx(Ze,{fontSize:"small",sx:{verticalAlign:"middle",mr:.5}}),t.location]}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[t.completedYear!==0&&e.jsx(P,{icon:e.jsx(St,{}),label:`${t.completedYear}年`,variant:"outlined",size:"small",onClick:()=>h(`/architecture?year=${t.completedYear}`),clickable:!0}),t.city&&e.jsx(P,{icon:e.jsx(Ze,{}),label:t.city,variant:"outlined",size:"small",onClick:()=>h(`/architecture?prefecture=${encodeURIComponent(t.city)}`),clickable:!0}),t.architect&&t.architect.name&&e.jsx(P,{icon:e.jsx(Et,{}),label:t.architect.name,component:N,to:`/architects/${t.architect.id}`,clickable:!0,color:"primary",size:"small"}),t.bigCategory&&e.jsx(P,{icon:e.jsx(tt,{}),label:t.bigCategory,variant:"outlined",size:"small",onClick:()=>h(`/architecture?category=${encodeURIComponent(t.bigCategory)}`),clickable:!0}),t.category&&t.category!==t.bigCategory&&e.jsx(P,{icon:e.jsx(tt,{}),label:t.category,variant:"outlined",size:"small",onClick:()=>h(`/architecture?category=${encodeURIComponent(t.category)}`),clickable:!0})]}),l.length>0&&e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:l.map((y,w)=>e.jsx(P,{icon:e.jsx(It,{}),label:y,onClick:()=>R(y),clickable:!0,color:"secondary",variant:"outlined",size:"small"},w))})]}),e.jsx(qe,{sx:{my:3}}),e.jsxs(o,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.shinkenchikuUrl&&e.jsx(ve,{title:"新建築データで見る",children:e.jsxs(_,{variant:"contained",href:t.shinkenchikuUrl,target:"_blank",rel:"noopener noreferrer",size:"small",sx:{backgroundColor:"#003366",color:"#ffffff","&:hover":{backgroundColor:"#002244"}},children:[e.jsx(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mr:.5},children:e.jsx("img",{src:"https://data.shinkenchiku.online/favicon.ico",alt:"新建築データ",style:{height:"16px",width:"auto",marginRight:"4px"}})}),u&&e.jsx(d,{variant:"caption",children:u})]})}),e.jsx(ve,{title:"Google画像検索",children:e.jsx(_,{href:F(t.name,t.architect),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Jt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"画像"})}),e.jsx(ve,{title:"Wikipediaで検索",children:e.jsx(_,{href:L(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Vt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),t.description&&e.jsxs(o,{sx:{mt:3},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"概要"}),e.jsx(d,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-line"},children:t.description})]}),t.latitude&&t.longitude&&e.jsxs(o,{sx:{mt:3},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"位置情報"}),e.jsx(o,{sx:{height:"400px",width:"100%",mt:2,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(Ue,{singleMarker:{id:t.id||0,latitude:t.latitude,longitude:t.longitude,name:t.name,location:t.location},center:[t.latitude,t.longitude],zoom:15})})]})]})]})},Fr=async s=>it("SELECT * FROM ZCDARCHITECT WHERE ZAR_ID = ?",[s]),Lr=async(s=1,t=12,r="",c=[],n="ZAR_NAME",f="asc",i={})=>{const h=(s-1)*t;let l="1=1";const b=[];r&&(l+=" AND (ZAR_NAME LIKE ? OR ZAR_KANA LIKE ? OR ZAR_NAMEENG LIKE ?)",b.push(`%${r}%`,`%${r}%`,`%${r}%`)),i.nationality&&(l+=" AND ZAR_NATIONALITY = ?",b.push(i.nationality)),i.category&&(l+=" AND ZAR_CATEGORY = ?",b.push(i.category)),i.school&&(l+=" AND ZAR_SCHOOL = ?",b.push(i.school)),i.birthYearFrom&&(l+=" AND ZAR_BIRTHYEAR >= ?",b.push(i.birthYearFrom)),i.birthYearTo&&(l+=" AND ZAR_BIRTHYEAR <= ?",b.push(i.birthYearTo)),i.deathYear&&(l+=" AND ZAR_DEATHYEAR = ?",b.push(i.deathYear));let u="";c&&c.length>0&&(u=`
      INNER JOIN ZCDARCHITECT_TAG ON ZCDARCHITECT.ZAR_ID = ZCDARCHITECT_TAG.ARCHITECT_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECT_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,l+=" AND ZCDTAG.TAG_NAME IN (",l+=c.map(()=>"?").join(","),l+=")",b.push(...c));const R=`
    SELECT COUNT(DISTINCT ZCDARCHITECT.ZAR_ID) as total
    FROM ZCDARCHITECT
    ${u}
    WHERE ${l}
  `,F=`
    SELECT DISTINCT ZCDARCHITECT.*
    FROM ZCDARCHITECT
    ${u}
    WHERE ${l}
    ORDER BY ${n} ${f==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,L=[...b,t,h];try{const w=(await it(R,b))?.total||0;return{results:await Je(F,L),total:w,page:s,limit:t,totalPages:Math.ceil(w/t)}}catch(y){throw console.error("建築家データ取得エラー:",y),y}},Wr=async()=>Je(`
    SELECT TAG_ID, TAG_NAME, COUNT(ARCHITECT_ID) as TAG_COUNT
    FROM ZCDTAG
    LEFT JOIN ZCDARCHITECT_TAG ON ZCDTAG.TAG_ID = ZCDARCHITECT_TAG.TAG_ID
    GROUP BY ZCDTAG.TAG_ID, ZCDTAG.TAG_NAME
    ORDER BY TAG_COUNT DESC, TAG_NAME
  `),Yr=()=>{console.log("ArchitectsPage コンポーネントがレンダリングされました");const[s,t]=g.useState([]),[r,c]=g.useState(!0),[n,f]=g.useState(0),[i,h]=g.useState(0),[l,b]=g.useState(1),[u,R]=g.useState(""),[F,L]=g.useState([]),[y,w]=g.useState([]),[j,O]=g.useState([]),[m,C]=g.useState("name"),[p,E]=g.useState("asc"),[$,q]=g.useState(null),[T,be]=g.useState(""),[te,xe]=g.useState({}),[oe,K]=g.useState(""),[J,Z]=g.useState(""),[ce,we]=g.useState(""),[ue,ge]=g.useState(""),[Re,De]=g.useState(""),[me,fe]=g.useState(""),Ee=Qe(),de=Ke(),x=new URLSearchParams(de.search);g.useEffect(()=>{console.log("tagMenuAnchorEl 状態変更:",!!$)},[$]),g.useEffect(()=>{console.log("タグ読み込みのuseEffectが実行されました"),(async()=>{try{console.log("建築家タグ取得開始");const A=await Wr();console.log("取得した建築家タグ:",A),O(["国籍","カテゴリー","学校","生年","没年"])}catch(A){console.error("タグ取得エラー:",A)}})()},[]),g.useEffect(()=>{console.log("建築家データ読み込みのuseEffectが実行されました",de.search),(async()=>{c(!0);try{const A=parseInt(x.get("page")||"1"),D=x.get("search")||"",X=x.get("tags")?x.get("tags").split(","):[],z=x.get("sortBy")||"name",H=x.get("sortOrder")||"asc",ae=x.get("nationality")||"",Ye=x.get("category")||"",Oe=x.get("school")||"",$e=x.get("birthYearFrom")||"",ke=x.get("birthYearTo")||"",_e=x.get("deathYear")||"";console.log("URLから読み取ったパラメータ:",{page:A,search:D,tags:X,sort:z,order:H,nat:ae,cat:Ye,sch:Oe,birthFrom:$e,birthTo:ke,death:_e}),b(A),R(D),L(X),C(z),E(H),K(ae),Z(Ye),we(Oe),ge($e),De(ke),fe(_e),console.log("建築家データ取得開始:",{page:A,search:D,tags:X,sort:z,order:H,nat:ae,cat:Ye,sch:Oe,birthFrom:$e,birthTo:ke,death:_e});const Be=await Lr(A,10,D,X,z,H,ae,Ye,Oe,$e?parseInt($e):0,ke?parseInt(ke):0,_e?parseInt(_e):0);console.log("取得した建築家データ:",Be),t(Be.items),f(Be.totalPages),h(Be.total)}catch(A){console.error("建築家データ取得エラー:",A)}finally{c(!1)}})()},[de.search]);const v=async a=>{console.log(`${a}の年度取得開始`);let A="";if(a==="国籍"?A="SELECT DISTINCT ZAT_NATIONALITY as value FROM ZCDARCHITECT WHERE ZAT_NATIONALITY != '' ORDER BY ZAT_NATIONALITY":a==="カテゴリー"?A="SELECT DISTINCT ZAT_CATEGORY as value FROM ZCDARCHITECT WHERE ZAT_CATEGORY != '' ORDER BY ZAT_CATEGORY":a==="学校"?A="SELECT DISTINCT ZAT_SCHOOL as value FROM ZCDARCHITECT WHERE ZAT_SCHOOL != '' ORDER BY ZAT_SCHOOL":a==="生年"?A="SELECT DISTINCT ZAT_BIRTHYEAR as value FROM ZCDARCHITECT WHERE ZAT_BIRTHYEAR > 0 ORDER BY ZAT_BIRTHYEAR DESC":a==="没年"&&(A="SELECT DISTINCT ZAT_DEATHYEAR as value FROM ZCDARCHITECT WHERE ZAT_DEATHYEAR > 0 ORDER BY ZAT_DEATHYEAR DESC"),!A)return[];try{return(await Je(A)).map(X=>String(X.value)).filter(Boolean)}catch(D){return console.error(`${a}の値取得エラー:`,D),[]}},I=async(a,A)=>{if(console.log(`${A}の年度メニューを開く`,a.currentTarget),q(a.currentTarget),be(A),!te[A])try{const D=await v(A);console.log(`取得した${A}の年度:`,D),xe(X=>({...X,[A]:D}))}catch(D){console.error(`${A}の年度取得エラー:`,D)}},W=()=>{console.log("年度メニューを閉じる"),q(null),be("")},Q=a=>{console.log(`年度選択: ${a} (タグ: ${T})`),T==="国籍"?K(a):T==="カテゴリー"?Z(a):T==="学校"?we(a):T==="生年"?ge(a):T==="没年"&&fe(a),W(),M()},Y=(a,A)=>{console.log("タグ選択変更:",A),L(A);const D=F.filter(z=>!A.includes(z));for(const z of D)z==="国籍"?K(""):z==="カテゴリー"?Z(""):z==="学校"?we(""):z==="生年"?(ge(""),De("")):z==="没年"&&fe("");const X=A.filter(z=>!F.includes(z));X.length>0&&X.forEach(async z=>{if(!te[z])try{const H=await v(z);xe(ae=>({...ae,[z]:H}))}catch(H){console.error(`${z}の年度取得エラー:`,H)}}),M()},B=(a,A)=>{console.log(`ページ変更: ${A}`),b(A);const D=new URLSearchParams(de.search);D.set("page",A.toString()),Ee({search:D.toString()})},k=()=>{console.log(`検索実行: ${u}`),M()},S=()=>{console.log("検索条件をクリア"),R(""),L([]),w([]),K(""),Z(""),we(""),ge(""),De(""),fe(""),b(1);const a=new URLSearchParams;m!=="name"&&a.set("sortBy",m),p!=="asc"&&a.set("sortOrder",p),Ee({search:a.toString()})},M=()=>{console.log("URLと検索を更新");const a=new URLSearchParams;l>1&&a.set("page",l.toString()),u&&a.set("search",u),F.length>0&&a.set("tags",F.join(",")),m!=="name"&&a.set("sortBy",m),p!=="asc"&&a.set("sortOrder",p),oe&&a.set("nationality",oe),J&&a.set("category",J),ce&&a.set("school",ce),ue&&a.set("birthYearFrom",ue),Re&&a.set("birthYearTo",Re),me&&a.set("deathYear",me),console.log("新しいURLパラメータ:",a.toString()),Ee({search:a.toString()})},V=()=>{const a=[];return oe&&a.push({label:`国籍: ${oe}`,onDelete:()=>{K(""),M()}}),ue&&a.push({label:`生年: ${ue}`,onDelete:()=>{ge(""),M()}}),me&&a.push({label:`没年: ${me}`,onDelete:()=>{fe(""),M()}}),J&&a.push({label:`カテゴリー: ${J}`,onDelete:()=>{Z(""),M()}}),ce&&a.push({label:`学校: ${ce}`,onDelete:()=>{we(""),M()}}),a.length===0&&!u&&F.length===0?null:e.jsx(o,{sx:{mb:3},children:e.jsx(ot,{severity:"info",action:e.jsx(_,{color:"inherit",size:"small",onClick:S,children:"クリア"}),children:a.length>0?`フィルター: ${a.map(A=>A.label).join(", ")}`:u?`「${u}」で検索中`:F.length>0?`タグ「${F.join(", ")}」で絞り込み中`:""})})};return e.jsxs(ne,{maxWidth:"lg",sx:{py:4},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:"建築家一覧"}),e.jsxs(ie,{sx:{p:3,mb:4},children:[e.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Ae,{fullWidth:!0,label:"建築家名、国籍、カテゴリーで検索",value:u,onChange:a=>R(a.target.value),onKeyPress:a=>a.key==="Enter"&&k(),InputProps:{startAdornment:e.jsx(et,{position:"start",children:e.jsx(He,{})})}}),e.jsx(_,{variant:"contained",onClick:k,sx:{minWidth:"120px"},children:"検索"})]}),e.jsxs(o,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(bt,{multiple:!0,id:"tags-selector",options:j,value:F,onChange:Y,fullWidth:!0,renderInput:a=>e.jsx(Ae,{...a,variant:"outlined",label:"タグで絞り込み",placeholder:"タグを選択"}),renderTags:(a,A)=>a.map((D,X)=>{const z=!!(te[D]&&te[D].length>0);let H="";return D==="国籍"?H=oe:D==="カテゴリー"?H=J:D==="学校"?H=ce:D==="生年"?H=ue:D==="没年"&&(H=me),e.jsx(P,{label:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[D,H&&e.jsx(d,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:H}),z&&e.jsx(wt,{fontSize:"small"})]}),...A({index:X}),color:H?"primary":"default",variant:"outlined",onClick:ae=>{ae.stopPropagation(),I(ae,D)},onDelete:ae=>{A({index:X}).onDelete(ae)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap"}}},D)})}),e.jsxs(Ct,{sx:{minWidth:200},children:[e.jsx(vt,{id:"sort-select-label",children:"並び替え"}),e.jsxs(At,{labelId:"sort-select-label",value:`${m}_${p}`,label:"並び替え",onChange:a=>{const[A,D]=a.target.value.split("_");C(A),E(D),M()},children:[e.jsx(re,{value:"name_asc",children:"名前 (昇順)"}),e.jsx(re,{value:"name_desc",children:"名前 (降順)"}),e.jsx(re,{value:"birthYear_asc",children:"生年 (昇順)"}),e.jsx(re,{value:"birthYear_desc",children:"生年 (降順)"}),e.jsx(re,{value:"nationality_asc",children:"国籍 (昇順)"}),e.jsx(re,{value:"nationality_desc",children:"国籍 (降順)"})]})]})]}),e.jsx(Tt,{open:!!$,anchorEl:$,onClose:W,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsxs(o,{sx:{p:2,width:300,maxHeight:400,overflow:"auto"},children:[e.jsx(d,{variant:"subtitle1",gutterBottom:!0,children:T==="国籍"?"国籍を選択":T==="カテゴリー"?"カテゴリーを選択":T==="学校"?"学校を選択":T==="生年"?"生年を選択":T==="没年"?"没年を選択":"タグ値を選択"}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:[e.jsx(P,{label:"指定なし",onClick:()=>Q(""),variant:"outlined",size:"small",sx:{mb:1}}),te[T]?.map(a=>e.jsx(P,{label:a,onClick:()=>Q(a),variant:"outlined",size:"small",color:T==="国籍"&&a===oe||T==="カテゴリー"&&a===J||T==="学校"&&a===ce||T==="生年"&&a===ue||T==="没年"&&a===me?"primary":"default",sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},a))]})]})}),e.jsx(V,{}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(d,{variant:"body2",color:"text.secondary",children:[i,"人の建築家"]}),n>1&&e.jsx(Ne,{count:n,page:l,onChange:B,color:"primary",size:"small"})]})]}),r?e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(e.Fragment,{children:[s.length===0?e.jsxs(o,{sx:{textAlign:"center",py:4},children:[e.jsx(d,{variant:"h6",children:"建築家が見つかりませんでした"}),e.jsx(d,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"検索条件を変更してお試しください"})]}):e.jsx(U,{container:!0,spacing:3,children:s.map(a=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsx(je,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ge,{component:N,to:`/architects/${a.id}`,children:e.jsxs(ye,{children:[e.jsx(d,{variant:"h6",component:"div",gutterBottom:!0,children:a.name}),e.jsxs(d,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[a.nationality," • ",a.birthYear||"?","-",a.deathYear||"現在"]}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:a.tags&&a.tags.map(A=>e.jsx(P,{label:A,size:"small",variant:"outlined",sx:{pointerEvents:"none"}},A))})]})})})},a.id))}),n>1&&e.jsx(o,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Ne,{count:n,page:l,onChange:B,color:"primary"})})]})]})},Or=({architectures:s,compact:t=!1})=>!s||s.length===0?e.jsx(d,{variant:"body2",color:"text.secondary",children:"登録されている作品はありません。"}):e.jsx(U,{container:!0,spacing:t?2:3,children:s.map(r=>e.jsx(U,{item:!0,xs:12,sm:6,md:t?6:4,children:e.jsx(je,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ge,{component:N,to:`/architecture/${r.id}`,sx:{flexGrow:1},children:e.jsxs(ye,{children:[e.jsx(d,{gutterBottom:!0,variant:"h6",component:"h2",children:r.name}),r.completedYear>0&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Xt,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(d,{variant:"body2",color:"text.secondary",children:[r.completedYear,"年"]})]}),(r.city||r.location)&&e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Ze,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(d,{variant:"body2",color:"text.secondary",children:[r.city?r.city:"",r.city&&r.location?" / ":"",r.location?r.location:""]})]}),r.tag&&e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:r.tag.split(",").filter(c=>c.trim()!==""&&!c.includes("の追加建築")).map((c,n)=>e.jsx(P,{label:c.trim(),size:"small",color:"secondary",variant:"outlined",sx:{height:"20px",fontSize:"0.65rem"}},n))})]})})})},r.id))}),Br=()=>e.jsx(o,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:e.jsx(d,{variant:"caption",component:"span",sx:{fontFamily:"serif",fontWeight:"bold",fontSize:"16px"},children:"W"})}),Pr=()=>{const{id:s}=Rt(),[t,r]=g.useState(null),[c,n]=g.useState(!0),[f,i]=g.useState(null),[h,l]=g.useState([]),b=Qe();g.useEffect(()=>{s&&(async()=>{n(!0);try{const C=await Fr(parseInt(s));if(!C){i("建築家情報が見つかりませんでした。"),n(!1);return}r(C);const p=[];if(C.teacher1){const E={name:C.teacher1,id:null};try{E.id=await u(C.teacher1)}catch($){console.error("教師情報の取得に失敗:",$)}p.push(E)}if(C.teacher2){const E={name:C.teacher2,id:null};try{E.id=await u(C.teacher2)}catch($){console.error("教師情報の取得に失敗:",$)}p.push(E)}if(C.teacher3){const E={name:C.teacher3,id:null};try{E.id=await u(C.teacher3)}catch($){console.error("教師情報の取得に失敗:",$)}p.push(E)}l(p)}catch(C){console.error("建築家データ取得エラー:",C),i("建築家情報の読み込み中にエラーが発生しました。")}finally{n(!1)}})()},[s]);const u=async m=>null,R=()=>{if(!t)return null;const m=[];if(t.school){let C=t.school;t.faculty&&(C+=` ${t.faculty}`),m.push(C)}return t.schoolAbroad&&m.push(t.schoolAbroad),m.length>0?m.join("、"):null},F=()=>!h||h.length===0?null:h.map((m,C)=>e.jsxs("span",{children:[C>0&&"、",m.id?e.jsx(cr,{component:N,to:`/architects/${m.id}`,color:"inherit",underline:"hover",children:m.name}):m.name]},C)),L=(m,C)=>{if(!C)return;let p="";switch(m){case"nationality":p=`nationality=${encodeURIComponent(C)}`;break;case"born":p=`birthyear_from=${encodeURIComponent(C)}&birthyear_to=${encodeURIComponent(C)}`;break;case"died":p=`deathyear=${encodeURIComponent(C)}`;break;case"category":p=`category=${encodeURIComponent(C)}`;break;default:return}b(`/architects?${p}`)},y=(m,C)=>{const p=`${m} ${C||""} 建築家`;return`https://www.google.com/search?q=${encodeURIComponent(p)}`},w=m=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(m)}`;if(c)return e.jsx(ne,{maxWidth:"lg",sx:{py:4},children:e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(Te,{})})});if(f||!t)return e.jsx(ne,{maxWidth:"lg",sx:{py:4},children:e.jsxs(ie,{sx:{p:3},children:[e.jsx(d,{variant:"h5",color:"error",gutterBottom:!0,children:"エラー"}),e.jsx(d,{paragraph:!0,children:f||"建築家情報が見つかりませんでした。"}),e.jsx(_,{variant:"outlined",startIcon:e.jsx(We,{}),onClick:()=>b(-1),children:"戻る"})]})});const j=new Set;t.works&&t.works.forEach(m=>{m.tag&&m.tag.split(",").forEach(p=>{const E=p.trim();E&&!E.includes("の追加建築")&&j.add(E)})});const O=[];if(t.nationality&&O.push(`nationality:${t.nationality}`),t.birthYear>0){const m=Math.floor(t.birthYear/10)*10;O.push(`born:${m}s`)}return t.deathYear>0&&O.push(`died:${t.deathYear}`),t.category&&O.push(`category:${t.category}`),t.school&&O.push(`school:${t.school}`),e.jsxs(ne,{maxWidth:"lg",sx:{py:4},children:[e.jsx(_,{variant:"outlined",component:N,to:"/architects",startIcon:e.jsx(We,{}),sx:{mb:3},children:"建築家一覧に戻る"}),e.jsxs(ie,{sx:{p:3,mb:4},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"不明"}),e.jsxs(o,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:3},children:[t.nationality&&e.jsx(P,{icon:e.jsx(er,{}),label:`nationality:${t.nationality}`,variant:"outlined",onClick:()=>L("nationality",t.nationality),clickable:!0}),t.birthYear>0&&e.jsx(P,{icon:e.jsx(tr,{}),label:`born:${Math.floor(t.birthYear/10)*10}s`,variant:"outlined",onClick:()=>L("born",Math.floor(t.birthYear/10)*10),clickable:!0}),t.deathYear>0&&e.jsx(P,{icon:e.jsx(rr,{}),label:`died:${t.deathYear}`,variant:"outlined",onClick:()=>L("died",t.deathYear),clickable:!0}),t.category&&e.jsx(P,{icon:e.jsx(tt,{}),label:`category:${t.category}`,variant:"outlined",onClick:()=>L("category",t.category),clickable:!0}),t.office&&e.jsx(P,{icon:e.jsx(sr,{}),label:t.office,variant:"outlined"})]}),e.jsx(qe,{sx:{my:3}}),e.jsxs(o,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.website&&e.jsx(ve,{title:"公式ホームページ",children:e.jsx(_,{href:t.website.startsWith("http")?t.website:`http://${t.website}`,target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(nr,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4caf50",color:"#ffffff","&:hover":{backgroundColor:"#388e3c"}},children:"ホームページ"})}),e.jsx(ve,{title:"Google検索",children:e.jsx(_,{href:y(t.name,t.nationality),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(He,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"検索"})}),e.jsx(ve,{title:"Wikipediaで検索",children:e.jsx(_,{href:w(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Br,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),e.jsx(or,{component:ie,variant:"outlined",sx:{mb:4},children:e.jsx(ar,{children:e.jsxs(ir,{children:[t.nationality&&e.jsxs(pe,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(d,{variant:"subtitle2",children:"国籍"})}),e.jsx(G,{children:t.nationality})]}),(t.birthYear>0||t.deathYear>0)&&e.jsxs(pe,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(d,{variant:"subtitle2",children:"生年 - 没年"})}),e.jsxs(G,{children:[t.birthYear>0?`${t.birthYear}年`:"不明",t.deathYear>0?` - ${t.deathYear}年`:""]})]}),t.office&&e.jsxs(pe,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(d,{variant:"subtitle2",children:"事務所"})}),e.jsx(G,{children:t.office})]}),t.prefecture&&e.jsxs(pe,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(d,{variant:"subtitle2",children:"拠点"})}),e.jsx(G,{children:t.prefecture})]}),t.nameEn&&e.jsxs(pe,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(d,{variant:"subtitle2",children:"英語表記"})}),e.jsx(G,{children:t.nameEn})]}),(t.school||t.faculty||t.schoolAbroad)&&e.jsxs(pe,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(d,{variant:"subtitle2",children:"教育背景"})}),e.jsx(G,{children:e.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(lr,{sx:{mr:1,fontSize:"1rem",color:"text.secondary"}}),e.jsx(d,{variant:"body2",children:R()})]})})]}),(t.teacher1||t.teacher2||t.teacher3)&&e.jsxs(pe,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(d,{variant:"subtitle2",children:"師事した建築家"})}),e.jsx(G,{children:e.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:1},children:F()})})]}),t.category&&e.jsxs(pe,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(d,{variant:"subtitle2",children:"カテゴリー"})}),e.jsx(G,{children:t.category})]})]})})}),j.size>0&&e.jsxs(o,{sx:{mb:4},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"受賞歴・選定"}),e.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:Array.from(j).map((m,C)=>e.jsx(P,{icon:e.jsx(It,{}),label:String(m),onClick:()=>L("category",m),clickable:!0,color:"secondary",variant:"outlined",size:"small"},C))})]}),t.bio&&e.jsxs(o,{sx:{mb:4},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"経歴"}),e.jsx(d,{variant:"body1",sx:{whiteSpace:"pre-line"},children:t.bio})]}),t.works&&t.works.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(o,{sx:{mb:4},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"作品マップ"}),t.works.some(m=>m.latitude&&m.longitude)?e.jsx(o,{sx:{height:"400px",width:"100%",mb:3,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(Ue,{markers:t.works.filter(m=>m.latitude&&m.longitude),zoom:5,center:[t.works[0].latitude||35.6762,t.works[0].longitude||139.6503]})}):e.jsx(d,{variant:"body2",color:"text.secondary",children:"位置情報が登録されている作品がありません。"})]}),e.jsxs(o,{sx:{mb:4},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"代表作品"}),e.jsx(Or,{architectures:t.works})]})]})]})]})},zr=()=>{const[s,t]=g.useState(!0),[r,c]=g.useState([]),[n,f]=g.useState([]),[i,h]=g.useState({yearFrom:"",yearTo:""}),[l,b]=g.useState(!1),[u,R]=g.useState(null),[F,L]=g.useState(!1);g.useEffect(()=>{w()},[]);const y=p=>{if(!p||p.length===0)return{from:0,to:0};const E=p.filter(K=>K.completedYear>0);if(E.length===0)return{from:0,to:0};const $=E.map(K=>K.completedYear).sort((K,J)=>K-J),q=$[0],T=$[$.length-1],be=Math.min(100,Math.floor((T-q)/2)),te=Math.floor(Math.random()*($.length-Math.floor($.length/4))),xe=$[te],oe=Math.min(xe+be,T);return{from:xe,to:oe}},w=async()=>{t(!0);try{const p=await kr();if(f(p),!i.yearFrom&&!i.yearTo){const E=y(p);h({yearFrom:E.from.toString(),yearTo:E.to.toString()});const $=p.filter(q=>q.completedYear>=E.from&&q.completedYear<=E.to);c($)}else{let E=p;i.yearFrom&&(E=E.filter($=>$.completedYear>=parseInt(i.yearFrom))),i.yearTo&&(E=E.filter($=>$.completedYear<=parseInt(i.yearTo))),c(E)}}catch(p){console.error("Error fetching works:",p)}finally{t(!1)}},j=p=>{const{name:E,value:$}=p.target;h({...i,[E]:$})},O=()=>{t(!0);let p=n;i.yearFrom&&(p=p.filter(E=>E.completedYear>=parseInt(i.yearFrom))),i.yearTo&&(p=p.filter(E=>E.completedYear<=parseInt(i.yearTo))),c(p),t(!1)},m=()=>{h({yearFrom:"",yearTo:""}),c(n)},C=p=>{R(p),L(!0)};return e.jsxs(ne,{maxWidth:"lg",sx:{py:4},children:[e.jsx(d,{variant:"h4",component:"h1",gutterBottom:!0,children:"建築地図"}),e.jsxs(ie,{sx:{p:3,mb:4},children:[e.jsx(_,{startIcon:e.jsx(dr,{}),onClick:()=>b(!l),sx:{mb:2},children:l?"フィルターを閉じる":"フィルターを表示"}),l&&e.jsx(o,{sx:{mb:2},children:e.jsxs(U,{container:!0,spacing:2,children:[e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ae,{fullWidth:!0,label:"年代（から）",name:"yearFrom",type:"number",value:i.yearFrom,onChange:j})}),e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ae,{fullWidth:!0,label:"年代（まで）",name:"yearTo",type:"number",value:i.yearTo,onChange:j})}),e.jsx(U,{item:!0,xs:12,md:4,children:e.jsxs(o,{sx:{display:"flex",gap:1,height:"100%"},children:[e.jsx(_,{variant:"contained",color:"primary",onClick:O,sx:{flexGrow:1},children:"フィルター適用"}),e.jsx(_,{variant:"outlined",onClick:m,sx:{flexGrow:1},children:"クリア"})]})})]})}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ie,{sx:{mr:1}}),e.jsxs(d,{variant:"body2",color:"text.secondary",children:["マップ上に表示された作品: ",r.length,"件 ",i.yearFrom&&i.yearTo&&`(${i.yearFrom}年〜${i.yearTo}年)`]})]})]}),s?e.jsx(o,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(o,{sx:{height:600,bgcolor:"grey.200",position:"relative",borderRadius:1},children:[e.jsx(Ue,{markers:r,height:"600px",zoom:5,center:[35.6762,139.6503]}),e.jsxs(o,{sx:{position:"absolute",top:16,right:16,width:320,maxHeight:568,overflow:"auto",bgcolor:"background.paper",borderRadius:1,boxShadow:3,p:2,zIndex:1e3},children:[e.jsx(d,{variant:"h6",gutterBottom:!0,children:"作品リスト"}),r.length===0?e.jsx(d,{variant:"body2",children:"条件に一致する作品はありません"}):e.jsx(pt,{dense:!0,children:r.map(p=>e.jsxs(Dt.Fragment,{children:[e.jsx(jt,{onClick:()=>C(p),sx:{cursor:"pointer",bgcolor:u&&u.id===p.id?"action.selected":"transparent","&:hover":{bgcolor:"action.hover"}},children:e.jsx(yt,{primary:p.name,secondary:e.jsxs(e.Fragment,{children:[p.architectName&&e.jsxs("span",{children:[p.architectName,e.jsx("br",{})]}),p.completedYear>0&&`${p.completedYear}年 | `,p.city||""]})})}),e.jsx(qe,{component:"li"})]},p.id))})]})]}),e.jsx(ft,{anchor:"right",open:F,onClose:()=>L(!1),children:u&&e.jsxs(o,{sx:{width:350,p:3},children:[e.jsx(d,{variant:"h5",gutterBottom:!0,children:u.name}),e.jsxs(o,{sx:{mb:3},children:[u.architectName&&e.jsx(d,{variant:"subtitle1",color:"text.secondary",children:u.architectName}),e.jsxs(d,{variant:"body2",children:[u.completedYear>0&&`${u.completedYear}年`,u.city&&` | ${u.city}`]}),u.location&&e.jsx(d,{variant:"body2",sx:{mt:1},children:u.location})]}),e.jsx(o,{sx:{mb:3,height:200},children:e.jsx(Ue,{singleMarker:u,height:"200px",zoom:15,center:[u.latitude,u.longitude]})}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(_,{variant:"outlined",onClick:()=>L(!1),children:"閉じる"}),e.jsx(_,{variant:"contained",component:N,to:`/architecture/${u.id}`,children:"詳細を見る"})]})]})})]})};class Ot extends g.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,r){console.error("Uncaught error:",t,r),this.setState({error:t,errorInfo:r})}handleRetry=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:4,height:"100vh"},children:e.jsxs(ie,{elevation:3,sx:{padding:4,maxWidth:600,width:"100%",borderRadius:2,textAlign:"center"},children:[e.jsx(d,{variant:"h5",color:"error",gutterBottom:!0,children:"問題が発生しました"}),e.jsx(d,{variant:"body1",paragraph:!0,children:"アプリケーションで予期しないエラーが発生しました。 お手数ですが、再読み込みをお試しください。"}),!1,e.jsxs(o,{sx:{mt:3},children:[e.jsx(_,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mr:2},children:"ページを再読み込み"}),e.jsx(_,{variant:"outlined",onClick:()=>window.location.href="/",children:"ホームに戻る"})]})]})}):this.props.children}}const Mr=()=>{try{const s=window?.location?.hostname||"";return/github\.io$/.test(s)}catch(s){return console.error("環境チェックエラー:",s),!1}},Nr=async()=>{try{const t=Mr();console.log("アプリケーション環境: 本番"),console.log(`GitHub Pages環境: ${t?"はい":"いいえ"}`);try{const c=await fetch(t?"./db/database-info.json":"/db/database-info.json");if(c.ok){const n=await c.json();console.log("データベース情報:"),console.log(`- ファイル: ${n.database}`),console.log(`- 更新日時: ${n.date}`),console.log(`- サイズ: ${(n.size/1024/1024).toFixed(2)} MB`),console.log(`- チャンク: ${n.chunks} (${n.chunkSize/1024}KB)のチャンク`),console.log(`- テーブル数: ${n.tables.length}`),console.log(`- インデックス数: ${n.indexes.length}`)}else console.warn("データベースメタデータが見つかりません:",c.status)}catch(r){console.warn("データベースメタデータ読み込みエラー:",r)}}catch(s){console.error("データベース設定ログエラー:",s)}},Zr=({children:s})=>{const[t,r]=g.useState(Ir()),[c,n]=g.useState(null),[f,i]=g.useState(0);return g.useEffect(()=>{let h=!0,l;return(async()=>{t!==Me.READY&&setTimeout(async()=>{l=setInterval(()=>{h&&i(u=>{const R=(95-u)*.1;return Math.min(u+R,95)})},300);try{await Lt(),h&&(i(100),r(Me.READY))}catch(u){h&&(n(`データベースの初期化に失敗しました: ${u instanceof Error?u.message:"不明なエラー"}`),r(Me.ERROR))}finally{clearInterval(l)}},100)})(),()=>{h=!1,clearInterval(l)}},[t]),e.jsx(e.Fragment,{children:s})},nt={primary:{main:"#2E3440",light:"#4C566A",dark:"#1B1F2B",contrastText:"#FFFFFF"},secondary:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC",contrastText:"#2E3440"},accent:{main:"#D08770",light:"#E5A088",dark:"#BF616A"},background:{default:"#ECEFF4",paper:"#FFFFFF",elevated:"#F8F9FA"},text:{primary:"#2E3440",secondary:"#4C566A",disabled:"#D8DEE9"},divider:"#E5E9F0",success:{main:"#A3BE8C",light:"#B8CCA3",dark:"#8CAF69"},warning:{main:"#EBCB8B",light:"#F0D5A3",dark:"#D4B571"},error:{main:"#BF616A",light:"#CC8088",dark:"#A54A56"},info:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC"}},Ur={fontFamily:'"Inter", "Roboto", "Helvetica Neue", "Arial", sans-serif',h1:{fontSize:"3rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2.25rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.875rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.4},subtitle1:{fontSize:"1rem",fontWeight:500,lineHeight:1.5},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.5},body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.6},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.6},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.5},button:{fontSize:"0.875rem",fontWeight:600,textTransform:"none",letterSpacing:"0.02em"}},Hr={MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"10px 24px",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},contained:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8,transition:"all 0.2s ease-in-out","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:nt.secondary.main}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:nt.primary.main,borderWidth:2}}}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",backgroundColor:"rgba(46, 52, 64, 0.95)"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiPaper:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},elevation1:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},elevation2:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},elevation3:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},Gr=hr({palette:nt,typography:Ur,components:Hr,spacing:8,shape:{borderRadius:8},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"}}}),qr=()=>{const{pathname:s}=Ke();return g.useEffect(()=>{window.scrollTo(0,0)},[s]),null},Kr=()=>(g.useEffect(()=>{console.log("App running in production mode");try{Nr()}catch(s){console.warn("Failed to log database details:",s)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(qr,{}),e.jsx(yr,{}),e.jsx("main",{className:"container",role:"main",children:e.jsx(Ot,{children:e.jsxs(fr,{children:[e.jsx(Se,{path:"/",element:e.jsx(Ar,{})}),e.jsx(Se,{path:"/architecture",element:e.jsx(Sr,{})}),e.jsx(Se,{path:"/architecture/:id",element:e.jsx(_r,{})}),e.jsx(Se,{path:"/architects",element:e.jsx(Yr,{})}),e.jsx(Se,{path:"/architects/:id",element:e.jsx(Pr,{})}),e.jsx(Se,{path:"/map",element:e.jsx(zr,{})})]})})}),e.jsx(br,{})]})),Qr=()=>e.jsx(Ot,{children:e.jsxs(xr,{theme:Gr,children:[e.jsx(ur,{}),e.jsx(mr,{children:e.jsx(Zr,{children:e.jsx(Kr,{})})})]})});console.log("React アプリケーションを初期化中...","production");console.log("DOM root element:",document.getElementById("root"));const Bt=document.getElementById("root");if(!Bt)throw console.error('root要素が見つかりません。HTMLに<div id="root"></div>が存在するか確認してください。'),new Error("Failed to find the root element");const Jr=kt(Bt);console.log("Using HashRouter for GitHub Pages compatibility");try{Jr.render(e.jsx(Dt.StrictMode,{children:e.jsx(Qr,{})})),console.log("React アプリケーションのレンダリングが成功しました")}catch(s){console.error("React アプリケーションのレンダリング中にエラーが発生しました:",s)}
//# sourceMappingURL=index-Di6ySOlv.js.map
