import{u as Ot,a as Bt,j as e,A as Pt,T as Nt,b as l,I as et,M as Mt,D as ut,B as s,C as zt,L as mt,c as gt,d as ft,e as k,H as Zt,f as Ne,P as We,g as Se,S as Ht,h as se,G as Z,i as ie,k as fe,l as pe,F as be,m as Pe,n as B,o as Ae,p as Ge,q as oe,r as Te,s as Ut,t as Gt,v as Ce,R as ot,w as at,x as Ke,y as qe,z as tt,E as pt,J as jt,K as yt,N as bt,O as Ct,Q as re,U as Kt,V as At,W as Ze,X as Tt,Y as He,Z as Et,_ as Ye,$ as rt,a0 as vt,a1 as qt,a2 as Qt,a3 as Vt,a4 as Jt,a5 as Xt,a6 as er,a7 as tr,a8 as rr,a9 as sr,aa as nr,ab as ar,ac as ge,ad as G,ae as or,af as ir,ag as lr,ah as cr,ai as dr,aj as hr}from"./ui-BqN58jDe.js";import{a as xr,u as Qe,r as x,L as M,f as Ve,h as St,R as It,H as ur,i as mr,j as ve}from"./vendor-R9pUdGjU.js";import{i as gr}from"./database-8HIdH1aM.js";import{L as Rt,M as fr,T as pr,a as it,P as lt}from"./map-DfQbedqp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))m(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const r of g.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&m(r)}).observe(document,{childList:!0,subtree:!0});function o(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function m(c){if(c.ep)return;c.ep=!0;const g=o(c);fetch(c.href,g)}})();var wt,ct=xr;wt=ct.createRoot,ct.hydrateRoot;const dt=[{title:"ãƒ›ãƒ¼ãƒ ",path:"/",icon:e.jsx(Zt,{})},{title:"å»ºç¯‰ä½œå“",path:"/architecture",icon:e.jsx(Ne,{})},{title:"å»ºç¯‰å®¶",path:"/architects",icon:e.jsx(We,{})},{title:"ãƒãƒƒãƒ—",path:"/map",icon:e.jsx(Se,{})},{title:"DBã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼",path:"/db-explorer",icon:e.jsx(Ht,{})}],jr=()=>{const t=Qe().pathname,o=Ot(),m=Bt(o.breakpoints.down("sm")),[c,g]=x.useState(!1),r=d=>a=>{a.type==="keydown"&&(a.key==="Tab"||a.key==="Shift")||g(d)};return e.jsx(Pt,{position:"static",color:"primary",component:"nav",role:"navigation","aria-label":"ãƒ¡ã‚¤ãƒ³ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³",children:e.jsxs(Nt,{children:[e.jsx(l,{variant:"h6",component:M,to:"/","data-testid":"site-title",sx:{flexGrow:1,color:"white",textDecoration:"none",fontWeight:"bold"},children:"å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"}),m?e.jsxs(e.Fragment,{children:[e.jsx(et,{edge:"end",color:"inherit","aria-label":"menu","data-testid":"mobile-menu-button",onClick:r(!0),children:e.jsx(Mt,{})}),e.jsx(ut,{anchor:"right",open:c,onClose:r(!1),children:e.jsxs(s,{sx:{width:250},role:"presentation",onClick:r(!1),onKeyDown:r(!1),children:[e.jsx(s,{sx:{display:"flex",justifyContent:"flex-end",p:1},children:e.jsx(et,{onClick:r(!1),children:e.jsx(zt,{})})}),e.jsx(mt,{role:"menu","aria-label":"ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼",children:dt.map(({title:d,path:a,icon:C})=>e.jsxs(gt,{component:M,to:a,role:"menuitem","data-testid":`nav-link-${d.toLowerCase()}`,sx:{color:t===a?"primary.main":"text.primary",backgroundColor:t===a?"rgba(0, 0, 0, 0.08)":"transparent",fontWeight:t===a?"bold":"normal","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:[C,e.jsx(ft,{primary:d,sx:{ml:2}})]},d))})]})})]}):e.jsx(s,{sx:{display:"flex"},role:"menubar","aria-label":"ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³",children:dt.map(({title:d,path:a})=>e.jsx(k,{component:M,to:a,color:"inherit",role:"menuitem","data-testid":`nav-link-${d.toLowerCase()}`,sx:{mx:1,fontWeight:t===a?"bold":"normal",borderBottom:t===a?"2px solid white":"none"},children:d},d))})]})})},yr=()=>e.jsx(s,{component:"footer",role:"contentinfo","data-testid":"footer",sx:{py:3,px:2,mt:"auto",backgroundColor:"primary.main",color:"white"},children:e.jsx(se,{maxWidth:"sm",children:e.jsxs(l,{variant:"body1",align:"center",children:["å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ Â© ",new Date().getFullYear()]})})}),br="modulepreload",Cr=function(n){return"/archi-site/"+n},ht={},Ar=function(t,o,m){let c=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),d=r?.nonce||r?.getAttribute("nonce");c=Promise.allSettled(o.map(a=>{if(a=Cr(a),a in ht)return;ht[a]=!0;const C=a.endsWith(".css"),p=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${p}`))return;const D=document.createElement("link");if(D.rel=C?"stylesheet":br,C||(D.as="script"),D.crossOrigin="",D.href=a,d&&D.setAttribute("nonce",d),document.head.appendChild(D),C)return new Promise((W,_)=>{D.addEventListener("load",W),D.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${a}`)))})}))}function g(r){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r}return c.then(r=>{for(const d of r||[])d.status==="rejected"&&g(d.reason);return t().catch(g)})},Tr=({variant:n="card",count:t=6})=>{const o=()=>e.jsx(fe,{sx:{height:"100%"},children:e.jsxs(pe,{children:[e.jsx(ie,{variant:"text",height:40,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,width:"60%"})]})}),m=()=>e.jsxs(s,{sx:{p:2},children:[e.jsx(ie,{variant:"text",height:32,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:24,sx:{mb:1}}),e.jsx(ie,{variant:"text",height:20,width:"40%"})]}),c=()=>e.jsx(se,{maxWidth:"lg",children:e.jsxs(s,{sx:{textAlign:"center",py:8},children:[e.jsx(ie,{variant:"text",height:60,sx:{mb:2}}),e.jsx(ie,{variant:"text",height:30,sx:{mb:4}}),e.jsx(s,{sx:{display:"flex",justifyContent:"center",mb:4},children:e.jsx(ie,{variant:"rectangular",width:500,height:56,sx:{borderRadius:1}})})]})}),g=()=>e.jsx(ie,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2}});return n==="hero"?c():n==="map"?g():n==="list"?e.jsx(s,{children:Array.from({length:t}).map((r,d)=>e.jsx(s,{sx:{borderBottom:"1px solid #e0e0e0"},children:m()},d))}):e.jsx(Z,{container:!0,spacing:4,children:Array.from({length:t}).map((r,d)=>e.jsx(Z,{item:!0,xs:12,sm:6,md:4,children:o()},d))})},Er=()=>{const[n,t]=x.useState(""),[o,m]=x.useState([]),[c,g]=x.useState(!0),[r,d]=x.useState(null),[a,C]=x.useState(!1),[p,D]=x.useState(null);x.useEffect(()=>{const A=j=>{const{progress:f,speed:E,eta:w,receivedLength:K,totalLength:T}=j.detail;D({progress:f,speed:E,eta:w,receivedLength:K,totalLength:T})};window.addEventListener("database-download-progress",A);const H=setTimeout(()=>{console.warn("Emergency timeout: forcing app to render without database after 3 minutes"),g(!1),C(!1),d("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸï¼ˆå¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ï¼‰ã€‚æ¥ç¶šãŒé…ã„å ´åˆã¯ã€ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚")},18e4);return(async()=>{try{g(!0),d(null),console.log("æœ€è¿‘ã®å»ºç¯‰ä½œå“ã‚’å–å¾—ä¸­...");const{getAllArchitectures:j}=await Ar(async()=>{const{getAllArchitectures:K}=await Promise.resolve().then(()=>Sr);return{getAllArchitectures:K}},void 0),f=new Promise((K,T)=>{setTimeout(()=>T(new Error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸï¼ˆ90ç§’ï¼‰ã€‚å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚")),9e4)}),E=j(1,6),w=await Promise.race([E,f]);clearTimeout(H),m(w.items),C(!0),console.log("å»ºç¯‰ä½œå“ã®å–å¾—ã«æˆåŠŸã—ã¾ã—ãŸ",w)}catch(j){console.error("å»ºç¯‰ä½œå“ã®å–å¾—ã«å¤±æ•—:",j),clearTimeout(H);let f=j.message||"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ";j.message?.includes("timeout")?f+=" ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šãŒé…ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚":j.message?.includes("fetch")&&(f+=" ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚"),d(f),C(!1)}finally{g(!1)}})(),()=>{clearTimeout(H),window.removeEventListener("database-download-progress",A)}},[]);const W=A=>{A.preventDefault(),n.trim()&&(window.location.href=`/architecture?search=${encodeURIComponent(n)}`)},_=()=>{d(null),g(!0),D(null),window.location.reload()},I=A=>A<1024?`${Math.round(A)} B/s`:A<1024*1024?`${Math.round(A/1024)} KB/s`:`${Math.round(A/1024/1024)} MB/s`,L=A=>A<60?`${Math.round(A)}s`:A<3600?`${Math.round(A/60)}m ${Math.round(A%60)}s`:`${Math.round(A/3600)}h ${Math.round(A%3600/60)}m`;return e.jsxs(se,{maxWidth:"lg","data-testid":"homepage-container",children:[e.jsx(be,{in:!0,timeout:1e3,children:e.jsxs(s,{component:"section",role:"banner","aria-labelledby":"main-heading",sx:{pt:8,pb:6,textAlign:"center",background:"linear-gradient(135deg, #ECEFF4 0%, #D8DEE9 100%)",borderRadius:3,mb:6,position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,opacity:.1,background:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(46, 52, 64, 0.1) 10px, rgba(46, 52, 64, 0.1) 20px)"}}),e.jsxs(s,{sx:{position:"relative",zIndex:1},children:[e.jsx(l,{component:"h1",variant:"h1",align:"center",color:"text.primary",gutterBottom:!0,id:"main-heading",sx:{background:"linear-gradient(135deg, #2E3440 0%, #4C566A 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",mb:2},children:"å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"}),e.jsxs(l,{variant:"h5",align:"center",color:"text.secondary",paragraph:!0,sx:{mb:4,maxWidth:600,mx:"auto"},children:["æ—¥æœ¬ã®å»ºç¯‰ä½œå“ã¨å»ºç¯‰å®¶ã‚’æ¤œç´¢ãƒ»é–²è¦§ã§ãã‚‹",e.jsx("br",{}),"åŒ…æ‹¬çš„ãªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹"]}),e.jsxs(Pe,{direction:"row",spacing:3,justifyContent:"center",sx:{mb:4},children:[e.jsx(B,{icon:e.jsx(Ne,{}),label:"14,000+ å»ºç¯‰ä½œå“",color:"primary",variant:"outlined"}),e.jsx(B,{icon:e.jsx(We,{}),label:"2,900+ å»ºç¯‰å®¶",color:"secondary",variant:"outlined"}),e.jsx(B,{icon:e.jsx(Se,{}),label:"å…¨å›½å¯¾å¿œ",color:"info",variant:"outlined"})]}),e.jsx(be,{in:!0,timeout:1500,children:e.jsxs(s,{component:"form",onSubmit:W,role:"search","aria-label":"å»ºç¯‰ä½œå“æ¤œç´¢",sx:{mt:4,display:"flex",justifyContent:"center",alignItems:"center",maxWidth:600,mx:"auto",gap:2},children:[e.jsx(Ae,{fullWidth:!0,variant:"outlined",placeholder:"å»ºç¯‰ä½œå“ã€å»ºç¯‰å®¶ã€ä½æ‰€ãªã©ã§æ¤œç´¢",value:n,onChange:A=>t(A.target.value),inputProps:{"aria-label":"å»ºç¯‰ä½œå“æ¤œç´¢","data-testid":"search-input",role:"searchbox"},sx:{"& .MuiOutlinedInput-root":{backgroundColor:"white",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}}),e.jsx(k,{type:"submit",variant:"contained",color:"primary",startIcon:e.jsx(Ge,{}),size:"large","data-testid":"search-button",sx:{px:3,py:1.5,minWidth:120},children:"æ¤œç´¢"})]})}),!a&&c&&e.jsx(s,{sx:{mt:4,maxWidth:600,mx:"auto"},children:p?e.jsxs(oe,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main"},children:"ğŸ“¦ å¤§ããªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã¿ä¸­..."}),e.jsxs(s,{sx:{mb:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Te,{variant:"determinate",value:p.progress,size:24,sx:{mr:2}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[p.progress,"% â€¢ ",Math.round(p.receivedLength/1024/1024)," MB / ",Math.round(p.totalLength/1024/1024)," MB"]})]}),e.jsx(Ut,{variant:"determinate",value:p.progress,sx:{height:8,borderRadius:4}})]}),e.jsxs(Pe,{direction:"row",spacing:2,sx:{fontSize:"0.875rem",color:"text.secondary"},children:[e.jsxs(s,{children:["ğŸ“Š ",I(p.speed)]}),e.jsxs(s,{children:["â±ï¸ ETA: ",L(p.eta)]})]}),e.jsx(l,{variant:"body2",sx:{mt:1,fontStyle:"italic",color:"text.secondary"},children:"åˆå›ã®ã‚¢ã‚¯ã‚»ã‚¹ã§ã¯ã€å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚"})]}):e.jsxs(oe,{sx:{p:3,background:"rgba(255, 255, 255, 0.9)",borderRadius:2},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[e.jsx(Te,{size:24,sx:{mr:2}}),e.jsx(l,{variant:"h6",sx:{color:"primary.main"},children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ä¸­..."})]}),e.jsx(l,{variant:"body2",color:"text.secondary",align:"center",children:"14,000ä»¶ã®å»ºç¯‰ä½œå“ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­ã§ã™"})]})})]})]})}),e.jsxs(s,{component:"section","aria-labelledby":"recent-works-heading",sx:{py:4},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(Gt,{color:"primary"}),e.jsx(l,{variant:"h4",fontWeight:"bold",id:"recent-works-heading",component:"h2",children:"æœ€è¿‘ã®å»ºç¯‰ä½œå“"})]}),a&&e.jsx(Ce,{title:"ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥",children:e.jsx(et,{onClick:()=>window.location.reload(),color:"primary",children:e.jsx(ot,{})})})]}),r&&e.jsx(be,{in:!0,children:e.jsx(at,{severity:"error",sx:{mb:3,borderRadius:2,"& .MuiAlert-message":{display:"flex",alignItems:"center",gap:2}},children:e.jsxs(s,{children:[r,e.jsxs(Pe,{direction:"row",spacing:2,sx:{mt:2},children:[e.jsx(k,{size:"small",variant:"contained",color:"primary",onClick:_,startIcon:e.jsx(ot,{}),children:"å†è©¦è¡Œ"}),e.jsx(k,{size:"small",variant:"outlined",component:M,to:"/db-explorer",children:"è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã"})]})]})})}),c?e.jsx(Tr,{variant:"card",count:6}):o.length>0?e.jsx(be,{in:!0,timeout:800,children:e.jsx(Z,{container:!0,spacing:4,children:o.map((A,H)=>e.jsx(Z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(be,{in:!0,timeout:1e3+H*200,children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #FFFFFF 0%, #F8F9FA 100%)",border:"1px solid #E5E9F0","&:hover":{"& .card-content":{transform:"translateY(-2px)"}}},children:e.jsx(Ke,{component:M,to:`/architecture/${A.ZAW_ID}`,sx:{height:"100%"},children:e.jsxs(pe,{className:"card-content",sx:{flexGrow:1,transition:"transform 0.3s ease-in-out",p:3},children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h3",sx:{fontWeight:600,color:"text.primary",mb:2,lineHeight:1.3},children:A.ZAW_NAME}),e.jsxs(Pe,{spacing:1,children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(We,{fontSize:"small",color:"secondary"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:A.ZAW_ARCHITECT||"å»ºç¯‰å®¶ä¸æ˜"})]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Se,{fontSize:"small",color:"secondary"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[A.ZAW_ADDRESS||"å ´æ‰€ä¸æ˜"," â€¢ ",A.ZAW_YEAR&&A.ZAW_YEAR!==0?A.ZAW_YEAR+"å¹´":"å¹´ä»£ä¸æ˜"]})]})]})]})})})})},A.ZAW_ID))})}):e.jsxs(oe,{sx:{p:6,textAlign:"center",background:"linear-gradient(135deg, #F8F9FA 0%, #ECEFF4 100%)"},children:[e.jsx(l,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„"})]}),a&&e.jsx(be,{in:!0,timeout:1200,children:e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(k,{variant:"outlined",color:"primary",component:M,to:"/architecture",size:"large",sx:{px:4,py:1.5,borderWidth:2,"&:hover":{borderWidth:2}},children:"ã™ã¹ã¦ã®ä½œå“ã‚’è¦‹ã‚‹"})})})]}),e.jsx(qe,{sx:{my:6}}),e.jsx(be,{in:!0,timeout:1400,children:e.jsxs(s,{component:"section","aria-labelledby":"features-heading",sx:{mb:6},children:[e.jsx(l,{variant:"h4",align:"center",gutterBottom:!0,id:"features-heading",component:"h2",sx:{mb:4,fontWeight:"bold"},children:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç‰¹å¾´"}),e.jsxs(Z,{container:!0,spacing:4,children:[e.jsx(Z,{item:!0,xs:12,md:4,children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #88C0D0 0%, #5E81AC 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Ne,{sx:{fontSize:100}})}),e.jsxs(pe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Ne,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"å»ºç¯‰ä½œå“"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"æ—¥æœ¬å…¨å›½ã‹ã‚‰14,000ä»¶ä»¥ä¸Šã®å»ºç¯‰ä½œå“æƒ…å ±ã‚’é–²è¦§ã§ãã¾ã™ã€‚åœ°åŸŸã€å¹´ä»£ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ãªã©ã§è©³ç´°æ¤œç´¢ãŒå¯èƒ½ã§ã™ã€‚"}),e.jsx(k,{variant:"contained",component:M,to:"/architecture",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"ä½œå“ã‚’æ¢ã™"})]})]})}),e.jsx(Z,{item:!0,xs:12,md:4,children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #D08770 0%, #BF616A 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(We,{sx:{fontSize:100}})}),e.jsxs(pe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(We,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"å»ºç¯‰å®¶"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"2,900äººä»¥ä¸Šã®å»ºç¯‰å®¶æƒ…å ±ã‚’åéŒ²ã€‚çµŒæ­´ã€ä½œå“ãƒªã‚¹ãƒˆã€æ‰€å±äº‹å‹™æ‰€ãªã©ã®è©³ç´°æƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™ã€‚"}),e.jsx(k,{variant:"contained",component:M,to:"/architects",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"å»ºç¯‰å®¶ã‚’æ¢ã™"})]})]})}),e.jsx(Z,{item:!0,xs:12,md:4,children:e.jsxs(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",background:"linear-gradient(135deg, #A3BE8C 0%, #8CAF69 100%)",color:"white",position:"relative",overflow:"hidden"},children:[e.jsx(s,{sx:{position:"absolute",top:-20,right:-20,opacity:.2},children:e.jsx(Se,{sx:{fontSize:100}})}),e.jsxs(pe,{sx:{position:"relative",zIndex:1,p:3},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Se,{sx:{mr:2,fontSize:32}}),e.jsx(l,{variant:"h5",fontWeight:"bold",children:"ãƒãƒƒãƒ—è¡¨ç¤º"})]}),e.jsx(l,{paragraph:!0,sx:{mb:3,opacity:.9},children:"å»ºç¯‰ä½œå“ã‚’åœ°å›³ä¸Šã§è¦–è¦šçš„ã«æ¢ç´¢ã§ãã¾ã™ã€‚ä½ç½®æƒ…å ±ã‚’ã‚‚ã¨ã«å‘¨è¾ºã®å»ºç¯‰ä½œå“ã‚’ç™ºè¦‹ã§ãã¾ã™ã€‚"}),e.jsx(k,{variant:"contained",component:M,to:"/map",sx:{mt:"auto",backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.3)"}},children:"ãƒãƒƒãƒ—ã‚’é–‹ã"})]})]})})]})]})})]})},Je="/archi-site",Me=`${Je}/db/archimap.sqlite`;console.log("ğŸ”§ Environment debug info:");console.log("  - import.meta.env.PROD:",!0);console.log("  - BASE_PATH:",Je);console.log("  - DATABASE_URL:",Me);let te=null,_e=null,st=!1,ke=null;var ze=(n=>(n.NOT_INITIALIZED="not_initialized",n.INITIALIZING="initializing",n.READY="ready",n.ERROR="error",n))(ze||{});const vr=()=>te&&_e?"ready":st?"initializing":"not_initialized",xt=async()=>{try{const n=Date.now(),t=await fetch(`${Je}/images/shinkenchiku-favicon.ico`,{method:"HEAD",cache:"no-cache"}),m=Date.now()-n;return m<100?"fast":m<500?"slow":"very-slow"}catch{return"very-slow"}},Dt=async()=>te&&_e?te:ke||(st=!0,ke=(async()=>{try{console.log("ğŸš€ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚’é–‹å§‹ï¼ˆç›´æ¥sql.jsä½¿ç”¨ã§GitHub Pages GZIPå¯¾å¿œï¼‰...");const n=await xt();console.log(`ğŸŒ Connection speed detected: ${n}`),console.log("ğŸ—„ï¸ Testing database file accessibility...");try{const r=await fetch(Me,{method:"HEAD"});if(console.log("  - Database file status:",r.status,r.statusText),!r.ok)throw new Error(`Database file not accessible: ${r.status} ${r.statusText} at ${Me}`);const d=r.headers.get("content-length");if(d){const a=parseInt(d)/1048576;console.log(`  - Database file size (compressed): ${a.toFixed(2)} MB`)}console.log("âœ… Database file is accessible")}catch(r){throw console.error("âŒ Database file accessibility check failed:",r),new Error(`Database file not accessible: ${r.message}`)}console.log("ğŸ“¦ sql.js ã‚’åˆæœŸåŒ–ä¸­...");const t=`${Je}/sql-wasm.wasm`;console.log("ğŸ”§ WASM URL:",t),console.log("ğŸ” Testing WASM file accessibility...");try{const r=await fetch(t,{method:"HEAD"});if(console.log("  - WASM file status:",r.status,r.statusText),!r.ok)throw new Error(`WASM file not accessible: ${r.status} ${r.statusText} at ${t}`);console.log("âœ… WASM file is accessible")}catch(r){throw console.error("âŒ WASM file accessibility check failed:",r),new Error(`WASM file not accessible: ${r.message}`)}console.log("ğŸ”§ Initializing SQL.js..."),_e=await gr({locateFile:r=>(console.log(`ğŸ” Looking for file: ${r}`),r==="sql-wasm.wasm"?t:r)}),console.log("âœ… SQL.js initialized successfully"),console.log("ğŸ“¥ Downloading database file...");const o=await fetch(Me);if(!o.ok)throw new Error(`Failed to download database: ${o.status} ${o.statusText}`);const m=await o.arrayBuffer();console.log(`âœ… Database downloaded: ${(m.byteLength/1024/1024).toFixed(2)} MB (uncompressed)`),console.log("ğŸ—„ï¸ Creating database from downloaded data..."),te=new _e.Database(new Uint8Array(m)),console.log("âœ… Database created successfully"),console.log("ğŸ” Testing database functionality...");const c=te.exec("SELECT sqlite_version()");c.length>0&&console.log(`ğŸ” SQLite ãƒãƒ¼ã‚¸ãƒ§ãƒ³: ${c[0].values[0][0]}`);const g=te.exec("SELECT name FROM sqlite_master WHERE type='table'");if(g.length>0){console.log(`ğŸ“‹ åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ¼ãƒ–ãƒ«æ•°: ${g[0].values.length}`),console.log(`ğŸ“‹ ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§: ${g[0].values.map(r=>r[0]).join(", ")}`);try{const r=te.exec("SELECT COUNT(*) FROM ZCDARCHITECTURE");r.length>0&&console.log(`ğŸ¢ å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ä»¶æ•°: ${r[0].values[0][0]} ä»¶`)}catch{console.log("ğŸ“‹ Architecture table structure checking...")}}return te}catch(n){if(console.error("âŒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:",n),te=null,_e=null,n instanceof Error){const t=await xt().catch(()=>"unknown");let o=n.message;n.message.includes("timeout")?t==="very-slow"?o+=`

ğŸ“¡ æ¥ç¶šé€Ÿåº¦ãŒéå¸¸ã«é…ã„ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚WiFiã‚„ã‚ˆã‚Šé«˜é€Ÿãªæ¥ç¶šã‚’ãŠè©¦ã—ãã ã•ã„ã€‚`:t==="slow"&&(o+=`

ğŸ“¡ æ¥ç¶šé€Ÿåº¦ãŒé…ã„ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ã«æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ã¾ã™ã€‚`):(n.message.includes("fetch")||n.message.includes("network"))&&(o+=`

ğŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚æ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`);const m=new Error(o);throw m.name=n.name,m}throw n}finally{st=!1,ke=null}})(),ke),$t=async(n,t=[])=>{try{if(te||await Dt(),!te)throw new Error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“");return te.exec(n,t)}catch(o){throw console.error("ã‚¯ã‚¨ãƒªå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:",o),o}},kt=n=>{if(!n||n.length===0)return[];const{columns:t,values:o}=n[0];return o.map(m=>{const c={};return t.forEach((g,r)=>{c[g]=m[r]}),c})},Xe=async(n,t=[])=>{const o=await $t(n,t);return kt(o)[0]},Fe=async(n,t=[])=>{const o=await $t(n,t);return kt(o)},Wt=async n=>Xe("SELECT * FROM ZCDARCHITECTURE WHERE Z_PK = ?",[n]),_t=async(n=1,t=12,o="",m="ZAR_TITLE",c="asc",g={})=>{const r=(n-1)*t;let d="1=1";const a=[];o&&(d+=" AND (ZAR_TITLE LIKE ? OR ZAR_ADDRESS LIKE ? OR ZAR_DESCRIPTION LIKE ? OR ZAR_ARCHITECT LIKE ?)",a.push(`%${o}%`,`%${o}%`,`%${o}%`,`%${o}%`)),g.architect&&(d+=" AND (ZAR_ARCHITECT LIKE ? OR ZAR_ARCHITECT_ENG LIKE ?)",a.push(`%${g.architect}%`,`%${g.architect}%`)),g.location&&(d+=" AND ZAR_ADDRESS LIKE ?",a.push(`%${g.location}%`)),g.prefecture&&(d+=" AND ZAR_PREFECTURE = ?",a.push(g.prefecture)),g.yearFrom&&(d+=" AND ZAR_YEAR >= ?",a.push(g.yearFrom)),g.yearTo&&(d+=" AND ZAR_YEAR <= ?",a.push(g.yearTo)),g.tags&&g.tags.length>0&&(d+=" AND ZAR_TAG LIKE ?",a.push(`%${g.tags.join("%")}%`));const C=`
    SELECT COUNT(*) as total
    FROM ZCDARCHITECTURE
    WHERE ${d}
  `,p=`
    SELECT *
    FROM ZCDARCHITECTURE
    WHERE ${d}
    ORDER BY ${m} ${c==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,D=[...a,t,r];try{const _=(await Xe(C,a))?.total||0;return{results:await Fe(p,D),total:_,page:n,limit:t,totalPages:Math.ceil(_/t)}}catch(W){throw console.error("å»ºç¯‰ä½œå“ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",W),W}},Yt=async(n,t={})=>{let o=`
    ZAR_LATITUDE BETWEEN ? AND ?
    AND ZAR_LONGITUDE BETWEEN ? AND ?
    AND ZAR_LATITUDE IS NOT NULL
    AND ZAR_LONGITUDE IS NOT NULL
  `;const m=[n.south,n.north,n.west,n.east];t.searchTerm&&(o+=" AND (ZAR_TITLE LIKE ? OR ZAR_ADDRESS LIKE ? OR ZAR_ARCHITECT LIKE ?)",m.push(`%${t.searchTerm}%`,`%${t.searchTerm}%`,`%${t.searchTerm}%`)),t.architect&&(o+=" AND (ZAR_ARCHITECT LIKE ? OR ZAR_ARCHITECT_ENG LIKE ?)",m.push(`%${t.architect}%`,`%${t.architect}%`)),t.yearFrom&&(o+=" AND ZAR_YEAR >= ?",m.push(t.yearFrom)),t.yearTo&&(o+=" AND ZAR_YEAR <= ?",m.push(t.yearTo)),t.tags&&t.tags.length>0&&(o+=" AND ZAR_TAG LIKE ?",m.push(`%${t.tags.join("%")}%`));const c=`
    SELECT *
    FROM ZCDARCHITECTURE
    WHERE ${o}
    LIMIT 500
  `;return Fe(c,m)},Sr=Object.freeze(Object.defineProperty({__proto__:null,getAllArchitectures:_t,getArchitectureById:Wt,getArchitectureForMap:Yt},Symbol.toStringTag,{value:"Module"})),Ir=()=>{const[n,t]=x.useState([]),[o,m]=x.useState(!0),[c,g]=x.useState(0),[r,d]=x.useState(1),[a,C]=x.useState(""),[p,D]=x.useState(""),[W,_]=x.useState([]),[I,L]=x.useState([]),[A,H]=x.useState([]),[u,j]=x.useState("year_desc"),[f,E]=x.useState({}),[w,K]=x.useState(null),[T,je]=x.useState(""),[ee,de]=x.useState({}),ne=12,q=Qe(),V=Ve();x.useEffect(()=>{(async()=>{try{H([])}catch(y){console.error("ã‚¿ã‚°å–å¾—ã‚¨ãƒ©ãƒ¼:",y)}})()},[]),x.useEffect(()=>{const h=new URLSearchParams(q.search),y=h.get("tag"),S=h.get("search"),Y=h.get("year"),Q=h.get("prefecture"),F=h.get("category"),O=h.get("architect"),$=h.get("sort");if($&&j($),y){const v=y.split(",").map(i=>i.trim()).filter(i=>i),N=new Set,J=[];v.forEach(i=>{const b=i.match(/\d{4}å¹´\d{1,2}æœˆå·?/);if(b){const R=i.replace(b[0],"").trim();R&&(N.add(R),J.push(i))}else N.add(i)}),_(Array.from(N)),L(J),D(y),C(`tag:${y}`),z(1,`tag:${y}`,$||u)}else Y?(C(`year:${Y}`),z(1,`year:${Y}`,$||u)):Q?(C(`prefecture:${Q}`),z(1,`prefecture:${Q}`,$||u)):F?(C(`category:${F}`),z(1,`category:${F}`,$||u)):O?(C(`architect:${O}`),z(1,`architect:${O}`,$||u)):S?(C(S),z(1,S,$||u)):z(1,a,$||u)},[q.search]);const z=async(h,y=a,S=u)=>{m(!0);try{const Y=await _t(h,ne,y,S);t(Y.items),g(Y.total),d(h)}catch(Y){console.error("Error fetching architectures:",Y)}finally{m(!1)}},le=(h,y)=>{d(y),z(y,a,u),window.scrollTo(0,0)},ye=h=>{C(h.target.value)},he=async(h,y)=>{K(h.currentTarget),je(y);try{const S=[];de(Y=>({...Y,[y]:S}))}catch(S){console.error(`Failed to get years for tag ${y}:`,S)}},xe=()=>{K(null),je("")},Ie=h=>{const y=h?`${T}${h}`:T;let S=[...I];const Y=S.findIndex(v=>v.startsWith(T)&&(v===T||v.match(new RegExp(`^${T}\\d{4}å¹´\\d{1,2}æœˆå·?`))||v.match(new RegExp(`^${T}\\d{4}å¹´åº¦?`))||v.match(new RegExp(`^${T}ç¬¬\\d+å›`))||v.match(new RegExp(`^${T}\\(\\d{4}\\)`))));Y>=0?h?S[Y]=y:S.splice(Y,1):h&&S.push(y),L(S),xe();const Q=[...W];Q.includes(T)||Q.push(T);const F=[...Q,...S].filter((v,N,J)=>J.indexOf(v)===N&&!S.some(i=>i!==v&&i.startsWith(v))).join(",");D(F);const O=`tag:${F}`;C(O),z(1,O,u);const $=new URLSearchParams;$.set("tag",F),u!=="year_desc"&&$.set("sort",u),V({search:$.toString()})},Re=(h,y)=>{const S=W.filter(F=>!y.includes(F));let Y=[...I].filter(F=>!S.some(O=>F.startsWith(O)));const Q=y.filter(F=>!W.includes(F));if(Q.length>0&&Q.forEach(async F=>{if(!ee[F])try{const O=[];if(de($=>({...$,[F]:O})),O&&O.length===1){const $=`${F}${O[0]}`;Y.push($)}}catch(O){console.error(`Failed to get years for tag ${F}:`,O)}}),_(y),L(Y),y.length>0||Y.length>0){const F=[...y,...Y].filter((v,N,J)=>J.indexOf(v)===N&&!Y.some(i=>i!==v&&i.startsWith(v))).join(",");D(F);const O=`tag:${F}`;C(O),z(1,O,u);const $=new URLSearchParams;$.set("tag",F),u!=="year_desc"&&$.set("sort",u),V({search:$.toString()})}else Ee()},ue=h=>{const y=h.target.value;j(y),z(r,a,y);const S=new URLSearchParams(q.search);S.set("sort",y),V({search:S.toString()})},me=()=>{d(1),z(1,a,u);const h=new URLSearchParams;if(u!=="year_desc"&&h.set("sort",u),a.startsWith("tag:")){const y=a.substring(4).trim();h.set("tag",y)}else if(a.startsWith("year:")){const y=a.substring(5).trim();h.set("year",y)}else if(a.startsWith("prefecture:")){const y=a.substring(11).trim();h.set("prefecture",y)}else if(a.startsWith("category:")){const y=a.substring(9).trim();h.set("category",y)}else if(a.startsWith("architect:")){const y=a.substring(10).trim();h.set("architect",y)}else a&&h.set("search",a);V({search:h.toString()})},Ee=()=>{D(""),C(""),_([]),L([]),d(1),z(1,"",u);const h=new URLSearchParams;u!=="year_desc"&&h.set("sort",u),V({search:h.toString()})},ce=Math.ceil(c/ne);return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰ä½œå“ä¸€è¦§"}),e.jsxs(oe,{sx:{p:3,mb:4},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Ae,{fullWidth:!0,label:"å»ºç¯‰ä½œå“åã€ä½æ‰€ã€å»ºç¯‰å®¶ã§æ¤œç´¢",value:a,onChange:ye,onKeyPress:h=>h.key==="Enter"&&me(),InputProps:{startAdornment:e.jsx(tt,{position:"start",children:e.jsx(Ge,{})})}}),e.jsx(k,{variant:"contained",onClick:me,sx:{minWidth:"120px"},children:"æ¤œç´¢"})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(pt,{multiple:!0,id:"tags-selector",options:A,value:W,onChange:Re,renderInput:h=>e.jsx(Ae,{...h,variant:"outlined",label:"ã‚¿ã‚°ã§çµã‚Šè¾¼ã¿",placeholder:"ã‚¿ã‚°ã‚’é¸æŠ"}),renderTags:(h,y)=>h.map((S,Y)=>{const Q=I.some(v=>v.startsWith(S)&&v!==S),F=!!(ee[S]&&ee[S].length>0),O=I.find(v=>v.startsWith(S)&&v!==S);let $="";if(O){const v=O.substring(S.length);v.match(/\d{4}å¹´\d{1,2}æœˆå·?/)?$=v.replace(/^(\d{4})/,(N,J)=>`'${J.substring(2)}`):v.match(/\d{4}å¹´åº¦?/)?$=v.replace(/^(\d{4})/,(N,J)=>`'${J.substring(2)}`):v.match(/ç¬¬\d+å›/)?$=v:v.match(/\(\d{4}\)/)?$=v.replace(/\((\d{4})\)/,(N,J)=>`'${J.substring(2)}`):$=v}return e.jsx(B,{label:e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[S,O&&e.jsx(l,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:$}),F&&e.jsx(jt,{fontSize:"small"})]}),...y({index:Y}),color:Q?"primary":"default",variant:"outlined",onClick:v=>{v.stopPropagation(),he(v,S)},onDelete:v=>{y({index:Y}).onDelete(v)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}},S)}),sx:{flex:2}}),e.jsxs(yt,{sx:{minWidth:200,flex:1},children:[e.jsx(bt,{id:"sort-select-label",children:"ä¸¦ã³æ›¿ãˆ"}),e.jsxs(Ct,{labelId:"sort-select-label",id:"sort-select",value:u,label:"ä¸¦ã³æ›¿ãˆ",onChange:ue,startAdornment:e.jsx(tt,{position:"start",children:e.jsx(Kt,{})}),children:[e.jsx(re,{value:"year_desc",children:"å¹´ä»£ï¼ˆæ–°ã—ã„é †ï¼‰"}),e.jsx(re,{value:"year_asc",children:"å¹´ä»£ï¼ˆå¤ã„é †ï¼‰"}),e.jsx(re,{value:"name_asc",children:"åå‰ï¼ˆæ˜‡é †ï¼‰"}),e.jsx(re,{value:"name_desc",children:"åå‰ï¼ˆé™é †ï¼‰"}),e.jsx(re,{value:"architect_asc",children:"å»ºç¯‰å®¶ï¼ˆæ˜‡é †ï¼‰"}),e.jsx(re,{value:"architect_desc",children:"å»ºç¯‰å®¶ï¼ˆé™é †ï¼‰"})]})]})]}),e.jsx(At,{open:!!w,anchorEl:w,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:e.jsxs(s,{sx:{p:2,maxHeight:300,width:"250px",overflowY:"auto"},children:[e.jsxs(l,{variant:"subtitle2",sx:{mb:1},children:[T," ã®é¸æŠ:"]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(B,{label:"æŒ‡å®šãªã—",onClick:()=>Ie(""),variant:"outlined",size:"small",color:W.includes(T)&&!I.some(h=>h.startsWith(T)&&h!==T)?"primary":"default"}),ee[T]?.map(h=>{let y=h,S="default";return I.some(Y=>Y===`${T}${h}`)&&(S="primary"),e.jsx(B,{label:y,onClick:()=>Ie(h),variant:"outlined",size:"small",color:S,sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},h)})]})]})}),(p||a)&&e.jsx(s,{sx:{mb:3},children:e.jsx(at,{severity:"info",action:e.jsx(k,{color:"inherit",size:"small",onClick:Ee,children:"ã‚¯ãƒªã‚¢"}),children:p?`ã‚¿ã‚°ã€Œ${p}ã€ã§çµã‚Šè¾¼ã¿ä¸­`:`ã€Œ${a}ã€ã§æ¤œç´¢ä¸­`})}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[c," ä»¶ã®å»ºç¯‰ä½œå“"]}),ce>1&&e.jsx(Ze,{count:ce,page:r,onChange:le,color:"primary",size:"small"})]})]}),o?e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(e.Fragment,{children:[n.length===0?e.jsxs(s,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{variant:"h6",children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„"})]}):e.jsx(Z,{container:!0,spacing:3,children:n.map(h=>e.jsx(Z,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ke,{component:M,to:`/architecture/${h.id}`,sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%"},children:e.jsxs(pe,{sx:{width:"100%",flexGrow:1},children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h2",children:h.name}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1,mt:2},children:[h.architectName&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Tt,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:h.architectName})]}),h.city&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(He,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:h.city})]}),h.completedYear>0&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Et,{fontSize:"small",color:"action"}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[h.completedYear,"å¹´"]})]})]})]})})})},h.id))}),ce>1&&e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Ze,{count:ce,page:r,onChange:le,color:"primary"})})]})]})};delete Rt.Icon.Default.prototype._getIconUrl;Rt.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"});const Ue=({markers:n=[],center:t,zoom:o=13,height:m="500px",singleMarker:c})=>{const[g,r]=x.useState(t);return x.useEffect(()=>{c&&c.latitude&&c.longitude?r([c.latitude,c.longitude]):t&&r(t)},[c,t]),e.jsx("div",{style:{height:m,width:"100%",marginBottom:"20px"},children:e.jsxs(fr,{center:g,zoom:o,style:{height:"100%",width:"100%"},children:[e.jsx(pr,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map((d,a)=>d.latitude&&d.longitude?e.jsx(it,{position:[d.latitude,d.longitude],children:e.jsxs(lt,{children:[e.jsx(l,{variant:"h6",children:d.name}),e.jsx(l,{variant:"body2",children:d.location}),e.jsx(k,{component:M,to:`/architecture/${d.id}`,size:"small",variant:"outlined",sx:{mt:1},children:"è©³ç´°ã‚’è¦‹ã‚‹"})]})},`marker-${d.id||a}`):null),c&&c.latitude&&c.longitude&&e.jsx(it,{position:[c.latitude,c.longitude],children:e.jsxs(lt,{children:[e.jsx(l,{variant:"h6",children:c.name}),e.jsx(l,{variant:"body2",children:c.location})]})})]})})},Rr=()=>{const{id:n}=St(),[t,o]=x.useState(null),[m,c]=x.useState(!0),[g,r]=x.useState(null),d=Ve();if(x.useEffect(()=>{(async()=>{c(!0);try{const L=await Wt(n);if(!L)throw new Error("å»ºç¯‰ä½œå“ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");o(L)}catch(L){console.error("Error fetching work:",L),r(L.message)}finally{c(!1)}})()},[n]),m)return e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsx(Te,{})});if(g)return e.jsxs(se,{children:[e.jsxs(l,{variant:"h5",color:"error",sx:{textAlign:"center",my:4},children:["ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ",g]}),e.jsx(k,{variant:"contained",component:M,to:"/architecture",startIcon:e.jsx(Ye,{}),children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"})]});if(!t)return e.jsxs(se,{children:[e.jsx(l,{variant:"h5",sx:{textAlign:"center",my:4},children:"å»ºç¯‰ä½œå“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(k,{variant:"contained",component:M,to:"/architecture",startIcon:e.jsx(Ye,{}),children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"})]});const a=t.tag?t.tag.split(",").filter(I=>I.trim()!==""&&!I.includes("ã®è¿½åŠ å»ºç¯‰")):[],C=a.find(I=>I.includes("æ–°å»ºç¯‰")),p=C?C.replace("æ–°å»ºç¯‰",""):"",D=I=>{console.log(`ã‚¿ã‚°ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ: ${I}`),d(`/architecture?tag=${encodeURIComponent(I)}`)},W=(I,L)=>{const A=`${I} ${L?.name||""} å»ºç¯‰`;return`https://www.google.com/search?q=${encodeURIComponent(A)}&tbm=isch`},_=I=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(I)}`;return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(k,{variant:"outlined",component:M,to:"/architecture",startIcon:e.jsx(Ye,{}),sx:{mb:3},children:"å»ºç¯‰ä½œå“ä¸€è¦§ã«æˆ»ã‚‹"}),e.jsxs(oe,{sx:{p:3,mb:4},children:[e.jsxs(s,{sx:{mb:2},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"ç„¡é¡Œ"}),t.location&&e.jsxs(l,{variant:"subtitle1",color:"text.secondary",gutterBottom:!0,children:[e.jsx(He,{fontSize:"small",sx:{verticalAlign:"middle",mr:.5}}),t.location]}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:[t.completedYear!==0&&e.jsx(B,{icon:e.jsx(Et,{}),label:`${t.completedYear}å¹´`,variant:"outlined",size:"small",onClick:()=>d(`/architecture?year=${t.completedYear}`),clickable:!0}),t.city&&e.jsx(B,{icon:e.jsx(He,{}),label:t.city,variant:"outlined",size:"small",onClick:()=>d(`/architecture?prefecture=${encodeURIComponent(t.city)}`),clickable:!0}),t.architect&&t.architect.name&&e.jsx(B,{icon:e.jsx(Tt,{}),label:t.architect.name,component:M,to:`/architects/${t.architect.id}`,clickable:!0,color:"primary",size:"small"}),t.bigCategory&&e.jsx(B,{icon:e.jsx(rt,{}),label:t.bigCategory,variant:"outlined",size:"small",onClick:()=>d(`/architecture?category=${encodeURIComponent(t.bigCategory)}`),clickable:!0}),t.category&&t.category!==t.bigCategory&&e.jsx(B,{icon:e.jsx(rt,{}),label:t.category,variant:"outlined",size:"small",onClick:()=>d(`/architecture?category=${encodeURIComponent(t.category)}`),clickable:!0})]}),a.length>0&&e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:a.map((I,L)=>e.jsx(B,{icon:e.jsx(vt,{}),label:I,onClick:()=>D(I),clickable:!0,color:"secondary",variant:"outlined",size:"small"},L))})]}),e.jsx(qe,{sx:{my:3}}),e.jsxs(s,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.shinkenchikuUrl&&e.jsx(Ce,{title:"æ–°å»ºç¯‰ãƒ‡ãƒ¼ã‚¿ã§è¦‹ã‚‹",children:e.jsxs(k,{variant:"contained",href:t.shinkenchikuUrl,target:"_blank",rel:"noopener noreferrer",size:"small",sx:{backgroundColor:"#003366",color:"#ffffff","&:hover":{backgroundColor:"#002244"}},children:[e.jsx(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mr:.5},children:e.jsx("img",{src:"https://data.shinkenchiku.online/favicon.ico",alt:"æ–°å»ºç¯‰ãƒ‡ãƒ¼ã‚¿",style:{height:"16px",width:"auto",marginRight:"4px"}})}),p&&e.jsx(l,{variant:"caption",children:p})]})}),e.jsx(Ce,{title:"Googleç”»åƒæ¤œç´¢",children:e.jsx(k,{href:W(t.name,t.architect),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(qt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"ç”»åƒ"})}),e.jsx(Ce,{title:"Wikipediaã§æ¤œç´¢",children:e.jsx(k,{href:_(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Qt,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),t.description&&e.jsxs(s,{sx:{mt:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"æ¦‚è¦"}),e.jsx(l,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-line"},children:t.description})]}),t.latitude&&t.longitude&&e.jsxs(s,{sx:{mt:3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½ç½®æƒ…å ±"}),e.jsx(s,{sx:{height:"400px",width:"100%",mt:2,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(Ue,{singleMarker:{id:t.id||0,latitude:t.latitude,longitude:t.longitude,name:t.name,location:t.location},center:[t.latitude,t.longitude],zoom:15})})]})]})]})},wr=async n=>Xe("SELECT * FROM ZCDARCHITECT WHERE ZAR_ID = ?",[n]),Dr=async(n=1,t=12,o="",m=[],c="ZAR_NAME",g="asc",r={})=>{const d=(n-1)*t;let a="1=1";const C=[];o&&(a+=" AND (ZAR_NAME LIKE ? OR ZAR_KANA LIKE ? OR ZAR_NAMEENG LIKE ?)",C.push(`%${o}%`,`%${o}%`,`%${o}%`)),r.nationality&&(a+=" AND ZAR_NATIONALITY = ?",C.push(r.nationality)),r.category&&(a+=" AND ZAR_CATEGORY = ?",C.push(r.category)),r.school&&(a+=" AND ZAR_SCHOOL = ?",C.push(r.school)),r.birthYearFrom&&(a+=" AND ZAR_BIRTHYEAR >= ?",C.push(r.birthYearFrom)),r.birthYearTo&&(a+=" AND ZAR_BIRTHYEAR <= ?",C.push(r.birthYearTo)),r.deathYear&&(a+=" AND ZAR_DEATHYEAR = ?",C.push(r.deathYear));let p="";m&&m.length>0&&(p=`
      INNER JOIN ZCDARCHITECT_TAG ON ZCDARCHITECT.ZAR_ID = ZCDARCHITECT_TAG.ARCHITECT_ID
      INNER JOIN ZCDTAG ON ZCDARCHITECT_TAG.TAG_ID = ZCDTAG.TAG_ID
    `,a+=" AND ZCDTAG.TAG_NAME IN (",a+=m.map(()=>"?").join(","),a+=")",C.push(...m));const D=`
    SELECT COUNT(DISTINCT ZCDARCHITECT.ZAR_ID) as total
    FROM ZCDARCHITECT
    ${p}
    WHERE ${a}
  `,W=`
    SELECT DISTINCT ZCDARCHITECT.*
    FROM ZCDARCHITECT
    ${p}
    WHERE ${a}
    ORDER BY ${c} ${g==="desc"?"DESC":"ASC"}
    LIMIT ? OFFSET ?
  `,_=[...C,t,d];try{const L=(await Xe(D,C))?.total||0;return{results:await Fe(W,_),total:L,page:n,limit:t,totalPages:Math.ceil(L/t)}}catch(I){throw console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",I),I}},$r=async()=>Fe(`
    SELECT TAG_ID, TAG_NAME, COUNT(ARCHITECT_ID) as TAG_COUNT
    FROM ZCDTAG
    LEFT JOIN ZCDARCHITECT_TAG ON ZCDTAG.TAG_ID = ZCDARCHITECT_TAG.TAG_ID
    GROUP BY ZCDTAG.TAG_ID, ZCDTAG.TAG_NAME
    ORDER BY TAG_COUNT DESC, TAG_NAME
  `),kr=()=>{console.log("ArchitectsPage ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã—ãŸ");const[n,t]=x.useState([]),[o,m]=x.useState(!0),[c,g]=x.useState(0),[r,d]=x.useState(0),[a,C]=x.useState(1),[p,D]=x.useState(""),[W,_]=x.useState([]),[I,L]=x.useState([]),[A,H]=x.useState([]),[u,j]=x.useState("name"),[f,E]=x.useState("asc"),[w,K]=x.useState(null),[T,je]=x.useState(""),[ee,de]=x.useState({}),[ne,q]=x.useState(""),[V,z]=x.useState(""),[le,ye]=x.useState(""),[he,xe]=x.useState(""),[Ie,Re]=x.useState(""),[ue,me]=x.useState(""),Ee=Ve(),ce=Qe(),h=new URLSearchParams(ce.search);x.useEffect(()=>{console.log("tagMenuAnchorEl çŠ¶æ…‹å¤‰æ›´:",!!w)},[w]),x.useEffect(()=>{console.log("ã‚¿ã‚°èª­ã¿è¾¼ã¿ã®useEffectãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ"),(async()=>{try{console.log("å»ºç¯‰å®¶ã‚¿ã‚°å–å¾—é–‹å§‹");const b=await $r();console.log("å–å¾—ã—ãŸå»ºç¯‰å®¶ã‚¿ã‚°:",b),H(["å›½ç±","ã‚«ãƒ†ã‚´ãƒªãƒ¼","å­¦æ ¡","ç”Ÿå¹´","æ²¡å¹´"])}catch(b){console.error("ã‚¿ã‚°å–å¾—ã‚¨ãƒ©ãƒ¼:",b)}})()},[]),x.useEffect(()=>{console.log("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã®useEffectãŒå®Ÿè¡Œã•ã‚Œã¾ã—ãŸ",ce.search),(async()=>{m(!0);try{const b=parseInt(h.get("page")||"1"),R=h.get("search")||"",X=h.get("tags")?h.get("tags").split(","):[],P=h.get("sortBy")||"name",U=h.get("sortOrder")||"asc",ae=h.get("nationality")||"",Le=h.get("category")||"",Oe=h.get("school")||"",we=h.get("birthYearFrom")||"",De=h.get("birthYearTo")||"",$e=h.get("deathYear")||"";console.log("URLã‹ã‚‰èª­ã¿å–ã£ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:",{page:b,search:R,tags:X,sort:P,order:U,nat:ae,cat:Le,sch:Oe,birthFrom:we,birthTo:De,death:$e}),C(b),D(R),_(X),j(P),E(U),q(ae),z(Le),ye(Oe),xe(we),Re(De),me($e),console.log("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—é–‹å§‹:",{page:b,search:R,tags:X,sort:P,order:U,nat:ae,cat:Le,sch:Oe,birthFrom:we,birthTo:De,death:$e});const Be=await Dr(b,10,R,X,P,U,ae,Le,Oe,we?parseInt(we):0,De?parseInt(De):0,$e?parseInt($e):0);console.log("å–å¾—ã—ãŸå»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿:",Be),t(Be.items),g(Be.totalPages),d(Be.total)}catch(b){console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",b)}finally{m(!1)}})()},[ce.search]);const y=async i=>{console.log(`${i}ã®å¹´åº¦å–å¾—é–‹å§‹`);let b="";if(i==="å›½ç±"?b="SELECT DISTINCT ZAT_NATIONALITY as value FROM ZCDARCHITECT WHERE ZAT_NATIONALITY != '' ORDER BY ZAT_NATIONALITY":i==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?b="SELECT DISTINCT ZAT_CATEGORY as value FROM ZCDARCHITECT WHERE ZAT_CATEGORY != '' ORDER BY ZAT_CATEGORY":i==="å­¦æ ¡"?b="SELECT DISTINCT ZAT_SCHOOL as value FROM ZCDARCHITECT WHERE ZAT_SCHOOL != '' ORDER BY ZAT_SCHOOL":i==="ç”Ÿå¹´"?b="SELECT DISTINCT ZAT_BIRTHYEAR as value FROM ZCDARCHITECT WHERE ZAT_BIRTHYEAR > 0 ORDER BY ZAT_BIRTHYEAR DESC":i==="æ²¡å¹´"&&(b="SELECT DISTINCT ZAT_DEATHYEAR as value FROM ZCDARCHITECT WHERE ZAT_DEATHYEAR > 0 ORDER BY ZAT_DEATHYEAR DESC"),!b)return[];try{return(await Fe(b)).map(X=>String(X.value)).filter(Boolean)}catch(R){return console.error(`${i}ã®å€¤å–å¾—ã‚¨ãƒ©ãƒ¼:`,R),[]}},S=async(i,b)=>{if(console.log(`${b}ã®å¹´åº¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã`,i.currentTarget),K(i.currentTarget),je(b),!ee[b])try{const R=await y(b);console.log(`å–å¾—ã—ãŸ${b}ã®å¹´åº¦:`,R),de(X=>({...X,[b]:R}))}catch(R){console.error(`${b}ã®å¹´åº¦å–å¾—ã‚¨ãƒ©ãƒ¼:`,R)}},Y=()=>{console.log("å¹´åº¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹"),K(null),je("")},Q=i=>{console.log(`å¹´åº¦é¸æŠ: ${i} (ã‚¿ã‚°: ${T})`),T==="å›½ç±"?q(i):T==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?z(i):T==="å­¦æ ¡"?ye(i):T==="ç”Ÿå¹´"?xe(i):T==="æ²¡å¹´"&&me(i),Y(),N()},F=(i,b)=>{console.log("ã‚¿ã‚°é¸æŠå¤‰æ›´:",b),_(b);const R=W.filter(P=>!b.includes(P));for(const P of R)P==="å›½ç±"?q(""):P==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?z(""):P==="å­¦æ ¡"?ye(""):P==="ç”Ÿå¹´"?(xe(""),Re("")):P==="æ²¡å¹´"&&me("");const X=b.filter(P=>!W.includes(P));X.length>0&&X.forEach(async P=>{if(!ee[P])try{const U=await y(P);de(ae=>({...ae,[P]:U}))}catch(U){console.error(`${P}ã®å¹´åº¦å–å¾—ã‚¨ãƒ©ãƒ¼:`,U)}}),N()},O=(i,b)=>{console.log(`ãƒšãƒ¼ã‚¸å¤‰æ›´: ${b}`),C(b);const R=new URLSearchParams(ce.search);R.set("page",b.toString()),Ee({search:R.toString()})},$=()=>{console.log(`æ¤œç´¢å®Ÿè¡Œ: ${p}`),N()},v=()=>{console.log("æ¤œç´¢æ¡ä»¶ã‚’ã‚¯ãƒªã‚¢"),D(""),_([]),L([]),q(""),z(""),ye(""),xe(""),Re(""),me(""),C(1);const i=new URLSearchParams;u!=="name"&&i.set("sortBy",u),f!=="asc"&&i.set("sortOrder",f),Ee({search:i.toString()})},N=()=>{console.log("URLã¨æ¤œç´¢ã‚’æ›´æ–°");const i=new URLSearchParams;a>1&&i.set("page",a.toString()),p&&i.set("search",p),W.length>0&&i.set("tags",W.join(",")),u!=="name"&&i.set("sortBy",u),f!=="asc"&&i.set("sortOrder",f),ne&&i.set("nationality",ne),V&&i.set("category",V),le&&i.set("school",le),he&&i.set("birthYearFrom",he),Ie&&i.set("birthYearTo",Ie),ue&&i.set("deathYear",ue),console.log("æ–°ã—ã„URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿:",i.toString()),Ee({search:i.toString()})},J=()=>{const i=[];return ne&&i.push({label:`å›½ç±: ${ne}`,onDelete:()=>{q(""),N()}}),he&&i.push({label:`ç”Ÿå¹´: ${he}`,onDelete:()=>{xe(""),N()}}),ue&&i.push({label:`æ²¡å¹´: ${ue}`,onDelete:()=>{me(""),N()}}),V&&i.push({label:`ã‚«ãƒ†ã‚´ãƒªãƒ¼: ${V}`,onDelete:()=>{z(""),N()}}),le&&i.push({label:`å­¦æ ¡: ${le}`,onDelete:()=>{ye(""),N()}}),i.length===0&&!p&&W.length===0?null:e.jsx(s,{sx:{mb:3},children:e.jsx(at,{severity:"info",action:e.jsx(k,{color:"inherit",size:"small",onClick:v,children:"ã‚¯ãƒªã‚¢"}),children:i.length>0?`ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: ${i.map(b=>b.label).join(", ")}`:p?`ã€Œ${p}ã€ã§æ¤œç´¢ä¸­`:W.length>0?`ã‚¿ã‚°ã€Œ${W.join(", ")}ã€ã§çµã‚Šè¾¼ã¿ä¸­`:""})})};return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰å®¶ä¸€è¦§"}),e.jsxs(oe,{sx:{p:3,mb:4},children:[e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsx(Ae,{fullWidth:!0,label:"å»ºç¯‰å®¶åã€å›½ç±ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã§æ¤œç´¢",value:p,onChange:i=>D(i.target.value),onKeyPress:i=>i.key==="Enter"&&$(),InputProps:{startAdornment:e.jsx(tt,{position:"start",children:e.jsx(Ge,{})})}}),e.jsx(k,{variant:"contained",onClick:$,sx:{minWidth:"120px"},children:"æ¤œç´¢"})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:2,mb:3,alignItems:"flex-start"},children:[e.jsx(pt,{multiple:!0,id:"tags-selector",options:A,value:W,onChange:F,fullWidth:!0,renderInput:i=>e.jsx(Ae,{...i,variant:"outlined",label:"ã‚¿ã‚°ã§çµã‚Šè¾¼ã¿",placeholder:"ã‚¿ã‚°ã‚’é¸æŠ"}),renderTags:(i,b)=>i.map((R,X)=>{const P=!!(ee[R]&&ee[R].length>0);let U="";return R==="å›½ç±"?U=ne:R==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?U=V:R==="å­¦æ ¡"?U=le:R==="ç”Ÿå¹´"?U=he:R==="æ²¡å¹´"&&(U=ue),e.jsx(B,{label:e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[R,U&&e.jsx(l,{variant:"caption",sx:{ml:.5,fontWeight:"bold",backgroundColor:"rgba(0, 0, 0, 0.08)",borderRadius:"4px",px:.5,py:.2},children:U}),P&&e.jsx(jt,{fontSize:"small"})]}),...b({index:X}),color:U?"primary":"default",variant:"outlined",onClick:ae=>{ae.stopPropagation(),S(ae,R)},onDelete:ae=>{b({index:X}).onDelete(ae)},sx:{maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",whiteSpace:"nowrap"}}},R)})}),e.jsxs(yt,{sx:{minWidth:200},children:[e.jsx(bt,{id:"sort-select-label",children:"ä¸¦ã³æ›¿ãˆ"}),e.jsxs(Ct,{labelId:"sort-select-label",value:`${u}_${f}`,label:"ä¸¦ã³æ›¿ãˆ",onChange:i=>{const[b,R]=i.target.value.split("_");j(b),E(R),N()},children:[e.jsx(re,{value:"name_asc",children:"åå‰ (æ˜‡é †)"}),e.jsx(re,{value:"name_desc",children:"åå‰ (é™é †)"}),e.jsx(re,{value:"birthYear_asc",children:"ç”Ÿå¹´ (æ˜‡é †)"}),e.jsx(re,{value:"birthYear_desc",children:"ç”Ÿå¹´ (é™é †)"}),e.jsx(re,{value:"nationality_asc",children:"å›½ç± (æ˜‡é †)"}),e.jsx(re,{value:"nationality_desc",children:"å›½ç± (é™é †)"})]})]})]}),e.jsx(At,{open:!!w,anchorEl:w,onClose:Y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:e.jsxs(s,{sx:{p:2,width:300,maxHeight:400,overflow:"auto"},children:[e.jsx(l,{variant:"subtitle1",gutterBottom:!0,children:T==="å›½ç±"?"å›½ç±ã‚’é¸æŠ":T==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"?"ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’é¸æŠ":T==="å­¦æ ¡"?"å­¦æ ¡ã‚’é¸æŠ":T==="ç”Ÿå¹´"?"ç”Ÿå¹´ã‚’é¸æŠ":T==="æ²¡å¹´"?"æ²¡å¹´ã‚’é¸æŠ":"ã‚¿ã‚°å€¤ã‚’é¸æŠ"}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:[e.jsx(B,{label:"æŒ‡å®šãªã—",onClick:()=>Q(""),variant:"outlined",size:"small",sx:{mb:1}}),ee[T]?.map(i=>e.jsx(B,{label:i,onClick:()=>Q(i),variant:"outlined",size:"small",color:T==="å›½ç±"&&i===ne||T==="ã‚«ãƒ†ã‚´ãƒªãƒ¼"&&i===V||T==="å­¦æ ¡"&&i===le||T==="ç”Ÿå¹´"&&i===he||T==="æ²¡å¹´"&&i===ue?"primary":"default",sx:{overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"}},i))]})]})}),e.jsx(J,{}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[r,"äººã®å»ºç¯‰å®¶"]}),c>1&&e.jsx(Ze,{count:c,page:a,onChange:O,color:"primary",size:"small"})]})]}),o?e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(e.Fragment,{children:[n.length===0?e.jsxs(s,{sx:{textAlign:"center",py:4},children:[e.jsx(l,{variant:"h6",children:"å»ºç¯‰å®¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ"}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"æ¤œç´¢æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ãŠè©¦ã—ãã ã•ã„"})]}):e.jsx(Z,{container:!0,spacing:3,children:n.map(i=>e.jsx(Z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ke,{component:M,to:`/architects/${i.id}`,children:e.jsxs(pe,{children:[e.jsx(l,{variant:"h6",component:"div",gutterBottom:!0,children:i.name}),e.jsxs(l,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[i.nationality," â€¢ ",i.birthYear||"?","-",i.deathYear||"ç¾åœ¨"]}),e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:i.tags&&i.tags.map(b=>e.jsx(B,{label:b,size:"small",variant:"outlined",sx:{pointerEvents:"none"}},b))})]})})})},i.id))}),c>1&&e.jsx(s,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(Ze,{count:c,page:a,onChange:O,color:"primary"})})]})]})},Wr=({architectures:n,compact:t=!1})=>!n||n.length===0?e.jsx(l,{variant:"body2",color:"text.secondary",children:"ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ä½œå“ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚"}):e.jsx(Z,{container:!0,spacing:t?2:3,children:n.map(o=>e.jsx(Z,{item:!0,xs:12,sm:6,md:t?6:4,children:e.jsx(fe,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"scale(1.02)"}},children:e.jsx(Ke,{component:M,to:`/architecture/${o.id}`,sx:{flexGrow:1},children:e.jsxs(pe,{children:[e.jsx(l,{gutterBottom:!0,variant:"h6",component:"h2",children:o.name}),o.completedYear>0&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(Vt,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[o.completedYear,"å¹´"]})]}),(o.city||o.location)&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx(He,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[o.city?o.city:"",o.city&&o.location?" / ":"",o.location?o.location:""]})]}),o.tag&&e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:1},children:o.tag.split(",").filter(m=>m.trim()!==""&&!m.includes("ã®è¿½åŠ å»ºç¯‰")).map((m,c)=>e.jsx(B,{label:m.trim(),size:"small",color:"secondary",variant:"outlined",sx:{height:"20px",fontSize:"0.65rem"}},c))})]})})})},o.id))}),_r=()=>e.jsx(s,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24},children:e.jsx(l,{variant:"caption",component:"span",sx:{fontFamily:"serif",fontWeight:"bold",fontSize:"16px"},children:"W"})}),Yr=()=>{const{id:n}=St(),[t,o]=x.useState(null),[m,c]=x.useState(!0),[g,r]=x.useState(null),[d,a]=x.useState([]),C=Ve();x.useEffect(()=>{n&&(async()=>{c(!0);try{const j=await wr(parseInt(n));if(!j){r("å»ºç¯‰å®¶æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"),c(!1);return}o(j);const f=[];if(j.teacher1){const E={name:j.teacher1,id:null};try{E.id=await p(j.teacher1)}catch(w){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",w)}f.push(E)}if(j.teacher2){const E={name:j.teacher2,id:null};try{E.id=await p(j.teacher2)}catch(w){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",w)}f.push(E)}if(j.teacher3){const E={name:j.teacher3,id:null};try{E.id=await p(j.teacher3)}catch(w){console.error("æ•™å¸«æƒ…å ±ã®å–å¾—ã«å¤±æ•—:",w)}f.push(E)}a(f)}catch(j){console.error("å»ºç¯‰å®¶ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼:",j),r("å»ºç¯‰å®¶æƒ…å ±ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}finally{c(!1)}})()},[n]);const p=async u=>null,D=()=>{if(!t)return null;const u=[];if(t.school){let j=t.school;t.faculty&&(j+=` ${t.faculty}`),u.push(j)}return t.schoolAbroad&&u.push(t.schoolAbroad),u.length>0?u.join("ã€"):null},W=()=>!d||d.length===0?null:d.map((u,j)=>e.jsxs("span",{children:[j>0&&"ã€",u.id?e.jsx(ir,{component:M,to:`/architects/${u.id}`,color:"inherit",underline:"hover",children:u.name}):u.name]},j)),_=(u,j)=>{if(!j)return;let f="";switch(u){case"nationality":f=`nationality=${encodeURIComponent(j)}`;break;case"born":f=`birthyear_from=${encodeURIComponent(j)}&birthyear_to=${encodeURIComponent(j)}`;break;case"died":f=`deathyear=${encodeURIComponent(j)}`;break;case"category":f=`category=${encodeURIComponent(j)}`;break;default:return}C(`/architects?${f}`)},I=(u,j)=>{const f=`${u} ${j||""} å»ºç¯‰å®¶`;return`https://www.google.com/search?q=${encodeURIComponent(f)}`},L=u=>`https://ja.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(u)}`;if(m)return e.jsx(se,{maxWidth:"lg",sx:{py:4},children:e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(Te,{})})});if(g||!t)return e.jsx(se,{maxWidth:"lg",sx:{py:4},children:e.jsxs(oe,{sx:{p:3},children:[e.jsx(l,{variant:"h5",color:"error",gutterBottom:!0,children:"ã‚¨ãƒ©ãƒ¼"}),e.jsx(l,{paragraph:!0,children:g||"å»ºç¯‰å®¶æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚"}),e.jsx(k,{variant:"outlined",startIcon:e.jsx(Ye,{}),onClick:()=>C(-1),children:"æˆ»ã‚‹"})]})});const A=new Set;t.works&&t.works.forEach(u=>{u.tag&&u.tag.split(",").forEach(f=>{const E=f.trim();E&&!E.includes("ã®è¿½åŠ å»ºç¯‰")&&A.add(E)})});const H=[];if(t.nationality&&H.push(`nationality:${t.nationality}`),t.birthYear>0){const u=Math.floor(t.birthYear/10)*10;H.push(`born:${u}s`)}return t.deathYear>0&&H.push(`died:${t.deathYear}`),t.category&&H.push(`category:${t.category}`),t.school&&H.push(`school:${t.school}`),e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(k,{variant:"outlined",component:M,to:"/architects",startIcon:e.jsx(Ye,{}),sx:{mb:3},children:"å»ºç¯‰å®¶ä¸€è¦§ã«æˆ»ã‚‹"}),e.jsxs(oe,{sx:{p:3,mb:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:t.name||"ä¸æ˜"}),e.jsxs(s,{sx:{display:"flex",flexWrap:"wrap",gap:2,my:3},children:[t.nationality&&e.jsx(B,{icon:e.jsx(Jt,{}),label:`nationality:${t.nationality}`,variant:"outlined",onClick:()=>_("nationality",t.nationality),clickable:!0}),t.birthYear>0&&e.jsx(B,{icon:e.jsx(Xt,{}),label:`born:${Math.floor(t.birthYear/10)*10}s`,variant:"outlined",onClick:()=>_("born",Math.floor(t.birthYear/10)*10),clickable:!0}),t.deathYear>0&&e.jsx(B,{icon:e.jsx(er,{}),label:`died:${t.deathYear}`,variant:"outlined",onClick:()=>_("died",t.deathYear),clickable:!0}),t.category&&e.jsx(B,{icon:e.jsx(rt,{}),label:`category:${t.category}`,variant:"outlined",onClick:()=>_("category",t.category),clickable:!0}),t.office&&e.jsx(B,{icon:e.jsx(tr,{}),label:t.office,variant:"outlined"})]}),e.jsx(qe,{sx:{my:3}}),e.jsxs(s,{sx:{mb:3,display:"flex",flexDirection:"row",gap:1},children:[t.website&&e.jsx(Ce,{title:"å…¬å¼ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸",children:e.jsx(k,{href:t.website.startsWith("http")?t.website:`http://${t.website}`,target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(rr,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4caf50",color:"#ffffff","&:hover":{backgroundColor:"#388e3c"}},children:"ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸"})}),e.jsx(Ce,{title:"Googleæ¤œç´¢",children:e.jsx(k,{href:I(t.name,t.nationality),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(Ge,{}),variant:"contained",size:"small",sx:{backgroundColor:"#4285F4",color:"#ffffff","&:hover":{backgroundColor:"#3367D6"}},children:"æ¤œç´¢"})}),e.jsx(Ce,{title:"Wikipediaã§æ¤œç´¢",children:e.jsx(k,{href:L(t.name),target:"_blank",rel:"noopener noreferrer",startIcon:e.jsx(_r,{}),variant:"contained",size:"small",sx:{backgroundColor:"#333333",color:"#ffffff","&:hover":{backgroundColor:"#222222"}},children:"Wikipedia"})})]}),e.jsx(sr,{component:oe,variant:"outlined",sx:{mb:4},children:e.jsx(nr,{children:e.jsxs(ar,{children:[t.nationality&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"å›½ç±"})}),e.jsx(G,{children:t.nationality})]}),(t.birthYear>0||t.deathYear>0)&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ç”Ÿå¹´ - æ²¡å¹´"})}),e.jsxs(G,{children:[t.birthYear>0?`${t.birthYear}å¹´`:"ä¸æ˜",t.deathYear>0?` - ${t.deathYear}å¹´`:""]})]}),t.office&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"äº‹å‹™æ‰€"})}),e.jsx(G,{children:t.office})]}),t.prefecture&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"æ‹ ç‚¹"})}),e.jsx(G,{children:t.prefecture})]}),t.nameEn&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"è‹±èªè¡¨è¨˜"})}),e.jsx(G,{children:t.nameEn})]}),(t.school||t.faculty||t.schoolAbroad)&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"æ•™è‚²èƒŒæ™¯"})}),e.jsx(G,{children:e.jsxs(s,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(or,{sx:{mr:1,fontSize:"1rem",color:"text.secondary"}}),e.jsx(l,{variant:"body2",children:D()})]})})]}),(t.teacher1||t.teacher2||t.teacher3)&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"å¸«äº‹ã—ãŸå»ºç¯‰å®¶"})}),e.jsx(G,{children:e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:1},children:W()})})]}),t.category&&e.jsxs(ge,{children:[e.jsx(G,{component:"th",sx:{width:"30%",bgcolor:"rgba(0, 0, 0, 0.03)"},children:e.jsx(l,{variant:"subtitle2",children:"ã‚«ãƒ†ã‚´ãƒªãƒ¼"})}),e.jsx(G,{children:t.category})]})]})})}),A.size>0&&e.jsxs(s,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"å—è³æ­´ãƒ»é¸å®š"}),e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:Array.from(A).map((u,j)=>e.jsx(B,{icon:e.jsx(vt,{}),label:String(u),onClick:()=>_("category",u),clickable:!0,color:"secondary",variant:"outlined",size:"small"},j))})]}),t.bio&&e.jsxs(s,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"çµŒæ­´"}),e.jsx(l,{variant:"body1",sx:{whiteSpace:"pre-line"},children:t.bio})]}),t.works&&t.works.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(s,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½œå“ãƒãƒƒãƒ—"}),t.works.some(u=>u.latitude&&u.longitude)?e.jsx(s,{sx:{height:"400px",width:"100%",mb:3,border:"1px solid #eee",borderRadius:"4px",overflow:"hidden"},children:e.jsx(Ue,{markers:t.works.filter(u=>u.latitude&&u.longitude),zoom:5,center:[t.works[0].latitude||35.6762,t.works[0].longitude||139.6503]})}):e.jsx(l,{variant:"body2",color:"text.secondary",children:"ä½ç½®æƒ…å ±ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ä½œå“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚"})]}),e.jsxs(s,{sx:{mb:4},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä»£è¡¨ä½œå“"}),e.jsx(Wr,{architectures:t.works})]})]})]})]})},Fr=()=>{const[n,t]=x.useState(!0),[o,m]=x.useState([]),[c,g]=x.useState([]),[r,d]=x.useState({yearFrom:"",yearTo:""}),[a,C]=x.useState(!1),[p,D]=x.useState(null),[W,_]=x.useState(!1);x.useEffect(()=>{L()},[]);const I=f=>{if(!f||f.length===0)return{from:0,to:0};const E=f.filter(q=>q.completedYear>0);if(E.length===0)return{from:0,to:0};const w=E.map(q=>q.completedYear).sort((q,V)=>q-V),K=w[0],T=w[w.length-1],je=Math.min(100,Math.floor((T-K)/2)),ee=Math.floor(Math.random()*(w.length-Math.floor(w.length/4))),de=w[ee],ne=Math.min(de+je,T);return{from:de,to:ne}},L=async()=>{t(!0);try{const f=await Yt();if(g(f),!r.yearFrom&&!r.yearTo){const E=I(f);d({yearFrom:E.from.toString(),yearTo:E.to.toString()});const w=f.filter(K=>K.completedYear>=E.from&&K.completedYear<=E.to);m(w)}else{let E=f;r.yearFrom&&(E=E.filter(w=>w.completedYear>=parseInt(r.yearFrom))),r.yearTo&&(E=E.filter(w=>w.completedYear<=parseInt(r.yearTo))),m(E)}}catch(f){console.error("Error fetching works:",f)}finally{t(!1)}},A=f=>{const{name:E,value:w}=f.target;d({...r,[E]:w})},H=()=>{t(!0);let f=c;r.yearFrom&&(f=f.filter(E=>E.completedYear>=parseInt(r.yearFrom))),r.yearTo&&(f=f.filter(E=>E.completedYear<=parseInt(r.yearTo))),m(f),t(!1)},u=()=>{d({yearFrom:"",yearTo:""}),m(c)},j=f=>{D(f),_(!0)};return e.jsxs(se,{maxWidth:"lg",sx:{py:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"å»ºç¯‰åœ°å›³"}),e.jsxs(oe,{sx:{p:3,mb:4},children:[e.jsx(k,{startIcon:e.jsx(lr,{}),onClick:()=>C(!a),sx:{mb:2},children:a?"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é–‰ã˜ã‚‹":"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’è¡¨ç¤º"}),a&&e.jsx(s,{sx:{mb:2},children:e.jsxs(Z,{container:!0,spacing:2,children:[e.jsx(Z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ae,{fullWidth:!0,label:"å¹´ä»£ï¼ˆã‹ã‚‰ï¼‰",name:"yearFrom",type:"number",value:r.yearFrom,onChange:A})}),e.jsx(Z,{item:!0,xs:12,sm:6,md:4,children:e.jsx(Ae,{fullWidth:!0,label:"å¹´ä»£ï¼ˆã¾ã§ï¼‰",name:"yearTo",type:"number",value:r.yearTo,onChange:A})}),e.jsx(Z,{item:!0,xs:12,md:4,children:e.jsxs(s,{sx:{display:"flex",gap:1,height:"100%"},children:[e.jsx(k,{variant:"contained",color:"primary",onClick:H,sx:{flexGrow:1},children:"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨"}),e.jsx(k,{variant:"outlined",onClick:u,sx:{flexGrow:1},children:"ã‚¯ãƒªã‚¢"})]})})]})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(Se,{sx:{mr:1}}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:["ãƒãƒƒãƒ—ä¸Šã«è¡¨ç¤ºã•ã‚ŒãŸä½œå“: ",o.length,"ä»¶ ",r.yearFrom&&r.yearTo&&`(${r.yearFrom}å¹´ã€œ${r.yearTo}å¹´)`]})]})]}),n?e.jsx(s,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Te,{})}):e.jsxs(s,{sx:{height:600,bgcolor:"grey.200",position:"relative",borderRadius:1},children:[e.jsx(Ue,{markers:o,height:"600px",zoom:5,center:[35.6762,139.6503]}),e.jsxs(s,{sx:{position:"absolute",top:16,right:16,width:320,maxHeight:568,overflow:"auto",bgcolor:"background.paper",borderRadius:1,boxShadow:3,p:2,zIndex:1e3},children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"ä½œå“ãƒªã‚¹ãƒˆ"}),o.length===0?e.jsx(l,{variant:"body2",children:"æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ä½œå“ã¯ã‚ã‚Šã¾ã›ã‚“"}):e.jsx(mt,{dense:!0,children:o.map(f=>e.jsxs(It.Fragment,{children:[e.jsx(gt,{onClick:()=>j(f),sx:{cursor:"pointer",bgcolor:p&&p.id===f.id?"action.selected":"transparent","&:hover":{bgcolor:"action.hover"}},children:e.jsx(ft,{primary:f.name,secondary:e.jsxs(e.Fragment,{children:[f.architectName&&e.jsxs("span",{children:[f.architectName,e.jsx("br",{})]}),f.completedYear>0&&`${f.completedYear}å¹´ | `,f.city||""]})})}),e.jsx(qe,{component:"li"})]},f.id))})]})]}),e.jsx(ut,{anchor:"right",open:W,onClose:()=>_(!1),children:p&&e.jsxs(s,{sx:{width:350,p:3},children:[e.jsx(l,{variant:"h5",gutterBottom:!0,children:p.name}),e.jsxs(s,{sx:{mb:3},children:[p.architectName&&e.jsx(l,{variant:"subtitle1",color:"text.secondary",children:p.architectName}),e.jsxs(l,{variant:"body2",children:[p.completedYear>0&&`${p.completedYear}å¹´`,p.city&&` | ${p.city}`]}),p.location&&e.jsx(l,{variant:"body2",sx:{mt:1},children:p.location})]}),e.jsx(s,{sx:{mb:3,height:200},children:e.jsx(Ue,{singleMarker:p,height:"200px",zoom:15,center:[p.latitude,p.longitude]})}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(k,{variant:"outlined",onClick:()=>_(!1),children:"é–‰ã˜ã‚‹"}),e.jsx(k,{variant:"contained",component:M,to:`/architecture/${p.id}`,children:"è©³ç´°ã‚’è¦‹ã‚‹"})]})]})})]})};class Ft extends x.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t,errorInfo:null}}componentDidCatch(t,o){console.error("Uncaught error:",t,o),this.setState({error:t,errorInfo:o})}handleRetry=()=>{window.location.reload()};render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:4,height:"100vh"},children:e.jsxs(oe,{elevation:3,sx:{padding:4,maxWidth:600,width:"100%",borderRadius:2,textAlign:"center"},children:[e.jsx(l,{variant:"h5",color:"error",gutterBottom:!0,children:"å•é¡ŒãŒç™ºç”Ÿã—ã¾ã—ãŸ"}),e.jsx(l,{variant:"body1",paragraph:!0,children:"ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ ãŠæ‰‹æ•°ã§ã™ãŒã€å†èª­ã¿è¾¼ã¿ã‚’ãŠè©¦ã—ãã ã•ã„ã€‚"}),!1,e.jsxs(s,{sx:{mt:3},children:[e.jsx(k,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mr:2},children:"ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿"}),e.jsx(k,{variant:"outlined",onClick:()=>window.location.href="/",children:"ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹"})]})]})}):this.props.children}}const Lr=()=>{try{const n=window?.location?.hostname||"";return/github\.io$/.test(n)}catch(n){return console.error("ç’°å¢ƒãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼:",n),!1}},Or=async()=>{try{const t=Lr();console.log("ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç’°å¢ƒ: æœ¬ç•ª"),console.log(`GitHub Pagesç’°å¢ƒ: ${t?"ã¯ã„":"ã„ã„ãˆ"}`);try{const m=await fetch(t?"./db/database-info.json":"/db/database-info.json");if(m.ok){const c=await m.json();console.log("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æƒ…å ±:"),console.log(`- ãƒ•ã‚¡ã‚¤ãƒ«: ${c.database}`),console.log(`- æ›´æ–°æ—¥æ™‚: ${c.date}`),console.log(`- ã‚µã‚¤ã‚º: ${(c.size/1024/1024).toFixed(2)} MB`),console.log(`- ãƒãƒ£ãƒ³ã‚¯: ${c.chunks} (${c.chunkSize/1024}KB)ã®ãƒãƒ£ãƒ³ã‚¯`),console.log(`- ãƒ†ãƒ¼ãƒ–ãƒ«æ•°: ${c.tables.length}`),console.log(`- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ•°: ${c.indexes.length}`)}else console.warn("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“:",m.status)}catch(o){console.warn("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",o)}}catch(n){console.error("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šãƒ­ã‚°ã‚¨ãƒ©ãƒ¼:",n)}},Br=({children:n})=>{const[t,o]=x.useState(vr()),[m,c]=x.useState(null),[g,r]=x.useState(0);return x.useEffect(()=>{let d=!0,a;return(async()=>{t!==ze.READY&&setTimeout(async()=>{a=setInterval(()=>{d&&r(p=>{const D=(95-p)*.1;return Math.min(p+D,95)})},300);try{await Dt(),d&&(r(100),o(ze.READY))}catch(p){d&&(c(`ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: ${p instanceof Error?p.message:"ä¸æ˜ãªã‚¨ãƒ©ãƒ¼"}`),o(ze.ERROR))}finally{clearInterval(a)}},100)})(),()=>{d=!1,clearInterval(a)}},[t]),e.jsx(e.Fragment,{children:n})},nt={primary:{main:"#2E3440",light:"#4C566A",dark:"#1B1F2B",contrastText:"#FFFFFF"},secondary:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC",contrastText:"#2E3440"},accent:{main:"#D08770",light:"#E5A088",dark:"#BF616A"},background:{default:"#ECEFF4",paper:"#FFFFFF",elevated:"#F8F9FA"},text:{primary:"#2E3440",secondary:"#4C566A",disabled:"#D8DEE9"},divider:"#E5E9F0",success:{main:"#A3BE8C",light:"#B8CCA3",dark:"#8CAF69"},warning:{main:"#EBCB8B",light:"#F0D5A3",dark:"#D4B571"},error:{main:"#BF616A",light:"#CC8088",dark:"#A54A56"},info:{main:"#88C0D0",light:"#B3D4E0",dark:"#5E81AC"}},Pr={fontFamily:'"Inter", "Roboto", "Helvetica Neue", "Arial", sans-serif',h1:{fontSize:"3rem",fontWeight:700,lineHeight:1.2,letterSpacing:"-0.02em"},h2:{fontSize:"2.25rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h3:{fontSize:"1.875rem",fontWeight:600,lineHeight:1.3,letterSpacing:"-0.01em"},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.4},h6:{fontSize:"1.125rem",fontWeight:600,lineHeight:1.4},subtitle1:{fontSize:"1rem",fontWeight:500,lineHeight:1.5},subtitle2:{fontSize:"0.875rem",fontWeight:500,lineHeight:1.5},body1:{fontSize:"1rem",fontWeight:400,lineHeight:1.6},body2:{fontSize:"0.875rem",fontWeight:400,lineHeight:1.6},caption:{fontSize:"0.75rem",fontWeight:400,lineHeight:1.5},button:{fontSize:"0.875rem",fontWeight:600,textTransform:"none",letterSpacing:"0.02em"}},Nr={MuiButton:{styleOverrides:{root:{borderRadius:8,padding:"10px 24px",transition:"all 0.2s ease-in-out","&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}},contained:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8,transition:"all 0.2s ease-in-out","&:hover":{"& .MuiOutlinedInput-notchedOutline":{borderColor:nt.secondary.main}},"&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:nt.primary.main,borderWidth:2}}}}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(10px)",backgroundColor:"rgba(46, 52, 64, 0.95)"}}},MuiChip:{styleOverrides:{root:{borderRadius:8,fontWeight:500}}},MuiPaper:{styleOverrides:{root:{borderRadius:12,boxShadow:"0 2px 12px rgba(0, 0, 0, 0.08)"},elevation1:{boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)"},elevation2:{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},elevation3:{boxShadow:"0 8px 24px rgba(0, 0, 0, 0.15)"}}}},Mr=cr({palette:nt,typography:Pr,components:Nr,spacing:8,shape:{borderRadius:8},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:1920}},transitions:{easing:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"}}}),zr=()=>{const{pathname:n}=Qe();return x.useEffect(()=>{window.scrollTo(0,0)},[n]),null},Zr=()=>(x.useEffect(()=>{console.log("App running in production mode");try{Or()}catch(n){console.warn("Failed to log database details:",n)}},[]),e.jsxs(e.Fragment,{children:[e.jsx(zr,{}),e.jsx(jr,{}),e.jsx("main",{className:"container",role:"main",children:e.jsx(Ft,{children:e.jsxs(mr,{children:[e.jsx(ve,{path:"/",element:e.jsx(Er,{})}),e.jsx(ve,{path:"/architecture",element:e.jsx(Ir,{})}),e.jsx(ve,{path:"/architecture/:id",element:e.jsx(Rr,{})}),e.jsx(ve,{path:"/architects",element:e.jsx(kr,{})}),e.jsx(ve,{path:"/architects/:id",element:e.jsx(Yr,{})}),e.jsx(ve,{path:"/map",element:e.jsx(Fr,{})})]})})}),e.jsx(yr,{})]})),Hr=()=>e.jsx(Ft,{children:e.jsxs(dr,{theme:Mr,children:[e.jsx(hr,{}),e.jsx(ur,{children:e.jsx(Br,{children:e.jsx(Zr,{})})})]})});console.log("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸåŒ–ä¸­...","production");console.log("DOM root element:",document.getElementById("root"));const Lt=document.getElementById("root");if(!Lt)throw console.error('rootè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚HTMLã«<div id="root"></div>ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚'),new Error("Failed to find the root element");const Ur=wt(Lt);console.log("Using HashRouter for GitHub Pages compatibility");try{Ur.render(e.jsx(It.StrictMode,{children:e.jsx(Hr,{})})),console.log("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒæˆåŠŸã—ã¾ã—ãŸ")}catch(n){console.error("React ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:",n)}
//# sourceMappingURL=index-CDL7n9Tx.js.map
