<testsuites id="" name="" tests="1" failures="0" skipped="0" errors="0" time="38.541187">
<testsuite name="test-worker-debug.spec.ts" timestamp="2025-07-07T07:47:25.471Z" hostname="chromium" tests="1" failures="0" skipped="0" time="37.345" errors="0">
<testcase name="Worker Loading Debug Test › should debug worker loading issues" classname="test-worker-debug.spec.ts" time="37.345">
<system-out>
<![CDATA[🔍 Starting worker loading debug test...
[BROWSER]: 🔧 Environment debug info:
[BROWSER]:   - import.meta.env.PROD: true
[BROWSER]:   - BASE_PATH: /archi-site
[BROWSER]:   - DATABASE_URL: /archi-site/db/archimap.sqlite
[BROWSER]: React アプリケーションを初期化中... production
[BROWSER]: DOM root element: JSHandle@node
[BROWSER]: Using HashRouter for GitHub Pages compatibility
[BROWSER]: React アプリケーションのレンダリングが成功しました
[BROWSER]: 最近の建築作品を取得中...
[BROWSER]: App running in production mode
[BROWSER]: アプリケーション環境: 本番
[BROWSER]: GitHub Pages環境: はい
[BROWSER]: 🚀 データベース初期化を開始（sql.js-httpvfs使用）...
[BROWSER]: データベース情報:
[BROWSER]: - ファイル: archimap.sqlite
[BROWSER]: - 更新日時: 2025-07-07T07:43:25.924Z
[BROWSER]: - サイズ: 12.14 MB
[BROWSER]: - チャンク: 195 (64KB)のチャンク
[BROWSER]: - テーブル数: 10
[BROWSER]: - インデックス数: 13
[BROWSER]: 🌐 Connection speed detected: slow
[BROWSER]: 🗄️ Testing database file accessibility...
[BROWSER]: Failed to load resource: the server responded with a status of 404 ()
[BROWSER]:   - Database file status: 200 
[BROWSER]:   - Database file size: 3.64 MB
[BROWSER]: ✅ Database file is accessible
[BROWSER]: 📦 sql.js-httpvfs worker を初期化中...
[BROWSER]: 📍 Database URL: /archi-site/db/archimap.sqlite
[BROWSER]: 🔧 Worker file URLs:
[BROWSER]:   - workerUrl: /archi-site/sqlite.worker.js
[BROWSER]:   - wasmUrl: /archi-site/sql-wasm.wasm
[BROWSER]: 🔍 Testing worker file accessibility...
[BROWSER]:   - Worker file status: 200 
[BROWSER]:   - WASM file status: 200 
[BROWSER]: ✅ All worker files are accessible
[BROWSER]: 🔧 Worker config: {from: inline, config: Object}
[BROWSER]: 🔧 Worker URL: /archi-site/sqlite.worker.js
[BROWSER]: 🔧 WASM URL: /archi-site/sql-wasm.wasm
[BROWSER]: constructing url database /archi-site/db/archimap.sqlite
[BROWSER]: filename _archi-site_db_archimap.sqlite
[BROWSER]: constructing url database /archi-site/db/archimap.sqlite filename _archi-site_db_archimap.sqlite
[BROWSER]: Warning: The server responded with gzip encoding to a HEAD request. Ignoring since it may not do so for Range HTTP requests, but this will lead to incorrect results otherwise since the ranges will be based on the compressed data instead of the uncompressed data.
[BROWSER]: response headers accept-ranges: bytes
access-control-allow-origin: *
age: 1
cache-control: max-age=600
content-encoding: gzip
content-length: 3817806
content-type: application/octet-stream
date: Mon, 07 Jul 2025 07:47:28 GMT
etag: W/"686b7ac5-c24000"
expires: Mon, 07 Jul 2025 07:57:27 GMT
last-modified: Mon, 07 Jul 2025 07:44:05 GMT
server: GitHub.com
strict-transport-security: max-age=31556952
vary: Accept-Encoding
via: 1.1 varnish
x-cache: HIT
x-cache-hits: 1
x-fastly-request-id: 6edcb80a842230bbf489470ddcfea3b24355e50f
x-github-request-id: 262E:260AF0:14CB33D:15399EB:686B7B8F
x-origin-cache: HIT
x-proxy-cache: MISS
x-served-by: cache-nrt-rjtf7700051-NRT
x-timer: S1751874448.386076,VS0,VE7

[BROWSER]: ❌ データベース初期化エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at r.checkServer (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:6848)
    at get length (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:7039)
    at ze.get [as usedBytes] (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:8167)
    at Object.getattr (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:38015)
    at Object.stat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49035)
    at lstat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49059)
    at Object.doStat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:63664)
    at E (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:70298)
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[637]:0x89b51
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[1304]:0xff036
[BROWSER]: クエリ実行エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
[BROWSER]: 建築作品データ取得エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
[BROWSER]: 建築作品の取得に失敗: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
[BROWSER]: 🚀 データベース初期化を開始（sql.js-httpvfs使用）...
[BROWSER]: 🌐 Connection speed detected: fast
[BROWSER]: 🗄️ Testing database file accessibility...
[BROWSER]:   - Database file status: 200 
[BROWSER]:   - Database file size: 3.64 MB
[BROWSER]: ✅ Database file is accessible
[BROWSER]: 📦 sql.js-httpvfs worker を初期化中...
[BROWSER]: 📍 Database URL: /archi-site/db/archimap.sqlite
[BROWSER]: 🔧 Worker file URLs:
[BROWSER]:   - workerUrl: /archi-site/sqlite.worker.js
[BROWSER]:   - wasmUrl: /archi-site/sql-wasm.wasm
[BROWSER]: 🔍 Testing worker file accessibility...
[BROWSER]:   - Worker file status: 200 
[BROWSER]:   - WASM file status: 200 
[BROWSER]: ✅ All worker files are accessible
[BROWSER]: 🔧 Worker config: {from: inline, config: Object}
[BROWSER]: 🔧 Worker URL: /archi-site/sqlite.worker.js
[BROWSER]: 🔧 WASM URL: /archi-site/sql-wasm.wasm
[BROWSER]: constructing url database /archi-site/db/archimap.sqlite
[BROWSER]: filename _archi-site_db_archimap.sqlite
[BROWSER]: constructing url database /archi-site/db/archimap.sqlite filename _archi-site_db_archimap.sqlite
[BROWSER]: Warning: The server responded with gzip encoding to a HEAD request. Ignoring since it may not do so for Range HTTP requests, but this will lead to incorrect results otherwise since the ranges will be based on the compressed data instead of the uncompressed data.
[BROWSER]: response headers accept-ranges: bytes
access-control-allow-origin: *
age: 1
cache-control: max-age=600
content-encoding: gzip
content-length: 3817806
content-type: application/octet-stream
date: Mon, 07 Jul 2025 07:47:28 GMT
etag: W/"686b7ac5-c24000"
expires: Mon, 07 Jul 2025 07:57:27 GMT
last-modified: Mon, 07 Jul 2025 07:44:05 GMT
server: GitHub.com
strict-transport-security: max-age=31556952
vary: Accept-Encoding
via: 1.1 varnish
x-cache: HIT
x-cache-hits: 3
x-fastly-request-id: 8e5887b59fe0007eedc035acf99c530c96fd6cba
x-github-request-id: 262E:260AF0:14CB33D:15399EB:686B7B8F
x-origin-cache: HIT
x-proxy-cache: MISS
x-served-by: cache-nrt-rjtf7700051-NRT
x-timer: S1751874449.550872,VS0,VE1

[BROWSER]: ❌ データベース初期化エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at r.checkServer (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:6848)
    at get length (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:7039)
    at ze.get [as usedBytes] (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:8167)
    at Object.getattr (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:38015)
    at Object.stat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49035)
    at lstat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49059)
    at Object.doStat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:63664)
    at E (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:70298)
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[637]:0x89b51
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[1304]:0xff036
📄 Page loaded, waiting for database initialization...
📝 Captured 71 console messages:
  1. 🔧 Environment debug info:
  2.   - import.meta.env.PROD: true
  3.   - BASE_PATH: /archi-site
  4.   - DATABASE_URL: /archi-site/db/archimap.sqlite
  5. React アプリケーションを初期化中... production
  6. DOM root element: JSHandle@node
  7. Using HashRouter for GitHub Pages compatibility
  8. React アプリケーションのレンダリングが成功しました
  9. 最近の建築作品を取得中...
  10. App running in production mode
  11. アプリケーション環境: 本番
  12. GitHub Pages環境: はい
  13. 🚀 データベース初期化を開始（sql.js-httpvfs使用）...
  14. データベース情報:
  15. - ファイル: archimap.sqlite
  16. - 更新日時: 2025-07-07T07:43:25.924Z
  17. - サイズ: 12.14 MB
  18. - チャンク: 195 (64KB)のチャンク
  19. - テーブル数: 10
  20. - インデックス数: 13
  21. 🌐 Connection speed detected: slow
  22. 🗄️ Testing database file accessibility...
  23. Failed to load resource: the server responded with a status of 404 ()
  24.   - Database file status: 200 
  25.   - Database file size: 3.64 MB
  26. ✅ Database file is accessible
  27. 📦 sql.js-httpvfs worker を初期化中...
  28. 📍 Database URL: /archi-site/db/archimap.sqlite
  29. 🔧 Worker file URLs:
  30.   - workerUrl: /archi-site/sqlite.worker.js
  31.   - wasmUrl: /archi-site/sql-wasm.wasm
  32. 🔍 Testing worker file accessibility...
  33.   - Worker file status: 200 
  34.   - WASM file status: 200 
  35. ✅ All worker files are accessible
  36. 🔧 Worker config: {from: inline, config: Object}
  37. 🔧 Worker URL: /archi-site/sqlite.worker.js
  38. 🔧 WASM URL: /archi-site/sql-wasm.wasm
  39. constructing url database /archi-site/db/archimap.sqlite
  40. filename _archi-site_db_archimap.sqlite
  41. constructing url database /archi-site/db/archimap.sqlite filename _archi-site_db_archimap.sqlite
  42. Warning: The server responded with gzip encoding to a HEAD request. Ignoring since it may not do so for Range HTTP requests, but this will lead to incorrect results otherwise since the ranges will be based on the compressed data instead of the uncompressed data.
  43. response headers accept-ranges: bytes
access-control-allow-origin: *
age: 1
cache-control: max-age=600
content-encoding: gzip
content-length: 3817806
content-type: application/octet-stream
date: Mon, 07 Jul 2025 07:47:28 GMT
etag: W/"686b7ac5-c24000"
expires: Mon, 07 Jul 2025 07:57:27 GMT
last-modified: Mon, 07 Jul 2025 07:44:05 GMT
server: GitHub.com
strict-transport-security: max-age=31556952
vary: Accept-Encoding
via: 1.1 varnish
x-cache: HIT
x-cache-hits: 1
x-fastly-request-id: 6edcb80a842230bbf489470ddcfea3b24355e50f
x-github-request-id: 262E:260AF0:14CB33D:15399EB:686B7B8F
x-origin-cache: HIT
x-proxy-cache: MISS
x-served-by: cache-nrt-rjtf7700051-NRT
x-timer: S1751874448.386076,VS0,VE7

  44. ❌ データベース初期化エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at r.checkServer (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:6848)
    at get length (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:7039)
    at ze.get [as usedBytes] (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:8167)
    at Object.getattr (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:38015)
    at Object.stat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49035)
    at lstat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49059)
    at Object.doStat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:63664)
    at E (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:70298)
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[637]:0x89b51
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[1304]:0xff036
  45. クエリ実行エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
  46. 建築作品データ取得エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
  47. 建築作品の取得に失敗: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
  48. 🚀 データベース初期化を開始（sql.js-httpvfs使用）...
  49. 🌐 Connection speed detected: fast
  50. 🗄️ Testing database file accessibility...
  51.   - Database file status: 200 
  52.   - Database file size: 3.64 MB
  53. ✅ Database file is accessible
  54. 📦 sql.js-httpvfs worker を初期化中...
  55. 📍 Database URL: /archi-site/db/archimap.sqlite
  56. 🔧 Worker file URLs:
  57.   - workerUrl: /archi-site/sqlite.worker.js
  58.   - wasmUrl: /archi-site/sql-wasm.wasm
  59. 🔍 Testing worker file accessibility...
  60.   - Worker file status: 200 
  61.   - WASM file status: 200 
  62. ✅ All worker files are accessible
  63. 🔧 Worker config: {from: inline, config: Object}
  64. 🔧 Worker URL: /archi-site/sqlite.worker.js
  65. 🔧 WASM URL: /archi-site/sql-wasm.wasm
  66. constructing url database /archi-site/db/archimap.sqlite
  67. filename _archi-site_db_archimap.sqlite
  68. constructing url database /archi-site/db/archimap.sqlite filename _archi-site_db_archimap.sqlite
  69. Warning: The server responded with gzip encoding to a HEAD request. Ignoring since it may not do so for Range HTTP requests, but this will lead to incorrect results otherwise since the ranges will be based on the compressed data instead of the uncompressed data.
  70. response headers accept-ranges: bytes
access-control-allow-origin: *
age: 1
cache-control: max-age=600
content-encoding: gzip
content-length: 3817806
content-type: application/octet-stream
date: Mon, 07 Jul 2025 07:47:28 GMT
etag: W/"686b7ac5-c24000"
expires: Mon, 07 Jul 2025 07:57:27 GMT
last-modified: Mon, 07 Jul 2025 07:44:05 GMT
server: GitHub.com
strict-transport-security: max-age=31556952
vary: Accept-Encoding
via: 1.1 varnish
x-cache: HIT
x-cache-hits: 3
x-fastly-request-id: 8e5887b59fe0007eedc035acf99c530c96fd6cba
x-github-request-id: 262E:260AF0:14CB33D:15399EB:686B7B8F
x-origin-cache: HIT
x-proxy-cache: MISS
x-served-by: cache-nrt-rjtf7700051-NRT
x-timer: S1751874449.550872,VS0,VE1

  71. ❌ データベース初期化エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at r.checkServer (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:6848)
    at get length (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:7039)
    at ze.get [as usedBytes] (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:8167)
    at Object.getattr (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:38015)
    at Object.stat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49035)
    at lstat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49059)
    at Object.doStat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:63664)
    at E (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:70298)
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[637]:0x89b51
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[1304]:0xff036
🔧 Has debug messages: true
❌ Found 5 error messages:
  ERROR 1: ❌ データベース初期化エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at r.checkServer (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:6848)
    at get length (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:7039)
    at ze.get [as usedBytes] (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:8167)
    at Object.getattr (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:38015)
    at Object.stat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49035)
    at lstat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49059)
    at Object.doStat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:63664)
    at E (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:70298)
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[637]:0x89b51
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[1304]:0xff036
  ERROR 2: クエリ実行エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
  ERROR 3: 建築作品データ取得エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
  ERROR 4: 建築作品の取得に失敗: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at https://bob-takuya.github.io/archi-site/assets/index-DS8Nu8PG.js:7:46
  ERROR 5: ❌ データベース初期化エラー: Error: Length of the file not known. It must either be supplied in the config or given by the HTTP server.
    at r.checkServer (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:6848)
    at get length (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:7039)
    at ze.get [as usedBytes] (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:8167)
    at Object.getattr (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:38015)
    at Object.stat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49035)
    at lstat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:49059)
    at Object.doStat (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:63664)
    at E (https://bob-takuya.github.io/archi-site/sqlite.worker.js:1:70298)
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[637]:0x89b51
    at https://bob-takuya.github.io/archi-site/sql-wasm.wasm:wasm-function[1304]:0xff036
✅ Has worker success: true
🏗️ Database state: {
  hasLoadingText: [33mfalse[39m,
  hasErrorText: [33mfalse[39m,
  hasCompletedText: [33mfalse[39m,
  hasArchitectureData: [33mfalse[39m
}
]]>
</system-out>
</testcase>
</testsuite>
</testsuites>